# 0211_바이블GPT통합본_v1.4_14
P26-02-11 14:31 (KST)
P26-02-11 (KST)

# 목차 (장/부록 · 제작일 포함)
P26-02-11 14:31 (KST)

|구분|제목|제작 일자|
|---:|---|:---:|
|1|[1장. 제품 개요 (팀 공유용 요약 · v3.0)](#1장-제품-개요-팀-공유용-요약-v30)|2026-01-09|
|2|[2장. 비전·신학·교리 기준 (예장통합 · v3.0)](#2장-비전신학교리-기준-예장통합-v30)|2026-01-09|
|3|[3장. 글로벌 시장·경쟁 환경 (v3.0)](#3장-글로벌-시장경쟁-환경-v30)|2026-01-09|
|4|[4장. 핵심 사용자·사용자 시나리오](#4장-핵심-사용자사용자-시나리오)|2026-01-09|
|5|[5장. 전체 서비스 기능 구조(플로우·화면·기능 모듈)](#5장-전체-서비스-기능-구조플로우화면기능-모듈)|2026-01-09|
|6|[6장. 팀별 스펙(앱·백엔드·AI/ML·데이터·UX·신학·운영)](#6장-팀별-스펙앱백엔드ai-ml데이터ux신학운영)|2026-01-09|
|7|[7장. 품질·지표 & QA(목표·테스트·심사)](#7장-품질지표-qa목표테스트심사)|2026-01-09|
|8|[8장. 글로벌 전략 (목표·사용자·기능·우선순위·파트너십·현지화·기술/접근성)](#8장-글로벌-전략-목표사용자기능우선순위파트너십현지화기술-접근성)|2026-01-09|
|9|[9장. AI 로직 & 점수 산정 구조 (정본 기준)](#9장-ai-로직-점수-산정-구조-정본-기준)|2026-01-09|
|10|[10장. 플랫폼·인프라·보안·프라이버시](#10장-플랫폼인프라보안프라이버시)|2026-01-09|
|11|[11장. 운영·비용 구조 & BM(수익·기부 구조) (v2)](#11장-운영비용-구조-bm수익기부-구조-v2)|2026-01-09|
|12|[12장. 프로젝트 로드맵 & 조직 구조 (v3)](#12장-프로젝트-로드맵-조직-구조-v3)|2026-01-09|
|13|[13장. AI 데이터 스키마 & API 명세 (v3)](#13장-ai-데이터-스키마-api-명세-v3)|2026-01-09|
|14|[14장. 0109_donation — 기부·재분배·투명성·준법 정책(한국 법인용) (v1.0)](#14장-0109donation-기부재분배투명성준법-정책한국-법인용-v10)|2026-01-09|
|15|[15장. 부가 콘텐츠 팩 v1 (성경 열람 습관 강화)](#15장-부가-콘텐츠-팩-v1-성경-열람-습관-강화)|2026-02-11|
|A|[부록 A — 전 세계 성경 앱·경쟁사 분석 요약 (v3)](#부록-a-전-세계-성경-앱경쟁사-분석-요약-v3)|2026-01-09|
|B|[부록 B — 144개국 서비스 우선순위 산정 기준 & 엑셀 구조 (최종안)](#부록-b-144개국-서비스-우선순위-산정-기준-엑셀-구조-최종안)|2026-01-09|
|C|[부록 C — 추천 API I/O 계약(요약)](#부록-c-추천-api-i-o-계약요약)|2026-01-09|
|D|[부록 D — 브랜드 아이콘·스토어 패키지 요약 (v1.0)](#부록-d-브랜드-아이콘스토어-패키지-요약-v10)|2026-01-09|
|E|[부록 E — 용어 인덱스 (전문 용어 정리)](#부록-e-용어-인덱스-전문-용어-정리)|2026-01-09|
|F|[부록 F — 프로젝트 폴더 ‘참조 문서’ 대비 반영/미반영 체크리스트 (v1.0)](#부록-f-프로젝트-폴더-참조-문서-대비-반영-미반영-체크리스트-v10)|2026-01-09|

# 1장. 제품 개요 (팀 공유용 요약 · v3.0)

## 1.0 서비스 개요 — “사진 한 장, 오늘의 한 구절”

### 1.0.1 이 서비스는 무엇인가?

|No.|항목|설명|
|--:|---|---|
|1|정의|**사진 기반 성경 묵상/게임 앱**|
|2|작동|P1 **상징** → P2 **신학 주제** → P3 **컨텍스트 보정** → **Top-1 구절+이유**|
|3|경험|“왜 이 구절인가” 2–3문장 근거 + **기도 한 줄** 기록|
|4|차별|**설명 가능** + 예장통합 **교리 가이드라인** 내재화|
|5|사용|일상 어디서나 30–45초/세션, 오프라인팩 지원|

---

## 1.1 질문 요약 & 핵심 포인트 정리

### 1.1.1 우리가 실제로 답하려는 질문

**핵심 질문**

- 사람이 스마트폰으로 사진 한 장을 찍었을 때,
    
    1. 그 사진 속 **상황·장면·맥락**에 맞는 성경 말씀 1–2절을
        
    2. **신학적으로 안전하게(예장통합 기준)**
        
    3. **전 세계 어디서나(다국어·다문화)**
        
    4. **자동으로 추천**해 줄 수 있는가?
        

**추가 검증 질문**

- 이 추천된 말씀이 실제로
    
    - 개인의 **묵상·위로·회복**에 체감 가능한 도움을 주는가?
        
    - **중독적·상업적 구조(도박성 BM, 코인, 과도한 광고 등)** 없이도  
        **기부·후원 중심 구조**로 **장기 운영**이 가능한가?
        

---

### 1.1.2 이 제품이 풀어야 하는 핵심 포인트

|번호|핵심 포인트|설명|
|---|---|---|
|1|**오해 방지**|사진만 보고 사용자의 내적 상태를 과하게 추측하지 않고, 특히 **고난·질병·죽음·우울**이 의심되는 장면에서는 **위로·소망·동행** 계열 구절을 우선하는 안전 규칙 필요|
|2|**신학 기준**|**예장통합 교리 가이드라인** 안에서, **개역개정(ko)**·**NIV(en)**을 안정적으로 사용하고, 본문 문맥을 왜곡하지 않는 추천 구조 필요|
|3|**프라이버시 & 월드맵**|**개인 좌표·얼굴 정보 최소 수집**을 전제로, 국가·광역 단위 수준으로만 집계하는 **월드맵 집계** 구조 설계|
|4|**비용 구조**|**온디바이스 + 클라우드 하이브리드 구조**를 통해, **기부 중심 BM**에서도 감당 가능한 **AI 연산·클라우드 비용 구조** 확보|

---

### 1.1.3 키워드 매핑(요약)

|키워드|의미 요약|구현 초점|
|---|---|---|
|피사체 기반|감정 사전입력 없이 객체·장면·텍스트·장소 신호로 추천|온디바이스 태깅/코어팩|
|개역개정/NIV|KO 기본·EN 옵션(라이선스·동기화 관리)|텍스트/표기 규정, 번역키|
|예장통합 가이드|추천·설명 생성 시 교리 일치성 검증|가이드라인 룰테이블|
|RAG 파이프라인|태깅→주제그래프→검색/재랭킹|벡터DB+크로스 인코더|
|사후 감정|구절 제시 후 감정/기도 기록|개인화·복습(1/3/7/30일)|
|안전·윤리|얼굴/아동/의료 등 민감 맥락 보호|자동 비공개 권고·차단|
|설명가능성|“왜 이 구절인가” 2–3문장|Why-score 로깅|

---

## 1.2 왜 이 제품인가 (문제 · 기회 · 사명)

### 1.2.1 문제 인식

|문제 축|현재 상황|시사점|
|---|---|---|
|성경 앱 사용|대형 성경 앱의 다운로드·사용자는 많지만, 실제로 **“오늘 내 삶의 상황”과 연결된 묵상**까지 가는 비율은 낮은 편으로 분석됨|텍스트·읽기 중심 구조만으로는 **생활 맥락 연결**이 약함|
|기능 구조|기존 성경 앱은 **본문 읽기·읽기 계획·검색·하이라이트**에는 강하지만, **“생활 속 장면과 말씀을 직접 연결”**하는 기능은 거의 없음|**“오늘의 장면 → 오늘의 말씀”**을 이어주는 새로운 입구 필요|
|사진 기반 SNS|사진 SNS는 **비교·자랑·시간 소비** 중심 구조로, 심리적 피로감·중독·비교의식 심화를 유발|**사진 매체 자체는 좋지만**, 그 사용 맥락을 **영적·치유적 방향**으로 전환할 필요가 있음|

---

### 1.2.2 기회

- **스마트폰 카메라 = 전 세계인의 기본 일기 도구**
    
    - 대부분의 사용자는 이미 **사진**으로 하루를 기록하고 있음.
        
- **컴퓨터 비전 + 성경 데이터 + 신학 가이드라인** 결합 시:
    
    - 사진 속 **피사체·장면·텍스트(OCR)·시간·공간** 정보를 활용해  
        **“사진 → 말씀 추천”**이라는 새로운 묵상 입구를 만들 수 있음.
        
- **비상업적·기부 중심 설계의 차별성**
    
    - 처음부터 **“교회·선교 단체와 연계되는 사역용 도구”**로 자리잡을 수 있는 구조를 설계할 수 있음.
        

---

### 1.2.3 사명(미션)

> **“전 세계 어디에서든, 사진 한 장을 통해  
> 지금 이 순간에 필요한 말씀과 하나님 나라의 시선을 보여주는 도구를 만든다.”**

이 도구를 통해:

- **개인**
    
    - **묵상 습관 형성**을 돕고
        
    - 불안·외로움·고난 속에서도 말씀을 통해 **위로·방향·소망**을 제시
        
- **교회·공동체**
    
    - 목회·소그룹·심방·선교 현장에서 사용할 수 있는 **“말씀 카드 도구”** 제공
        
- **문화**
    
    - **상업적·중독형 SNS 구조**와 다른,  
        **건강한 영적 생태계**를 지향하는 **“대안적 사진 플랫폼”**을 꿈꾼다.
        

---

### 1.2.4 문제·기회·사명 요약 테이블

|항목|핵심 내용|
|---|---|
|문제|일상 속 말씀 접점 희박, 검색형 도구 문턱 높음, 임의 발췌로 인한 오해 위험|
|기회|누구나 하는 ‘사진 촬영’을 신앙 접점으로 전환, p95 < 800ms 수준의 즉시성, 좌표 미수집 기반 신뢰 확보|
|사명|사진→상징(P1)→주제(P2)→보정(P3)→1–2절의 투명 체계로 “One Scene, One Verse” 경험 제공|

---

## 1.3 제품 목적 및 목표

- 사진을 **신학적으로 안전·설명 가능**하게 해석하여, 최적 1–2절을 제시한다.
    
- 제시 직후 **감정/기도/메모 기록**을 남기고, **1/3/7/30일 복습 루프**로 이어지도록 설계한다.
    
- 각 세션마다 **3문장 설명 카드**(연결 근거 · 메시지 · 초대/기도)를 제공해, 추천 이유를 명확히 보여준다.
    

### 1.3.1 제품 목표 요약 (정량·정성 지표 – 제안 수치 포함)

#### (1) 정량 목표 – 1차 론칭 기준 제안

> 기준: 론칭 후 12개월, Tier 1·2 우선 국가 중심 앱 출시 시 목표치

**품질 핵심 4축 요약**

|성능|투명성|안전|프라이버시|
|---|---|---|---|
|p95 < 800ms|Why-score 로깅|가이드라인 엔진|좌표 미수집·퍼징 지도|

|지표|정의|1년 차 목표 (제안)|
|---|---|---|
|**설치 수**|누적 앱 설치 수|200,000+|
|**회원 수**|가입 완료한 계정 수|100,000+|
|**MAU**|Monthly Active Users|50,000+ (설치 대비 25% 이상)|
|**DAU/MAU 비율**|일간·월간 활성 비|30% 이상|
|**월간 사진→말씀 세션 수**|사진 분석 후 말씀 추천 완료 세션 수|300,000+ 세션/월|
|**말씀 열람 비율**|사진 1건당, 추천된 말씀 화면 실제 열람 비율|85% 이상|
|**묵상/메모/기도 기록 참여율**|말씀 열람 후, 기록·기도·메모 기능 사용 비율|25% 이상|
|**카드 저장 비율**|말씀 카드를 개인 갤러리에 저장하는 비율|30% 이상|
|**카드 공유 비율**|가족·지인·교우에게 카드 공유 비율|10% 이상|
|**신고·오해율**|“부적절/오해 소지 있음” 신고 건 비율|전체 세션의 1% 미만|

---

#### (2) 정성 목표

- **습관 형성**
    
    - “사진을 찍고 나면, **말씀을 한 번은 보고 싶어진다**”는 자연스러운 습관 형성
        
- **체감 피드백**
    
    - 실제 사용자 후기에서
        
        - “이 앱 덕분에 **위로와 방향**을 얻었다”
            
        - “사진 찍는 습관이 **묵상 루프**로 바뀌었다”  
            같은 피드백이 꾸준히 축적
            
- **목회자 신뢰**
    
    - 목회자·리더 입장에서
        
        - “우리 교회 교우들에게 **안심하고 추천할 수 있는 앱**”  
            이라는 평가를 얻는 것
            

---

### 1.3.2 성공 정의 (What does “성공” mean?)

|단계|이름|성공 정의(정성+정량)|
|---|---|---|
|1단계|**MVP 성공 (1차 언어권)**|- 개역개정+NIV 기준, 사진→말씀 추천 품질이 목회자·사용자 평가에서 **“대부분 적절하다”** 수준 이상- 5개국 합산 기준 **MAU 3만+**, 월간 세션 **15만+** 유지- 기부·후원만으로도 **서버·라이선스·기본 인건비**가 충당되는 구조 확보|
|2단계|**글로벌 확장 성공**|- Tier 1/2 주요 국가 중심으로 다국어·다문화 환경에서 안정 운영- 언어권별 **민감도·규제**를 반영한 추천 전략 정립- 최소 50개국 이상에서 실제 목회·선교 현장의 도구로 사용|
|3단계|**최종 성공 이미지**|- “전 세계 어디에서든, 성도 한 명이 사진을 찍으면, 그 순간에 맞는 말씀이 부드럽게 곁을 지켜주는 도구”라는 인식 확보- 광고·코인 플랫폼이 아니라, **교회·공동체가 함께 지키는 공공재에 가까운 서비스**로 자리매김|

---

## 1.4 핵심 가치·원칙

### 1.4.1 사용자 가치 (개인 묵상·위로·공동체)

|가치|설명|
|---|---|
|**즉시성**|사진 촬영 후 **수 초 내**에 “지금 이 상황에 맞는 말씀”을 받아 보는 경험 제공|
|**맥락성**|피사체·장면·시간·장소 정보를 활용해, 단편 문구가 아니라 **문맥 있는 전체 구절**을 제시|
|**기록성**|**사진 + 말씀 + 묵상 메모**가 하나의 카드로 쌓여, 나만의 **믿음 일기·믿음 갤러리** 형성|
|**연결성**|내가 받은 말씀 카드를 가족·지인·교우에게 **편지처럼 공유**하여, 위로·격려·기도 연결이 자연스럽게 발생|

---

### 1.4.2 교회/사역 가치 (목회·선교 지원)

|영역|활용 이미지|
|---|---|
|**일반 목회**|주일 설교·소그룹에서 “이번 주 찍은 사진 카드”를 나누며 자연스러운 말씀 나눔 진행|
|**심방·상담**|병원·가정·직장 사진을 기반으로, 현장 맞춤형 말씀 카드로 심방·상담을 보조|
|**청년/청소년 사역**|사진 친숙도가 높은 세대에게, **사진 → 말씀 → 나눔** 구조로 접근|
|**선교 현장**|언어 장벽이 있어도, **사진 + 현지어/영어 말씀 카드**로 복음적 대화의 출발점을 제공|

---

### 1.4.3 제품 철학 (습관화·비상업성·신학적 안전성)

|축|철학|구체 원칙|
|---|---|---|
|**습관화**|“몇 시간 붙잡는 앱”이 아닌, **하루 중 여러 번 짧게 사용하는 묵상 루프**|- 사진 촬영 → 30초 내 말씀 확인 → 1~2분 묵상/기도 → 종료 구조를 기본 시나리오로 설계|
|**비상업성**|**도박성 BM·코인/토큰 투기·과도한 광고** 등 신앙생활을 훼손하는 구조를 원천 배제|- 수익 구조는 **기부·후원·교회 파트너십** 중심으로 설계|
|**신학적 안전성**|**예장통합 교리 가이드라인**을 따르는 **신학 검증 레이어** 내장|- 본문 문맥을 벗어난 인용·극단적 해석을 필터링하는 **AI + 룰 기반 가이드** 적용|

---

## 1.5 한 줄 요약 & 엘리베이터 피치

### 1.5.1 한 줄 요약

> **사진 1장(피사체/장면/OCR/장소·시간)만으로 개역개정(KO)·NIV(EN) 중 가장 적합한 1–2절을 제시하고, 그 이후 감정/기도 기록과 복습 루프를 완성하는 설명 가능한·신학 안전 추천 시스템.**

---

### 1.5.2 엘리베이터 피치 (30초 버전)

> “우리가 만들고 있는 것은, 사용자가 사진을 찍기만 하면  
> 그 사진 속 상황에 맞는 성경 말씀 1–2절을  
> **예장통합 교리 기준**과 **프라이버시 보호 원칙** 안에서 자동으로 추천해 주는 앱입니다.  
> 사진 기반 SNS처럼 중독을 유도하지 않고,  
> 개인 묵상과 공동체 위로에 초점을 맞추며,  
> 광고·코인 없이,  
> **기부와 교회·선교 협력**으로 운영되는  
> 새로운 형태의 영적 도구를 지향합니다.”

---

## 1.6 문서 읽는 법 (대상 독자·섹션별 역할 안내)

### 1.6.1 대상 독자별 역할

|독자 유형|이 문서를 보는 목적|특히 중요하게 볼 섹션|
|---|---|---|
|**기획자**|제품 컨셉·기능 구조·로드맵을 이해하고 세부 기획을 나누기 위한 기준|1장(제품 개요), 5장(제품 기능 구조), 9장(로드맵)|
|**앱/백엔드 개발자**|전체 구조와 **데이터 스키마·API·인프라 구조**를 이해한 뒤 티켓 분할|5장(기능 구조), 9장(AI 로직 & 점수 산정 구조), 10장(플랫폼·인프라), 13장(스키마·API)|
|**AI/ML 엔지니어**|사진→말씀 추천 파이프라인과 **신학·윤리 제약 조건**을 함께 이해|6장(AI 로직 통합 문서), 관련 부록(테스트 말뭉치·수식)|
|**그래픽·UX 디자이너**|사용자 여정·핵심 화면 플로우·감성 톤&매너 파악|1장(제품 개요), 5장(화면 플로우), 10장(브랜딩·UX 가이드)|
|**목회자·신학 자문 팀**|이 앱이 **교리·목회 현장**과 어떻게 맞닿는지 검토하고 신학적 검수 기준 확보|2장(비전·신학·교리 기준), 6.7절(AI와 교리 접점), 13장(QA 시나리오)|

---

### 1.6.2 추천 읽기 순서

- **전체 그림 먼저**
    
    - 1장(제품 개요) → 5장(제품 기능 구조) → 6장(AI 로직) → 8장(BM·운영)
        
- **기술 구현 관점**
    
    - 6장(AI 로직) → 10장(플랫폼·인프라) → 13장(스키마·API)
        
- **목회·신학 관점**
    
    - 2장(비전·신학·교리 기준) → 6.7절(AI와 교리 접점) → 13장(QA 시나리오)
        
- **시장·전략 관점**
    
    - 3장(글로벌 시장·경쟁 환경) → 11장(144개국 우선순위) → 9장(로드맵)
        

---

## 1.7 대상 사용자(Personas)와 대표 시나리오

|페르소나|대표 흐름|성공 시그널|
|---|---|---|
|A 개인 묵상자|이동 중 촬영 → 결과 확인 → 저녁 일기 기록 → 복습 알림 응답|사후 기록 유지(사진+말씀+메모 카드 누적)|
|B 나눔형|촬영 → 말씀 카드 공유 → 대화·기도 나눔|카드 공유율, 댓글·응답 메시지 발생|
|C 소그룹 리더|주간 주제 설정 → 구성원 사진 수집 → 모임에서 카드 기반 토론|모임 활성도, 재참여율|
|D 디지털 약자|큰 버튼·단순 흐름으로 촬영·저장 위주 사용|접근성 만족도, 이탈률 감소|

---

## 1.8 사용자 가치 ↔ 팀별 책임(맵)

|사용자 가치|앱|백엔드|AI/ML|데이터|디자인|신학|
|---|---|---|---|---|---|---|
|즉시성|오프라인/캐시, 최소 터치 흐름|저지연 API, 큐 설계|경량 모델·온디바이스 우선|코어팩 구조 정리|경량 UI, 피드백 최소화|—|
|설명가능성|카드 UI에 이유 노출|로그·근거 필드 저장|Why-score 산출|근거 필드 스키마 정의|시각적 하이라이트|정기 리뷰·보정|
|신학 안전|경고/비공개 UX, 금칙 패턴 안내|금칙 조합 처리, 로그 축적|—|—|워딩 톤 관리|심사·가이드 관리|
|프라이버시|권한 최소 요청 UX|퍼징·k-익명 처리|민감 신호 감쇠|위치·얼굴 비보관 정책|아이콘·설명 문구|프라이버시 가이드|
|습관화|복습 알림·배지|리텐션 큐·스케줄러|개인화 추천 튜닝|히스토리 기반 통계|동기부여형 UI|—|

---

## 1.9 지양점(Out of Scope)

|카테고리|지양 기준|
|---|---|
|심판/경고 단독|복음·소망 맥락 없이 심판·경고 구절만 단독 노출하지 않는다.|
|재난/사고 공포|재난·사고 사진에는 공포 증폭이 아닌 위로·평강 계열 구절을 우선 매칭한다.|
|정치·갈등 선동|정치·이념 갈등을 선동하는 방향의 매칭과 워딩을 피하고, 중립적 표현을 유지한다.|
|예언/점괘식 단정|특정 상황을 미래 예언·점괘처럼 단정하는 표현을 피하고, 도구는 조력자로만 작동하도록 명시한다.|
|민감 대상 공개|아동·의료·장례 등 민감 장면은 기본값 비공개·익명 권고를 한다.|
|정밀 위치|GPS 정밀 좌표는 수집하지 않고, 광역 단위로만 집계한다.|
|난해 본문 다절|이해가 어려운 긴 본문은 기본 1–2절만 제시하고, ALT-1(대안 구절)은 사용자가 선택할 때만 노출한다.|

---

## 1.10 제약과 운영 원칙

- **저사양 단말 최적화**를 우선하며, 온디바이스 추론이 불가능한 경우에만 서버 폴백을 사용한다.
    
- 언어는 **한국어(개역개정)를 기본, 영어(NIV)를 옵션**으로 제공하며, 라이선스·표기 규정을 엄격히 준수한다.
    
- 위치 정보는 **좌표 미수집·광역 집계**를 원칙으로 한다.
    
- BM은 **기부·후원 중심**, 광고·코인·도박성 요소는 도입하지 않는다.
    

---

## 1.11 경험 원칙(One Scene, One Verse)

- 한 장의 사진에서 **핵심 상징 1–2개**를 추출해, 그에 맞는 **한 절(또는 두 절)**을 제시하는 것을 기본 원칙으로 삼는다.
    
- 대안 구절(ALT-1)은 사용자가 직접 “다른 말씀 보기”를 선택할 때만 노출한다.
    
- 한 세션에서 너무 많은 말씀을 제시하지 않고, **“한 장면, 한 메시지”**에 집중해 과부하를 줄인다.
    

---

## 1.12 신학적 전제 및 가치 선언

- 이 앱은 **예언·점괘식 단정**을 지양하며, 사용자의 상황을 미래에 대한 단정적 선언으로 해석하지 않는다.
    
- 모든 추천은 **본문 문맥을 존중**하며, 단어 일부만 발췌해 의미를 왜곡하지 않는다.
    
- **복음과 소망의 균형**을 유지하며, 심판·경고 구절도 복음·회복 문맥 안에서만 사용한다.
    
- 온라인 환경에서도 **공동체 윤리**(존중, 배려, 비폭력)를 중시하며, 혐오·공격적 사용을 제한한다.
    
- 이 앱의 추천은 **목회·신앙 결정의 보조 수단**일 뿐, 인간 목회·상담을 대체하지 않는다는 점을 명시한다.
    

---

## 1.13 문제점에 대한 솔루션 제시

|질문(의문)|우리가 준비한 솔루션(핵심)|해결/검증 목표(핵심)|
|---|---|---|
|Q1. 사진 한 장만으로, 신학적으로 안전하게, 전 세계 어디서나 자동 추천이 가능한가?|• P1 **상징** → P2 **주제** → P3 **보정** 3단계 추천 파이프라인 구축• 온디바이스 경량 비전 + 코어팩(라이트 모드) 적용• 예장통합 **교리 룰엔진**으로 위험 본문·조합 사전 차단• **RAG 검색 + 재랭킹 + Why 카드**로 근거 동시 제시• 얼굴·아동·의료·장례·재난용 **안전 프로필 + 자동 비공개 권고**|• 사진 1장당 **신학적으로 안전한 Top-1 구절**을 p95 < 800ms에 제공• 교리 위반·극단 해석 사례를 내부 QA 기준 **오탐률 < 2%**로 관리• 저사양 단말·다국어 환경에서도 품질 저하 없는 글로벌 파이프라인 확보|
|Q2. 이 추천 말씀이 실제로 묵상·위로·회복에 도움이 되는가? 묵상·위로·회복에 도움이 되는가?|• 말씀 열람·메모·기도·복습·공유 등 **행동 지표 계측**• **3문장 설명 카드(근거·메시지·초대/기도)** 제공• A/B/C/D **페르소나 시나리오**를 UX 플로우에 반영• 목회자·리더 **자문 그룹**으로 추천 품질·현장 활용도 점검|• “위로·방향을 얻었다”는 정성 피드백이 꾸준히 축적되도록 설계• 사후 기록률 ≥ 25%, 카드 저장·공유·복습 지표가 론칭 후 지속 상승• 개인·소그룹·선교 현장에서 **반복 사용되는 도구**가 되는지로 성공 판단|
|Q3. 중독적·상업적 구조 없이도 기부·후원 중심 구조로 장기 운영이 가능한가?|• BM에서 **광고·도박·코인/토큰 배제**, **기부·후원·교회/선교 파트너십**만 허용• 온디바이스 추론 + 서버리스·경량 인프라로 **1장당 비용 최소화**• 144개국 티어 전략에 따른 **단계적 론칭**• 운영비·라이선스·핵심 인건비를 커버할 **최소 기부 목표·BM 시나리오** 수립|• 기부만으로 **서버·라이선스·핵심 인력 비용**을 충당하는 구조 달성• 144개국을 대상으로 장기 운영 가능한 **저비용·고효율 인프라** 구축• 신앙을 훼손하지 않는 BM을 유지하면서도 **안정적 기부 생태계** 확보|

---

## [용어 설명 인덱스 – 1장 관련]

|용어|설명|
|---|---|
|**AI**|**인공지능(Artificial Intelligence)**. 사진 속 피사체·장면·텍스트를 인식하고 거기에 맞는 성경 구절을 추천하는 전체 기술을 지칭.|
|**개역개정**|한국 개신교에서 널리 사용하는 한국어 성경 번역본. 이 프로젝트의 **한국어 기본 번역 기준**.|
|**NIV**|**New International Version**. 영어권에서 흔히 사용하는 성경 번역본. 이 프로젝트의 **영어 기본 번역 기준**.|
|**예장통합**|**대한예수교장로회 통합측** 교단. 프로젝트의 **교리·신학 가이드라인 기준**으로 삼는 교단.|
|**MVP**|**Minimum Viable Product**. 최소 기능만으로도 사용자가 가치를 느낄 수 있는 첫 제품 버전.|
|**MAU/DAU**|**Monthly / Daily Active Users**. 월간 / 일간 활성 사용자 수. 서비스 이용 규모와 **습관화 정도 지표**.|
|**BM**|**Business Model**. 수익·운영 구조. 이 프로젝트에서는 **광고·코인 없이 기부·후원 중심** 구조를 의미.|
|**온디바이스**|클라우드 서버가 아닌, 사용자의 **스마트폰 기기 내부**에서 AI 연산의 일부를 수행하는 방식. 비용·프라이버시 측면에서 이점.|
|**파이프라인**|입력(사진)부터 출력(성경 구절 추천)까지 이어지는 여러 처리 단계를 하나의 **흐름으로 본 설계 구조**.|
|**월드맵 집계**|사용자 개별 좌표를 저장하지 않고, **국가·광역 단위**로만 묶어 통계·열지도를 만드는 방식. 프라이버시 보호를 강화.|
|**Tier 1 국가**|본 전략 문서에서 정의한 최우선 서비스 국가 그룹. 개신교 인구 규모·성경 번역·디지털 인프라 등을 종합 평가해 우선 공략 대상으로 선정된 국가.|

# 2장. 비전·신학·교리 기준 (예장통합 · v3.0)

---

## 2.1 프로젝트 비전

### 2.1.1 프로젝트 의도 요약

> ※ 이 절은 이 앱의 **전체 신학·제품 의도**를 한 페이지로 정리한 요약 개요이다. 이후 2.1.2~2.1.4에서 이 내용을 비전·방향성·목표 관점으로 세분화한다.

**한 줄 선언**

> **말씀으로 지어진 세계 속에서 사진 한 장으로 그 순간의 의미를 다시 듣고, 한 구절로 응답하게 돕는다.**

|No.|항목|설명|
|--:|---|---|
|1|주제 성구|창세기 1:1 (개역개정) / 필요 시 NIV 병기|
|2|신학 관점|**창조 질서** 속에서 만물·순간은 의미의 단서를 지님|
|3|제품 비전|사진 1장 → **오늘의 한 구절 + 이유** → **기도 한 줄**|
|4|사용자 가치|(1) 즉시 접근 (2) 임재 인지 (3) 공유·공감 형성|
|5|원칙(5)|창조 질서, 본문 문맥, 사랑/공의 균형, 설명 가능, 현장 즉시성|

#### 한 페이지 요약 (신앙 관점 + 보편 관점)

**A) 신앙 관점**  
세상은 말씀으로 지어졌고(창 1:1), 우리의 하루는 그 말씀 안에서 펼쳐집니다. 앱은 사진 속 단서를 **상징·주제·맥락**으로 읽어 **오늘의 한 구절**을 건네고, 그 구절은 **기도 한 줄**을 낳아 **루틴**을 만듭니다. 전 과정은 **교리 가이드라인** 안에서, **왜 이 구절인지**를 근거로 제시합니다.

**B) 보편 관점**  
사진은 순간을 담고, 말씀은 의미를 제안합니다. 앱은 장면의 단서를 해석해 **오늘의 문장(성경 구절)**과 **짧은 이유**를 제공합니다. 짧은 기록의 반복은 **하루 성찰 습관**이 되어 **공유 가능한 공감대**로 확장됩니다.

**핵심 인과 흐름**  
사진(원인) → 해석(P1/P2/P3, 메커니즘) → 한 구절(결과1) → 기도/기록(결과2) → 루틴(장기효과)  
안전·신뢰: **교리 가이드라인 + 설명 가능성**

### 2.1.2 비전 선언

### 2.1.1 비전 선언

이 프로젝트의 비전은 다음과 같이 정의한다.

> **“예장통합 교단의 신학·교리 기준 위에서,  
> 전 세계 그리스도인이 사진 한 장을 통해  
> 성경 말씀과 하나님의 시선을 더 깊이 경험하도록 돕는  
> 비상업적 디지털 도구를 세운다.”**

---

### 2.1.3 핵심 방향성

|번호|항목|설명|
|---|---|---|
|1|**성경 중심**|모든 추천·설명·알고리즘은 **성경 본문과 공교회 전통**을 기준으로 설계한다.|
|2|**그리스도 중심(구속사적 관점)**|말씀 추천과 설명 카드는 **그리스도의 구속 사역**과 연결된 **구속사적 흐름** 안에서 해석되는 것을 원칙으로 한다.|
|3|**교회·공동체 지향**|개인 묵상을 돕는 동시에, **교회·소그룹·선교 현장**에서 활용하기 쉬운 구조를 지향한다.|
|4|**안전성과 신뢰성**|번영복음·극단적 종말론·정치 선동 등 **신학적으로 위험한 방향**으로 흐르지 않도록, **교리 가이드라인 + 신학 자문 + QA 프로세스**를 함께 둔다.|

---

### 2.1.4 이 비전이 의미하는 실제 목표

|구분|내용|
|---|---|
|**AI의 정체성 규정**|AI는 **새로운 계시를 만들어내는 도구가 아니라**, 기존 성경 본문을 상황에 맞게 **제시·비추는 보조 도구**라는 역할을 분명히 한다.|
|**사용자 인도 방향**|“개인 취향 및 즉각적 위로”에만 맞추는 도구가 아니라, **성경 전체의 이야기(구속사)**와 **교회 전통** 안에서 사용자를 이끌어가는 방향을 유지한다.|

---

## 2.2 성경 번역 기준

### 2.2.1 한국어: 개역개정 기준

#### (1) 기본 원칙

- 한국어 본문은 **대한성서공회 개역개정판**을 기본으로 한다.
    
- 표기·장절 구분·인용 방식은 **개역개정 공식 표기 규칙**을 따른다.
    

#### (2) 왜 개역개정인가

|포인트|설명|
|---|---|
|공예배 표준|한국 개신교(특히 장로교) 다수 교단에서 **공예배·공동체 사용의 표준**으로 자리 잡은 번역본이다.|
|예장통합 사용 관행|예장통합 교단 역시 예배·교육에서 **개역개정 성경을 폭넓게 사용**하고 있으며, 교단 차원의 자료·교재도 개역개정을 기준으로 제작된다.|

#### (3) 구현 관점 규칙

- 성경 본문 텍스트는 어떠한 경우에도 **수정·요약·의역하지 않는다.**
    
- 앱 화면에서 레이아웃 상 **줄바꿈·폰트 크기 조정**은 가능하나, **본문 텍스트 자체의 내용은 그대로 유지**한다.
    
- “쉽게 풀이한 설명”은 말씀 아래의 **설명 카드 영역**으로 분리하여, **성경 본문과 시각적으로 명확히 구분**한다.
    

---

### 2.2.2 영어: NIV(New International Version) 기준

#### (1) 기본 원칙

- 영어권 본문은 **NIV (New International Version)**을 기본으로 한다.
    
- 특정 국가·교단에서 KJV/NKJV/ESV 등 다른 번역을 선호하는 경우, **추가 옵션**으로 제공 가능성을 검토한다.
    

#### (2) 구현 규칙

- 한국어와 동일하게, 성경 본문은 **직접 수정·요약하지 않는다.**
    
- 다국어 지원 시, 각 언어별 **공인 번역본**을 사용하며, **라이선스·저작권 조건**을 계약/정책 문서에 별도 명시한다.
    

---

### 2.2.3 기타 언어 확장 원칙

#### (1) 언어 확장 전략 프레임

|단계|언어군/전략|
|---|---|
|1차|**한국어(개역개정) + 영어(NIV)**|
|2차|스페인어, 포르투갈어 등 **성경 앱 사용률이 높은 언어권**|
|3차|현지 선교단체·성서공회와 협의한 **로컬 공인 번역본** 중심 확장|

#### (2) 신학·운영 원칙

- 모든 언어에서 **정식 라이선스·공인 번역본**만 사용한다.
    
- 번역본 선택 시, 해당 지역 **교회 연합체·성서공회 권고**를 우선 고려한다.
    

---

## 2.3 교리 기준 (예장통합 가이드라인)

### 2.3.1 기본 교리 틀

#### (1) 교리적 뿌리

예장통합(PCK, Tonghap)은

- 개신교 **장로교(개혁주의) 전통**에 서 있으며,
    
- **사도신경**, **대한예수교장로회 12신조**,
    
- **웨스트민스터 신앙고백**과 **대·소요리문답**을 따르는 교단이다.
    

#### (2) 프로젝트 적용 원칙

이 프로젝트는 위 교리 문서들의 **핵심 방향과 정신**을 따르며, 다음을 기본 전제로 한다.

- **삼위일체 하나님**
    
- **성경의 영감·무오성과 최종 권위**
    
- **은혜에 의한 구원**
    
- **교회 공동체의 중요성**
    

---

### 2.3.2 구속사 중심 해석

#### (1) 원칙

- 개별 구절은 성경 전체의 **구속사적 흐름(창조–타락–구속–완성)** 안에서 해석한다.
    
- “지금 상황에 딱 맞는 한 줄”만 뽑는 것이 아니라, 해당 본문이 **그리스도 안에서 어떻게 성취·완성되는지**를 설명 카드에서 다룬다.
    

#### (2) 구현 관점

- AI가 추천한 구절은 단지 **“위로의 말”**에서 멈추지 않고,
    
    - **하나님 나라, 십자가, 부활, 성령, 공동체** 등의 구속사 맥락과 어떻게 연결되는지
        
    - **설명 카드·연관 구절**에서 함께 풀어 준다.
        

---

### 2.3.3 본문 문맥 존중 원칙

#### (1) 텍스트 다루는 방식

- **문맥을 벗어난 키워드 매칭**을 지양한다.
    
    - 예: “부자가 되고 싶다” 사진 → “부자” 키워드만 보고 문맥과 무관한 부자 구절 추천 **금지**
        
- AI가 구절을 추천할 때, 해당 **장·단락 전체 메시지와 어긋나지 않는지**를 점검한다.
    

#### (2) 시스템 레벨 가이드라인

- 각 구절에는 “**허용 / 주의 / 금지**” 태그(특정 상황에서 사용 제한)를 둘 수 있다.
    
- AI가 특정 상황(예: **자해·자살 암시 이미지**)에서 **오해 소지가 있는 구절을 추천하지 않도록**,
    
    - **신학 + 심리 안전성 기준**을 함께 둔다.
        

---

### 2.3.4 사랑/공의 · 개인/공동체 균형

#### (1) 신학적 균형

- 추천되는 말씀과 설명 카드는
    
    - **개인 심리 위로**에만 편향되거나,
        
    - 반대로 **정죄·심판만 강조**하지 않도록,
        
- **사랑과 공의, 위로와 회개, 개인과 공동체의 균형**을 지향한다.
    

#### (2) 구현 방향

- 설명 카드 설계 시,
    
    - “**개인 적용**”과 함께
        
    - “**공동체적 적용(교회·가정·이웃·사회)**” 관점을 **최소 1줄 이상 포함**한다.
        
- “나만 잘 되면 된다”로 읽힐 수 있는 문구는 피한다.
    

---

### 2.3.5 민감 주제 처리 원칙

|주제 영역|처리 원칙|
|---|---|
|고난·죽음·장례·우울·자살|단순한 “이겨내라” 식 구절 사용을 피하고, **하나님의 동행·위로·눈물·소망**을 중심으로 한 본문을 우선 사용. 필요 시 **전문 상담/도움 안내 문구**를 함께 표기.|
|성윤리·가정 폭력·혐오 이슈|성경적 윤리를 정직하게 드러내되, 특정 소수자·집단에 대한 **혐오 조장 문맥**으로 오해될 여지가 없도록 언어와 문맥을 조정.|
|정치·전쟁·국가 갈등|특정 정당·이념·국가 선전처럼 읽히지 않도록, 가능하면 **복음·평화·정의·화해 관점의 본문** 중심으로 제한.|

### 2.3.6 교리 가이드라인 운영 요약(예장통합)

> ※ 2.3절 전체 내용을, **운영·QA 관점에서 바로 체크할 수 있도록** 정리한 실무용 요약 표이다.

|No.|항목|운영 기준|
|--:|---|---|
|1|구속사 중심|항상 **그리스도/복음의 큰 흐름** 안에서 본문을 해석한다.|
|2|본문 문맥|상·하절 **스니펫 동반**, 문맥을 끊는 **단절 인용은 금지**한다.|
|3|사랑/공의 균형|심판·징벌 텍스트 단독 노출을 피하고, **사랑/공의 균형 톤**을 유지한다.|
|4|공동체 윤리|분열·혐오 조장 사용은 금지하고, **화해·섬김·공동체성**을 강조한다.|

---

## 2.4 AI 활용에 대한 신학·윤리 가이드라인

### 2.4.1 AI의 역할 정의

#### (1) “도구”로서의 위치

- AI는 **새 계시를 주는 존재가 아니라**, 이미 주어진 **성경 본문과 교회 전통**을 바탕으로
    
    - 사용자가 현재 상황에서 **묵상할 말씀을 찾도록 돕는 도구**로 한정한다.
        

#### (2) “권위”의 우선순위

- 최종 권위는 언제나
    
    - **성경 본문**과
        
    - **교회 공동체(목회자·장로회·공동 체험)**에 있다.
        
- AI 추천은 언제나 **“제안”**이며, 사용자가 **받아들이거나 넘어갈 자유**를 전제로 한다.
    

---

### 2.4.2 허용되는 기능 / 허용되지 않는 기능

|구분|내용|
|---|---|
|**허용되는 기능**|· 사진·텍스트·상황 정보를 기반으로 **해당 상황과 잘 맞는 성경 구절 추천**· 구절의 **기본 설명·배경·적용 포인트 제공**· **연관 구절·묵상 질문 제안**|
|**허용되지 않는 기능**|· 성경 본문을 **수정/삭제/추가**하는 행위· “**하나님이 당신에게 이렇게 말씀하셨다**” 식의 **직접 계시 문구 생성**· 특정 인물·집단에 대한 **정치·경제적 의사결정(투표, 투자, 전쟁 찬성/반대 등)**을 직접 지시하는 출력|

---

### 2.4.3 데이터·프라이버시 윤리

- 얼굴, 어린이, 민감한 장면 등이 포함된 사진 처리 시 다음을 우선한다.
    
    - **비식별화**
        
    - **최소 데이터 보존**
        
    - **민감 이미지 자동 블러/차단**
        
- 사용자의 기도 내용·감정 기록은
    
    - 가능하면 **로컬 우선 저장(단말 내)**을 기본으로 하되,
        
    - 클라우드 저장 시 **강력한 암호화**와 **최소 권한 원칙**을 적용한다.
        

---

### 2.4.4 AI 오·남용에 대한 보호막

- 사용자가 AI 출력을
    
    - “**내가 이 결정을 해야 한다는 하나님의 직접 명령**”으로 오해할 위험이 있는 부분에는,
        
        - “**이 앱의 추천은 목회적·전문적 상담을 대체하지 않습니다**” 유형의 안내 문구를 배치한다.
            
- 극단적·위험한 상황(자살 암시, 폭력 계획 등)이 감지될 경우,
    
    - 특정 구절 추천만으로 끝내지 않고,
        
    - **위기 대응 안내(상담 전화, 도움 요청 권장 문구)**를 함께 노출하는 것을 원칙으로 한다.
        

### 2.4.5 공유·톤·프라이버시 운영 기준

> ※ 2.3.5, 2.4.3의 원칙을, **실제 카드 공유·노출 설계에 바로 적용할 수 있도록** 정리한 운영 요약 표이다.

|No.|항목|기준|
|--:|---|---|
|1|공유 카드|사진·구절·이유 요약을 포함하되, **얼굴/상표 블러 기본 ON**을 원칙으로 한다.|
|2|문맥 동반|외부 공유 시에도 가능하면 **본문 스니펫(상·하절 일부)**를 함께 제공한다.|
|3|위치 데이터|**지오해시 6–7자** 수준으로만 저장·집계하고, **원본 좌표는 미보관**을 기본으로 한다.|
|4|민감 장면|아동/병상/재난 사진은 **완곡 톤 설명**과 함께, **외부 공유 기본 제한** 규칙을 적용한다.|

---

## 2.5 신학 자문·검증 프로세스 개요

### 2.5.1 신학 자문 구조

#### (1) 공식 자문 그룹

- 예장통합 소속(또는 예장통합 신학 기준을 공유하는)
    
    - 목회자,
        
    - 신학교 교수,
        
    - 성서학·조직신학·실천신학 전문가 등으로 구성된 **소규모 신학 자문단**을 둔다.
        

#### (2) 역할

- 초기 설계 단계에서
    
    - AI 로직의 큰 방향(구속사·주제 분류·금지 구절 목록 등)을 **검토·승인**
        
- 운영 단계에서
    
    - 문제가 된 추천 사례를 리뷰하고
        
    - “**금지/주의 태그**” 목록을 업데이트
        
    - 설명 카드 **톤 & 매너 가이드라인**을 보완
        

---

### 2.5.2 구절·주제 매핑 검증

#### (1) 1차(자동) 검증

- AI/규칙 기반으로
    
    - **극단적 의미 왜곡 가능성이 높은 구절**을 사전에 필터링한다.
        
- 특정 키워드(성, 폭력, 전쟁, 저주 등)가 포함된 구절은
    
    - **화이트리스트 방식(허용된 조합만 사용)**을 채택한다.
        

#### (2) 2차(수동) 검증

- 실제 사용자 로그 중,
    
    - “**신학적으로 애매하거나 논란 여지가 있는 추천 케이스**”를
        
    - 정기적으로 샘플링하여 자문단이 검토한다.
        
- 필요 시,
    
    - 해당 구절의 **특정 상황 사용 금지 플래그**를 추가한다.
        

---

### 2.5.3 정기 리뷰 & 업데이트

- **분기별(또는 반기별) 리뷰 회의**를 통해 다음을 종합 평가한다.
    
    - AI 추천 경향
        
    - 사용자 피드백
        
    - 문제 사례
        
    - 신학·사회 환경 변화
        
- 그 결과를 바탕으로
    
    - **주제그래프**, **금지/주의 구절 목록**, **설명 카드 템플릿**을 업데이트하고,
        
    - 변경 내용은 **버전 노트(v3.1, v3.2 …)**에 기록한다.
        

---

## [용어 설명 인덱스 – 2장 관련]

| 용어                     | 설명                                                                                                                 |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------ |
| **예장통합(PCK, Tonghap)** | 대한예수교장로회 통합측. 한국 장로교의 주요 교단 중 하나로, 개혁주의 신학과 장로교 정치 체계를 따르며, 사도신경·12신조·웨스트민스터 신앙고백·대·소요리문답 등을 교리 기준으로 삼는다.          |
| **개혁주의(개혁파)**          | 종교개혁 전통에서 나온 신학 체계로, 하나님의 주권, 성경의 최종 권위, 은혜에 의한 구원, 언약과 교회의 중요성을 강조한다.                                             |
| **구속사**                | 성경 전체를 “창조–타락–구속–완성”으로 이어지는 하나님의 구원 역사로 보고, 모든 본문을 이 흐름 안에서 해석하는 관점. 특히 **그리스도 중심적(Christ-centered) 성경 읽기**를 강조한다. |
| **12신조**               | 대한예수교장로회가 사용하는 한국 장로교 신앙고백 문서(12개 조항). 하나님, 성경, 인간, 구원, 교회, 종말 등에 대한 기본 신앙 내용을 요약한다.                               |
| **웨스트민스터 신앙고백/요리문답**   | 영국 웨스트민스터 총회(17세기)에서 작성된 개혁파 신앙고백과 교육용 문답서. 전 세계 장로교회가 널리 사용하는 표준 교리 문서이다.                                         |
| **구속사적 설교/해석**         | 성경 본문을 도덕 교훈 중심이 아니라, **그리스도의 십자가와 부활, 하나님 나라** 관점에서 읽고 설교하는 접근. 고난·위로·윤리 주제도 이 구속사 구조 안에서 다룬다.                    |
| **번영복음**               | 물질적 번영·건강·성공을 신앙의 중심 축처럼 강조하는 왜곡된 복음 이해. 예장통합을 포함한 다수 개혁주의 교단에서 비판·경계하는 흐름이다.                                      |
| **미셔널 에클레시아(선교적 교회)**  | 교회를 단순 “예배 드리는 모임”이 아니라, **하나님 선교(Missio Dei)**에 동참하는 공동체로 이해하는 관점. 예장통합에서도 선교·사회참여 논의 속에서 중요하게 다뤄진다.              |
| **화이트리스트 방식**          | 안전한 조합만 허용하는 필터링 방식. 이 프로젝트에서는 민감 주제 구절에 대해 **“허용되는 사용 맥락만 미리 지정”**하고, 그 밖의 사용은 모두 막는 형태를 의미한다.                    |
| **정기 신학 리뷰**           | AI 추천 결과와 서비스 운영 내용을 일정 주기마다 신학자·목회자들이 모여 검토하고, 문제점을 수정하는 절차. 이 프로젝트에서 **AI 오·남용을 막는 핵심 안전장치** 역할을 한다.             |

# 3장. 글로벌 시장·경쟁 환경 (v3.0)

---

## 3.1 디지털 성경·기독 앱 시장 개요

### 3.1.1 시장 정의

- 이 장에서 말하는 **디지털 성경·기독 앱**은 다음 범위를 포함한다.
    
    - 성경 텍스트·오디오·주석을 제공하는 **성경 앱**
        
    - 묵상·기도·말씀 알림·챌린지 등을 제공하는 **영성/묵상 앱**
        
    - 사진·영상·카드 형태로 말씀을 재가공해 공유하는 **콘텐츠형 기독 앱**
        
    - 최근 등장한, AI·챗봇을 활용한 **성경 Q&A·상담형 앱**
        
- 본 프로젝트는 위 범위 전체와 경쟁·보완 관계를 맺되, **사진→말씀 추천 + 묵상 루프**에 초점을 둔 특화 영역에 포지셔닝된다.
    

### 3.1.2 주요 거시 트렌드

- **모바일 퍼스트·앱 중심**
    
    - 성경 읽기·묵상·기도 기록이 점점 **모바일 앱 중심**으로 이동.
        
    - 대다수 주요 성경 앱이 iOS·Android를 기본 채널로 운영.
        
- **다언어·다번역 지원 확대**
    
    - 대표 앱들은 수백~수천 개 번역본, 수백~수천 개 언어를 제공하며 **글로벌 미션 플랫폼** 역할을 수행.
        
- **읽기에서 "참여"로**
    
    - 단순 텍스트 읽기에서, **읽기 플랜·하이라이트·노트·기도·챌린지·공유** 등 **참여형 기능** 비중이 커지는 추세.
        
- **AI·챗봇·개인화**
    
    - AI를 활용한 **개인 맞춤형 묵상, 질문 응답, 대화형 성경 공부** 앱들이 빠르게 증가.
        
    - "사진→말씀"과 같이, **상황 인식 기반 추천**에 대한 기대도 점점 높아지는 단계.
        
- **지역·상황 특화 성경 앱의 다변화**
    
    - 아프리카(요루바·하우사·스와힐리), 인도네시아, 중동·중국 등에서는  
        로컬 언어 + 오프라인 중심 앱, Lite 버전, 검열·망 제한을 감안한 생존형 앱이  
        각 지역 교회·단체를 중심으로 빠르게 확산되고 있다(부록 A 참조).
        

### 3.1.3 정량 지표(레벨 1 개관)

- 세계 최대 규모 성경 앱(예: 글로벌 성경 앱 선도 서비스)은 **수억~10억 단위의 설치 수**와, **수천만 단위의 일일 사용**을 기록하는 것으로 보고됨.
    
- 설치의 상당 비중이 **북미 외 지역(아시아, 아프리카, 라틴 아메리카 등)**에서 발생하며, 이미 **전 세계적 보급 단계**에 접어든 상태.
    
- 동시에, 여러 조사에서 **성경 앱 설치 수 대비 실제 일일 성경 읽기 비율**은 여전히 낮은 편으로 나타나, "설치 이후의 실질 참여"가 주요 과제로 남아 있다.
    

---

## 3.2 대표 글로벌 성경·기독 앱 맵

### 3.2.1 범용 성경 앱 군(텍스트·오디오·공부 중심)

- **범용 성경 앱**의 공통 특징
    
    - 수백~수천 종의 번역본과 다국어 지원
        
    - 읽기 플랜, 텍스트·오디오·하이라이트·노트 기능
        
    - 구절 검색, 주제별 검색, 즐겨찾기
        
    - 일부는 주석·주해, 원어 도구, 강해 설교, 강의 등 **성경 공부(Study)** 기능 포함
        
- 대표 유형
    
    - 대중형 무료 성경 앱: 다국어·다번역 + 읽기 플랜 + 소셜 기능
        
    - 성경 공부 특화 앱: 로고스(주석·도서 라이브러리), 블루레터바이블(원어·주석), 오프라인 주석 앱 등
        

### 3.2.2 묵상·기도·음성 중심 앱 군

- **묵상·기도 앱**의 공통 특징
    
    - 매일 정해진 말씀/묵상글/기도문 제공
        
    - 오디오·배경음악·명상 사운드 등 **심리적 안정**에 초점
        
    - 사용자의 기도 제목·기도 시간 기록, 알림 기능 제공
        
    - 일부는 유료 구독(프리미엄 콘텐츠, 오디오 묵상, 코스) 구조 채택
        
- 대표 패턴
    
    - "매일 10분 묵상" 형식의 코스형 앱
        
    - 기도 제목 저장·공유, 그룹기도, 기도 리마인드 기능 중심 앱
        

### 3.2.3 AI·챗봇·Q&A 기반 앱 군

- 최근 1~2년 사이, **AI 기반 성경 Q&A·대화형 묵상 앱**이 빠르게 증가
    
    - 성경 구절 설명, 적용 질문, 묵상 질문 생성을 AI가 도와주는 형태
        
    - 사용자 질문에 대한 **성경적 응답 초안**을 제공하는 챗봇 구조
        
- 강점
    
    - 사용자가 성경 공부를 시작할 때의 진입 장벽을 낮추고, "무엇이든 물어볼 수 있는" 환경 제공
        
- 위험 요소
    
    - 신학적으로 검증되지 않은 답변, 특정 교단·전통을 벗어나는 해석, 극단적/편향된 답변 위험
        
    - 이 프로젝트는 **예장통합 교리 기준 + 신학 자문 구조**를 통해 이 영역에서 차별화된 안전성을 목표로 한다.
        

### 3.2.4 사진·이미지 기반 말씀 앱 군

- 사진·이미지 위에 성경 구절을 얹어 **카드/포스터형 콘텐츠**를 만드는 앱들 존재
    
    - 사용자가 배경 이미지를 고르고, 좋아하는 구절을 선택해 이미지를 생성·공유하는 형태
        
- 일부 앱은 **자동 추천** 요소를 시도했지만,
    
    - 대부분은 사용자가 스스로 구절을 선택하거나,
        
    - 이미 만들어진 말씀 이미지를 고르는 수준에 머무는 경우가 많음.
        
- 본 프로젝트와 가장 직접적인 비교 대상은, 사진 분석을 통해 **자동으로 성경 구절를 매칭**하려고 했던 선행 서비스(예: 사진→말씀 형식의 앱들)이다.
    

### 3.2.5 국가·상황별 특색 성경 앱 패턴(요약)

부록 A에서 조사한 11개 대표 성경 앱을 묶어 보면, 다음과 같은 **국가·상황별 패턴**이 드러난다.

1. 아프리카 로컬 언어·오프라인 중심 앱
    

- 나이지리아·니제르·케냐·탄자니아 등에서는  
    **요루바어·하우사어·스와힐리어**와 같이 지역 언어를 지원하는  
    **완전 오프라인 성경 앱**이 교회 공식 권장 앱으로 사용되는 경우가 많다.
    
- 공통 특징
    
    - 모국어·영어 **병렬 읽기**
        
    - **오프라인 사용** 전제(데이터 비용·망 불안정 고려)
        
    - 현지 교회·선교 단체의 **공식 승인·추천**이 설치·사용의 핵심 촉매
        

2. 글로벌 초대형 앱 + Lite 버전
    

- 전 세계적으로 수억 설치를 가진 **초대형 성경 앱**은  
    **수백~수천 개 언어**를 지원하며, 일부 지역에서는 **Lite 버전**을 별도로 제공한다.
    
- 공통 특징
    
    - 저사양 단말·저속 네트워크를 위한 **경량 클라이언트**
        
    - 핵심 기능(본문, 읽기 계획, 오디오, 기본 하이라이트)을 중심으로 한 **축소 패키지**
        
    - 인도·아프리카·남아시아 등에서의 **성장률이 특히 높음**
        

3. 제한·위험 지역용 “생존형” 앱
    

- 이란, 중동·북아프리카, 중국 등 **종교·검열·망 제한**이 강한 지역에서는
    
    - **오프라인 중심**, **심플 UI**, **눈에 띄지 않는 브랜딩**이 공통 패턴이다.
        
- 공통 특징
    
    - 스토어 정책·정부 검열을 통과하기 위한 **우회적 네이밍·UI**
        
    - 트래픽·로그를 최소화하는 **보수적 데이터 사용 구조**
        
    - 사용자 입장에서는 “교회·지하 공동체가 입소문으로 공유해 주는 앱”에 가까운 채널 구조
        

4. 국가·단체·AI 특화 앱
    

- 한국·인도네시아 등에서는 **교회/방송/성경 단체가 제작한 앱**이
    
    - 여러 역본, 찬송가, 강해/공부 콘텐츠를 **무료** 또는 저비용으로 제공하며,
        
    - 교회/공동체 내에서 사실상의 **표준 앱**처럼 사용되기도 한다.
        
- 일부 앱은 **AI 상담·묵상·Q&A**를 결합해,
    
    - 젊은 세대에게 익숙한 UX로 성경 접근성을 높이고자 시도한다.
        

이 프로젝트의 3장은, 위와 같은 구체 앱 사례(부록 A)를 **직접 나열하기보다는**,  
각 유형에서 드러나는 **전략·기술·제약 패턴**을 요약해,  
사진→말씀 추천 서비스가 어디에 포지셔닝될지의 **틀**을 제공하는 데 초점을 둔다.

---

## 3.3 사진·이미지 기반 서비스 벤치마킹 요약

### 3.3.1 공통 UX 패턴

- 카메라 또는 갤러리에서 사진 선택
    
- 사진 분석(또는 단순 배경 선택) 후, 적합한 성경 구절 또는 사용자 선택 구절을 이미지 위에 배치
    
- 폰트·색상·레이아웃을 자동 또는 수동으로 조정해 "공유용 카드" 생성
    
- SNS·메신저로 이미지 공유, 디바이스에 저장
    

### 3.3.2 한계점

- **상황 이해의 깊이 부족**
    
    - 단순 키워드/피사체 인식 수준에 머무르는 경우가 많아, 실제 사용자의 감정·상황과는 거리가 있는 추천이 자주 발생
        
- **신학적 안전장치 부족**
    
    - 교단별 교리 기준이 반영되지 않고, 맥락과 무관한 임의의 구절이 제안되는 문제
        
- **묵상 루프의 부재**
    
    - 예쁜 이미지를 만드는 데 초점이 맞춰져 있고, 사진→말씀→묵상/기도→기록→재방문으로 이어지는 **영적 루프**가 설계되지 않은 경우가 많음
        
- **비상업성·프라이버시 배려의 한계**
    
    - 이미지·데이터 사용·광고·추적 구조가 명확히 설명되지 않거나, 상업적 사용에 치우친 사례 존재
        

### 3.3.3 이 프로젝트가 가져갈 학습 포인트

- 사진 기반 말씀 카드의 **감성적 힘과 공유력**은 유효하다.
    
- 그러나 본 프로젝트는 단순 이미지 생성이 아니라,
    
    - **사진→말씀 추천의 신학적 안전성**
        
    - **묵상·기도·기록 루프 완성**
        
    - **프라이버시·비상업성**  
        을 함께 해결하는 구조로 나아가야 한다.
        

### 3.3.4 Bible Lens 사례 심층 분석 (추가)

#### 3.3.4.1 서비스 개요 및 포지션

- **서비스 시기**
    
    - 출시: 2018년경, YouVersion(미국 Life.Church)이 별도 앱 **“Bible Lens”** 로 론칭.
        
    - 운영: 대략 **2018년 ~ 2020년 5월 31일**.
        
    - 종료: 2020년 5월 31일 이후 **앱스토어 제거 + 백엔드 서버 종료** 공지 → 이미 설치된 앱도 핵심 기능이 동작 불가.
        
- **핵심 기능**
    
    - 사진 기반 **성경 구절 자동 추천 + 카드 생성 앱**.
        
    - 기본 플로우
        
        1. 사진 촬영·선택 → 2) 서버/모델이 사진 분석 → 3) 관련 성경 구절 검색 → 4) 사진 위에 구절을 얹은 카드 여러 개 생성 → 5) 사용자가 카드 선택·수정 후 저장/공유.
            
- **포지션**
    
    - YouVersion 본체(성경 앱)의 위성격 **실험 앱(Experimental Satellite App)**.
        
    - 본 앱은 "성경 읽기·기도·플랜"에 집중, Bible Lens는 **사진 기반 신앙 표현**이라는 새로운 사용 케이스 실험 역할.
        

#### 3.3.4.2 UX·사용자 반응 요약

- **긍정 반응(장점)**
    
    - _간편함_: 사진만 올리면, 바로 여러 개의 말씀 카드가 생성되는 즉시성.
        
    - _자동 매칭의 재미_: 같은 사진으로도 다른 구절이 제안되어 반복 사용 동기 제공.
        
    - _디자인 다양성_: 템플릿·폰트·색상 선택이 가능해 **인스타그램용 시각 결과물**에 강점.
        
    - _동기부여_: 일상 사진(셀피, 가족, 여행 등)을 말씀과 연결해 **일상 속 말씀 노출 빈도**를 높여 줌.
        
- **부정·아쉬운 반응**
    
    - _앱 안정성 문제_: 일부 단말에서 서버 접속 오류·크래시, "unable to contact server" 류 에러 보고.
        
    - _서비스 중단에 대한 아쉬움_: 종료 이후 "좋은 앱이었는데 사라져서 아쉽다"는 회고 글 다수.
        
    - _신학·영성 측면 우려_: 예쁜 말씀 이미지를 만들어 SNS에 올리는 데 그치고, **깊은 묵상·성경 공부 루프**로 이어지지 않는다는 비판.
        

#### 3.3.4.3 기술 구조(온디바이스 vs 서버) 추정

- **서버 중심 구조일 가능성이 높은 근거**
    
    - 공식 설명에서 "머신 비전으로 사진을 분석하고, YouVersion DB에서 적합한 구절을 찾는다"고 언급 → 2018~2020년 시점에는 통상 **서버 측 비전 + 서버 측 추천 엔진** 패턴.
        
    - 서비스 종료 시점에 **앱스토어 제거 + 서버 종료 후 앱 자체 기능 중단** → 핵심 로직이 서버 의존.
        
    - 사용자 도움말·에러 메시지에서 **"서버에 연결할 수 없다"**, "인터넷 연결 확인" 안내가 반복.
        
- **온디바이스에서 처리했을 것으로 보이는 영역**
    
    - 카메라·갤러리 접근, 썸네일 표시, 결과 카드 렌더링, 로컬 저장 등 **UI 및 단순 전처리**.
        
- **서버에서 처리했을 것으로 보이는 영역**
    
    - 본격적인 **객체 인식·장면 분류·색감 분석 등 비전 추론**.
        
    - 사진 특징과 성경 구절 메타데이터를 연결하는 **추천 엔진**.
        
    - 통계·로그 수집, A/B 테스트 등 운영 분석.
        
- **요약 결론**
    
    - Bible Lens는 **사진 업로드 → 서버 분석 → 구절 추천** 구조의 전형적인 **서버 중심 AI 서비스**였을 가능성이 높다.
        

#### 3.3.4.4 종료 요인(추정) 및 전략적 시사점

- **종료 요인(추정)**
    
    - 플래그십 성경 앱 기능(기도, 스토리형 콘텐츠 등)에 리소스를 집중하기 위한 **실험 앱 정리**.
        
    - 이미지 인식 + 대규모 성경 DB 검색을 계속 운영하기 위한 **서버 비용·인력 부담**.
        
    - 후원·기부 기반 사역 구조에서, 장기적으로 서버비가 큰 실험 앱 유지가 어려웠을 가능성.
        
- **시사점 — 우리 프로젝트 관점**
    
    - 사진→말씀 추천 기능이 **서버 기반**이면, DAU·사진 수가 커질수록 장기 운영 비용이 기하급수적으로 증가.
        
    - 앱이 종료되면 기존 설치분도 쓸 수 없게 되는 **"서버 스위치" 구조**가 된다.
        
    - 따라서 본 프로젝트는 처음부터 **온디바이스 중심 구조**를 채택해, 서버는 통계·설정·월드맵 집계 등으로 역할을 최소화해야 한다.
        

### 3.3.5 Bible Lens 대비 본 프로젝트 목표·차별화 포인트 (3장 관점 요약)

#### 3.3.5.1 개념 비교 표

|항목|Bible Lens(추정)|본 프로젝트(설계)|시사점|
|---|---|---|---|
|AI·비전 구조|서버에서 사진 분석 + 구절 추천|**온디바이스 비전·추천** + 서버는 집계·설정 위주|대규모 트래픽에서도 **운영비·레이턴시·프라이버시** 모두 유리|
|사진 데이터 처리|사진 원본을 서버로 업로드(추정)|사진은 단말에서만 처리, 서버에는 **비식별 메타데이터**만 전송|종교·신앙 데이터 특성상 **프라이버시 신뢰** 확보에 중요|
|비용 구조|서버 비전·관리형 API 의존 → DAU·사진 수 증가 시 고정비 급증|DAU 5~10만 기준 **월 수십~수백 달러**, 장기적으로도 최소비 유지 가능 구조|후원·기부 기반 BM에서도 **지속 가능**한 비용 구조|
|서비스 종료 시 행동|서버 종료 = 앱 핵심 기능 중단(실제 사례)|서버가 잠시 멈춰도 **사진→말씀 추천은 로컬에서 계속 동작**, 월드맵·통계만 제한|"앱이 사라지지 않는" 구조 → 사역 지속성 측면 강점|
|영적 루프 설계|예쁜 말씀 이미지를 만들어 **SNS에 올리는 경험**이 중심|사진→말씀→설명 카드→감정·기도 기록→월드맵·일기 재방문까지 **완결된 묵상 루프**|단순 "콘텐츠 소비"가 아니라 **영적 성장 루프**가 핵심 가치|

#### 3.3.5.2 네 가지 축에서 본 차별화 요약

1. **기술·비용 축**
    
    - Bible Lens: 서버 기반 비전·추천 구조로, 트래픽이 클수록 서버비 부담이 커져 **실험 앱 단계에서 종료**.
        
    - 본 프로젝트: **온디바이스 AI + 얇은 서버 구조**를 전제로 설계 → 하루 1,000만 장 수준에서도 현실적인 비용.
        
2. **신학·교리 축**
    
    - Bible Lens: 신학적 기준·교단 기준이 전면에 드러나지 않으며, 개별 추천에 대한 **“이 구절이 왜 나왔는지” 설명 구조가 약함**.
        
    - 본 프로젝트: 예장통합 기준 + 신학 자문 구조를 전제로, 각 추천에 대해 **설명 카드(이 사진에 왜 이 말씀인가)**를 함께 제공.
        
3. **UX·경험 축**
    
    - Bible Lens: "사진 → 예쁜 말씀 카드"에 초점, **공유·시각 결과물**이 중심.
        
    - 본 프로젝트: 여기에 감정 태그, 묵상 메모, 기도 여부 기록, 이후 재방문(리마인드)까지 연결하는 **개인 묵상 아카이브**로 확장.
        
4. **커뮤니티·BM 축**
    
    - Bible Lens: 별도 커뮤니티·BM 구조는 상대적으로 약하고, YouVersion 생태계 내 실험앱 위치.
        
    - 본 프로젝트: 처음부터 월드맵·좋아요·감정표시·선물하기·소그룹 공유 등 **커뮤니티 루프**, **광고·코인 중심이 아닌 기부·후원 중심 BM**을 전제로 설계.
        

#### 3.3.5.3 한 눈에 비교 요약(슬라이드용)

**(1) 한 눈에 비교표 — 기술·비용·프라이버시·영적 루프**

|축|Bible Lens|본 프로젝트|핵심 메시지|
|---|---|---|---|
|기술·비용|서버 기반 비전·추천, 트래픽↑ → 서버비 급증|온디바이스 비전 + 최소 서버, DAU↑에도 비용 완만|**규모가 커져도 버틸 수 있는 구조**|
|프라이버시·데이터|사진 원본 서버 업로드(추정), 서버 로그 중심|사진은 단말 내 처리, 서버에는 비식별 메타데이터만 전송|**신앙 데이터에 적합한 보수적 데이터 정책**|
|서비스 지속성|서버 종료 시 앱 핵심 기능 중단(실제 종료 사례)|서버 장애 시에도 로컬 추천 계속 동작, 월드맵·통계만 제한|**“앱이 사라지지 않는” 사역 인프라**|
|영적 루프|예쁜 말씀 이미지를 SNS에 올리는 경험 중심|사진→말씀→설명 카드→감정/기도 기록→재방문 루프 완성|**콘텐츠 소비가 아닌 영적 성장 여정**|

> 네 가지 축에 대한 서술형 설명은 바로 위 **3.3.5.2 네 가지 축에서 본 차별화 요약**을 기준으로 한다.

### 3.4 사용자 관점에서의 경쟁 구도

#### 3.4.1 현재 충족되고 있는 니즈

- 언제 어디서나 성경 텍스트·오디오를 읽고/들을 수 있는 니즈
    
- 읽기 플랜·하이라이트·노트 등, **성경 읽기 습관 형성**을 돕는 기능
    
- 매일 묵상글·기도문·챌린지를 통해, **짧은 시간에 영적 자극**을 얻는 니즈
    
- 소셜 기능(말씀 이미지 공유, 구절 공유, 기도 공유 등)을 통한 **신앙 나눔 니즈**
    

#### 3.4.2 여전히 비어 있는 니즈

- **“지금 내 상황”과 “말씀”이 직접 연결되는 경험**
    
    - 예: 지금 눈앞 풍경, 병원 대기실, 장례식장, 일터, 학교 등의 실제 장면과 연결된 말씀
        
- **사진을 중심으로 한 개인 묵상 아카이브**
    
    - 사진·말씀·감정·기도가 한 카드로 쌓이고, 나중에 돌아볼 수 있는 구조
        
- **신학적으로 안심되는 자동 추천**
    
    - 교단·교리 기준이 명시적이고, 목회자·교회가 안심하고 성도에게 권할 수 있는 서비스
        
- **프라이버시·비상업성에 대한 신뢰**
    
    - 좌표 미수집, 얼굴/민감 이미지 보호, 광고·코인·도박형 BM 배제 등, "신앙 양심"에 맞는 구조
        

---

## 3.5 대표 서비스 비교 요약(프레임)

> 실제 수치는 부록 A에서 상세 표로 제공하고, 여기서는 **비교 관점 프레임**만 정리한다.

### 3.5.1 비교 축 정의

- **기능 축**
    
    - 텍스트/오디오/주석/읽기 플랜/기도/사진 카드/AI Q&A 등
        
- **신학·교리 축**
    
    - 교단 기준 명시 여부, 신학 자문 구조 유무, 민감 주제 처리 방식
        
- **수익 모델 축**
    
    - 완전 무료(기부), 광고, 인앱결제, 구독, 코인·토큰 연동 등
        
- **데이터·프라이버시 축**
    
    - 좌표/얼굴/민감 데이터 처리, 로그·트래킹 구조, 데이터 사용 투명성
        
- **이미지·사진 활용 축**
    
    - 단순 배경 이미지 vs 실제 사진 분석 및 추천, 디자인 퀄리티, 공유 기능
        

### 3.5.2 본 프로젝트의 위치

- 기능 측면
    
    - **사진→말씀 자동 추천 + 묵상 루프**에 강한 특화
        
    - 텍스트/오디오/읽기 플랜은 기존 앱과의 협력·연동(또는 최소한의 기본 기능)으로 접근 가능
        
- 신학·교리 측면
    
    - 예장통합 기준 + 신학 자문 + QA 구조를 명시하여, **신학 안전성이 핵심 USP**가 됨
        
- 수익 모델 측면
    
    - 상업형 BM 대신, **기부·후원 중심 구조**를 전면에 내세워 차별화
        
- 프라이버시 측면
    
    - 좌표 미수집·민감 이미지 보호·최소 데이터 구조를 전제로, **신앙 양심에 맞는 데이터 처리**를 강조
        

---

## 3.6 이 프로젝트의 포지셔닝 & 차별점

### 3.6.1 포지셔닝 문장

> "전 세계 어디서나, 사진 한 장으로 지금 내 상황에 맞는 말씀을  
> **신학적으로 안전하고, 프라이버시를 지키며, 비상업적으로** 추천해 주는  
> 사진 기반 성경 묵상 도구."

### 3.6.2 핵심 차별점

1. **사진 중심 묵상 루프 완성**
    
    - 사진→말씀 추천→설명 카드→감정/기도 기록→월드맵·일기 재방문까지 이어지는 **완결된 루프** 제공
        
2. **예장통합 교리 기준 + 신학 자문 구조**
    
    - 단순 기술 실험이 아닌, **교단 기준이 명확한 공식 설계**
        
3. **비상업성·기부 중심 BM**
    
    - 광고, 코인, 도박형 BM, 과도한 과금 요소를 배제하고, **사역형 플랫폼**으로 포지셔닝
        
4. **프라이버시 우선 구조**
    
    - 좌표 미수집, 민감 이미지 필터링, 최소 로그 정책 등으로, 종교 앱 특유의 프라이버시 우려를 낮춤
        
5. **글로벌 맥락 시각화(월드맵)**
    
    - 개별 좌표를 저장하지 않으면서도, 국가·지역 단위로 "전 세계에서 어떤 사진과 함께 어떤 말씀이 묵상되고 있는지"를 보여주는 독특한 시각화 제공
        

### 3.6.3 SWOT 요약(초안)

- **S (Strengths, 강점)**
    
    - 신학적 기준이 명확한 사진 기반 묵상 도구
        
    - 비상업성·기부 중심 철학
        
    - 프라이버시·데이터 최소화 설계
        
- **W (Weaknesses, 약점)**
    
    - 기존 대형 앱에 비해 늦게 시작하는 후발주자
        
    - 텍스트·오디오·주석 등 범용 기능은 외부 의존 또는 축소 제공 가능성
        
- **O (Opportunities, 기회)**
    
    - 사진·이미지 중심 세대(특히 MZ, 알파세대)에 적합한 새로운 묵상 경험
        
    - 교단·교회·선교 단체와의 협력 가능성
        
    - 기존 상업형 앱에 피로감을 느끼는 사용자 층
        
- **T (Threats, 위협)**
    
    - 빅테크·대형 앱이 사진 기반 추천 기능을 빠르게 흡수할 가능성
        
    - 각국 규제(종교·데이터·AI 관련) 변화
        
    - 신학 논쟁을 야기할 수 있는 민감 추천 사례 발생 위험
        

---

## 3.7 전략적 시사점(정리)

### 3.7.1 반드시 따라야 할 것(벤치마킹 포인트)

- 범용 성경 앱들이 보여준 **다언어·다번역 지원 구조**와 **읽기 플랜·노트·공유 기능**의 기본 UX 패턴
    
- 묵상·기도 앱들이 구축한 **짧고 반복 가능한 일상 루틴 설계**(알림, 챌린지, 연속 사용 보상 등)
    
- AI·챗봇 앱들이 보여주는 **개인화·대화형 상호작용**의 강점
    

### 3.7.2 의도적으로 달라야 할 것

- **상업적 BM 구조**에서 거리를 두고, 처음부터 끝까지 **기부·사역형 플랫폼**으로 설계
    
- 사진→말씀 추천에서, **디자인/분위기보다 신학적 안전성과 문맥성**을 우선
    
- 사용자 데이터 수집에서, 통상적인 앱보다 **한 단계 더 엄격한 프라이버시 기준** 적용
    

### 3.7.3 장기적으로 준비해야 할 위협·기회

- 위협
    
    - 대형 플랫폼(글로벌 성경 앱, 빅테크 신앙 콘텐츠 서비스 등)이 유사 기능을 도입할 경우, 기능만으로는 차별화가 어려워질 수 있음
        
    - 각국 규제 변화(종교·데이터·AI 규제)에 따른 서비스 제한 가능성
        
- 기회
    
    - **교단·교회 연합 차원의 공식 추천 도구**로 자리 잡을 수 있는 잠재력
        
    - 사진·이미지·AI를 활용한 **새로운 형식의 성경 교육·선교 자료**로 확장 가능
        
    - 장기적으로, 다른 감성 프로젝트(예: Soul Chorus 등)와의 연동을 통해, "사진·감정·말씀"을 아우르는 생태계를 구성할 수 있음
        

---

## 3.8 용어 인덱스(3장)

> 본 표는 3장(글로벌 시장·경쟁 환경)에서 반복 사용되는 **전략·시장 중심 용어**를, 3장 문맥에서의 의미로만 간단히 고정한다.

| No. | 용어                  | 3장에서의 정의(요약)                                                          |
| --: | ------------------- | --------------------------------------------------------------------- |
|   1 | **디지털 성경·기독 앱**     | 성경 텍스트·오디오·주석 중심의 성경 앱, 묵상·기도 앱, 콘텐츠형 기독 앱, AI Q&A·상담형 앱을 포괄하는 시장 범주  |
|   2 | **모바일 퍼스트**         | 성경 읽기·묵상·기도 기록의 중심 채널이 PC/웹에서 스마트폰 앱으로 이동한 시장 흐름                      |
|   3 | **다언어·다번역 지원**      | 다수 언어/역본을 제공해 국가·언어권을 넓히는 앱 구조(글로벌 확장·선교 플랫폼 성격 포함)                   |
|   4 | **참여형 기능**          | 읽기 플랜·하이라이트·노트·기도·챌린지·공유 등 사용자의 반복 참여를 유도하는 기능군                       |
|   5 | **AI·챗봇**           | 성경 질문응답·대화형 묵상·개인화 추천 등 대화 인터페이스 기반의 AI 기능군                           |
|   6 | **상황 인식 기반 추천**     | 사용자의 “지금 장면/상황”을 단서로 삼아 적합한 구절·주제를 제안하는 추천 방식(사진 기반 포함)               |
|   7 | **사진→말씀 추천**        | 사용자가 촬영·선택한 사진을 입력으로 받아, 사진의 태그/맥락을 바탕으로 성경 구절을 자동 제안하는 기능            |
|   8 | **묵상 루프**           | 사진→말씀→설명 카드→감정/기도 기록→재방문으로 이어지는 반복 사용 흐름(영적 습관화 구조)                   |
|   9 | **온디바이스 AI**        | 사진 분석·추천의 핵심 추론을 서버가 아니라 사용자 단말기에서 수행하는 구조                            |
|  10 | **서버 중심 구조**        | 사진 업로드 후 서버에서 비전 분석·추천을 수행하는 구조(서버 비용·의존·중단 리스크가 커질 수 있음)             |
|  11 | **Lite 버전**         | 저사양 단말·저속 네트워크를 고려해 용량·기능을 최소화한 경량 앱/클라이언트                            |
|  12 | **오프라인 중심 앱**       | 네트워크 불안정·데이터 비용을 고려해 본문/핵심 기능을 오프라인에서 우선 동작하도록 설계된 앱                  |
|  13 | **생존형 앱**           | 종교·검열·망 제한이 강한 지역에서 사용되도록 오프라인·저노출·보수적 데이터 사용을 전제로 한 앱 패턴             |
|  14 | **비식별 메타데이터**       | 개인/원본 데이터를 보내지 않고, 통계·집계 목적에 필요한 최소한의 비개인 식별 정보만 전송하는 방식              |
|  15 | **비상업성 BM**         | 광고·코인·도박형 BM을 배제하고 기부·후원 중심으로 운영하는 수익/운영 구조                           |
|  16 | **포지셔닝**            | 경쟁 앱 군 대비 “우리가 어떤 문제를 어떤 방식으로 해결하는가”를 한 문장·한 구조로 고정하는 전략적 정의          |
|  17 | **USP**             | 사용자가 우리 서비스를 선택해야 하는 핵심 차별 가치(3장에서는 ‘신학 안전성+프라이버시+비상업성+온디바이스’ 축으로 요약) |
|  18 | **월드맵(글로벌 맥락 시각화)** | 개인 좌표를 저장하지 않으면서도 국가·지역 단위로 “어디서 어떤 사진·말씀이 묵상되는지”를 보여주는 시각화 개념        |

# 4장. 핵심 사용자·사용자 시나리오

이 장의 목적은 이 서비스를 실제로 사용할 **핵심 사용자 그룹(페르소나)**를 정의하고,  
각 사용자가 어떤 맥락에서 사진을 찍고 말씀을 받게 되는지 **현실적인 시나리오**로 정리하는 것입니다.

---

## 4.1 핵심 사용자 세그먼트 개요

### 4.1.1 페르소나 목록

|ID|이름(별칭)|요약 설명|주요 연령/특성|주요 사용 기기/환경|
|---|---|---|---|---|
|P1|일상 개인 묵상자|출퇴근·일상 중에 짧게 말씀을 붙들고 싶은 개인 신자|20–40대, 직장인·대학생|스마트폰, 지하철·버스·카페|
|P2|나눔 지향 감성 공유형|사진과 말씀 카드를 지인·SNS에 나누고 싶은 사용자|20–40대, SNS 익숙|스마트폰, SNS·메신저 연동|
|P3|장년층/디지털 약자|글씨는 크게, 조작은 단순하게, 안심하고 쓰고 싶은 장년층|50대 이상, 디지털 적응 중|중·대화면 스마트폰, 와이파이 위주|
|P4|소그룹 리더·사역자|소그룹/셀 모임의 나눔 자료를 손쉽게 모으고 싶어 하는 리더|30–60대, 소그룹 인도|스마트폰+태블릿, 교회/가정|
|P5|위기/고난 상황 사용자|병원·장례식장·고된 일터 등에서 위로와 평강의 말씀을 찾는 사용자|전 연령, 심리적 부담 높음|스마트폰, 병원·장례식장·직장 휴게실|
|P6|선교/해외 현장 사용자|현지 사진과 함께 말씀을 기록·공유하고 싶은 선교사/봉사자|20–60대, 해외 체류·단기선교|중저가 스마트폰, 불안정한 네트워크|
|P7|청소년/청년(사진 세대)|사진·이미지 중심으로 신앙을 접하는 Z/알파 세대|10–20대, SNS·게임 친숙|스마트폰, 학교·학원·집|

> 실제 구현에서는 국가·언어·교단별 세부 페르소나를 추가할 수 있지만, v3.0에서는 위 7개를 **글로벌 공통 상위 페르소나**로 사용합니다.

### 4.1.2 페르소나별 핵심 니즈 요약

|ID|핵심 니즈(Needs)|두려움/우려(Fears)|
|---|---|---|
|P1|짧은 시간에 지금 상황에 맞는 말씀 1–2절만 바로 받고 싶다|너무 많은 선택지, 복잡한 기능, 광고/과금 압박|
|P2|감각적인 사진+말씀 카드로 자연스럽게 나눔을 만들고 싶다|신학적으로 애매한 구절을 공유해 비판을 받는 것, 과도한 상업성|
|P3|큰 글씨, 단순한 조작, 실수해도 안전한 앱을 원한다|잘못 눌러서 공개되거나, 개인정보가 새어나가는 것|
|P4|모임 주제와 성도 상황에 맞는 사진·말씀 예시를 쉽게 모으고 싶다|신학적으로 검증되지 않은 앱을 공식 모임에 쓰는 것|
|P5|당장 버틸 수 있게 해 주는 위로·소망의 말씀, 부드러운 설명이 필요하다|심판·정죄·두려움을 자극하는 구절이 뜨는 것|
|P6|낮은 네트워크 환경에서도 현지 사진+말씀 기록을 안정적으로 남기고 싶다|접속 불안, 오프라인 미지원, 데이터·위치 추적에 대한 우려|
|P7|사진·이미지·짧은 글 중심의 직관적인 경험, 뱃지·연속 사용 등 동기 요소 필요|긴 텍스트, 지루한 설명, 게임/앱에 비해 촌스럽고 느린 UI|

---

## 4.2 핵심 사용 맥락(시간·장소·상황)

### 4.2.1 시간대별 사용 맥락

|시간대|대표 상황|우선 타깃 페르소나|설계 포인트|
|---|---|---|---|
|아침(06–09시)|출근길 지하철·버스, 아침 산책|P1, P7|한 손 조작, 저소음, 빠른 추천, 30–60초 안에 끝나는 플로우|
|낮(11–15시)|점심시간, 카페, 학교 쉬는 시간|P1, P2, P7|짧은 대기시간, 공유 플로우 강조, 데이터 사용량 최소화|
|저녁(18–22시)|퇴근 후, 소그룹 모임 전후, 가정|P1, P2, P3, P4|가족·모임 중심 사용, TV·태블릿 병행 고려|
|심야(22–02시)|잠 못 드는 밤, 고민·불안·고난 상황|P1, P5|어두운 테마, 위로·평강 주제 우선, 알림 최소화|

### 4.2.2 장소·상황별 사용 맥락

|장소/상황|대표 사용 예|민감도|설계 원칙|
|---|---|---|---|
|집/방|일기 쓰듯 사진 찍고 말씀 받기|낮음|기본 경험, 갤러리·복습 루프와 긴밀히 연결|
|직장/학교|업무/학업 중 잠깐 쉬는 시간, 동료와 공유|중간|소리·알림 절제, 빠른 완료, 복잡한 입력 최소화|
|교회/소그룹 모임|예배 전후, 모임 나눔용 사진·말씀 카드 생성|낮음|그룹 모드/프로젝트 폴더 등 확장 고려(향후 버전)|
|병원/장례식장|위로·소망을 구하는 사진(대기실, 병실, 장례식장 주변 등)|높음|자동 비공개 권장, 위로·소망 중심 주제, 민감 이미지 필터링|
|야외(산/바다/공원 등)|자연·풍경 사진과 함께 묵상, 월드맵 히트맵에 시각화|중간|위치 퍼징, 자연·창조·감사 주제 강화, 배터리·데이터 절약|
|해외/선교지|현지 풍경·사역 현장을 기록, 기도 편지·리포트로 활용|중간|오프라인팩 필수, 다국어 지원, 위치·인물 정보 보호에 각별 배려|

---

## 4.3 대표 사용자 여정(**User Journey**) 시나리오

대표적인 3개의 여정을 기준으로, **사진→말씀→기록/공유→복습** 흐름을 정리합니다.

- J1: **일상 위로·묵상** 여정 (P1, P5, P7 중심)
    
- J2: **나눔 카드 생성·공유** 여정 (P2, P4 중심)
    
- J3: **위기·고난 상황 위로** 여정 (P5 중심)
    

### 4.3.1 J1 — 일상 위로·묵상 여정

|단계|화면/상태|사용자 행동|시스템 반응|주요 이벤트/로그|
|---|---|---|---|---|
|1|홈/촬영 화면|출근길 풍경·책상·창밖 등을 찍는다|사진 로드, **Analyzing** 상태 진입|PhotoTaken, AnalyzeStarted|
|2|분석 중|별도 조작 없이 1–2초 대기|온디바이스 태깅+서버 추천, 완료 시 **Recommended** 진입|AnalyzeCompleted|
|3|추천 결과|제시된 1–2절과 짧은 설명 카드를 읽는다|Why-card(근거 태그·주제·맥락) 함께 표시|ResultShown(why_score 포함)|
|4|사후 기록|감정 태그 선택, 짧은 메모·기도 한 줄 작성|감정·메모를 PhotoEvent와 Verse에 연결 저장|AffectSaved, DSTUpdated|
|5|복습 알림 예약(자동)|별도 조작 없이 기본 복습 루프(1/3/7/30일)가 자동 설정|ReviewScheduled 상태 기록|ReviewScheduled|
|6|나중에 기록 열람/복습|저녁 또는 주말에 갤러리/일기 화면에서 카드를 다시 연다|동일 사진·말씀·감정 기록을 카드 형태로 재구성해 보여줌|ReviewOpened, TimeOnCard|

### 4.3.2 J2 — 나눔 카드 생성·공유 여정

|단계|화면/상태|사용자 행동|시스템 반응|주요 이벤트/로그|
|---|---|---|---|---|
|1|촬영/갤러리 선택|모임 사진·풍경 사진을 새로 찍거나, 기존 사진을 선택|사진 로드, Analyzing 상태 진입|PhotoTaken or PhotoSelected|
|2|추천 결과|추천된 구절·설명을 확인하고, 필요하면 ALT-1 선택|최종 선택된 절을 카드의 메인 구절로 확정|ResultShown, AltVerseSelected|
|3|카드 편집(경량)|기본 카드 템플릿(폰트/색상/워터마크)을 확인, 텍스트 위치만 간단 조정|편집 결과 실시간 미리보기, 카드 이미지 렌더링|CardPreviewed|
|4|공유 채널 선택|카카오톡·메신저·SNS 중 채널을 선택해 공유|채널별 공유 Intent 실행, 공유 후 앱으로 복귀|CardShared(channel, success)|
|5|사후 기록(선택)|공유 카드에 대한 느낌을 태그로 남기거나, 모임용 폴더에 저장|해당 카드/사진이 모임/폴더와 연결, 다시 찾기 쉬운 구조 제공|FolderSaved, AffectSaved (옵션)|

### 4.3.3 J3 — 위기·고난 상황 위로 여정

|단계|화면/상태|사용자 행동|시스템 반응|주요 이벤트/로그|
|---|---|---|---|---|
|1|촬영/갤러리|병원 대기실, 병실, 장례식장 주변 등에서 조심스럽게 사진 촬영/선택|이미지에서 의료·장례·눈물 등 **민감 피사체** 탐지, 민감도 플래그 설정|PhotoTaken, SensitiveFlagSet|
|2|분석·추천|별도 입력 없이 기다리며 마음을 가다듬는다|위로·소망·평강 주제 우선, 심판·정죄·논쟁적 본문은 가이드라인에 의해 감쇠/차단|SafeCandidateFiltered|
|3|추천 결과(위로 모드)|제시된 1–2절과 부드러운 설명 문구를 읽는다|상단에 "민감 상황에서 위로와 평강을 위한 말씀" 문구 표시, safe_mode 플래그 설정|ResultShown(safe_mode=true)|
|4|공개 여부 선택|사진·말씀을 **개인 기록으로만 둘지** 여부를 확인·선택|기본값 비공개, 사용자가 명시적으로 변경하지 않으면 월드맵·공유에 사용하지 않음|VisibilitySet(private_default)|
|5|사후 기록|감정 태그(두려움·슬픔·위로·소망 등) 선택, 짧은 기도/호소를 남김|감정·기도 기록 기반으로 향후 복습 시 동일 상황에 다시 도움을 줄 수 있는 루프 구성|AffectSaved, ReviewScheduled|
|6|나중에 되돌아보기(치유 루프)|일정 시간이 지난 후, 같은 카드·사진을 열어 당시 감정을 되돌아본다|과거 슬픔/불안 카드와 이후 감사/회복 카드를 묶어 보여주는 **치유 타임라인** 제공(개념)|HealingTimelineViewed (향후)|

### 4.3.4 공통 앱 플로우 & 클라이언트 스펙(요약)

이 절은 앞서 정의한 J1·J2·J3 여정을 **하나의 공통 플로우**와 **클라이언트 UI 스펙** 관점에서 압축 정리한 것입니다. 디자인·개발·QA 팀이 공통 기준으로 사용할 수 있는 최소 스펙입니다.

#### 4.3.4.1 공통 플로우 요약

> 촬영/가져오기 → 추천(구절·설명) → 저장/공유 → 사후 감정·기도·메모 → 복습(1/3/7/30일)

- J1·J2·J3는 모두 위 플로우를 기본으로 하며, 각 여정의 차이는 **추천 우선순위·공개 범위·민감 모드 여부**에 있습니다.
    

#### 4.3.4.2 앱/클라이언트 스펙(스토리보드·접근성·프라이버시)

|항목|규격|
|---|---|
|고정 문구|결과 하단 "감성 표시 / 공유하기 / 저장", 기록 탭 "묵상일기" 사용|
|오프라인|코어팩(절·주제·설명 템플릿)을 앱 번들에 포함, 네트워크가 없어도 기본 추천 가능|
|반복 억제|하루 동일 주제 반복 노출 비율 ≤ 30% (MMR·히스토리 기반 후보 조정)|
|접근성|대비 비율 ≥ 4.5:1, 본문 최소 16sp 이상, 터치 영역 48dp+, 포커스 표시 필수|
|프라이버시|얼굴/아동/의료 장면 자동 비공개 권고 + 외부 공유 전 추가 경고 팝업 제공|
|레이아웃|화면 하단 40% 영역 그라데이션+블러, 라인하이트 1.4, 주요 버튼 높이 ≥ 88dp|

#### 4.3.4.3 4-컷 스토리보드 요약

|컷|화면/상태|내용 요약|
|---|---|---|
|1|촬영/가져오기|카메라 촬영 또는 갤러리에서 사진 선택|
|2|추천 결과|선택 사진 기반으로 구절·설명 카드 추천 화면 노출|
|3|사후 기록|감정 태그, 메모, 기도 한 줄 입력 화면|
|4|기록/갤러리|최근/주제/지도 뷰로 카드 기록을 모아보는 일기·갤러리 화면|

### 4.3.4.4 UX/디자인 스펙(카드·타이포·레이아웃)

카드 뷰 전반에 공통으로 적용되는 **워터마크·타이포·레이아웃** 기준을 정리합니다. 디자인 시스템 및 컴포넌트 제작 시 이 표를 기본 스펙으로 사용합니다.

|항목|규격|
|---|---|
|워터마크/메타|책·장·절/번역/날짜 메타 정보를 카드 하단 또는 모서리에 일관된 포맷으로 노출 (예: "요 3:16 · 개역개정 · 2025-01-03")|
|12씬 샘플|일상·자연·도시·교회·병원·장례 등 **12개 대표 장면(민감 시나리오 포함)**으로 카드 샘플 세트를 제작, 디자인·QA 공통 기준으로 사용|
|톤/워딩|카피는 단정적·예언적 문장을 피하고, **위로·소망·동행** 톤을 우선 적용 (특히 민감 시나리오에서 강화)|
|타이포|본문 18–22sp, 책·장·절 12–14sp, 설명 텍스트 14–16sp 범위 내에서 반응형 스케일 적용|
|레이아웃|상·하단 안전영역을 확보하고, 텍스트 영역은 배경 대비가 확보된 오버레이(그라데이션/블러 등) 위에 배치|

### 4.3.5 감정 Opt-in 흐름 & 노출 정책

이 절은 사진 업로드 이후 **객관 신호 기반 기본 추천**과, 사용자가 직접 선택해 여는 **감정 기반 보조 추천(Opt-in)** 의 관계를 정의합니다. 1장 제품 개요의 "감정은 사후 보조 레이어" 원칙과, 7장 품질·지표에서의 감정 관련 KPI 정의와도 연결됩니다.

#### 4.3.5.1 기본 노출 정책

|항목|내용|
|---|---|
|기본 추천|사진 업로드/촬영 직후에는 **피사체·장면·OCR·시간/장소 등 객관 신호만**을 사용해 Top-1(또는 1–2절) 구절과 설명 카드를 즉시 노출합니다. 이 단계에서는 감정 정보가 점수 계산에 사용되지 않습니다.|
|사후 Opt-in|사용자가 "감정 더하기" 기능을 선택한 경우에만, 입력된 감정 정보를 이용해 **보조 1절(Emotion Verse)** 을 별도 카드/탭 형태로 추가 노출합니다. 기본 카드와 감정 기반 카드는 시각적으로 구분합니다.|
|점수 혼합 금지|기본 추천 점수와 감정 보정 점수를 **섞지 않는 것**을 원칙으로 합니다. 기본 추천은 항상 객관 신호 기반 Top-1입니다.|
|예외적 보정|예외적으로 Opt-in + 고신뢰 상황에서만, 감정 보정이 적용된 카드를 "**감정 보정 +20%**" 등의 배지와 함께 표시해, 어떤 조정이 있었는지 사용자가 명시적으로 인지할 수 있게 합니다.|

#### 4.3.5.2 감정 입력 UI/UX

|요소|규격|
|---|---|
|감정 토글 위치|추천 결과 화면 상단 또는 카드 상단 영역에 **칩/토글 형태**의 버튼 배치 (예: "감정 더하기", 기본 상태는 OFF). OFF 상태에서는 감정 기반 보조 구절이 전혀 노출되지 않습니다.|
|감정 선택 방식|자주 쓰이는 감정(예: 지루함, 짜증, 불안, 슬픔, 감사, 희망 등)을 **빠른 선택 리스트**로 제공하고, 각 감정마다 **강도(1–5)** 를 선택할 수 있게 합니다.|
|텍스트 입력(선택)|필요 시 한 줄 메모 필드 제공 (예: "오늘 일이 너무 힘들었어요"). 메모는 추천에는 직접 반영하지 않고, 주제·감정 분석 및 목회적 인사이트 도출에 활용합니다.|
|보조 카드 표기|감정 기반 보조 구절 카드에는 상단에 **"감정 기반 보조 구절"** 라벨과, 필요 시 "감정 보정 +20%" 같은 배지를 붙입니다. 설명 영역에는 "당신이 표현한 '불안' 감정을 기준으로, '평강·돌봄' 주제를 더한 말씀입니다."처럼 **감정→주제 연결 근거**를 한 줄로 명시합니다.|

#### 4.3.5.3 상태도·이벤트 확장(감정 Opt-in)

감정 Opt-in과 관련된 상태·이벤트는 다음과 같이 확장 정의합니다.

|상태/이벤트 이름|설명|
|---|---|
|ResultShown(객관 Top-1)|객관 신호만으로 계산된 기본 Top-1 구절 카드가 처음 화면에 표시된 상태/이벤트입니다. 기존 ResultShown 이벤트에 해당하며, 감정 정보는 포함하지 않습니다.|
|EmotionOptIn|사용자가 "감정 더하기" 토글을 켜거나 감정 태그 입력 UI를 연 시점에 발생하는 이벤트입니다. 이 시점부터 감정 기반 모델이 활성화됩니다.|
|EmotionVerseShown|감정 정보를 반영해 산출된 보조 1절(또는 카드)이 실제로 화면에 노출된 시점에 발생하는 이벤트입니다. 기본 카드와는 별도의 슬롯/탭에서 표시됩니다.|

각 이벤트에는 공통적으로 `event_type`, `emotion_tags[]`, `is_optin:boolean` 등의 필드를 로그로 남겨, 7장·9장에서 정의하는 품질 지표(DST, 감정 관련 KPI)와 연결합니다.

### 4.3.6 입력·전처리 & 민감 라우팅(Perception 연결)

이 절은 4장에서 정의한 사용자 여정(J1·J2·J3)을 **입력→전처리→민감 라우팅→Perception→추천** 관점으로 한 줄 상태도로 요약한 것입니다. 5장(서비스 기능 구조)에서는 연결만 유지하고, 상세 파라미터·QA·스키마는 6장/7장/13장에 수록합니다.

#### 4.3.6.1 사용자 플로우(텍스트 상태도)

촬영/업로드

→ EXIF 확인(회전/시각)

→ 입력 표준화(리사이즈 + 레터박스)

→ 민감 라우팅(safety_flags)

→ Perception 실행(객체/장면/CLIP/OCR/선택:랜드마크)

→ 정규화 태그 패킹(JSON)

→ P1 상징 → P2 주제 → P3/S 보정 → 추천/재랭킹

→ Top-1(±보조) + Why 카드

→ (옵션) 사후 기록(감정/기도/메모)

---

## 4.4 사용자 상태(**State**) 관점 요약

4장은 **사용자 입장에서의 상태 정의**를 제공하고,  
이후 장들에서는 같은 상태를 더 기술적으로 풀어 설명합니다.

### 4.4.1 세션 상태(앱 안에서 한 번 사용할 때)

|상태|사용자 입장에서의 의미|내부 시스템 상태(요약)|
|---|---|---|
|Idle|앱을 켜두었으나 아직 아무 것도 하지 않은 상태|세션 시작, 이벤트 대기|
|Analyzing|사진을 찍고 분석이 진행 중인 짧은 대기 상태|온디바이스 태깅 + 서버 추천 파이프라인 실행|
|Recommended|1–2절과 설명 카드가 제시된 상태|후보 점수 계산·가이드라인 필터·Why 정리 완료|
|AfterLog|감정·기도·메모를 남기는 상태|PostAffection 저장, DST 계산|
|ReviewScheduled|1/3/7/30일 복습 일정이 자동으로 잡힌 상태|Review 큐 등록|
|Pinned(선택)|월드맵·갤러리에 퍼징된 핀·카드로 남겨진 상태|GeoPin 생성, 퍼징/지오해시 적용|

### 4.4.2 장기 관계 상태(사용자와 서비스의 관계)

|상태|정의|주요 전환 조건|
|---|---|---|
|New|최근 7일 이내 가입/첫 사용|첫 PhotoEvent 생성|
|Active|최근 30일 이내 3회 이상 사용(DST ≥ 3/4주)|4주 누적 DST 조건 만족|
|Deep|사진·말씀·감정 기록·복습 루프가 자연스러운 습관이 된 상태|DST 유지 + AffectSaved/ReviewOpened 비율 높음|
|Dormant|30일 이상 미사용|30일 이상 이벤트 없음|

---

## 4.5 이벤트·로그 관점에서 본 시나리오

### 4.5.1 핵심 이벤트 목록

|이벤트 이름|발생 시점|주요 필드(예시)|활용 목적|
|---|---|---|---|
|PhotoTaken|촬영 버튼을 눌러 사진이 캡처될 때|device_id, time, exif, sensitive_flags?|사용 패턴 분석, 성능 모니터링|
|PhotoSelected|갤러리에서 기존 사진을 선택할 때|source=gallery, time, exif|재활용 비율, 갤러리 사용 비율 파악|
|AnalyzeStarted|분석이 시작될 때|tags_count_predicted?|성능 모니터링, 실패 케이스 파악|
|AnalyzeCompleted|태깅/추천 후보 생성이 끝날 때|latency_ms, candidate_k, error?|성능·안정성 지표|
|ResultShown|최종 1–2절+설명 카드가 화면에 뜰 때|verse_id, why_score, safe_mode, flags|CTR, 구절 분포, 안전 모드 비율|
|AltVerseSelected|ALT-1 등 대체 구절이 선택될 때|original_verse_id, alt_verse_id|추천 품질 개선, 취향 분석|
|AffectSaved|감정 태그·메모·기도가 저장될 때|feeling_tags[], memo_len, prayed:boolean|DST, 습관화, 정성 데이터 분석|
|CardShared|이미지 카드가 외부 채널로 공유될 때|channel, success, anonymized_share_id|도달/바이럴, 채널별 효율|
|PinCreated|월드맵·갤러리에 핀이 생성될 때|geohash_precision, k_score, flags(sensitive, child)|월드맵 시각화, 안전성 검사|
|ReviewOpened|과거 카드/기록을 다시 열어볼 때|days_since_first, verse_id, time_on_card|복습 효과, 장기 영향 분석|

### 4.5.2 J1·J2·J3와 이벤트 매핑(요약)

|여정|핵심 이벤트 시퀀스(단순화)|
|---|---|
|J1|PhotoTaken → AnalyzeStarted/Completed → ResultShown → AffectSaved → ReviewScheduled/Opened|
|J2|PhotoTaken/Selected → AnalyzeCompleted → ResultShown → AltVerseSelected(옵션) → CardShared → AffectSaved(옵션)|
|J3|PhotoTaken → SensitiveFlagSet → AnalyzeCompleted(safe_mode) → ResultShown → VisibilitySet(private) → AffectSaved|

---

## 4.6 민감·위험 시나리오 & 보호 가이드라인(요약)

### 4.6.1 주요 민감 시나리오 유형

|코드|유형|예시 장면|기본 정책(요약)|
|---|---|---|---|
|S1|아동·청소년|아이 얼굴 클로즈업, 학교·놀이터 장면|자동 민감 플래그, 공유·월드맵 기본 OFF, 비공개 권고|
|S2|의료·병원|병실, 수액, 의료 장비, 휠체어, 응급실 표지 등|위로·평강 주제 우선, 심판·정죄 본문 차단, 비공개 기본값|
|S3|장례·죽음|영정사진, 관, 묘지, 장례식장 표지, 검은 상복 군중|위로·부활·소망 주제 우선, 공포·심판 단독 본문 차단, 비공개 권고|
|S4|자기위험·자해 암시|극도로 어두운 방, 위험한 물체, 자해 상흔 등(탐지 가능한 범위)|가능한 경우 도움 안내 문구(향후), 위로·도움 요청 본문 위주, 외부 공유 제한|
|S5|폭력·갈등·시위|격렬한 시위, 폭력 장면, 무기, 유혈 장면|평화·화해·지혜 본문 우선, 정치적/갈등 선동으로 오해될 수 있는 구절 차단|
|S6|과도한 노출·성적 이미지|비키니·수영복·야한 포즈 등(지역 문화와 규범 감안)|가능한 한 비추천/차단, 사용자가 선택해도 외부 공유·월드맵 반영 제한|

### 4.6.2 민감 시나리오에서의 사용자 경험 원칙

- **설명 문구의 톤**
    
    - "당신의 상황을 이해한다"는 전제 아래, **위로·소망·동행**의 메시지를 우선.
        
    - 단정적·예언적·정죄적 표현은 지양.
        
- **공개 범위**
    
    - 기본값은 **비공개** 또는 **극도로 제한된 공유 모드**.
        
    - 사용자가 명시적으로 바꾸지 않으면 외부 노출 없음.
        
- **반복 노출**
    
    - 동일 장소·상황 반복 시, 사용자 부담을 줄이는 방향으로 **알림·복습 빈도 조정**.
        

#### 4.6.3 UX/권한 정책(위치·가시성)

사진 기반 월드맵·지도 기능을 사용할 때의 **위치 권한 동의 플로우**와 **게시물 가시성 레벨**을 UX 관점에서 정리합니다. 4.2.2(장소·상황별 맥락), 4.3(여정), 4.6.1(민감 시나리오)에서 정의한 원칙을 실제 화면 동작으로 구체화한 규격입니다.

|단계|내용|
|---|---|
|동의|최초 온보딩 또는 첫 지도 진입 시, (1) 지도·월드맵 기능 소개 → (2) 위치 사용 목적 설명 → (3) 위치 정확도 선택(**정확≈10m / 대략≈1–3km / 비공개**) 순으로 안내하고, 사용자가 직접 선택하도록 구성합니다.|
|퀵 토글|촬영 화면 상단에 **GPS 아이콘**을 두고, 탭 시 위치 사용 On/Off를 즉시 전환, **롱프레스 시 상세 권한·정확도 설정 화면**으로 진입하여 언제든지 조정할 수 있게 합니다.|
|가시성|각 게시물마다 **나만 / 친구 / 공동체 / 전 세계(익명)** 4단계 가시성 옵션을 제공하며, 기본값은 상황별 정책(예: 민감 사진은 자동 비공개)을 따릅니다. 사용자는 게시 시점마다 다시 선택·재설정할 수 있습니다.|
|민감 보호|실내 주거·아동·의료·예배 장면이 감지될 경우, 기본 제안값을 **"비공개 + 위치 퍼징(대략 1–3km 단위)"** 조합으로 설정하고, 해당 설정이 적용되었음을 별도 안내 문구로 명시합니다.|

##### 4.6.3.1 **Visibility** 정책(상세) — 기본값/수동 확장/표시 규칙

|레벨|이름|의미(사용자 관점)|기본 노출 규칙|
|---|---|---|---|
|V1|나만(Private)|내 기록(묵상·기도·일기) 중심|기본값(권장)|
|V2|친구(Friends)|상호 승인된 지인에게만 노출|친구 관계가 있을 때만 선택 가능|
|V3|공동체(Community)|초대 기반 소그룹(셀/팀)|그룹 가입/초대가 있을 때만 선택 가능|
|V4|전 세계(World)|전 세계 탐색 피드에 노출|기본은 **익명 집계** 중심(개별 포스트는 제한적으로만)|

- **기본 원칙**: 사용자가 명시적으로 V2~V4를 선택하지 않는 한, 게시물은 V1로 저장됩니다.
- **확장 조건(권장)**: V4를 선택하려면 (1) 민감 시나리오 미해당, (2) 개인 식별 요소(얼굴/이름/번호판 등) 없음, (3) 위치는 **정밀 좌표 비노출**(대략/비공개) 조건을 만족해야 합니다.

##### 4.6.3.2 **RiskRegion**(비전도·민감 지역) 강화 정책 — 기본값 상향 제한

**RiskRegion**은 국가/권역 코드 기반의 운영 정책 테이블로 관리하며, 해당 지역에서는 기본값을 다음과 같이 강제/권장합니다.

|항목|RiskRegion 기본값|사용자 변경 가능 여부(권장)|
|---|---|---|
|게시물 가시성|V1(나만)|가능(단, 경고/재확인 필요)|
|월드맵 반영|0%(미반영)|불가 또는 강한 경고|
|외부 공유 버튼|기본 비활성|가능(명시적으로 켤 때만)|
|안전 UI|**위장 모드**/**패닉 버튼** 노출 강화|가능(사용자가 숨김 선택 가능)|

##### 4.6.3.3 민감 시나리오(S1~S6)에서의 SNS 제한 규칙(게시/지도/외부 공유)

|코드|유형|기본 게시|지도 반영|외부 공유|핵심 목적|
|---|---|---:|---:|---:|---|
|S1|아동·청소년|V1|0%|OFF|아동 안전|
|S2|의료·병원|V1|0%|제한|오해/2차 피해 방지|
|S3|장례·죽음|V1|0%|제한|추모 맥락 보호|
|S4|자기위험 암시|V1|0%|OFF|즉시 확산 방지|
|S5|폭력·갈등·시위|V1|0%|제한|선동/정치 오해 방지|
|S6|과도 노출/성적 이미지|V1|0%|OFF|부적절 확산 차단|

##### 4.6.3.4 안전 UI 구성 — **위장 모드** / **패닉 버튼** / “**익명 집계**만 공개”

- **위장 모드**: 앱 아이콘/이름/홈 UI를 일반 앱처럼 보이게 전환(표시 안전)
- **패닉 버튼**: 즉시 잠금/숨김(1–2초 내), 최근 화면 기록 최소화
- 전 세계 공개(V4)는 원칙적으로 **익명 집계**(국가/광역 타일·히트맵) 중심이며, 개별 포스트 노출은 제한적으로만 허용합니다.

---

#### 4.6.4 월드맵 시각화(레이어·필터)

이 절은 사진·말씀 카드가 **월드맵/지도**에서 어떻게 시각화되는지, 레이어 구조와 기본 필터 기준을 요약합니다. 4.4.1의 Pinned 상태, 4.5.1의 PinCreated 이벤트, 4.6.3의 권한 정책과 연결됩니다.

|레이어|설명|
|---|---|
|내 핀 / 친구 / 공동체 / 전 세계|지도 화면에서 **내가 남긴 핀, 친구/팔로우 관계의 핀, 소속 공동체(셀·교회 등)의 핀, 전 세계 익명 핀**을 각각 레이어로 구분해 토글 가능하게 합니다. 전 세계 레이어에서는 개별 핀 정보 대신, **아멘·저장 이벤트를 기반으로 한 익명 집계·히트맵** 위주로 노출합니다.|
|클러스터|확대/축소 단계에 따라 **지오해시·쿼드키 기반 클러스터링**을 적용하여, 여러 핀을 하나의 버블로 묶고, 대표 썸네일(사진)과 주요 주제 뱃지(예: 위로·감사·기도·고난)를 함께 표시합니다.|
|필터|상단 또는 사이드에 **기간(예: 최근 24시간/1주/1개월), 성경(구약/신약/특정 성경), 장면(실내/야외/자연/교회/병원 등), 반응(아멘 수/저장 수), 가시성(나만/친구/공동체/전 세계)** 필터를 제공하여, 월드맵을 분석·묵상·사역 준비용으로도 활용할 수 있게 합니다.|

##### 4.6.4.1 레이어 확장(추천) — “정밀 위치 없이도 탐색이 되게”

|추가 레이어/필터|설명|비고|
|---|---|---|
|**env_tags** 레이어|해안/산악/사막/열대/도시밀집 등 “환경” 기준으로 지도 타일·히트맵을 재구성|정밀 좌표 없이도 ‘비슷한 풍경’ 탐색 가능|
|**time_bucket** 레이어|새벽/낮/노을/밤/주말 등 시간대 기준 탐색|사용자 일상 리듬에 맞춘 묵상 탐색|
|주간 테마(ThemeTag)|매주 1개 **ThemeTag**를 기본 필터로 적용(피드·지도·갤러리 동기화)|운영/커뮤니티 활성화 장치|
|유사 지역 보기(S13)|**RegionBucket**+**env_tags**+**time_bucket** 유사성으로 “비슷한 나라/지역” 묶음 추천|공개는 익명 집계 우선|

- 전 세계 레이어는 “개별 핀”이 아니라 **익명 집계·히트맵**을 기본으로 유지합니다(안전/확장성 우선).

---

## 4.7 페르소나별 성공 정의 & KPI

### 4.7.1 페르소나별 "성공"의 정의

|ID|"이 사용자가 성공적으로 쓰고 있다"의 의미|
|---|---|
|P1|일상에서 주 3회 이상 사진→말씀→짧은 기록까지 자연스럽게 이어진다.|
|P2|주 1–2회 이상 사진+말씀 카드를 공유하고, 신학적으로 안전한 나눔이 지속된다.|
|P3|혼자서도 큰 어려움 없이 촬영·추천·기록까지 완료하고, 오조작·민원 없이 사용한다.|
|P4|월 1회 이상 소그룹/셀 모임에서 이 앱으로 만든 카드/사진을 활용한다.|
|P5|어려운 시기에 이 앱을 통해 위로·소망 본문을 여러 번 접하고, 나중에 치유 과정을 돌아볼 수 있다.|
|P6|선교/봉사 일정 중 네트워크 제약 속에서도 현장 사진+말씀 기록을 꾸준히 남긴다.|
|P7|사진·이미지 중심 인터랙션으로 말씀을 자주 접하고, DST가 꾸준히 유지된다.|

### 4.7.2 KPI 연동(예시)

|페르소나|핵심 KPI(샘플)|
|---|---|
|P1|주간 DST(≥3), AffectSaved 비율(≥50%), ReviewOpened 비율|
|P2|CardShared 횟수/주, 신학적 신고율(<1%), 공유 후 저장률|
|P3|완료 플로우 비율, 접근성 옵션 사용률, 오류·신고 건수|
|P4|모임 관련 폴더/카드 생성 수, 모임 반복 사용률|
|P5|민감 모드 사용 시 재방문률, HealingTimelineViewed(향후)|
|P6|오프라인팩 사용률, 해외/저대역 환경에서의 성공 플로우 비율|
|P7|주간 사용 빈도, 연속 사용 일수, 감정 태그 다양성|

---

## 4.8 용어 설명 인덱스(4장 관련)

| 용어                              | 설명                                                                                              |
| ------------------------------- | ----------------------------------------------------------------------------------------------- |
| **페르소나(Persona)**               | 대표 사용자 유형을 추상화한 가상의 인물. 실제 사용자의 패턴·니즈를 이해하기 위한 모델.                                              |
| **유저 여정(User Journey)**         | 사용자가 서비스를 사용하면서 거치는 단계·경험의 흐름. 시간 순서로 정리한 시나리오.                                                 |
| **터치포인트(Touchpoint)**           | 사용자가 서비스와 직접 상호작용하는 지점(화면, 버튼, 알림 등).                                                           |
| **세션(Session)**                 | 앱을 한 번 열고 닫을 때까지의 사용 단위. 한 세션 안에 여러 이벤트가 발생할 수 있음.                                              |
| **DST(Days Seen with Text)**    | 일정 기간 동안 사용자가 말씀 카드/본문을 실제로 본 날의 수. 습관화·리텐션을 측정하는 지표.                                           |
| **민감 시나리오(Sensitive Scenario)** | 아동, 의료, 장례, 폭력, 자기위험 등 심리적·윤리적 민감도가 높은 장면과 관련된 사용 상황.                                           |
| **GeoPin(지오핀)**                 | 좌표를 직접 저장하지 않고 퍼징/지오해시를 통해 만든 위치 기반 표시. 월드맵·갤러리에서 사용.                                           |
| **Safe Mode(안전 모드)**            | 민감 상황에서 위로·평강 중심의 구절만 노출하고, 공개·공유 범위를 자동으로 제한하는 동작 모드(개념).                                      |
| **Opt-in**                      | 사용자가 명시적으로 동의하거나 선택해야만 추가 기능이 활성화되는 정책 또는 동작 방식. 여기서는 감정 입력을 켠 경우에만 감정 기반 보조 구절을 노출하는 방식을 의미한다. |

# 5장. 전체 서비스 기능 구조(플로우·화면·기능 모듈)

이 장의 목적은 이전 장(4장)에서 정의한 **핵심 사용자·시나리오**를 실제 앱 안의 **플로우(Flow)**, **화면(Screen)**, **기능 모듈(Module)** 단위로 쪼개어 정리하는 것이다.

- 기획자에게는: "무슨 기능이 어디서 시작해서 어디로 끝나는지" 한 눈에 보이는 지도를 제공한다.
    
- 개발자에게는: 각 플로우가 **어떤 화면·이벤트·API**와 연결되는지 참조용 구조를 제공한다.
    
- 디자이너에게는: 어떤 화면이 필수이고, 어디까지가 v1 범위인지 기준을 제공한다.
    

---

## 5.1 전체 사용자 플로우 개요

### 5.1.1 플로우 목록(요약)

|Flow ID|이름|한 줄 요약|주요 페르소나|비고|
|---|---|---|---|---|
|F1|사진→말씀 추천 플로우|사진 촬영/선택 후, 1–2절 말씀과 설명 카드를 받는 기본 플로우|P1, P5, P7|전 기능의 중심 플로우|
|F2|사진→카드 생성·공유 플로우|사진과 말씀으로 카드 이미지를 만들고, 지인·SNS에 공유하는 플로우|P2, P4|공유·바이럴 중심|
|F3|사진→일기/기도 기록 플로우|사진과 말씀을 기반으로 감정 태그·메모·기도를 남기는 플로우|P1, P3, P5|개인 묵상 아카이브|
|F4|기록/일기→복습 플로우|과거 카드·기록을 다시 열어보고, 복습·치유 타임라인을 보는 플로우|P1, P5, P7|습관·치유 루프 핵심|
|F5|월드맵→글로벌 시각화 플로우|전 세계(또는 공동체)의 사진+말씀 핀을 월드맵으로 보는 플로우|P2, P4, P6|퍼징/지오해시 전제|
|F6|설정/권한·안전 모드 관리 플로우|알림·위치·프라이버시·민감 모드 등 앱 전반 설정을 관리하는 플로우|전 페르소나|안전·규제와 직결|

> v1 기준: **F1, F3, F4**를 최우선 구현 대상으로, F2는 최소 공유 템플릿, F5는 단순 "나의 월드맵" 중심, F6은 필수 설정만 제공하는 것을 가정한다.

### 5.1.2 플로우 vs 핵심 가치 매핑

|Flow ID|One Scene, One Verse|설명가능성(Why)|신학 안전|프라이버시|습관화(DST)|나눔·공동체|
|---|---|---|---|---|---|---|
|F1|★★☆|★★★|★★★|★★☆|★★☆|★☆☆|
|F2|★★☆|★★☆|★★☆|★☆☆|★★☆|★★★|
|F3|★★★|★★☆|★★★|★★★|★★★|★☆☆|
|F4|★★☆|★★☆|★★☆|★★☆|★★★|★★☆|
|F5|★★☆|★★☆|★★☆|★★☆|★★☆|★★★|
|F6|—|—|★★★|★★★|★★☆|★★☆|

---

## 5.2 플로우별 상세 정의

### 5.2.1 F1 — 사진→말씀 추천 플로우(기본 모드)

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S1|앱 실행 후 카메라 버튼 탭 또는 갤러리 버튼 탭|카메라 권한·갤러리 권한 체크, 미허용 시 권한 안내 팝업|Idle → Analyzing 준비||
|2|S1|사진 촬영 또는 사진 1장 선택|사진 로드, 임시 썸네일 생성, **PhotoTaken** 이벤트 로그|Analyzing|EXIF 일부 추출|
|3|S2|사용자는 로딩 인디케이터를 보며 1–2초 대기|온디바이스 태깅 + 서버 `/v1/analyze` 호출, 태그·컨텍스트 생성|Analyzing|네트워크 실패 시 폴백|
|4|S3|별도 조작 없이 결과 화면으로 자연 전환|`/v1/recommend` 호출, top1/alt1 구절 + Why 카드 구성|Recommended|safe_mode 여부 포함|
|5|S3|제시된 1–2절과 짧은 설명 카드 확인|**ResultShown** 이벤트 기록(why_score, latency 포함)|Recommended|민감 시 상단 안내 배너|
|6|S3|필요 시 ALT-1 탭|대체 구절로 교체, **AltVerseSelected** 이벤트 기록|Recommended|선택 히스토리 저장|
|7|S3→S4|"기록하기" 또는 감정 아이콘 버튼 탭|해당 PhotoEvent·Verse ID를 들고 사후 기록 화면으로 이동|AfterLog||

> **민감 모드**(병원·장례 등)는 동일 플로우 구조 안에서, safe_mode 플래그에 따라 노출 구절·톤·공개 기본값만 다르게 동작한다(4장 참조).

---

### 5.2.2 F2 — 사진→카드 생성·공유 플로우

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S1/S5|(기존 사진) 기록/갤러리에서 사진+말씀 카드 선택 혹은 새로 촬영|선택 카드/사진 로드, 이미 매칭된 Verse 사용 또는 새 추천 호출|Recommended||
|2|S6|"공유 카드 만들기" 버튼 탭|기본 카드 템플릿 로드(폰트·색·워터마크), 미리보기 생성|Recommended||
|3|S6|카드 내 텍스트 정렬(상/중/하), 서브 카피 온/오프 등 간단 옵션 조정|UI 옵션만 조정, 이미지 렌더링 파이프라인 준비|Recommended|고급 편집은 v1에서 제외(선택)|
|4|S6|"공유" 버튼 탭|시스템 공유 시트 호출(카카오톡·메신저·SNS·저장 등 채널 선택)|Recommended|CardShared 이벤트 기록|
|5|외부 앱|사용자가 채널 선택 후 전송|OS 공유 기능에 따라 카드 이미지 전송|—|앱 포그라운드 복귀 예상|
|6|S6|전송 후 앱으로 자동 복귀|공유 성공 여부 기록, 간단한 피드백 토스트 노출|Recommended|실패 시 재시도 버튼 제공(선택)|

---

### 5.2.3 F3 — 사진→일기/기도 기록 플로우

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S3|추천 결과 화면에서 "기록하기" 또는 감정 아이콘 탭|해당 PhotoEvent·Verse ID를 들고 사후 기록 화면으로 이동|AfterLog||
|2|S4|준비된 감정 태그(기쁨/감사/두려움/슬픔/지침 등) 중 선택|선택된 감정 태그를 UI에 반영, 임시 상태에 저장|AfterLog|복수 선택 허용 여부 정책 정의 필요|
|3|S4|메모 박스에 텍스트(메모·기도 한 줄) 입력|글자 수 제한 안내(예: 300자), 입력 중 자동 임시 저장|AfterLog|스크린리더 레이블 필수|
|4|S4|"저장" 버튼 탭|`/v1/affect-log` 호출, 감정 태그·메모·prayed 플래그 저장|AfterLog|AffectSaved 이벤트|
|5|S4→S5|저장 완료 후 "기록 보기" 또는 "닫기" 탭|기록/갤러리 화면으로 이동 또는 결과 화면으로 복귀|Idle|DST 업데이트, 복습 일정 자동 생성|

---

### 5.2.4 F4 — 기록/일기→복습 플로우

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S5|앱 하단 탭에서 "기록" 탭 선택|최근 PhotoEvent·Verse·Affect 로그 요약 리스트 조회|Idle → Idle|페이지네이션, 캐시 활용|
|2|S5|특정 카드(사진+말씀+감정 요약) 탭|해당 카드 상세 화면(S6) 오픈|Idle|ReviewOpened 이벤트|
|3|S6|과거의 감정/기도를 읽고, 필요 시 새 메모/감정 추가|기존 로그에 새로운 Affect 로그 append, 타임라인 UI 업데이트|AfterLog|HealingTimeline(개념) 반영|
|4|S6|좌·우 스와이프(이전/다음 카드)|동일 기간 또는 동일 주제의 카드로 이동|Idle|동일 주제 묶기 UX 고려|
|5|S6|상단 필터(기간/주제/장소) 조정|서버/로컬 필터링 적용, 리스트·타임라인 재정렬|Idle||

---

### 5.2.5 F5 — 월드맵→글로벌 시각화 플로우(요약)

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S7|하단 탭에서 "지도" 선택 또는 카드 상세에서 "지도 보기" 탭|`location` 권한 상태 확인, 미허용 시 안내 및 옵션 제공|Idle|좌표 미수집, 퍼징/지오해시 전제|
|2|S7|지도 초기 화면 확인(나의 핀 또는 전 세계 요약)|`/v1/map/tiles` 호출, geohash 기반 집계 핀·히트맵 데이터 수신|Idle|CDN/캐시 활용|
|3|S7|핀 클러스터 탭 또는 확대/축소|해당 영역 세부 핀 데이터 로드, 클러스터 분해|Idle|PinClicked 이벤트|
|4|S7|특정 핀 탭|썸네일·주제 뱃지·말씀 요약이 담긴 미니 카드 오버레이|Idle|민감 플래그 시 내용 일부 가리기|
|5|S7|"상세 보기" 탭|해당 카드 상세 화면(S6)로 이동 또는 읽기 전용 미니 상세 팝업|Idle|공개 범위에 따라 노출 제한|

> v1에서는 **"나의 핀" 중심 지도**와 간단한 히트맵만 제공하고, 글로벌 공개 레이어는 추후 버전에서 확장하는 것을 상정한다.

---

### 5.2.6 F6 — 설정/권한·안전 모드 관리 플로우

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S8|하단 또는 햄버거 메뉴에서 "설정" 진입|현재 설정(알림, 언어, 위치, 민감 모드, 데이터 사용 등) 로드|Idle||
|2|S8|위치 공유 레벨(비공개/대략/정확)에 대한 토글 변경|`/v1/settings/location` 호출, GeoPin 정책 업데이트|Idle|퍼징 단계·k-익명도 고려|
|3|S8|민감 모드(위기 상황에서 자동 비공개+위로만 노출) 활성화|로컬 플래그 저장, 추천 요청 시 safe_mode 우선 적용|Idle|기본값 ON 권장|
|4|S8|알림(복습 알림, 리마인더 알림) 설정|알림 채널·빈도 저장, OS 알림 채널 구성|Idle|DST 기반 스마트 알림(향후)|
|5|S8|데이터·프라이버시 정책 링크 확인|내장 웹뷰 또는 외부 브라우저로 정책 문서 열기|Idle|지역별 규제에 맞는 문구 필요|

---

### 5.2.7 F7 — 커뮤니티/SNS 탐색 플로우(월드맵·해시태그·피드)

이 플로우의 목적은 “찍고(개인 묵상)”에서 끝나지 않고, **풍경×말씀**이 쌓일수록 사용자가 자연스럽게 **탐색→저장→공유→재탐색**을 반복하도록 만드는 것입니다.  
단, 공개 확장보다 **안전(비전도/민감 지역)**을 우선하며, 월드맵·피드는 **정밀 위치 비의존** + **익명 집계** 중심으로 설계합니다.

#### (1) 핵심 탐색 축 3종(고정)

|탐색 축|설명|주요 화면|
|---|---|---|
|월드맵 축|국가/광역 단위 타일·집계로 “어디에서 어떤 말씀이 연결되는지”를 시각적으로 탐색|S7(월드맵), S13(유사 지역)|
|사물/장면 축|사진 분석 결과로 자동 생성되는 **ObjectTag**/**SceneTag** 기반 갤러리 탐색|S10(해시태그 갤러리)|
|말씀 축|**BookTag(66권)** / **ThemeTag(24주제)** 기반 갤러리 탐색|S11(말씀 갤러리), S12(피드)|

#### (2) 주간 활성화 장치(운영형)

- **주간 테마 지도**: 매주 1개의 **ThemeTag**를 메인으로 노출 → 피드·지도·갤러리의 기본 필터가 자동 적용
- **3컷 서사 카드(아침/낮/밤)**: 같은 날의 3장 기록을 묶어 “하루 묵상 흐름”으로 자동 구성(공유는 선택)
- **기도/아멘 집계 배지**: 개인 노출 없이 국가/주제별 집계 숫자만 제공(“기도 1,024” 같은 온도감)
- **라벨 품질 루프**: 오탐/미분류(Unknown) 카드에서 “태그 수정/숨김” 피드백을 받아 데이터 품질을 점진 개선(탐색 신뢰도↑)

#### (3) 플로우 단계(요약)

|단계|화면 ID|사용자 행동|시스템 동작(요약)|상태 전환|비고|
|---|---|---|---|---|---|
|1|S12|피드 진입(주간 테마/인기/최신)|주간 테마 기본 필터 로드, 노출 정책(**Visibility**) 적용|Browsing|공개는 **익명 집계** 우선|
|2|S10|해시태그(사물/장면) 선택|**ObjectTag**/**SceneTag**로 갤러리 쿼리, 정렬(저장/아멘/최근)|Browsing|민감 태그는 숨김/완화|
|3|S11|말씀 갤러리 진입(66권/주제)|**BookTag**/**ThemeTag**로 카드 목록 로드|Browsing|구절 표기는 최소화(공유 안전)|
|4|S7|월드맵 탐색(국가/광역 타일)|타일·히트맵(**익명 집계**) 로드, 레이어(**env_tags**/**time_bucket**) 적용|Browsing|정밀 좌표 미사용 기본|
|5|S13|유사 지역 보기(선택)|**RegionBucket**+**env_tags**+**time_bucket** 유사성으로 추천 묶음 생성|Browsing|개인 포스트 노출 제한 가능|
|6|S6|카드 상세 열기|카드 상세(사진+말씀+설명) 표시, 저장/공유/기도 버튼 제공|Viewing|공유 전 민감 점검|
|7|S6→외부|공유(선택)|공유 카드 렌더링 + **Visibility** 재확인|Shared|**RiskRegion**은 기본 OFF|

---

## 5.3 화면(Screen) 카탈로그

### 5.3.1 화면 목록

|Screen ID|이름|목적|주요 진입 경로|주요 이탈 경로|
|---|---|---|---|---|
|S1|홈/촬영 화면|사진 촬영·선택 진입점, 앱의 기본 허브|앱 실행, 하단 탭, 뒤로 가기|S2(분석), S3(결과), S5(기록)|
|S2|분석 중 오버레이|짧은 대기 시간 동안 진행 상태를 전달|S1(촬영/선택 후 자동)|S3(결과), 오류 토스트 후 S1|
|S3|추천 결과 화면|1–2절 말씀·설명 카드·ALT-1·행동 버튼 제공|S2, S5(기록 카드 재연결)|S4(기록), S6(공유), S1(홈)|
|S4|사후 기록 화면|감정 태그·메모·기도 입력, 기록 저장|S3(기록하기), S6(세부에서 기록)|S5(기록 리스트), S3(결과)|
|S5|기록/일기 리스트 화면|카드 타임라인·필터·검색 제공|하단 탭, 저장 후 자동 이동|S6(카드 상세), S1(홈)|
|S6|카드 상세·공유 화면|사진+말씀+감정·기도 타임라인·공유 버튼|S3, S5, S7(지도), 알림 딥링크|S5(리스트), S7(지도), 공유 시 외부 앱|
|S7|월드맵 화면|핀·히트맵·필터 제공, 글로벌/나의 핀 뷰어|하단 탭, S6(지도 보기)|S6(카드 상세), S1(홈)|
|S8|설정/권한·안전 모드 화면|알림, 언어, 위치, 민감 모드, 데이터·정책 링크 관리|햄버거 메뉴, 프로필 아이콘, 온보딩 끝|S1(홈)|
|S9|온보딩(선택)|핵심 가치·안전·프라이버시·기초 사용법 3–4장면 안내|최초 실행, 계정 전환|S1(홈), S8(설정)|

### 5.3.2 핵심 화면별 구성 요소

#### S1 — 홈/촬영 화면

- 상단
    
    - 앱 로고 또는 프로젝트 명칭
        
    - 우측 상단: 설정(톱니바퀴) 아이콘 → S8 이동
        
- 중앙
    
    - 카메라 뷰파인더(라이브 뷰)
        
    - "촬영" 원형 버튼
        
    - "갤러리에서 선택" 텍스트 버튼 또는 아이콘
        
- 하단
    
    - 탭바: 홈(촬영) / 기록 / 지도
        

#### S3 — 추천 결과 화면

- 상단
    
    - 책 이름·장·절(개역개정 우선, NIV 토글 옵션)
        
    - `safe_mode`일 경우, "민감 상황에서 위로와 평강을 위한 말씀" 안내 배너
        
- 본문 영역
    
    - 말씀 1–2절 텍스트(큰 글자)
        
    - Why 카드: "이 사진과 이 말씀이 연결된 이유"를 2–3줄로 요약
        
    - ALT-1 탭: 대체 구절 선택 탭
        
- 하단 버튼
    
    - "기록하기"(기본 강조)
        
    - "공유"(카드 생성)
        
    - "다시 찍기" 또는 "다른 사진 선택"
        

#### S4 — 사후 기록 화면

- 감정 태그 영역
    
    - 6~8개 감정 태그(기쁨, 감사, 평안, 두려움, 슬픔, 지침, 분노, 혼란 등)
        
    - 멀티 선택 가능 여부 옵션
        
- 메모/기도 영역
    
    - 멀티라인 텍스트 입력 박스
        
    - 글자 수 카운터
        
- 하단 버튼
    
    - "저장"(주 버튼)
        
    - "취소" 또는 "나중에"(부 버튼)
        

#### S5 — 기록/일기 리스트 화면

- 상단 필터
    
    - 기간(오늘/7일/30일/전체)
        
    - 감정(멀티 선택)
        
    - 주제(24 Topics 기반)
        
- 리스트/타임라인
    
    - 카드형 아이템: 썸네일 사진 + 대표 구절 + 감정 요약 + 날짜/시간
        
    - 스크롤 가능
        

#### S7 — 월드맵 화면(요약)

- 지도 영역
    
    - geohash 기반 핀/클러스터
        
    - 줌 인/아웃, 드래그
        
- 상단 필터
    
    - 범위(나의 핀/공동체/전 세계)
        
    - 기간(7일/30일/1년)
        
- 하단 카드
    
    - 선택한 핀의 썸네일·말씀·주제 뱃지 요약
        

---

#### S10 — 해시태그 갤러리(요약)

- 상단
    - 검색 + 태그 칩(**ObjectTag**/**SceneTag**)
    - 정렬(최근/저장/아멘) + 기간 필터
- 본문
    - 카드 그리드(사진 썸네일 + **ThemeTag** 배지 + 짧은 설명)
- 안전
    - 민감 태그는 자동 숨김/완화, 전 세계 공개는 **익명 집계** 우선

#### S11 — 말씀 갤러리(요약)

- 상단 탭
    - **BookTag(66권)** / **ThemeTag(24주제)**
- 본문
    - 카드 리스트/그리드(사진 + 말씀 + Why 카드 요약)
- 안전
    - 구절은 “전체 노출”보다 요약/발췌 중심(공유 안전)

#### S12 — 커뮤니티 피드(요약)

- 탭
    - 주간 테마 / 인기 / 최신
- 카드 단위
    - 썸네일 + **ThemeTag** + “기도/아멘” **익명 집계** 배지
- 안전
    - **Visibility**/**RiskRegion** 정책을 항상 우선 적용

#### S13 — 유사 지역 탐색(요약)

- 기준
    - **RegionBucket** + **env_tags** + **time_bucket** 유사성
- 결과
    - “비슷한 나라/지역” 리스트 → 선택 시 월드맵(S7)로 진입

## 5.4 기능 모듈·API·데이터와의 연결(요약)

이 절은 **플로우/화면**과 **기술 모듈**을 1:1로 매핑하는 "지도" 역할만 한다. 구체적인 필드·스키마는 데이터/백엔드 장에서 상세 정의한다.

### 5.4.1 플로우 vs API 매핑

|Flow ID|주요 호출 API|목적|비고|
|---|---|---|---|
|F1|`/v1/analyze`|사진 태깅·컨텍스트 생성|온디바이스 태깅과 하이브리드|
||`/v1/recommend`|구절 추천(1–2절 + Why 카드)|safe_mode 플래그 포함|
|F2|(내부 렌더 모듈)|카드 이미지 렌더링|서버·로컬 선택 가능(정책 결정 필요)|
|F3|`/v1/affect-log`|감정 태그·메모·기도 기록|DST 계산의 기초 데이터|
|F4|`/v1/history` (예시)|과거 카드 리스트·타임라인 조회|페이지네이션 필요|
|F5|`/v1/map/tiles`|지도 타일·핀 집계 데이터 조회|geohash 기반 퍼징/집계|
||`/v1/map/pin`|새 핀 생성(내 핀 업로드)|위치 권한·민감 정책 동시 체크|
|F6|`/v1/settings/location`|위치 공유 레벨 설정|비공개/대략/정확 옵션|
||`/v1/settings/notifications`|알림 채널·빈도 설정|OS 알림 채널과 연동|

> 실제 API 명칭은 백엔드 설계 단계에서 조정 가능하나, 플로우-API 관계는 위와 같은 구조를 유지한다.

### 5.4.2 화면 vs 데이터 엔티티 매핑

|Screen ID|주요 엔티티|설명|
|---|---|---|
|S1|**PhotoEvent**(초기), User|촬영/선택 시 PhotoEvent의 시드가 생성됨|
|S3|PhotoEvent, **Verse**, WhyLog|사진과 연결된 추천 구절·설명 카드 노출|
|S4|PhotoEvent, Verse, **PostAffection**|감정 태그·메모·기도 기록이 PostAffection으로 저장|
|S5|PhotoEvent, Verse, PostAffection|여러 엔티티를 조합해 "카드" 형태로 리스트 표시|
|S7|**GeoPin**, Verse|퍼징 좌표와 구절이 연결된 핀 집계 데이터 시각화|
|S8|UserSettings|위치·알림·언어·민감 모드 등의 개별 설정 값|

---

### 5.4.3 핵심 API 개요(사진→분석→추천→기록)

|No.|엔드포인트|역할|주요 필드 예시|
|--:|---|---|---|
|1|`POST /analyze-photo`|사진 분석(태그·OCR·맥락 추출)|`{tags, ocr, time_bucket, geo_ctx, privacy_flags}`|
|2|`POST /recommend`|말씀 추천(개역개정/NIV, 1–2절)|`{verses[≤2], reasons, themes, scores}`|
|3|`POST /post-affection`|사후 감정·기도·메모 기록|`{feelings?, memo?, prayed?}`|
|4|`GET /map/country-tiles`|국가/광역 단위 월드맵 집계 조회|`{country_code → aggregates}`|
|5|`POST /settings/location`|위치 설정(ON/OFF, 기본 공개 범위)|`{enabled, default_visibility}`|

### 5.4.4 Perception 상세 사양 분리 수록 안내(링크성 본문)

Perception(객체/장면/CLIP/OCR/컨텍스트/선택:랜드마크) 상세 파라미터·스키마·QA는 **6장(팀별 스펙) + 7장(QA) + 13장(부록 스키마)**에 수록한다.

5장에서는 **“Perception 결과(JSON) → P1 상징 → P2 주제 → P3/S 보정 → 재랭킹”** 연결만 유지한다.

## 5.5 에러·오프라인·접근성 UX 공통 규칙

### 5.5.1 네트워크·서버 오류 시

- F1/F3/F4/F5 플로우에서 API 호출 실패 시 공통 원칙
    
    - **원칙 1:** 이미 촬영한 사진·입력한 텍스트는 절대 유실되지 않도록 로컬 임시 저장
        
    - **원칙 2:** 기술적인 에러 메시지가 아닌, 사용자 입장에서 이해 가능한 한 줄 안내
        
    - **원칙 3:** 재시도 버튼과, 나중에 다시 시도할 수 있는 경로 제공
        

|코드/상황 예시|사용자 메시지(예시)|화면 동작|
|---|---|---|
|타임아웃/서버 오류|"일시적인 문제로 추천을 가져오지 못했습니다. 방금 찍은 사진은 안전하게 보관되었고, 나중에 다시 시도할 수 있어요."|결과 화면 대신 재시도 버튼이 있는 안내 카드 노출|
|오프라인(비행기 모드)|"현재는 인터넷 연결이 없어, 저장해 둔 기본 말씀 카드 중 하나를 먼저 보여드릴게요."|오프라인팩에서 대표 구절 카드 1장 노출|

### 5.5.2 권한 미허용 시

- 카메라·갤러리·위치 권한 거부 시, 다음 원칙 적용
    
    - 필요 최소 범위만 요청(예: 위치는 "항상"이 아니라 "앱 사용 중에만")
        
    - 거부 시에도 **기본 기능(사진→말씀 추천)**은 최대한 유지
        
    - 월드맵·지도 기능은 위치 없이도 "다른 사람들의 핀"을 볼 수 있도록 설계
        

### 5.5.3 접근성(Accessibility) 원칙 요약

- 모든 주요 버튼·아이콘에 **스크린리더 레이블** 제공(책·장·절 우선)
    
- 글자 크기 확대 시, 레이아웃이 깨지지 않고 재흐름되도록 설계
    
- 색상 대비(콘트라스트) 기준 준수, 색상만으로 상태를 구분하지 않음
    
- 손 떨림·노안 사용자를 위해, 버튼 사이 충분한 간격 확보
    

### 5.5.4 모션·애니메이션 규칙(권장)

|No|항목|규칙|완료 조건(DoD)|
|--:|---|---|---|
|1|전환(Transition)|페이드+슬라이드의 단순 조합만 사용|모든 주요 화면 전환이 동일 톤으로 통일|
|2|지속 시간(Duration)|0.25~0.35s 범위 내 고정|전환 속도 편차 없음|
|3|프레임/용량|10~15fps 수준, 파일 용량 최소화|저사양 단말에서 끊김 체감 최소|
|4|루프 제한|루프는 1~2회 후 정지(혹은 매우 느린 루프)|주의 분산 없이 메시지 카드 집중|
|5|Reduce Motion|설정에서 모션 감소 토글 제공|토글 ON 시 전환/루프가 정지 또는 축소|

### 5.5.5 내보내기(Export) 규칙(권장)

|No|항목|규칙|완료 조건(DoD)|
|--:|---|---|---|
|1|기본 사이즈|1080×1920 세로 비율(기본)|기기별 깨짐/잘림 없음|
|2|세이프 영역|상·하단 UI 오버레이 영역 회피|구절/Why 카드가 항상 가독|
|3|배경/가독|배경 위에 카드 레이어를 우선 배치|밝은/어두운 사진 모두 글자 선명|
|4|파일 포맷|PNG(정적), MP4(필요 시)|공유 앱 호환 문제 없음|
|5|파일 네이밍|`versecard_<date>_<lang>_<id>`|파일 관리/추적 가능|




## 5.6 용어 설명 인덱스(5장 관련)

|용어|설명|
|---|---|
|**플로우(Flow)**|사용자가 앱에서 어떤 목표를 이루기 위해 거치는 단계들의 흐름. "사진→말씀→기록"과 같은 일련의 경로.|
|**화면(Screen)**|사용자가 보는 하나의 UI 상태. 각 화면은 고유한 ID(S1, S2 …)로 관리.|
|**기능 모듈(Module)**|특정 기능을 담당하는 코드·로직 묶음. 예: 추천 모듈, 카드 렌더링 모듈, 지도 모듈 등.|
|**API**|앱과 서버가 데이터를 주고받기 위해 약속한 통신 규칙/주소. 예: `/v1/recommend`.|
|**엔드포인트(Endpoint)**|API가 실제로 호출되는 구체적인 URL 한 개. 예: `/v1/affect-log`.|
|**플래그(Flag)**|특정 상태를 표시하는 불리언(boolean) 값. 예: safe_mode=true/false.|
|**오프라인팩(Offline Pack)**|네트워크가 없을 때 사용하기 위해, 기기에 미리 저장해 두는 최소한의 말씀·설명·임베딩 묶음.|
|**GeoPin(지오핀)**|정확한 좌표 대신 퍼징/지오해시를 사용하여 지도에 표시하는 위치 정보 단위.|
|**UserSettings(사용자 설정)**|알림, 언어, 위치, 민감 모드 등 개인별 환경 설정을 저장하는 데이터 엔티티.|

## 5.7 교차 검증 템플릿(근거 표)

|항목/주장|내부 근거|외부 근거|검증 일자|검증자|비고|
|---|---|---|---|---|---|
|p95<800ms|성능 테스트 v1.0|—|2025-10-23|성능QA|안드로이드 Go 기준|
|민감 오탐 <2%|회귀 1,000장|—|2025-10-23|데이터QA|아동/의료/장례 포함|
|위치 비보관|데이터 설계서 v1.2|—|2025-10-28|||

이로써 5장은 "**무엇을 어디서 어떻게 구현할 것인가(플로우·화면·기능 구조)**"의 기준을 제공한다. 이후 장(6장 팀별 스펙, 7장 품질·지표 & QA 등)에서는 이 구조를 바탕으로 각 파트별 세부 요구사항을 풀어쓴다.

# 6장. 팀별 스펙(앱·백엔드·AI/ML·데이터·UX·신학·운영)

이 장의 목적은, 이 프로젝트를 실제로 구현할 때 각 팀(앱/클라이언트, 백엔드, AI/ML, 데이터/콘텐츠, UX/디자인, 신학/가이드라인, 운영/CS)이 **무엇을 어디까지 책임지는지**를 명확히 정의하는 것입니다.

- 개발팀 입장: “우리 팀의 최소/최대 범위는 어디까지인가?”
    
- 기획팀 입장: “어떤 산출물을 어느 팀에 요구해야 하는가?”
    
- 리더십/교회 파트너 입장: “신학·프라이버시·운영 책임은 어떻게 나뉘는가?”
    

---

## 6.1 사진→성경 말씀 추천 AI — 전체 파이프라인 개요

**목표**  
사진의 **피사체·장면·텍스트(OCR)·시간/절기**와 **국가/광역 단위 지리 맥락(좌표 없이)**만으로 개역개정·NIV에서 **1–2절**을 추천하고, **설명 카드**와 **사후 감정 기록**으로 묵상 루프를 완성합니다.

### 6.1.1 전체 흐름 요약

입력(이미지, EXIF, OCR) → **Perception** → **P1 상징** → **P2 신학 주제** → **P3/S 컨텍스트 보정** → **벡터 검색 Top-K/재랭킹** → **교리/톤 가이드라인 필터** → **Top-1 구절 + 이유 + 태그 + 점수** → **사후 감정/기도 기록**

점수 산식(개념):  
`Score = w_r·ImgRel + w_c·ContextFit + w_t·ThemeOrthodoxy − λ·Penalty`

---

## 6.2 팀별 역할 개요

### 6.2.1 팀 목록 및 핵심 미션

|팀 ID|팀 이름|핵심 미션 요약|
|---|---|---|
|T1|앱/클라이언트 팀|사진 촬영·선택부터 결과·기록·지도까지, **모든 사용 경험(UI/UX)과 로직** 구현|
|T2|백엔드/API 팀|추천·기록·지도·설정 등을 담당하는 **서버 API·인증·성능·로그** 전담|
|T3|AI/ML 팀|사진→태깅→주제→구절 추천까지의 **AI 파이프라인·모델·점수식·실험·배포** 관리|
|T4|데이터/콘텐츠 팀|24 주제·120 라벨·가중치 매트릭스·성경 본문 메타데이터 등 **데이터북 전체** 설계·검증·배포|
|T5|UX/디자인 팀|카드·화면·지도·타이포 등 **시각·인터랙션 언어 전체** 설계, 접근성·톤&매너 가이드 제작|
|T6|신학/가이드라인 팀|예장통합 교리 기준에 따른 **가이드라인·검수·예외 처리 룰·FAQ·교육 자료** 제작|
|T7|운영/CS·정책·월드맵 팀|모니터링·신고 처리·CS·운영 정책·월드맵 운영·통계 리포트 등 **실제 서비스 운영** 담당|

### 6.2.2 사용자 가치 ↔ 팀별 책임 매핑

|사용자 가치|T1 앱/클라|T2 백엔드|T3 AI/ML|T4 데이터|T5 UX|T6 신학|T7 운영|
|---|---|---|---|---|---|---|---|
|즉시성(속도)|UI 최적화, 오프라인팩|저지연 API|경량 모델|코어팩 구성|경량 화면|—|장애 대응|
|설명가능성(Why)|카드 UI|로그 노출|Why-score|근거 필드|시각화|검수|FAQ|
|신학 안전|경고/비공개 UX|금칙 조합|교리 룰 적용|정책 태그|워딩|최종 심사|신고 처리|
|프라이버시|권한 UX|최소 로그|민감 감쇠|좌표 비수집|아이콘|가이드|정책 집행|
|습관화·치유 루프|알림, 기록 화면|리뷰 큐|개인화(경량)|히스토리|뱃지|—|캠페인|
|글로벌·선교(월드맵)|지도 진입 UX|타일 API|—|GeoPin 집계|지도 뷰|지역 가이드|운영/파트너|

---

## 6.3 T1 — 앱/클라이언트 팀 스펙

### 6.3.1 범위(Scope)

- iOS/Android **네이티브 앱** 또는 하이브리드 클라이언트
    
- **카메라/갤러리 연동**, 사진 표시, 결과 카드 표시, 사후 기록 UI, 기록·지도 화면, 설정 화면
    
- **오프라인팩(Offline Pack)** 관리(다운로드·업데이트·삭제)
    
- **접근성(Accessibility)**, **로컬 암호화**, **권한(Permission) UX**, **알림(Notification)**
    

### 6.3.2 필수 기능 블록

|구분|상세 기능|의존 대상|
|---|---|---|
|카메라/갤러리|촬영·사진 선택, EXIF 일부 추출, 해상도 리사이즈|OS 권한, 디바이스 스펙|
|네트워크|`/v1/analyze`, `/v1/recommend`, `/v1/affect-log` 호출|T2 백엔드, T3 AI/ML|
|오프라인팩|코어 말씀팩 다운로드·저장·버전 체크, 비행 모드 시 폴백|T4 데이터, T3 AI/ML|
|기록·일기|감정 태그·메모 입력, 리스트·타임라인 표현|T2 백엔드, T4 데이터|
|지도 뷰|핀·히트맵 렌더링, 줌·팬, 필터 UI|T2 백엔드(Tiles), T4 데이터|
|설정|위치·알림·언어·민감 모드 설정 화면|T2 백엔드(UserSettings)|
|접근성·보안|스크린리더 레이블, 글자 크기 대응, 로컬 데이터 암호화|T5 UX, 보안 가이드|

### 6.3.3 산출물(Deliverables)

|산출물 ID|이름|내용 요약|
|---|---|---|
|A1|**화면 플로우 다이어그램**|S1~S9 화면 전환, 주요 버튼·상태 표시|
|A2|**스토리보드(와이어프레임)**|각 화면 UI 배치, 컴포넌트 설명|
|A3|**API 연동 스펙 문서(클라 관점)**|요청·응답 JSON 예시, 에러 코드 처리, 재시도 정책|
|A4|**오프라인팩 관리 모듈 설계서**|파일 구조, 버전 필드, 저장 위치, 업데이트 전략|
|A5|**접근성 체크리스트 결과**|스크린리더, 콘트라스트, 터치 영역 등 점검 결과|
|A6|**로컬 암호화/보안 설계 문서(요약)**|적용 데이터 범위, 키 관리 방식 요약|

### 6.3.4 품질 기준(앱 팀 관점)

|항목|목표|
|---|---|
|앱 시작 시간|콜드 스타트 < 3초(중급 기기 기준)|
|사진→결과 체감 속도|2초 이내(온라인), 1초 이내(오프라인팩)|
|크래시율|월 기준 < 0.5%|
|접근성|주요 플로우 100% 스크린리더 대응, 글자 크기 확대 시 레이아웃 유지|

---

## 6.4 T2 — 백엔드/API 팀 스펙

### 6.4.1 범위(Scope)

- `/v1` **API 게이트웨이** 설계·구현·운영
    
- **인증/인가**, **레이턴시 관리**, **캐싱**, **로그·모니터링**, **레이트 리밋**
    
- 추천, 기록, 지도, 설정, 신고, 통계용 API 전체
    

### 6.4.2 핵심 엔드포인트 요약

|메서드|경로|설명|주요 소비자|
|---|---|---|---|
|POST|`/v1/analyze`|사진 태깅·컨텍스트 생성|T1 앱, T3 AI/ML|
|POST|`/v1/recommend`|최종 1–2절 추천 + Why 카드|T1 앱|
|POST|`/v1/affect-log`|감정 태그·메모·기도 기록 저장|T1 앱|
|GET|`/v1/history`|과거 카드·기록 리스트/타임라인 조회|T1 앱, T7 운영|
|GET|`/v1/map/tiles`|지도 타일·핀 집계 데이터|T1 앱, 웹 콘솔|
|POST|`/v1/map/pin`|새 핀(GeoPin) 생성|T1 앱|
|POST|`/v1/settings/*`|위치·알림·언어·민감 모드 설정 업데이트|T1 앱|
|POST|`/v1/report`|부적절 내용 신고|T1 앱, 웹 콘솔|

### 6.4.3 비기능(Non-functional) 요구사항

|영역|요구사항|
|---|---|
|레이턴시|`/v1/recommend` p95 < 300ms(서버 내부 기준)|
|가용성|월 가용성 99.5% 이상|
|스케일링|일 최대 N만~N십만 요청까지 **오토스케일링**으로 대응 가능|
|관측성|**분산 트레이싱**, 요청별 **trace_id**, 주요 메트릭 대시보드 구성|
|보안|**TLS**, **인증 토큰**, **RBAC**, **입력 검증** 적용|

### 6.4.4 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|B1|**OpenAPI 명세서**|모든 엔드포인트, 요청/응답 스키마, 에러 코드 정의|
|B2|**아키텍처 다이어그램**|서비스·DB·캐시·큐 등 구성도|
|B3|**레이트 리밋/보안 정책 문서**|토큰/클라이언트별 제한, IP 제한 등|
|B4|**로그/모니터링 대시보드 정의**|수집 필드, 알람 임계치, 대시보드 예시|
|B5|**배포/롤백 전략(CI/CD) 문서**|블루그린/카나리, 롤백 시나리오, 마이그레이션 전략|

---

## 6.5 T3 — AI/ML 팀 스펙

### 6.5.1 범위(Scope)

- 사진→태깅→상징→주제→구절 추천까지의 **전체 파이프라인** 설계·구현·운영
    
- **모델 학습/검증/배포**, **점수식(Scoring)**, **실험(A/B 테스트)**
    
- **교리 가이드라인 룰 엔진** 연동, **Why-score** 계산·로그
    

### 6.5.2 파이프라인 구조(요약)

|단계|모듈|설명|예시 입력/출력(개념)|
|--:|---|---|---|
|1|지각(Perception)|**YOLO** 객체 탐지 + **CLIP**(이미지-텍스트) 임베딩으로 장면/상징/주제 힌트 추출, **OCR**, (선택) **랜드마크** 탐지|입력: 이미지 → 출력: 객체·장면 태그 + CLIP 유사 텍스트/임베딩 + OCR 텍스트 + 랜드마크 태그|
|2|상징 매핑(P1)|태그를 120 라벨·상징(Object/Symbol)으로 정규화|입력: 태그 → 출력: 상징 ID 목록|
|3|주제 매핑(P2)|상징을 24 주제(Topic)로 매핑, 가중치 합성|입력: 상징 → 출력: 주제 ID+스코어|
|4|벡터 검색|주제·컨텍스트 기반 **벡터 임베딩**으로 후보 구절 검색|입력: 쿼리 벡터 → 출력: 후보 Verse 리스트|
|5|재랭킹|**크로스 인코더**로 상위 후보 정밀 점수화|입력: 후보 리스트 → 출력: 점수 리스트|
|6|교리/톤 필터|예장통합 기준에 따라 과도한 심판·논쟁 구절 감쇠/차단|입력: 점수 리스트 → 출력: 필터링 리스트|
|7|다양성 선택|주제 과다 노출 방지를 위한 **다양성 선택(Diversity)**|입력: 필터된 리스트 → 출력: 최종 1–2절|
|8|설명 카드 생성|사진·주제·구절 기반 Why 카드(2–3문장) 생성|입력: 최종 구절 → 출력: 설명 텍스트|

### 6.5.3 모델·성능·품질 기준

|항목|기준/목표|
|---|---|
|태깅 정확도(F1)|0.82 이상(검증 세트 기준)|
|민감 장면 리콜|일반 정확도보다 우선, **민감 장면 놓침 최소화**|
|추천 품질|사용자 피드백·ALT-1 선택률 기준, 점진 개선 목표 설정|
|레이턴시|온디바이스 태깅 ~150ms, 전체 추천(서버 포함) ~800ms 이내|

### 6.5.4 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|C1|**파이프라인 다이어그램**|단계별 모듈·입출력·의존 관계|
|C2|**점수식 정의 문서**|이미지 관련도·컨텍스트 적합도·교리 정합도·페널티 등 수식|
|C3|**모델 카드(Model Card)**|모델 용도, 학습 데이터, 한계, 윤리적 고려|
|C4|**실험 로그·A/B 테스트 설계서**|실험 설계, 지표, 해석 방법|
|C5|**Why-score 로깅 스펙**|근거를 어떤 포맷으로 저장·노출할지 정의|
|C6|**오프라인팩 생성 스크립트/문서**|대표 구절 500~1000 선택 기준, 임베딩·주해 압축 방식|

### 6.5.5 Perception 모듈(의도 + 기능)

Perception은 사진을 **기계가 다룰 수 있는 신호**로 바꾸는 1차 처리입니다. 여기서 생성된 결과가 P1→P2→P3의 입력이 됩니다.

|No.|산출|설명/목표|
|--:|---|---|
|1|**객체탐지(Object Detection)**|**conf≥0.25**부터 후보 채택, **Top-15** 유지(**NMS** 적용)|
|2|**장면분류(Scene Classification)**|**Top-3** + prob 유지, prob<**0.15**는 **unknown** 처리|
|3|**OCR(텍스트)**|conf<**0.5** 제거, 길이<**2** 제거 후 토큰 정규화|
|4|POI/랜드마크 후보|OCR/지도 단서·(선택)랜드마크로 시설/장소 유형 추정(학교/병원/교회 등)|
|5|시각특징|밝기/대비/색온도/대칭/군중성 등 **시각 피처** 산출|
|6|성능|모바일 총 지연 ≤120ms(A14급 기준), **오프라인팩** 지원|
|7|프라이버시|기본 정책: **원본 미보관**, 위치는 **가명화(퍼징/지오해시)** 처리|

#### 6.5.5.1 Perception 상세 사양

##### 6.5.5.1.1 입력 & 전처리

|No.|단계|목적|핵심 규칙|출력|
|--:|---|---|---|---|
|1|**EXIF 정규화**|방향·시각 확보|**Orientation** 반영, 촬영 시각 추출|정방향 이미지, **time seed**|
|2|입력 표준화|추론 안정화|**리사이즈** + **레터박스(Letterbox)**(고정 규격)|정규화 프레임|
|3|민감 라우팅|개인정보 최소화|얼굴/아동/의료 → **safety_flags**만 유지|라우팅 플래그|

##### 6.5.5.1.2 객체탐지(Object Detection) — 시작 파라미터

|No.|항목|권장 시작점|설명|비고|
|--:|---|---|---|---|
|1|모델|경량 계열(나노/스몰)|온디바이스 지연/전력 친화|기기 급(저/중/고)별 교체 가능|
|2|**conf_thres**|0.25|낮으면 거짓양성↑, 높으면 누락↑|7장 스윕(그리드/랜덤)으로 확정|
|3|**iou_thres(NMS)**|0.70(시작)|중복 박스 제거 기준|혼잡 장면에 민감|
|4|**Top-K**|15|남길 최대 박스 수|과밀 장면 폭주 방지|
|5|평가 지표|**mAP/Precision/Recall/F1**|품질 점검 핵심|내부 벤치마크 기준 고정|

##### 6.5.5.1.3 장면분류(Scene Classification) — 출력 규칙

|No.|항목|설정|출력|규칙|
|--:|---|---|---|---|
|1|**Top-K**|3|scene Top-3 + prob|확률 내림차순 유지|
|2|확률 하한|0.15|**unknown** 처리|잡음 억제 목적|

##### 6.5.5.1.4 OCR(텍스트 검출·인식) — 파이프라인

|No.|구간|입력|출력|필터/규칙|
|--:|---|---|---|---|
|1|검출|이미지|텍스트 영역(box)[]|기울기/곡선 포함 가능|
|2|인식|크롭[]|{text, conf, lang?}[]|길이<2 제거, conf<0.5 제거|
|3|정규화|텍스트[]|정규화 OCR 토큰|후속(상징/지리/주제) 입력|


##### 6.5.5.1.4a CLIP(이미지-텍스트 임베딩) — 파이프라인(v1.6 고정)

> 목적: **객체/장면/OCR**이 놓치는 “추상적 분위기·상징·주제 힌트”를 저비용으로 보강합니다.  
> 기본 출력은 **임베딩 원본이 아니라 Top-N 힌트(텍스트 후보)**이며, 임베딩은 **옵션(양자화/해시)** 입니다.

|No.|구간|입력|출력|필터/규칙|
|--:|---|---|---|---|
|1|이미지 임베딩|이미지|`clip.image_emb_q8?`|기본 OFF(옵션). ON 시 **Q8 양자화** 후 반환(원본 float 미반환)|
|2|프롬프트 뱅크 스코어|img_emb + prompt_bank|`clip.hints[]`|**cosine 유사도** 계산, **Top-8**, **sim≥0.24**|
|3|정규화|hints[]|`tokens[]` 병합 후보|텍스트 표준화(**slug**), 중복 병합, 금칙어/PII 제거|

- prompt_bank(정본): `P1_SYMBOL(120) + P2_TOPIC(24) + PLACE_TYPE(30) + MOOD(12)`  
- `clip.hints.kind`: `symbol_hint | topic_hint | place_hint | mood_hint`  
- `clip.hints.score`: 0~1(정규화된 유사도)


##### 6.5.5.1.5 랜드마크/장소 후보(선택 모듈) — 최소 계약

|No.|항목|설정|출력|규칙|
|--:|---|---|---|---|
|1|**Top-K**|5|landmark_candidates[]|상위 5개만 유지|
|2|유사도 하한|**cosine≥0.30**|낮은 후보 제거|MVP에서는 OFF 가능|

##### 6.5.5.1.6 시간·절기 컨텍스트 — 보조 가중치 전용

|No.|필드|산출|예시|원칙|
|--:|---|---|---|---|
|1|**time_of_day**|EXIF 시각 구간화|morning/afternoon/evening/night|결정이 아닌 **재랭킹 보조**|
|2|**weekday**|EXIF→요일|Mon~Sun|동일|
|3|**season**|로캘·월 기반|spring/summer/fall/winter|동일|

##### 6.5.5.1.7 태그 정규화·스코어링·보관 규칙

|No.|항목|스코어|보관 규칙|비고|
|--:|---|---|---|---|
|1|ObjScore|탐지 conf|objects Top-15(conf>=0.25)|**NMS** 후 정렬|
|2|SceneScore|장면 prob|scenes Top-3(prob>=0.15)|미만은 **unknown**|
|3|OCRScore|인식 conf|ocr 잡음 필터 후 보관|길이<2, conf<0.5 제거|
|4|PlaceScore|임베딩 유사도|landmark Top-5(cos>=0.30)|선택 모듈|


##### 6.5.5.1.7a 통합 태그 스코어링(정식 점수식) — v1.6 고정

> 목적: **YOLO(conf)** / **장면(prob)** / **OCR(conf)** / **CLIP(sim)** 신호를 “하나의 태그 점수”로 합성해, 후속(P1/P2/검색/랭킹)이 **동일한 규칙**으로 처리되게 합니다.

**(1) 소스별 원점수 정의(0~1)**

|소스|원점수 필드|정의|
|---|---|---|
|Objects|`conf`|YOLO 계열 탐지 신뢰도(0~1)|
|Scenes|`prob`|장면 분류 확률(0~1)|
|OCR|`conf`|텍스트 인식 신뢰도(0~1)|
|CLIP|`sim01`|`sim01 = clamp((cos_sim + 1)/2, 0, 1)` *(또는 모델이 0~1을 직접 반환하면 그대로 사용)*|

**(2) 소스 가중치(시작값, 실험으로 고정)**

|가중치|값|의미|
|---|---:|---|
|`w_obj`|0.40|객체 신호|
|`w_scene`|0.20|장면 신호|
|`w_ocr`|0.20|문자 신호|
|`w_clip`|0.20|추상 힌트|

**(3) 동일 token 다중 소스 결합 점수(권장: Noisy-OR)**

- `score(token) = 1 - Π_s (1 - w_s * score_s(token))`  
- `s ∈ {obj, scene, ocr, clip}`  
- 장점: 한 소스가 강하면 빠르게 올라가고, 여러 소스가 겹치면 자연스럽게 강화되며, 결과 범위가 0~1로 안정적입니다.

**(4) Top-K/예산(정규화 토큰) — pack 단계 강제**

|예산 항목|값|설명|
|---|---:|---|
|`tokens_total_max`|32|최종 `perception.tokens` 최대 길이|
|`tokens_obj_max`|10|objects에서 기여 가능한 최대 토큰|
|`tokens_scene_max`|5|scenes에서 기여 가능한 최대 토큰|
|`tokens_ocr_max`|8|ocr에서 기여 가능한 최대 토큰|
|`tokens_clip_max`|9|clip_hints에서 기여 가능한 최대 토큰|

##### 6.5.5.1.7b 정규화 태그 스키마(Perception → P1 입력) — JSON I/O 계약(v1.6)

- **정식 Canonical**: `perception.tokens[]`  
- `objects/scenes/ocr/clip_hints`는 “근거/디버그/회귀” 목적의 원천 신호이며, **후속 단계는 tokens만으로도 동작 가능**해야 합니다(폴백 강제).

```json
{
  "perception": {
    "version": "1.6",
    "tokens": [
      {
        "token": "cross",
        "type": "object|scene|ocr|clip|place|mood",
        "source": "yolo|scene|ocr|clip",
        "score": 0.0,
        "meta": {
          "raw": "원문(옵션, PII 필터 후)",
          "box": [0, 0, 0, 0]
        }
      }
    ]
  }
}
```

- `token`: **slug**(소문자, 공백→`_`, 특수문자 제거)  
- `score`: 0~1  
- `meta.raw`: 기본 OFF(옵션). ON 시에도 **전화번호/이메일/차량번호/고유식별자 패턴은 마스킹/제거** 후 저장·전달



##### 6.5.5.1.7c P1/P2 폴백 강제 규칙(Perception.tokens-only) — 구현 **MUST**

- 목표: **Perception의 원천 신호(objects/scenes/ocr/clip_hints)가 누락**되더라도, `perception.tokens[]`만으로 **P1(상징) → P2(주제)**가 **100% 동작**해야 한다.
- 원칙: `perception.tokens[]`는 **정식 Canonical**이며, 원천 신호는 **근거/디버그/회귀** 목적 외에는 **의존 금지**다.

**강제 규칙(Implementation Contract)**

1. **P1 입력 고정:** P1은 `perception.tokens[]`만 입력으로 받는다.  
   - `perception.objects/scenes/ocr/clip_hints`는 **참조 금지**(있어도 무시), Trace 표시용으로만 사용 가능.
2. **P2 입력 고정:** P2는 **P1 결과(상징 후보 리스트)**만 입력으로 받는다.  
   - Perception 원천 신호를 **직접 참조 금지**.
3. **폴백(SAFE_BASELINE) 강제:** 아래 조건이면 추천은 안전 기본값으로 강제 전환한다.  
   - 조건: `tokens == []` **또는** `low_confidence == true` **또는** 유효 토큰 수가 3개 미만  
   - 상징: `symbol = "unknown"`  
   - 주제: `topic = "encouragement/peace"` (민감 주제/정죄/점괘성 경로 **차단**)  
   - UX: “재촬영/추가 맥락 입력” 안내 + **일반 묵상 구절 세트(룰셋으로 관리)**만 노출
4. **결정적 정렬(Deterministic Ordering):** 동일 `tokens` 입력이면 P1/P2 출력의 **순서까지 재현**되어야 한다.  
   - tie-breaker: `score desc → token asc`
5. **출력 예산(Budget) 고정:**  
   - P1 상징: Top-8 이내  
   - P2 주제: Top-5 이내  
   - (초과 입력은 6.5.5.1.7b의 `tokens_total_max=32` 규칙으로 사전 절단)


##### 6.5.5.1.8 온디바이스 최적화

|No.|기법|적용 원칙|기대 효과|도입 조건|
|--:|---|---|---|---|
|1|**PTQ(INT8 사후 양자화)**|우선 적용(기본값)|모델 크기·지연·전력 ↓|대부분의 온디바이스 모델에 1차 적용|
|2|**QAT(양자화 인지 학습)**|필요 시 단계적 도입|PTQ 대비 정확도 손실 ↓|PTQ로 정확도 손실이 문제일 때만|

##### 6.5.5.1.9 실패·에지 케이스 대책

|No.|상황|관찰|조치|추천 정책 영향|
|--:|---|---|---|---|
|1|역광/야간/블러|탐지·OCR 신뢰도↓|**low_confidence** 플래그|보수 추천(과단정 회피)|
|2|과밀 장면|박스 폭주/중복↑|**Top-K** 축소, **NMS** 조정|처리 지연/잡음↓|
|3|구조적 겹침|NMS 한계|**NMS-free** 후보 A/B(백로그)|장기 개선|

### 6.5.6 P1 상징 레이어 (기획 의도 + 기술 규칙)

Perception 신호(라벨/장면/**OCR**/**POI**)를 **성경적 상징(Symbol)** 단위로 표준화하고 가중치를 부여합니다. 출력은 P2의 핵심 피처입니다.

- **스코어링**: `P1_score = max(conf_i) × weight_sym`
    
- **충돌 처리**: `|Δscore| < τ(=0.08)` → 복합 상징 병치
    
- **정책**: 민감 상징은 **완화(Attenuate)** + 톤 가이드 통과 후 후보 유지
    

P1 상징 레이어 상위 그룹(코어 세트):

|No.|상위 그룹|코어 수|설명|
|--:|---|--:|---|
|1|**자연(지형·천체·기상)**|10|산/바다/하늘/비·눈 등 자연 신호 기반 상징|
|2|**생명(식물·동물·인간·표정)**|9|생명체/표정/인물 단서 기반 상징|
|3|**인공물(인간 제작물)**|10|건물/도구/사물 등 제작물 기반 상징|
|4|**인간 활동**|10|걷기/기도/모임 등 행위·상황 기반 상징|
|5|**공간·장면**|7|실내/야외/길/예배 공간 등 장면 기반 상징|

### 6.5.7 P2 신학적 주제 그래프(Theme Graph)

상징(P1)을 신학적 주제(P2)로 올려 “의미”를 안정적으로 표현하는 그래프 레이어입니다.

|No.|주제(코드)|대표 의미|
|--:|---|---|
|1|창조/섭리|시작·질서·유지|
|2|소명/순종|부르심·행동|
|3|죄/회개|자기성찰·돌이킴|
|4|구원/복음|은혜·새생명|
|5|사랑/긍휼|자비·돌봄|
|6|공의/정의|바름·질서|
|7|지혜/훈련|배움·규율|
|8|위로/평강|회복·쉼|
|9|인도/소망|길·빛|
|10|공동체/연합|교제·서로섬김|
|11|예배/감사|기억·찬양|
|12|선교/증언|보냄·나눔|

간선(상징↔주제) 가중치 예시:  
`SYM-해/빛 → 인도(+0.35), 소망(+0.30), 영광(+0.25)`

### 6.5.8 P3/S 컨텍스트 보정(보조 기준)

|No.|요소|예/가중|원칙|
|--:|---|---|---|
|1|시간/계절|새벽(+인도/소망), 밤(+보호/분별)|결정이 아닌 보조 가중치|
|2|장소/POI|병원(+위로/치유), 학교(+지혜/훈련)|동일|
|3|시각특징|어둑함(+보호/지혜), 역광(+소망)|동일|
|4|군중성/고립|군중(+연합/긍휼), 고립(+임재/위로)|동일|
|5|안전 플래그|아동/병상/재난 → 톤 완화|과단정 금지|

### 6.5.9 감정 Opt-in 모듈(난이도 & 개발비 관점)

#### 6.5.9.1 동시 개발 비용 관점

**120×24 체계**와 **감정 Opt-in 레이어**는, 초기에 **린(Lite) 레이어**로 시작하면 추가 비용이 비교적 낮습니다.

|구분|구성 요소|목적/효과|비용 영향|
|---|---|---|---|
|Lite(초기)|**UI 토글/칩**|결과 화면에서 감정 레이어를 명시적으로 분리/표시|낮음|
|Lite(초기)|**감정→주제 매핑 룰 테이블**(**YAML/JSON**)|감정 입력을 주제 가중치로 변환(운영 수정 가능)|낮음|
|Lite(초기)|**재랭킹 함수**|기존 점수에 보조 가중치를 가법으로 반영|낮음|
|Lite(초기)|**배지/설명 문구**|“감정 보정 적용”을 사용자에게 투명 고지|낮음|
|Lite(초기)|**이벤트 로그**|Opt-in율·효과 측정(대시보드 연동)|낮음|
|확장(비용↑)|**개인화 학습**|사용자별 가중치 학습으로 정밀도 향상|중~높음|
|확장(비용↑)|자동 감정 추정(텍스트/표정)|입력 없이 감정을 추론(정확도·윤리 이슈 동반)|높음|
|확장(비용↑)|감정 데이터 장기 저장·분석|동의 플로우·보관 정책·접근 통제 확장|중~높음|
|확장(비용↑)|자동 **A/B 테스트 인프라**|실험 설계·배포·지표 파이프라인 운영|높음|

#### 6.5.9.2 모듈별 난이도

|모듈|하는 일|난이도|비고|
|---|---|---|---|
|UI 토글/칩|결과 화면에서 감정 더하기 On/Off|Low|작은 컴포넌트, 프론트 중심|
|감정 룰 테이블|감정→주제 맵핑 정의|Low|YAML/JSON, 운영 수정 가능|
|재랭킹 함수|감정 보조 점수 계산·반영|Low|가법 레이어, 기존 스코어 활용|
|설명 배지|“감정 +20%” 등 표기|Low|신뢰·투명성 역할|
|로그/분석|Opt-in율·저장·공유 로깅|Low|이벤트 설계·대시보드 연동|
|개인정보/동의 UI|로컬 저장·삭제, 동기화 여부|Low~Mid|문구·설정 UX 포함|
|개인화|사용자별 가중치 학습|Mid~High|모델·튜닝 필요|
|자동 감정 추정|텍스트·표정 기반 추론|High|정확도·윤리 이슈|

---

## 6.6 T4 — 데이터/콘텐츠 팀 스펙

### 6.6.1 범위(Scope)

- 24 주제(Topics), 120 라벨(Objects), 라벨×주제 **가중치 매트릭스** 관리
    
- 개역개정·NIV 본문 **메타데이터**, 번역 키, 정책 태그
    
- **데이터 스키마 설계**, **ETL 파이프라인**, **버전 관리**, **검증(Validation)**
    

### 6.6.2 데이터북 구조(요약)

|파일/시트 이름|내용|
|---|---|
|`topics`|24 주제 ID·슬러그·이름·설명·정책 태그·앵커 구절 목록|
|`objects`|120 라벨 ID·이름·동의어·예시 이미지|
|`mapping_object_topic`|라벨×주제 가중치(객체·장면·OCR·랜드마크·페널티)|
|`policies`|Allow/Attenuate/Block 규칙, 패턴, 예시 구절|
|`verses_meta`|Verse ID·책·장·절·주제·상징·임베딩·주해 메타|

### 6.6.3 ETL·버전 관리 원칙

|원칙|규칙|
|---|---|
|포맷|모든 파일 **UTF-8**, 1행 헤더, **snake_case** 필드명|
|ID 정책|ID는 삭제하지 않고, 불가피하면 `deprecated=true` 플래그|
|버전|`v2.3.x` 형태의 **세미버전 규칙**|
|변경 관리|각 릴리즈마다 변경 요약(상위 20건)을 릴리즈 노트로 기록|

### 6.6.4 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|D1|**데이터 사전(Data Dictionary)**|모든 테이블·필드 정의, 값 범위|
|D2|**가중치 매트릭스 문서**|120×24 가중치 정의, 조정 원칙, 검증 규칙|
|D3|**ETL 파이프라인 스펙**|입력 소스, 변환 규칙, 검증 체크, 배포 타깃|
|D4|**데이터 품질 리포트(주기)**|누락·무결성·범위 오류·정책 위반 케이스 요약|
|D5|**오프라인팩 데이터 Export 스펙**|모바일용 JSON/바이너리 포맷 정의|

---

## 6.7 T5 — UX/디자인 팀 스펙

### 6.7.1 범위(Scope)

- 전체 UI/UX 흐름, **디자인 시스템**, 카드·지도·설정 화면 등 시각 표현과 인터랙션 패턴
    
- **톤&매너**, **워딩 가이드**, **아이콘·색상·타이포** 규칙
    
- **접근성 가이드라인** 제작 및 앱/웹 전반 적용
    

### 6.7.2 핵심 작업 영역

|영역|내용|
|---|---|
|카드 디자인|사진+말씀+설명+워터마크 레이아웃, 민감 장면 가리기 옵션|
|화면 레이아웃|S1~S9 레이아웃, 반응형 규칙, 가이드라인 텍스트 배치|
|지도 시각화|핀·클러스터·히트맵 스타일, 민감 핀 표시, 교회/선교지 뱃지|
|온보딩/설명 화면|One Scene, One Verse, 프라이버시·비상업성 메시지 시각화|
|감정 태그 UI|감정 아이콘·색상·텍스트, 선택/해제 상태 표현(장년층 가독성)|

### 6.7.3 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|E1|**디자인 시스템 문서(Style Guide)**|색상, 타이포, 컴포넌트, 간격, 아이콘 규칙|
|E2|**화면별 하이파이 시안(Hi-Fi)**|S1~S9 시안, 상태별(로딩/에러/빈 상태) 포함|
|E3|**톤&매너·워딩 가이드**|버튼/알림/에러/안내 문구 통일 규칙|
|E4|**접근성 가이드**|폰트 크기, 대비, 포커스 순서, 애니메이션 사용 기준|
|E5|**지도/카드 샘플 세트**|10~20개 대표 샘플(민감 포함), 개발·QA 참조용|

---

## 6.8 T6 — 신학/가이드라인 팀 스펙

### 6.8.1 범위(Scope)

- 예장통합 기준에 따른 **신학 가이드라인** 정리
    
- **Allow/Attenuate/Block 룰** 설계, 민감 시나리오별 추천 정책 정의
    
- 샘플 검수, 이슈 케이스 리뷰, FAQ·교육 자료 제작
    

### 6.8.2 가이드라인 구조

|항목|내용|
|---|---|
|기본 전제|구속사 중심, 본문 문맥 존중, 사랑/공의 균형, 공동체 윤리|
|허용(Allow)|일상·창조·감사·위로·소망 주제 본문 우선|
|완화(Attenuate)|심판·경고·논쟁 본문은 위로·소망과 함께, 톤 완화|
|차단(Block)|점괘·예언 오인·정치 선동·상업 조장·정죄성 강한 구절 단독 노출 차단|
|민감 시나리오별 정책|아동·의료·장례·자해·폭력·성적 이미지 등 상세 정책|

### 6.8.3 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|F1|**신학 가이드라인 백서**|전체 원칙·사례·판단 기준 정리|
|F2|**룰 테이블(Policies)**|Allow/Attenuate/Block 패턴·예시 구절·근거 텍스트|
|F3|**샘플 카드 리뷰 리포트**|대표 카드 신학적 적합성 평가|
|F4|**FAQ/교육 자료(리더용)**|교역자·소그룹 리더용 교육 자료|
|F5|**이슈 케이스 대응 매뉴얼**|논쟁 발생 시 커뮤니케이션·수정·가이드라인 업데이트 절차|

---

## 6.9 T7 — 운영/CS·정책·월드맵 팀 스펙

### 6.9.1 범위(Scope)

- 서비스 운영 모니터링, 신고·문의 처리(**CS**), 공지·캠페인 운영
    
- 월드맵 운영 정책, 민감/악용 핀 관리, 교회·선교 파트너 협력 창구
    
- 간단한 통계 리포트 제작 및 공유
    

### 6.9.2 핵심 업무

|영역|내용|
|---|---|
|모니터링|대시보드(레이턴시, 오류율, 신고율, 민감 케이스 등) 상시 모니터링|
|신고 처리|`/v1/report` 분류, 숨김·차단·피드백 조치|
|CS/문의 대응|이메일·폼·앱 내 문의 응대, FAQ 업데이트|
|월드맵 운영|민감 지역/장면 핀 검토, 교회·선교지 뱃지 승인, 악용 차단|
|정책 업데이트|프라이버시·데이터·신학 가이드라인 변경 시 공지/문서 업데이트|
|리포트|월간/분기별 KPI·사례·교훈 요약 리포트|

### 6.9.3 산출물

|산출물 ID|이름|내용 요약|
|---|---|---|
|G1|**운영 대시보드 정의서**|어떤 지표를 어떤 차트로, 어느 주기로 모니터링할지|
|G2|**신고 처리 플로우 차트**|신고 접수→분류→조치→회신 단계 절차|
|G3|**CS 응답 템플릿**|FAQ 표준 응답 문구 세트|
|G4|**월드맵 운영 정책 문서**|공개 범위, 민감 지역, 뱃지 정책|
|G5|**월간/분기 리포트 템플릿**|KPI·사례·개선점 요약 양식|

---

## 6.10 팀 간 인터페이스·핸드오프 규칙

### 6.10.1 산출물 핸드오프 예시

|From → To|산출물 ID|내용|시점(마일스톤)|
|---|---|---|---|
|T5 → T1|E1, E2|디자인 시스템, 화면 시안|개발 v1 시작 전|
|T4 → T3|D1, D2, D3|데이터 사전, 가중치 매트릭스, ETL 스펙|AI 파이프라인 구현 전|
|T3 → T2|C1, C2, C5|파이프라인, 점수식, Why 로그 스펙|추천 API 구현/최적화 전|
|T2 → T1|B1|OpenAPI 명세서|앱 API 연동 시작 전|
|T6 → T3|F1, F2|신학 가이드라인, 룰 테이블|교리 필터·민감 정책 구현 전|
|T7 → T6|G1, G2, G5|운영 지표, 신고 사례, 월간 리포트|분기별 가이드라인 업데이트 회의|

### 6.10.2 버전 호환·변경 관리 원칙

|원칙|내용|
|---|---|
|하위 호환 우선|API·스키마 변경은 기존 클라이언트가 깨지지 않도록 **필드 추가** 위주|
|Deprecation 프로세스|사용 중단 예정 필드는 최소 90일 전 `deprecated` 표시 및 공지|
|명시적 릴리즈 노트|배포 시 팀별 영향 요약(예: “AI 점수식 업데이트로 추천 톤 변화 가능”)|

---

## 6.11 개발 일정 & 산출물(티켓화)

|티켓|설명|담당|마감|
|---|---|---|---|
|LEGAL-01|개역개정/NIV 라이선스 LOI & 표기 가이드 수령|PM/법무|+7일|
|PERF-KIT-01|측정 SDK 내장 + 대상 단말 매트릭스|앱/ML|+7일|
|ML-QAT-01|500장 벤치셋(민감 30%) & 대시보드|ML/QA|+10일|
|SEC-DPIA-01|**DPIA**/**Threat Model**/**IR Runbook**|Sec/BE|+12일|
|DATA-VAL-01|24×120 매트릭스 자동검증 파이프라인|데이터|+10일|
|UX-A11Y-01|**WCAG AA** 체크 통과|UX/앱|+10일|

---

## 6.12 용어 설명 인덱스(6장 관련)

|용어|설명|
|---|---|
|**클라이언트(Client)**|사용자의 기기에서 동작하는 앱/프로그램. 여기서는 iOS/Android 앱을 의미합니다.|
|**백엔드(Backend)**|앱 뒤에서 돌아가는 서버 시스템 전체. API, DB, 캐시, 큐 등을 포함합니다.|
|**API**|앱과 서버가 데이터를 주고받기 위해 정한 규칙·주소 세트. 예: `/v1/recommend`|
|**엔드포인트(Endpoint)**|실제 호출 가능한 구체적인 API 주소 한 개. 예: `POST /v1/affect-log`|
|**레이턴시(Latency)**|요청을 보내고 응답을 받기까지 걸리는 시간(보통 ms).|
|**p95**|전체 요청의 95%가 해당 시간 이하에 끝난다는 기준(꼬리 지연 확인).|
|**오프라인팩(Offline Pack)**|네트워크 없이도 동작하도록 기기에 저장하는 최소 말씀·설명 데이터 묶음.|
|**벡터 임베딩(Vector Embedding)**|문장/구절을 숫자 벡터로 표현한 것(유사 의미는 가까운 벡터).|
|**벡터 검색(Vector Search)**|임베딩 벡터 거리로 유사 구절을 찾는 방식.|
|**크로스 인코더(Cross-Encoder)**|입력(사진·구절 쌍)을 함께 넣고 적합도 점수를 직접 계산하는 모델.|
|**점수식(Scoring Function)**|이미지 관련도/컨텍스트/교리 정합도 등을 합산해 최종 점수를 만드는 수식.|
|**A/B 테스트**|둘 이상의 버전을 나눠 배포해 어떤 버전이 더 좋은지 실험하는 방법.|
|**Why-score**|구절이 선택된 이유(근거 태그·주제·맥락)를 수치/텍스트로 기록한 값.|
|**NMS**|**Non-Maximum Suppression**. 중복 탐지 박스를 제거하는 후처리.|
|**IoU**|**Intersection over Union**. 박스 겹침 정도(0~1).|
|**mAP**|**mean Average Precision**. 탐지 성능의 대표 지표.|
|**Precision/Recall/F1**|정밀도/재현율/F1. 분류·탐지 성능 평가에 쓰는 지표.|
|**cosine 유사도**|벡터 간 각도로 유사도를 측정(0~1 근처).|
|**PTQ(INT8)**|학습 후 양자화(사후 양자화)로 모델을 INT8로 줄이는 기법.|
|**QAT**|양자화 인지 학습. PTQ 정확도 손실이 클 때 도입.|
|**ETL**|Extract-Transform-Load. 데이터 추출·변환·적재 과정 전체.|
|**데이터 사전(Data Dictionary)**|테이블/필드 의미와 값 범위를 정리한 문서.|
|**접근성(Accessibility)**|스크린리더·큰 글자 등 누구나 사용할 수 있게 하는 설계 원칙.|
|**Allow/Attenuate/Block**|허용/완화/차단 3단계 정책.|
|**GeoPin(지오핀)**|정확 좌표 대신 퍼징/지오해시 기반으로 지도에 표시하는 위치 단위.|
|**퍼징(Perturbation)**|위치를 일부러 흔들어(변형) 저장하는 프라이버시 기법.|
|**CI/CD**|지속적 통합/지속적 배포(또는 전달).|
|**블루그린 배포(Blue-Green)**|두 운영 환경을 번갈아 사용해 무중단 배포하는 방식.|
|**RBAC**|역할 기반 접근 제어. 역할에 따라 권한을 나누는 방식.|
|**DPIA**|개인정보 영향평가.|
|**Threat Model**|위협 모델링. 공격/오남용 시나리오를 체계적으로 정리.|
|**IR Runbook**|Incident Response Runbook. 사고 대응 절차서.|
|**WCAG AA**|웹 접근성 가이드라인의 AA 준수 수준.|

---

이 6장은 각 팀이 “무엇을, 어디까지, 어떤 기준으로” 책임지는지의 윤곽을 제공합니다. 이후 세부 설계/PRD는 이 스펙을 기준으로 팀별 문서로 확장합니다.

# 7장. 품질·지표 & QA(목표·테스트·심사)

이 장의 목적은 이 프로젝트가 **처음 출시 시점부터 장기 운영까지** 어떤 기준으로 품질을 관리하고, 무엇을 통과해야 "출시 가능" 판정을 받을 수 있는지를 명확히 정의하는 것이다.

- "기분"이 아니라 **수치와 체크리스트**로 품질을 관리한다.
    
- 각 지표는 **책임 팀(T1~T7)**과 연결된다.
    
- 최소 합격 기준(Release Gate)을 명시하여, 감성/사역형 프로젝트라도 **제품으로서의 완성도**를 확보한다.
    

---

## 7.1 품질 목표 개요

### 7.1.1 품질 축 정의

|품질 축|설명|대표 책임 팀|
|---|---|---|
|사용자 경험(UX)|빠른 응답, 명확한 화면, 쉬운 조작, 오류 시 친절한 안내|T1 앱, T5 UX|
|성능/안정성|응답 속도, 오류율, 서버 가용성, 앱 크래시율|T1 앱, T2 백엔드|
|AI 추천 품질|사진↔말씀 매칭 적합도, 민감 장면 탐지, Why 설명의 납득 가능성|T3 AI/ML, T4 데이터|
|신학·가이드라인|예장통합 교리 정합성, 민감 시나리오 처리, 논란 사례 비율|T6 신학|
|프라이버시·보안|좌표·얼굴·민감 정보 보호, 로그 최소화, 침해 사고 0건|T2 백엔드, T7 운영|
|접근성·포용성|시각/청각/연령에 관계없이 사용 가능 여부|T1 앱, T5 UX|
|운영·CS·신뢰|신고 처리 속도, CS 응답 품질, 공지·정책 변경의 투명성|T7 운영|

### 7.1.2 v1 출시 최소 합격 기준(요약)

|영역|최소 합격 기준(Release Gate)|
|---|---|
|응답 속도|사진→결과 화면까지 **p95 ≤ 800ms** (중급 단말·보통 네트워크 기준)|
|서버 가용성|최근 30일 **가용성 99.5% 이상**|
|앱 크래시율|최근 30일 **크래시율 ≤ 0.5%**|
|AI 태깅/추천 품질|내부 검증 세트 기준 **F1 ≥ 0.82**, 민감 장면 리콜 **우선 보장**|
|신학 검수|대표 시나리오 카드 **N개(예: 500장)**에 대한 신학 검수 통과(중대 이슈 0건)|
|프라이버시|좌표 원본 저장 0건, 민감 이미지 자동 비공개/경고 정책 100% 동작|
|접근성|핵심 플로우(사진→추천→기록) **스크린리더·글자 확대 100% 대응**|
|운영·신고|신고 처리 SLA(예: 심각 이슈 24시간 이내 1차 조치) 충족|

---

## 7.2 품질 지표 정의

### 7.2.1 핵심 KPI 세트(제품 관점)

|분류|지표 이름|정의|목표 값(초기)|책임 팀|
|---|---|---|---|---|
|사용/리텐션|**DAU**|하루 동안 앱을 한 번 이상 사용한 고유 사용자 수|론칭 후 3개월 내 안정 구간 도달(내부 목표치)|T1, T7|
||**DST**|1주일 중 앱 사용일 수(일/주)|평균 **3일/주 이상**|T1, T3, T7|
||기록률|추천 후 "기록하기" 버튼을 누른 비율|≥25%(최소), 30~50% 목표|T1, T5, T7|
|경험/전환|결과 확인률|사진 촬영/선택 후 결과 화면까지 도달한 비율|95% 이상|T1, T2|
||저장률|추천 카드 저장(즐겨찾기/일기)에 추가한 비율|20~30%|T1, T3|
||공유율|카드 공유(이미지/링크) 수행 비율|5~10% 이상|T1, T5, T7|
|성능/안정성|추천 응답 p95|사진→추천 완료까지 걸리는 시간(p95)|≤ 800ms(온·오프라인 혼합 기준)|T1, T2, T3|
||추천 오류율|`/v1/recommend` 실패 비율|≤ 1%|T2|
||앱 크래시율|세션 대비 크래시 발생 비율|≤ 0.5%|T1|
|AI 품질|태깅 F1|지각/태깅 단계의 F1 Score|≥ 0.82|T3, T4|
||민감 장면 리콜|민감 이미지(아동/의료/장례 등)를 올바르게 감지한 비율|90% 이상|T3, T4, T6|
||추천 수용률|Top-1 구절에 사용자 만족(내부 평가/외부 패널) 비율|80% 이상(파일럿 기준)|T3, T6|
|신학/가이드라인|신학 이슈 신고율|전체 추천 대비 신학적 이슈로 신고된 비율|1% 미만|T6, T7|
||검수 누락률|사전 정의된 민감 시나리오 중 가이드라인 위반 사례 비율|0건(중대 이슈), 경미 이슈도 1% 미만|T6|
|프라이버시/보안|위치 역추적 리스크 보고 건수|좌표·지도 관련 프라이버시 우려 제기 건수|0건(목표), 발생 시 즉시 개선|T2, T7|
||침해 사고 건수|보안 침해·데이터 유출 사고 건수|0건|T2, T7|
|운영/CS|신고 처리 SLA 준수율|신고 케이스 중 SLA 내 처리 비율|심각 이슈 24h 내 95% 이상|T7|
||CS 만족도|문의 응답에 대한 만족도(5점 척도)|평균 4점 이상|T7|

### 7.2.2 성능·인프라 지표(백엔드 관점)

|지표 이름|정의|목표 값(초기)|
|---|---|---|
|p95 응답 시간|전체 추천 요청 중 95%가 이 시간 이내에 끝나는 값|`/v1/recommend` p95 ≤ 300ms|
|p99 응답 시간|전체 요청 중 99%가 이 시간 이내|p99 ≤ 800ms|
|에러율|HTTP 5xx / 전체 요청 비율|≤ 0.5%|
|스로틀링 비율|레이트 리밋 초과로 인해 거절된 요청 비율|≤ 1% (악성 트래픽 제외)|
|가용성(Availability)|최근 30일 중 서비스가 정상 동작한 시간 비율|≥ 99.5%|

### 7.2.3 AI 품질 지표(세부)

|구분|지표 이름|설명|목표|
|---|---|---|---|
|태깅/지각|객체 F1|사진 속 객체 인식 F1|≥ 0.82|
||민감 객체 리콜|아동·의료·장례·노출 등 민감 객체 탐지 리콜|≥ 0.9|
|주제 매핑|주제 매핑 정확도|24 주제에 대한 라벨 정확도(내부 평가 세트 기준)|≥ 0.8|
|추천/랭킹|Top-1 적합률|내부/외부 평가자 기준, Top-1 구절이 "적절 이상" 평가 비율|≥ 0.8|
||ALT-1 유용률|대체 구절이 실제로 "더 낫다"고 평가된 비율|≥ 0.3|
|설명(Why 카드)|설명 이해도 설문 점수|사용자가 Why 카드를 보고 "이유를 이해했다"고 응답한 비율|≥ 80%|

### 7.2.4 신학·가이드라인 지표(세부)

|지표 이름|정의|목표|
|---|---|---|
|민감 시나리오 적합률|미리 정의된 민감 시나리오(병원, 장례 등)에 대해 가이드라인에 맞게 추천된 비율|100%에 가깝게 유지(중대 이슈 0건)|
|신학 논쟁 케이스 비율|외부 커뮤니티·교회에서 논쟁이 발생한 카드/전체 카드 비율|극소(예: 0.1% 미만)|
|가이드라인 반영 속도|이슈 발생 후 가이드라인 업데이트까지 걸린 평균 시간|1~2주 이내|

### 7.2.5 프라이버시·보안 지표

|지표 이름|정의|목표|
|---|---|---|
|좌표 저장 건수|원본 좌표가 저장된 이벤트 수|0건(정책상 금지)|
|민감 이미지 오탐률|민감하지 않은 이미지를 민감으로 잘못 분류한 비율|2% 이하(사용성 저하 방지)|
|민감 이미지 미탐률|민감 이미지를 민감으로 탐지하지 못한 비율|2% 이하(보안·안전 우선)|
|보안 사고 건수|실제 데이터 유출·침해 사고 건수|0건|
|약관/정책 위반 리포트 수|사용자가 제기한 정책·약관 관련 불만·우려 보고 건수|0건을 목표, 발생 시 신속 조치|

### 7.2.6 3-7-8) KPI/지표(지도·권한·신앙 반응 요약)

|분류|지표|
|---|---|
|권한/위치|Opt-in율(주/월)|
|맵 상호작용|핀 클릭률·체류시간|
|신앙 반응|저장/기도/아멘 비율|
|품질|신고/숨김율·오해율|
|회상|지역/절기 트렌드 리콜|

### 7.2.7 품질/지표 & QA(테스트·성능 매트릭스 요약)

|카테고리|지표/테스트|목표치|도구/방법|합격 기준|
|---|---|---|---|---|
|성능|앱 p95 총응답|<800ms|계측 SDK/프로파일러|3일 연속 충족|
|모델|온디바이스 추론|<150ms|trace+배치|95% 케이스 충족|
|안전|민감 오탐률|<2%|1k 민감셋|상향 회귀 無|
|신학|오해/신고율|<1%|라운드 리뷰|시즌 평균 달성|
|개인정보|좌표 저장|0건|DB 감사|월간 무결점|
|사용성|사후 기록률|≥25%|이벤트 로그|주간 유지|
|오프라인|코어팩 커버리지|≥80%|오프라인팩 매핑 점검+샘플링|월간 유지|

### 7.2.8 120×24 매칭 품질·운영 KPI

> ※ 이 절은 **120×24 상징→주제 매핑 모듈**에 특화된 품질·운영 기준을 정의하며, 9장 AI 로직·데이터 구조와 연동된다.

#### 7.2.8.1 품질 KPI (매칭 레벨)

|지표|정의|목표치|
|---|---|---|
|Coverage@3|사진 1장에 대해 Top-3 후보 중 신학 검수 기준 "적절" 이상 구절이 1개 이상 포함된 비율|≥ 95%|
|UnknownRate|전체 세션 중 Unknown(미지 라벨)로 떨어지는 비율|≤ 5%|
|p95 응답 시간(라이트)|온디바이스 + 라이트 서버 모드 기준 전체 파이프라인 응답 시간(p95)|< 800ms|

#### 7.2.8.2 운영 KPI (감정 레이어 포함)

|지표|정의|모니터링 포인트|
|---|---|---|
|감정 보조 사용률(Opt-in율)|감정 보조(사후 감정 레이어)를 활성화한 세션 비율|사진 기반 추천 대비 감정 입력 선택 비율|
|감정 보조 세션 저장/공유 비율|감정 보조를 사용한 세션에서 카드 저장·공유가 일어난 비율|감정 레이어가 실제 신앙 반응(저장/기도/아멘/공유)에 미치는 영향 추적|
|감정 보조 세션 신학 검수 합격률|감정 보정이 적용된 카드에 대한 신학 검수 합격 비율|감정 톤 보정 후에도 교리·균형이 유지되는지 확인|

#### 7.2.8.3 120×24 모듈 릴리스 체크리스트(요약)

- 사진→120 태깅 150ms 이내, 전체 추천 p95 < 800ms(라이트 모드 기준).
    
- Coverage@3 ≥ 95%, UnknownRate ≤ 5%.
    
- 객관 Top-1 1절 즉시 노출(설명 1–2문장 제공).
    
- 감정 더하기는 **사후 Opt-in(기본 OFF)** 으로 동작.
    
- 감정 보조 카드는 **분리 카드/배지**로 노출하고, 점수는 **객관 신호와 혼합 금지**(예외 로직은 별도 문서화).
    
- 가이드라인 룰 적용 및 라벨링·감정 보정 근거(Why) 필드 로깅.
    
- Unknown 상위 20개를 월 1회 검토하여 **신규 라벨 승격 또는 규칙 보정**.
    
- KPI 대시보드에서 Coverage / Unknown / 속도 / 신학 심사 / 감정 보조 사용률을 상시 모니터링.
    

---

## 7.3 QA 전략 및 테스트 범위

### 7.3.1 테스트 레벨 정의

|레벨|내용|예시 범위|
|---|---|---|
|**단위 테스트**|함수/클래스 단위의 최소 기능 검증|태깅 모듈, 점수식 계산, API 핸들러 등|
|**통합 테스트**|여러 모듈이 함께 동작할 때의 상호작용 검증|앱→API→AI 파이프라인→DB|
|**엔드투엔드(E2E)**|실제 사용자 플로우 기준 전체 시나리오 검증|사진 촬영→추천→기록→복습→지도|
|**회귀 테스트**|기존 기능이 새로운 변경 이후에도 깨지지 않았는지 반복 검증|신규 모델 배포, API 스키마 변경 후 전체 플로우 재검증|
|**신학 리뷰 테스트**|대표 사진·추천 카드에 대해 신학적 검수 수행|민감 시나리오 모음, 일반·논쟁 가능 구절 포함|
|**접근성 테스트**|스크린리더, 글자 확대, 색상 대비 등 접근성 항목 검증|핵심 화면 S1~S6|
|**현지화 테스트**|언어·날짜·서식·번역·폰트 깨짐 여부 검증|한국어·영어·추가 언어(향후)|

### 7.3.2 지원 디바이스·환경 매트릭스

|축|범위 예시|
|---|---|
|OS|Android (최소 지원 버전 지정) / iOS (최소 지원 버전 지정)|
|단말 성능|저사양(보급형) / 중급 / 고급|
|네트워크|3G / 4G / 5G / Wi-Fi / 오프라인(비행기 모드)|

### 7.3.3 Perception 튜닝·회귀 QA(phase4 v1.1)

> ※ 이 절은 **Perception(객체/장면/CLIP/OCR)** 단계의 파라미터 튜닝과 **회귀(Regression) QA**를 표준화합니다. 목표는 "정확도"만 올리는 것이 아니라, **지연·배터리·오탐/누락**까지 함께 관리하는 것입니다.

#### 7.3.3.1 임계값 스윕 그리드(**TSV**)

|No|파라미터|범위|스텝|선택 기준|메모|
|--:|---|---|---|---|---|
|1|**conf_thres**|0.20~0.35|0.05|**F1** 최대점|거짓양성/누락 균형|
|2|**iou_thres(NMS)**|0.45~0.70|0.05|**F1** 최대점|중복/누락 균형|
|3|Scene prob 하한|0.10~0.25|0.05|Top-1 오류 vs **Unknown** 균형|잡음 제어|
|4|**OCR conf** 하한|0.3~0.7|0.1|라인 정확도 vs 노이즈율|스크립트별 분리|

#### 7.3.3.2 운영 KPI(Perception 관점)(**TSV**)

|No|KPI|정의|목표(권장)|비고|
|--:|---|---|---|---|
|1|**mAP**|**IoU** 기준 평균정확도|기기급별 베이스라인 초과|내부 기준 고정|
|2|**F1**|정밀도·재현율 조화평균|베이스라인 대비 +Δ 유지|스윕 결과로 고정|
|3|장면 Top-1|장면 분류 Top-1 정확도|내부 벤치마크 충족|장면별 분해|
|4|OCR 라인 정확도|GT 기준 라인 정확도|스크립트별 목표치 설정|폰트/기기 영향|
|5|평균 지연|ms/사진|기기급별 목표치 충족|예: 온디바이스 <300ms(내부 목표)|
|6|배터리 소모|%/100장|테스트 프로파일 기준|회귀 감시|

#### 7.3.3.3 회귀 QA 세트(필수 장면 리스트)

- 공항 / 관광지 / 국경 / 지하철 / 병원 / 예배 / 가정 / 학교 / 항구 / 산악 / 야간 / 역광 / 과밀(군중)
    

#### 7.3.3.4 **DoD**(완료 조건) — Perception

- **Top-K**/필터/스키마 밸리데이션 100% 통과.
    
- **low_confidence** 케이스에서 민감 주제 오탐/과단정이 증가하지 않음.
    
- 분기 스윕 후 **conf/iou/하한 값 고정**(버전 태깅).
    

#### 7.3.3.5 **DoD**(완료 조건) — P1/P2 폴백(Perception.tokens-only)

- `perception.version="1.6"` + `perception.tokens[]`만 포함된 입력(원천 필드 삭제)으로도, **P1→P2→추천 플로우가 오류 없이 끝까지 완료**된다.
- 7.4.1.1의 폴백 테스트 케이스(**P12-FB-*** )가 **PASS=100%**다.
- `tokens == []` / `low_confidence` 상황에서 **민감 주제(정죄/심판 단독/점괘성) 오탐**이 증가하지 않는다(보수 추천/차단 유지).
- 동일 tokens 입력의 P1/P2 결과가 **순서까지 재현**된다(결정적 정렬).



---

## 7.4 테스트 케이스 매트릭스

### 7.4.1 기능/플로우 테스트 케이스

|분류|TC ID|시나리오|기대 결과(AC)|
|---|---|---|---|
|기능 기본|**APP-REC-001**|사진 촬영→추천|800ms 내 결과+Why 카드 노출, 오류 없이 완료|
||**APP-ALT-002**|ALT-1 선택|대체 구절로 교체, 선택 로그 기록, 신학 기준 내에서만 대체|
|기록/일기|**APP-LOG-010**|추천 후 "기록하기"→감정 태그+메모 입력|`/v1/affect-log` 성공, 기록 리스트에 즉시 반영|
|복습|**APP-REV-020**|기록 리스트에서 과거 카드 열기|과거 사진·말씀·감정·기도 타임라인 정상 표시|
|지도|**APP-MAP-030**|지도 탭 진입, 핀 탭|퍼징된 위치만 표시, 민감 핀은 가려진 상태 또는 요약만 표시|

### 7.4.1.1 P1/P2 폴백(Perception.tokens-only) 테스트 케이스

|분류|TC ID|시나리오(입력)|기대 결과(AC)|
|---|---|---|---|
|폴백 핵심|**P12-FB-001**|`perception.tokens`만 제공(objects/scenes/ocr/clip_hints 제거)|P1/P2 산출 성공, 추천 정상 완료, Trace에 **tokens 기반 근거만** 기록|
||**P12-FB-002**|`perception.tokens=[]` (빈 배열)|**SAFE_BASELINE** 적용, 민감 주제 차단, 재촬영/맥락 입력 안내 노출|
||**P12-FB-003**|`low_confidence=true` + 유효 tokens 3개 이하|보수 추천/SAFE_BASELINE 전환, 과단정 문구 금지(Explain 카드에 “확신 낮음” 표시)|
|결정성|**P12-FB-010**|동일 `tokens` 입력을 10회 반복|P1/P2 결과의 **순서 동일**, 점수는 허용 오차 ±0.001 이내|
|예산|**P12-FB-020**|tokens 80개 입력(잡음/악성)|`tokens_total_max=32`로 절단(pack) 후 정상 동작, P1 Top-8 / P2 Top-5 준수|
|프라이버시|**P12-FB-030**|`tokens.meta.raw`에 이메일/전화 패턴 포함|`meta.raw` 마스킹/제거, 저장/전달 금지 준수(로그/Trace 포함)|



### 7.4.2 안전·프라이버시·신학 테스트 케이스

|분류|TC ID|시나리오|기대 결과(AC)|
|---|---|---|---|
|안전(민감)|**SAFE-SEN-010**|병원 대기실 사진(OCR: "응급") 업로드|위로·평강 중심 구절 추천, 공개 기본값 비공개, 안내 배너 노출|
||**SAFE-CHILD-020**|아동 얼굴이 포함된 실내 사진|공유 시 모자이크 권고 또는 비공개 기본값, 민감 안내 표시|
|프라이버시|**PRIV-GEO-030**|위치 권한 ON(대략), 사진 여러 장 업로드|GeoPin은 퍼징 좌표만 저장, 반복되는 집/직장 위치는 자동 비공개 처리|
||**PRIV-FACE-040**|얼굴 인식 불가한 풍경 사진|얼굴 관련 민감 정책은 적용되지 않음|
|신학/가이드라인|**THEO-STRICT-050**|논쟁 가능 구절(심판·경고)을 포함한 사진 시나리오 테스트|완화(Attenuate) 정책에 따라 위로/회개의 균형 잡힌 구절+설명 카드 제시|

### 7.4.3 접근성·오프라인·현지화 테스트 케이스

|분류|TC ID|시나리오|기대 결과(AC)|
|---|---|---|---|
|접근성|**ACC-READ-060**|스크린리더 켜고 핵심 플로우 전체 수행|모든 버튼·텍스트가 올바른 레이블로 읽히고, 포커스 순서가 논리적일 것|
||**ACC-FONT-070**|시스템 글자 크기 최대 확대 후 사용|레이아웃 깨짐 없이 재흐름, 중요 정보가 잘리지 않을 것|
|오프라인|**OFF-PACK-080**|비행기 모드에서 사진→추천 시도|오프라인팩 기반 대표 구절 카드 1장 이상 제공, 이후 재연결 시 서버 동기화|
|현지화|**L10N-KOEN-090**|한국어↔영어 UI 언어 전환|모든 핵심 텍스트가 깨짐 없이 표기, 날짜/형식도 언어에 맞게 표시|

### 7.4.4 실전 예시 & 응용 시나리오 (개역개정 본문 포함)

> ※ 이 표는 실제 서비스 설계 겸 **QA용 기준 시나리오**로 사용하며, 본문 텍스트는 별도 데이터 소스에서 관리한다.

|장면|탐지/문맥|추천 구절(개역개정)|대안|설명|
|---|---|---|---|---|
|해질녘 산 능선|산/노을/주일 저녁|이사야 40:31|시편 121:1–2|창조/새 힘 주제 정합|
|병원 대기|의료/OCR ‘응급’|빌립보서 4:6–7|시편 34:18|불안 상황에서 평강/가까이 하심|
|교회 첨탑|랜드마크/주일 오전|시편 122:1|히브리서 10:24–25|예배·공동체 중심 메시지|
|새벽 바다|바다/새벽/고요|예레미야애가 3:22–23|시편 130:5|새로움→소망/신실|
|도심 우천|도시/비/야간|마태복음 11:28|—|지친 일상 속 쉼의 초대|

### 7.4.5 실전 시뮬레이션 (상징/주제 매핑, 개역개정 본문 포함)

> ※ 이 시뮬레이션은 **상징/주제 레이어가 실제 구절 선택에 어떻게 반영되는지**를 보여주는 골든 세트 예시이며, QA 시 기준 카드로 활용한다.

|ID|장면|상징/주제|최종 구절(개역개정 요약)|대안(참고)|설명(Why)|
|---|---|---|---|---|---|
|SIM-01|타이어 4본 (실내 정비소 바닥)|바퀴 → 여정·출입·보호|시편 121:7–8 — "여호와께서 너를 모든 환난에서 보호하시며… 너의 출입을… 지키시리로다."|잠언 3:5–6|‘바퀴/출입’ 상징과 ‘보호/인도’ 주제가 자연스럽게 연결되는지 검증|
|SIM-02|아기와 청포도 (가정 실내)|아기 → 자녀·축복, 포도 → 열매·풍성|시편 127:3 — "보라 자식들은 여호와의 기업이요 태의 열매는 그의 상급이로다."|시편 34:8, 요한복음 15:5(맥락 카드)|‘자녀=기업, 열매=상급’ 상징 연결과 위로·감사의 정서가 과도한 번영 이미지 없이 유지되는지|
|SIM-03|고층 빌딩 (도시 구조물)|건축 → 세움·계획·하나님 의지|시편 127:1 — "여호와께서 집을 세우지 아니하시면…"|잠언 16:3, 고린도전서 3:11|‘인간의 성취’ 장면에서 하나님 의지를 상기시키는 균형 잡힌 메시지인지|

---

## 7.5 자동화 테스트·도구 전략

### 7.5.1 자동화 범위

|영역|자동화 수준|
|---|---|
|API 테스트|핵심 엔드포인트 `/v1/*`에 대해 **스모크 테스트**·회귀 테스트 자동화|
|앱 UI 테스트|핵심 플로우(F1, F3, F4)에 대해 최소 1종의 **E2E 스크립트** 자동화|
|AI 품질 회귀 테스트|주기적으로 동일 검증 세트에 대해 추천 결과 비교, 품질 저하 감지|

### 7.5.2 CI/CD 연계

- 모든 코드 변경은 **Pull Request** 단계에서 기본 단위 테스트·API 스모크 테스트를 통과해야 한다.
    
- **메인 브랜치**에 머지되면 자동으로 테스트 환경에 배포되고, E2E 스크립트를 수행한다.
    
- v1.0 이후, 추천 모델·가중치 변경은 **별도 플래그**를 통해 A/B 테스트 형태로 점진 적용한다.
    

---

## 7.6 릴리즈 심사·롤아웃 전략

### 7.6.1 릴리즈 체크리스트(요약)

|항목|질문|기준|
|---|---|---|
|성능|p95, p99, 에러율이 목표 범위 안에 있는가?|7.2 기준 충족|
|AI 품질|태깅/추천/민감 탐지 지표가 저하되지 않았는가?|7.2.3·7.2.8 기준(Coverage@3, UnknownRate 등) 충족, 이전 버전 대비 악화 없음|
|신학 가이드라인|새로운 이슈 케이스가 적절히 반영되었는가?|F1, F2 문서 업데이트 완료|
|프라이버시·보안|좌표·민감 데이터 정책에 변경 사항이 없는가?|정책 위반 가능성 0, 로그 최소화 유지|
|접근성|신규/변경 화면이 접근성 가이드를 준수하는가?|E4 가이드 체크리스트 통과|
|운영 준비|운영팀이 변경사항을 이해했고, FAQ·공지 준비를 마쳤는가?|G1, G3, G5 업데이트 완료|

### 7.6.2 롤아웃 방식

- v1.0: 제한된 국가·그룹(파일럿 교회/공동체) 대상 **소프트 런칭**
    
- v1.x: 점진적 확장, 새로운 국가·언어는 별도의 체크리스트를 통해 개별 심사
    
- 중요 변경(예: 추천 로직 대규모 변경)은 **Canary Release**로 일부 유저에게만 우선 적용 후 전체 확대
    

### 7.6.3 운영 KPI & 버전 로드맵

**핵심 운영 KPI(행동 지표)**

- 구절 확인율: 사진 촬영/선택 후 실제 구절 영역을 확인한 세션 비율
    
- 설명 읽기율: Why/설명 카드를 일정 시간 이상 노출·스크롤한 비율
    
- 기록율: 추천 카드에 대해 기록(감정/메모/기도)까지 완료한 비율
    
- 7·21일 유지: 첫 사용 후 7일·21일 시점에 재방문한 사용자 비율 (D7/D21 Retention)
    
- 공유율: 카드 공유(이미지/링크) 수행 비율
    
- 설명 수용성: Why/설명 카드에 대한 사용자 평가(예: 4점 척도) 평균 **≥ 3.6/4.0** 유지
    

**버전별 로드맵(예시)**

|No.|버전|핵심 추가 내용|
|--:|---|---|
|1|MVP|사진→Top-1 추천, 이유 카드, 기록 기능, 오프라인팩(Top-500)|
|2|v1.1|공유 카드, 연속 스탬프(스트릭), NIV 병기|
|3|v1.2|주제 탐험(테마 묵상), 오프라인팩 2k 확장|

> 위 로드맵은 7.2의 KPI와 연결되어, 각 버전에서 어떤 행동 지표를 우선 개선할지(예: v1.1 공유율·스트릭 유지, v1.2 주제 탐험 체류시간 등)를 운영팀이 명확히 설정하는 기준으로 사용한다.


### 7.6.4 런칭 게이트(KPI) — 운영 최소 기준(권장)

|No|KPI|정의|목표(권장)|미달 시 조치|
|--:|---|---|---|---|
|1|TTI(Time To Interact)|첫 화면에서 사용자가 조작 가능해지기까지 시간|< 200ms|초기 리소스/애니메이션 축소, 프리로드 최소화|
|2|민감 상황 오탐|민감 라우팅이 불필요하게 발동된 비율|<= 2%|safety_flags 임계값 조정, 예외 룰 보강|
|3|반복 구절 비율|최근 N회 추천에서 동일/유사 구절 반복 비율|< 8%|중복 페널티 강화, 후보 풀 확장|
|4|Unknown 비율|Top-1 대신 Unknown/일반 구절로 떨어진 비율|<= 15%|라벨/주제 매핑 보강, fallback 규칙 개선|
|5|p95 End-to-End|앱 입력~추천 완료까지 p95 지연|< 800ms|캐시/압축/모델 경량화, 서버 경로 최적화|

---

## 7.7 이슈·버그 관리 및 심각도 기준

### 7.7.1 심각도(Severity) 등급

|등급|설명|예시|대응 목표(SLA)|
|---|---|---|---|
|S1|치명적(Critical) — 사용 불가, 심각한 신학·프라이버시 문제|서버 다운, 잘못된 신학 메시지 대량 노출, 민감 데이터 유출 등|긴급 대응, 즉시 핫픽스(수 시간 내)|
|S2|높음(High) — 핵심 기능 심각 장애|사진→추천 실패율 급증, 민감 이미지 탐지 미동작 등|24시간 내 패치 계획 수립·배포|
|S3|중간(Medium) — 기능은 동작하나 사용성/품질 저하|특정 단말에서 UI 깨짐, 응답 속도 일시적 저하 등|1~2주 내 정기 배포에 포함|
|S4|낮음(Low) — 경미한 버그/오타/개선 제안|문구 오타, 정렬 이슈, 경계 케이스 UI 문제 등|이후 스프린트에서 순차 처리|

### 7.7.2 이슈 처리 플로우

1. **발견**: 사용자 신고, 내부 QA, 모니터링 알람으로 이슈 인지
    
2. **분류**: S1~S4 심각도 분류 + 원인 영역(앱/백엔드/AI/데이터/신학/운영)
    
3. **임시 조치**: 필요 시 기능 제한(예: 특정 추천 비활성화), 공지 게시
    
4. **영구 조치**: 코드 수정, 데이터 수정, 가이드라인 업데이트
    
5. **회고**: 재발 방지 대책 수립(체크리스트 보완, 테스트 케이스 추가 등)
    

---

## 7.8 부작용·필터링·QA·CS 관리 — 정책 구현 기술 궤적 (v1.0)

⏰ 기준 시각: 2026-01-05(월) 10:02 (KST)

> 목표: “사진→말씀” 서비스에서 발생 가능한 **부작용(리스크 변수)**를 **종류별로 전수 분류**하고, 이를 **필터링·남용방지·QA·CS**로 **운영 가능한 기술 시스템**으로 구현한다.

- 이 장은 “아이디어”가 아니라 **구현 체크리스트**입니다. 각 항목은 **(1) 무엇을 막는지 → (2) 어떤 신호로 판단하는지 → (3) 시스템이 무엇을 해야 하는지**를 한 세트로 정리합니다.
- 원칙: (a) 민감 리스크는 **보수적으로(ATTENUATE/BLOCK 우선)** 처리, (b) 남용은 **자동 제한**으로 비용 상한선 확보, (c) CS는 **Trace 기반 근거**로 일관 처리, (d) 룰은 **테이블**로 버전 관리해 “운영자가 즉시 고칠 수 있게” 합니다.
- 이 장의 핵심 산출물 4종: **정책 룰 테이블**, **safety_flags 표준**, **회귀 QA 세트**, **운영 콘솔/대시보드**

---

### 7.8.0 목차
1. 리스크(변수) 분류 체계(정본)
2. 정책 엔진(Allow/Attenuate/Block) 기술 설계
3. 안전/민감 감지(safety_flags) 기술 설계
4. 남용·비용 폭주 방지(쿼터/레이트리밋/신뢰등급)
5. 프라이버시·데이터 보관·감사(Explain Trace)
6. QA(회귀) 체계: 안전/신학/성능/오프라인
7. CS/신고·차단·이의제기 운영 시스템
8. 모니터링·경보·개선 루프
9. 구현 궤적(로드맵): MVP→확장
10. 용어 인덱스

---

### 7.8.1 리스크(변수) 분류 체계(정본)
#### 7.8.1.1 4대 리스크 축(운영 관점)
| 축 | 리스크 범주 | 최우선 방어 방식(결론) |
|---|---|---|
| A | 콘텐츠 안전 | **safety_flags** 기반 정책 라우팅 + **Allow/Attenuate/Block** |
| B | 남용/비용 | **Rate limiting** + 일/시간 **쿼터** + **신뢰등급(Tier)** |
| C | 품질/신학 | **Out of Scope** 금지 규칙 + **Explain Trace** 감사 가능 |
| D | 프라이버시/법무 | 정밀 좌표 미수집 + 민감정보 최소 저장 + **DPIA** |

#### 7.8.1.2 변수군(원인 기반) 정리
| 변수군 | 구성 요소(정본) | 관리 주체 |
|---|---|---|
| 입력(사진/텍스트) | 음란/아동/폭력/혐오/정치갈등, OCR 민감정보, 정밀 위치 | Safety/Policy |
| 모델/추론 | 객체·장면·OCR 오탐/누락, 불확실도 증가, 모델 버전 차이 | AI/QA |
| 출력(말씀/설명) | 오해 유발, 점괘 오인, 심판 단독, 과도한 단정 | 신학/QA |
| 트래픽/비용 | 봇, 대량 업로드, 재시도 폭탄, 캐시 미적중 | 백엔드/인프라 |
| 프라이버시 | 좌표·얼굴·문서·아동 관련, 공유 확산, 데이터 장기 보관 | 보안/운영 |
| 운영/CS | 신고 폭주, 악성 신고, 이의제기, 정책 일관성 깨짐 | 운영/CS |

---

### 7.8.2 정책 엔진(Allow/Attenuate/Block) 기술 설계
#### 7.8.2.1 정책 결정을 “단일 함수”로 고정
정책 엔진은 모든 요청에 대해 아래 출력을 반드시 생성한다.

- 왜 “단일 함수”인가?
  - 정책이 여러 곳에 흩어지면(클라/서버/AI 모듈 각각 따로) **같은 사진인데 사람마다 다른 결과**가 나올 수 있습니다.
  - 정책 결정을 한 곳(Policy Engine)에서만 하도록 고정하면, QA/CS가 **trace_id 하나로** 재현하고 설명할 수 있습니다.
- 설계 원칙: 정책 함수는 가능한 한 **순수 결정(Pure Decision)**에 가깝게 설계합니다.
  - 입력(신호)만 주면 결과(decision)가 재현되도록.
  - 단, 남용 방지를 위한 “actions(쿼터 차감/티어 변경)” 같은 부수 효과는 분리해 기록합니다.
- 운영 체크: 정책 변경은 코드 배포가 아니라 **룰 테이블 업데이트**(핫픽스)로 대응 가능해야 합니다.

##### 7.8.2.1.1 정책 출력(정본)
| 필드 | 타입 | 의미 |
|---|---|---|
| decision | enum | **ALLOW / ATTENUATE / BLOCK** |
| reasons | string[] | 결정 사유 코드(정책 감사용) |
| ui_mode | enum | normal / private_suggested / share_disabled |
| content_scope | enum | standard / comfort_only / restricted |
| logging_level | enum | minimal / standard / enhanced |
| actions | object | 쿼터 차감, 티어 조정, 추가 검증 요구 등 |

#### 7.8.2.2 결정 입력(정본)
- 정책 입력은 “모델 결과”만이 아니라 **운영 신호(남용/프라이버시/오프라인)**까지 포함합니다.
- 가장 중요한 규칙: 입력은 반드시 **정규화(Normalization)** 되어야 합니다.
  - OCR 텍스트: 공백/특수문자/대소문자 정규화 후 패턴 검출
  - 위치: “정밀 좌표 저장 금지” 원칙에 맞춰 **정밀도 레벨만 남기고 값은 폐기**
  - 요청 빈도: 사용자 단위로 집계해 **분당/시간당 윈도우**로 입력

| 입력 그룹 | 필드(대표) | 설명 |
|---|---|---|
| Perception | tags, scene, ocr_text, confidence | 온디바이스/엣지 추론 결과 |
| Safety | safety_flags, safety_score | 민감 유형/강도 |
| Abuse | user_id, ip_hash, device_id_hash, req_rate | 남용 관련 메트릭 |
| Privacy | geo_precision, pii_detected | 위치/민감정보 감지 |
| Context | network_state, offline_capable | 오프라인/온라인 상태 |
| Output | verse_candidates, rerank_score | 결과 후보/점수 |

#### 7.8.2.3 정책 룰 테이블(운영 정본)
정책은 “룰 테이블”로 버전 관리한다.

##### 7.8.2.3.1 룰 테이블 구조
| 컬럼 | 의미 |
|---|---|
| rule_id | 규칙 ID |
| match | 조건(플래그/점수/빈도/티어 등) |
| decision | ALLOW/ATTENUATE/BLOCK |
| overrides | UI/공유/톤/후보풀 제한 |
| expire_at | 일시적 룰 종료(이벤트 대응용) |
| owner | 책임자(운영/신학/보안) |
| schema_version | 정책 스키마 버전 |

##### 7.8.2.3.2 룰 적용 우선순위(고정)
1. 법무/안전 차단 룰(최상위)
2. 아동/정밀 위치/문서 민감 룰
3. 남용/비용 보호 룰
4. 신학/가이드라인 완화 룰
5. 기본 ALLOW 룰

- 충돌 해결(룰이 여러 개 매칭될 때)
  - 기본은 **더 강한 보호 결정**을 선택합니다. (ALLOW < ATTENUATE < BLOCK)
  - 예외는 override를 명시한 룰이며, override 룰은 반드시 **owner(책임자)**와 **expire_at(만료)**가 있어야 합니다.
- 사유 코드(reason_codes) 표준화
  - CS/QA를 위해 “왜 차단/완화했는지”가 문장 대신 **짧은 코드**로 남아야 합니다.
  - 코드 예: `SEXUAL_EXPLICIT`, `CHILD_CONTEXT`, `PII_DETECTED`, `ABUSE_RATE`, `POLITICS_CONFLICT`, `LOW_CONFIDENCE`

---

### 7.8.3 안전/민감 감지(safety_flags) 기술 설계
#### 7.8.3.1 safety_flags 표준 코드(정본)
| 코드 | 의미 |
|---|---|
| S1_CHILD | 아동 관련 단서 |
| S2_MEDICAL | 의료/병원/상처 문맥 |
| S3_FUNERAL | 장례/사망 문맥 |
| S4_SELF_HARM | 자해 암시 |
| S5_CONFLICT_POLITICS | 시위/정치갈등 문맥 |
| S6_SEXUAL | 성적/과노출 문맥 |
| P1_PII_DOC | 문서/신분/번호판/주소/전화 등 |
| P2_GEO_PRECISE | 정밀 좌표/집 근접 반복 가능성 |

#### 7.8.3.2 감지 스택(온디바이스 우선)
- 온디바이스 우선의 이유(현장 기준)
  - **프라이버시**: 원본 이미지를 서버로 보내기 전에 1차 민감 판정을 하면 “불필요한 업로드”를 줄일 수 있습니다.
  - **비용**: 민감/남용을 초기에 걸러 서버 추론·저장·전송 비용을 낮춥니다.
  - **지연**: 네트워크가 느려도 최소 기능(텍스트/라이트)이 유지됩니다.
- 역할 분담
  - 온디바이스: 빠른 1차 후보 생성(보수적 플래그)
  - 서버/엣지: 룰 테이블 기반 최종 정책 + 감사 로그 + 쿼터 집계

##### 7.8.3.2.1 1차(온디바이스)
- **객체/장면 분류** → 민감 장면 후보 생성
- **OCR** → 민감 패턴(전화/주소/번호판/학교명 등) 탐지
- 기기 센서 → 위치는 “정밀 좌표 저장 금지” 원칙으로 정규화 후 폐기

##### 7.8.3.2.2 2차(서버/엣지)
- 온디바이스 결과 재검증(가벼운 룰)
- 정책 엔진 룰 테이블 적용
- 필요 시 “분류 불확실”을 **ATTENUATE**로 보수 처리

#### 7.8.3.3 민감도 점수(safety_score) 계산(정본)
- safety_score는 “민감일 가능성”을 **숫자 하나로 요약**해, 정책 엔진이 임계값으로 빠르게 결정하도록 돕습니다.
- 설계 원칙
  - 누락(민감인데 놓침)이 더 위험한 항목(S1/S6 등)은 보수적으로 가산합니다.
  - confidence가 낮을수록 ‘모름’이므로 ALLOW가 아니라 **ATTENUATE** 쪽으로 기웁니다.
- 임계값 운영(룰 테이블로 관리)
  - `final >= T_block` → BLOCK
  - `T_att <= final < T_block` → ATTENUATE
  - `final < T_att` → ALLOW
  - 임계값 변경은 회귀셋 통과 후 적용

| 구성 | 산식(정의) |
|---|---|
| base | 감지 모델 confidence의 가중합 |
| boost | OCR PII, 정밀위치, 아동 단서 가산 |
| penalty | 불확실도(낮은 confidence) 가산 |
| final | clamp(base + boost + penalty) |

- final이 임계값 초과 시 decision 상향(ATTENUATE 또는 BLOCK)

---

### 7.8.4 남용·비용 폭주 방지(쿼터/레이트리밋/신뢰등급)
#### 7.8.4.1 보호 목표(정본)
1. 비용 상한선 확보(트래픽/추론 비용)
2. 정상 사용자 경험 보호(지연/장애 방지)
3. 악성 자동화/봇 차단

#### 7.8.4.2 신뢰등급(Tier) 체계(정본)
- Tier는 “사람을 평가”하는 것이 아니라, 시스템이 비용/남용 리스크를 관리하기 위한 **운영 레버**입니다.
- Tier 입력 신호(대표)
  - 최근 24h/7d 요청량, 429 발생률, 재시도 패턴(지수 백오프 준수 여부)
  - 동일 input_digest 반복(중복 업로드), 신고 누적, 정책 위반 누적
- Tier 조정 원칙
  - 자동 조정은 “한 번에 큰 변화”보다 **점진 조정**으로 피해를 최소화
  - 이의제기 시 trace 기반으로 수동 복구 가능

| Tier | 대상 | 쿼터/제한(정의) |
|---|---|---|
| T0 | 신규/의심 | 낮은 분당/일 쿼터 + 공유 제한 |
| T1 | 일반 | 표준 분당 제한 + 표준 일 쿼터 |
| T2 | 신뢰 | 상향 쿼터 + 고급 기능 허용 |

- Tier는 정책 엔진 actions로 승급/강등된다.

#### 7.8.4.3 Rate limiting(정본)
- 핵심은 “공정성”입니다. 한 사용자의 폭주가 전체 서비스를 느리게 만들면 정상 사용자가 피해를 봅니다.
- 구현 방식(개념)
  - **Token Bucket**: 토큰이 일정 속도로 채워지고 요청이 토큰을 소비합니다. 토큰이 없으면 429.
  - **Sliding Window**: 최근 N초/분 동안의 호출 수를 계산해 임계 초과 시 제한.
- 응답 규칙
  - 429 + **Retry-After**로 “언제 다시 시도할지”를 명확히 합니다.
  - 4xx(정책 차단 등)는 재시도 금지, 429/5xx만 제한 재시도
- 기준: user_id 우선, 보조로 ip_hash/device_id_hash
- 응답: HTTP **429** + **Retry-After**
- 클라이언트: 429 수신 시 Retry-After 준수(지수 백오프)

#### 7.8.4.4 중복 처리 방지(정본)
- **Idempotency-Key**: 분석/추천 요청에 필수 적용
- 동일 키 반복 호출은 “이전 응답 재사용”

#### 7.8.4.5 업로드 비용 제어(정본)
- 비용을 결정하는 3요소: (1) 업로드 데이터 크기, (2) 서버 추론 여부, (3) 공유/배포 트래픽입니다.
- 모드는 “기술 옵션”이 아니라 **비용-프라이버시-품질의 트레이드오프 선택지**로 안내되어야 합니다.
- 모드 선택 원칙
  - 저사양/저속망: 텍스트/라이트 우선
  - 결과 신뢰도가 낮을 때만: 클라우드 모드 ‘선택’ 제공
  - 민감 플래그 높음: 원본 업로드/공유는 자동 제한(share_disabled)

| 모드 | 업로드 | 추론 | 목적 |
|---|---|---|---|
| 텍스트 모드 | 텍스트만 | 서버 최소 | 최저 비용/보장 |
| 라이트 사진 모드 | 224px 썸네일 | 온디바이스 우선 | 기본 모드 |
| 클라우드 모드 | 원본/고해상 | 서버/엣지 보강 | 선택 모드 |

---

### 7.8.5 프라이버시·데이터 보관·감사(Explain Trace)
#### 7.8.5.1 저장 원칙(정본)
1. 정밀 좌표 저장 금지
2. 민감 텍스트(OCR) 최소화/마스킹
3. 감정/기도/메모는 로컬 우선, 서버는 동의 기반
4. 서버 로그는 “감사에 필요한 최소”만 저장

#### 7.8.5.2 Explain Trace(정본)
- Trace는 “사용자 사진을 저장”하려는 것이 아니라, **결정의 근거(정책/룰/버전)**만 남겨서 재현 가능하게 만드는 장치입니다.
- 원본을 남기지 않고도 동일성만 확인하기 위해 **Digest(비가역 해시)**를 씁니다.
  - input_digest: 같은 이미지/텍스트 반복 여부(남용/중복) 판단
  - output_digest: 어떤 구절/카드 템플릿이 나갔는지 추적
- Trace의 가치
  - QA: 특정 버전에서만 생기는 문제를 빠르게 분리
  - CS: 차단/완화 사유를 reason_codes로 설명
  - 운영: 룰 핫픽스 전후 영향 비교

##### 7.8.5.2.1 Trace 구조(정본)
| 필드 | 의미 |
|---|---|
| trace_id | 단일 요청 추적 ID(**X-Trace-Id**) |
| policy_decision | ALLOW/ATTENUATE/BLOCK |
| reason_codes | 정책 사유 코드 |
| model_versions | 사용된 모델 버전 |
| input_digest | 이미지/텍스트의 비가역 해시(원문 저장 없이 동일성 확인) |
| output_digest | 결과(구절 ID, 카드 템플릿 ID 등) |
| retention | 보관 기간/레벨 |

#### 7.8.5.3 보관 기간(정본)
- 보관은 “적게, 짧게, 목적 한정”이 기본입니다.
- 운영 구현 체크
  - 데이터마다 retention을 명시하고, 만료 시 자동 삭제(배치/크론)로 강제
  - 삭제 실패는 경보로 연결(‘쌓여서 사고’ 방지)
  - 민감 항목(PII 가능성)은 기본 minimal만 남기고, enhanced는 사건 대응 시 임시 적용

| 데이터 | 보관 | 비고 |
|---|---|---|
| Trace 최소 로그 | 단기(운영 기본) | 장애/CS에 필요한 최소 |
| 원본 이미지 | 기본 미보관 | 공유/동의 시만 저장 가능 |
| OCR 원문 | 기본 미보관 | 마스킹/요약만 |
| 사용자 생성 메모 | 로컬 우선 | 동의 시 동기화 |

---

### 7.8.6 QA(회귀) 체계: 안전/신학/성능/오프라인
#### 7.8.6.1 QA 회귀셋 구성(정본)
- 회귀셋은 운영 중 생긴 사건/불만/신고를 **테스트로 고정**해 재발을 막는 장치입니다.
1. 사건/불만을 trace_id로 수집
2. 입력의 핵심 신호(플래그/점수/룰 매칭)를 기록
3. 기대 정책 결과(decision, ui_mode, share_disabled 등)를 정본으로 확정
4. 다음 배포부터 자동 테스트에 포함

| 회귀 축 | 테스트 묶음 |
|---|---|
| 안전 | safety_flags별 decision 일관성, 공유 기본값 검증 |
| 프라이버시 | 정밀위치 금지, OCR PII 마스킹/저장 금지 |
| 신학 | Out of Scope 위반 0, 설명카드 톤 일관성 |
| 성능 | p95 지연, 캐시 적중률, 오프라인 폴백 성공률 |
| 남용 | 429 처리, Retry-After 준수, Idempotency 재사용 |

#### 7.8.6.2 합격 기준(정본)
- 민감 케이스에서 “공개 기본값” 오류: 0
- 정책 결정의 비결정성(동일 입력인데 결과 변화): 0
- 429 발생 시 클라 재시도 폭탄: 0
- 오프라인 모드에서 기능 보장(텍스트/라이트): 성공률 기준치 이상
- ATTENUATE/BLOCK 사유 코드 누락: 0

#### 7.8.6.3 모델/룰 버전 관리(정본)
- 모델/룰은 각각 version을 가진다.
- 배포 시 “회귀셋 통과 + 샘플링 검수”를 필수로 한다.

---

### 7.8.7 CS/신고·차단·이의제기 운영 시스템
#### 7.8.7.1 스토어 요구사항 대응(정본)
- UGC를 포함하는 경우: **필터링**, **신고**, **차단**, **운영 연락처**를 앱 내부/메타데이터에 명시

#### 7.8.7.2 티켓 라우팅(정본)
- CS 처리는 **규칙 기반 오퍼레이션**이어야 일관성이 생깁니다.
- 우선순위(Severity) 제안
  - Sev-0(최우선): 아동/정밀 위치/문서 유출 가능성, 대규모 남용(장애 유발)
  - Sev-1: 음란/폭력/혐오 노출, 신고 폭주
  - Sev-2: 품질 불만(오매칭/톤)
- 악성 신고(리포트 스팸) 방지
  - 동일 신고 반복/집단 신고는 가중치를 낮추고 trace로 사실 확인
  - 신고자도 Tier 개념을 적용해 과도 신고 계정은 제한

| 티켓 타입 | 1차 자동조치 | 2차 담당 | 최종 결과 |
|---|---|---|---|
| 콘텐츠 신고 | 임시 숨김 + policy 재평가 | 운영/신학 | 복구/삭제/제재 |
| 프라이버시 | 즉시 비공개 전환 | 보안/운영 | 삭제/익명화 |
| 품질 이슈 | Trace 기반 원인 분류 | QA/신학 | 룰/모델 수정 |
| 남용 의심 | Tier 하향 + 제한 강화 | 보안/운영 | 제한/차단 |

#### 7.8.7.3 운영 콘솔(최소 기능)
- 운영 콘솔이 없으면 ‘정책’을 만들어도 실제 대응 속도가 느립니다.
- 필수 설계 원칙
  - **RBAC**(역할 기반 권한): 운영/CS/보안/신학 접근 범위 분리
  - 모든 변경(룰 수정, Tier 변경, 복구/삭제)은 감사 로그로 남김
  - 핫픽스 룰은 반드시 expire_at(만료)로 자동 종료(임시가 영구가 되는 사고 방지)
- 신고 목록(우선순위 정렬)
- trace_id로 단건 조회(정책/사유/버전)
- 유저 Tier 변경, 쿼터 조정
- 룰 테이블 핫픽스(만료 시간 포함)

---

### 7.8.8 모니터링·경보·개선 루프
#### 7.8.8.1 핵심 지표(정본)
| 범주 | 지표 |
|---|---|
| 안전 | flags 비율, decision 분포, 신고율/재신고율 |
| 남용 | 사용자별 호출량 p95/p99, 429 비율, 캐시 적중률 |
| 품질 | 오매칭 불만 비율, 설명카드 불만 비율 |
| 성능 | p95 지연, 장애율, 오프라인 폴백 성공률 |

#### 7.8.8.2 경보 룰(정본)
- 경보는 “알림”이 아니라 **Runbook**(즉시 실행 절차)이 붙어야 합니다.
- Runbook 예시(429 급증)
  1. 원인 분류(특정 유저/국가/버전/엔드포인트)
  2. 임시 룰 적용(쿼터 하향, Tier 강등, 공유 제한)
  3. 캐시/인프라 상태 확인
  4. 사건 종료 후 회귀셋 추가 및 영구 룰/코드 반영
- 429 비율 급증
- S1/S6 비율 급증
- 신고율 급증(특히 프라이버시)
- p95 지연 악화

#### 7.8.8.3 개선 루프(정본)
1. 지표 감지 → 2) 룰 핫픽스(임시) → 3) 원인 분석(Trace) → 4) 모델/룰 영구 수정 → 5) 회귀셋 추가

---

### 7.8.9 구현 궤적(로드맵): MVP→확장
- 로드맵은 기간보다 **완료 조건(Definition of Done)**이 중요합니다.
- 각 Phase는 ‘정본 문서(룰/플래그/Trace/QA)’가 함께 버전업되어야 다음 단계로 넘어갑니다.

#### 7.8.9.1 Phase 0 — 기준선 정본화(즉시)
- safety_flags 코드/정의 확정
- Allow/Attenuate/Block 정책 출력 스키마 확정
- Trace 최소 스키마 확정

#### 7.8.9.2 Phase 1 — MVP 안전/남용 방어(2~4주)
- 온디바이스 1차 안전 감지 + 서버 2차 룰 적용
- Rate limiting(429/Retry-After), Idempotency-Key 적용
- 공유 기본값 제어(민감은 share_disabled)

#### 7.8.9.3 Phase 2 — QA 회귀 자동화(4~6주)
- 안전/프라이버시/신학/성능 회귀셋 자동 실행
- 배포 게이트: 회귀 통과 없이는 릴리즈 불가

#### 7.8.9.4 Phase 3 — CS 운영 콘솔(6~8주)
- 신고/차단/이의제기 라우팅
- trace_id 단건 조회 + 룰 핫픽스

#### 7.8.9.5 Phase 4 — 확장(8주 이후)
- Tier 정교화(신뢰/후원자 등급)
- 고도화된 민감 감지(불확실도 기반 보수 처리)
- 월드맵/공유 확장 시, 이미지 트래픽 최적화(ETag/캐시)

---

### 7.8.10 용어 인덱스
| 용어 | 설명 |
|---|---|
| **Allow/Attenuate/Block** | 정책 결과를 3단으로 고정해 일관 적용(허용/완화/차단) |
| **safety_flags** | 민감 유형을 표준 코드로 태깅(S1~ 등) |
| **Rate limiting** | 과다 호출을 제한하는 서버 정책(429 응답) |
| **429** | Too Many Requests. 요청 과다 상태 코드 |
| **Retry-After** | 재시도까지 기다릴 시간을 지시하는 헤더 |
| **Idempotency-Key** | 중복 요청의 중복 처리를 막는 키 |
| **X-Trace-Id** | 요청 단위 추적용 헤더 |
| **Explain Trace** | 결과의 근거/정책 결정을 사후 감사 가능하게 남기는 추적 체계 |
| **Tier(신뢰등급)** | 남용 방지/비용 제어를 위한 사용자 등급 |
| **Out of Scope** | 지양/금지 범위(점괘 오인, 심판 단독, 공포 유발 등) |
| **DPIA** | 데이터/프라이버시 영향평가 절차 |
| **Token Bucket** | 토큰이 일정 속도로 채워지고 요청이 토큰을 소비하는 레이트리밋 방식 |
| **Sliding Window** | 최근 일정 시간 구간의 호출 수를 계산하는 레이트리밋 방식 |
| **Digest(비가역 해시)** | 원본을 저장하지 않고 동일성/중복만 판단하기 위한 해시 값 |
| **RBAC** | 역할 기반 권한 관리(운영/CS/보안/신학 등 접근 제어) |
| **Runbook** | 경보 발생 시 즉시 수행하는 표준 조치 절차 |
| **SLA** | CS 처리 목표 시간(우선순위별 대응 시간 기준) |



---

⏰ 기준 시각: 2026-01-09(Fri) 13:13 (KST)

## 7.9 용어 설명 인덱스(7장 관련)
|용어|설명|
|---|---|
|**KPI**|Key Performance Indicator. 핵심 성과 지표. 프로젝트 성과를 수치로 측정하는 기준.|
|**DAU**|Daily Active Users. 하루 동안 앱을 사용한 고유 사용자 수.|
|**DST**|Days per Week. 일주일 중 앱을 사용한 날 수. 사용 습관을 측정하는 지표.|
|**p95 / p99**|전체 요청 중 95%/99%가 이 시간 안에 끝난다는 응답 시간 기준. 꼬리 구간 성능을 측정.|
|**F1 Score**|정밀도와 재현율을 함께 고려한 머신러닝 성능 지표(0~1). 1에 가까울수록 좋음.|
|**리콜(Recall)**|실제 긍정(여기서는 민감 장면)을 얼마나 잘 찾아냈는지 비율.|
|**회귀 테스트(Regression Test)**|기존 기능이 변경 후에도 정상 동작하는지 확인하는 반복 테스트.|
|**E2E 테스트**|End-to-End Test. 실제 사용자 플로우 전체를 처음부터 끝까지 검증하는 테스트.|
|**스모크 테스트(Smoke Test)**|빌드/배포 직후, 가장 기본적인 기능이 동작하는지만 빠르게 확인하는 테스트.|
|**SLA**|Service Level Agreement. 응답 시간, 가용성 등 서비스 수준에 대한 약속/목표.|
|**Canary Release**|전체 배포 전, 일부 사용자에게만 새 버전을 적용해 이상 여부를 확인하는 배포 방식.|
|**CI/CD**|Continuous Integration / Continuous Delivery(Deployment). 지속적 통합·배포.|
|**IoU**|Intersection over Union. 객체 탐지에서 예측 박스와 정답 박스의 겹침 정도를 수치화한 값.|
|**NMS**|Non-Maximum Suppression. 중복 탐지 결과를 **IoU 임계값**으로 정리해 1개만 남기는 기법.|
|**mAP**|mean Average Precision. 객체 탐지의 종합 성능 지표(정밀도-재현율 곡선 기반).|
|**TSV**|Tab-Separated Values. 탭( )으로 구분되는 표 형식 파일.|
|**DoD**|Definition of Done. "완료"로 인정하는 조건(완료 기준).|
|**Top-K**|후보 중 상위 K개를 선택해 다음 단계(재랭킹/필터)로 넘기는 방식.|
|**Severity(심각도)**|버그·이슈가 사용자와 서비스에 미치는 영향 정도를 나타내는 등급.|

이 7장은 "**무엇을 측정하고, 어디까지 통과해야 이 프로젝트를 안전하게 출시·운영할 수 있는지**"에 대한 기준을 제시한다. 이후 각 팀은 이 기준을 바탕으로 자체 세부 QA 플랜과 모니터링 대시보드를 설계·운영하면 된다.

# 8장. 글로벌 전략 (목표·사용자·기능·우선순위·파트너십·현지화·기술/접근성)

이 장은 **전 세계 144개국 대상 성경 프로젝트의 확장 전략**을 정의한다.  
3장에서 정리한 **글로벌 시장·경쟁 환경**(존재하는 성경/묵상 앱, 사진 기반 서비스, AI Q&A 앱 등)을 전제로,  
이 프로젝트가 **어떤 목표와 철학으로, 누구에게, 어떤 순서와 방식으로** 확장될 것인지 전략을 명문화한다.

## 8.0 글로벌 전략 요약(한눈에 보기)

|항목|요약|
|---|---|
|목표|접촉 빈도 증대, 위로·평강·소망 중심 추천, 교회·소그룹 기반 공동체 형성, 저사양·저속 환경까지 포함하는 보편적 접근성 확보|
|사용자|8.2에서 정의한 G1~G6 페르소나를 기반으로, 아메리카·유럽·아프리카·아시아·중동 등 대륙별 신앙·문화 특성을 반영한 글로벌 사용자군을 상정|
|핵심 기능|사진→말씀 추천, 다국어 성경 텍스트 연동, 오늘의 말씀 카드·묵상 플랜, 감정/기도 기록, 스트릭·배지, 노트·북마크, 오프라인팩, (필요 시) 번역 비교·키즈 친화 콘텐츠까지 포함한 확장 가능 구조|
|대상국 티어|144개국을 A/B/C/D 티어(또는 Tier 1/2/3)로 구분해 1차 론칭국·2차 론칭군·중기·장기 후보군을 관리하며, 구체 규칙은 8.3과 부록 B의 우선순위 산정 체계를 따름|
|파트너십|UBS/DBL 등 글로벌 성서공회 네트워크와 각국 성서공회·출판사, 교단·교회·선교 단체, 통신사·단말/인프라 파트너와의 다층 협력 구조를 전제로 설계|
|현지화|스페인어·포르투갈어·영어·불어·스와힐리·힌디어·아랍어 등 주요 언어권을 초기 우선 대상으로 삼고, 각 언어권별 현지 목회자·신학자와의 ‘현지 목회자 플랜’으로 묵상 텍스트와 주제·상징을 검증|
|기술/접근성|Lite 모드·오프라인 모듈, 글로벌 분산 콘텐츠 전송 인프라, 프라이버시를 해치지 않는 범위의 온디바이스 개인화, 8.7에서 정의된 보안·위장 모드 전략으로 구성|

---

## 8.1 글로벌 전략의 상위 목표

### 8.1.1 미션 레벨 목표

|구분|설명|
|---|---|
|영적 목표|전 세계 사용자들이 **사진 한 장**을 통해, “지금 내 상황에 맞는 말씀”을 경험하게 함.|
|습관 형성 목표|텍스트 기반 성경 앱의 낮은 실제 사용률 문제를 보완하여, **사진 중심 묵상 루프**를 일상에 심는 것.|
|교회/공동체 목표|교단·교회가 신학적으로 안심하고 성도들에게 추천할 수 있는 **비상업·프라이버시 친화형 도구** 제공.|
|선교·사회적 목표|인터넷 접근이 가능한 국가에서, **상업 모델 없이** 말씀 묵상 도구를 보급하는 ‘공공재’ 수준을 지향.|

### 8.1.2 전략적 KPI(글로벌 관점)

|축|대표 KPI|비고|
|---|---|---|
|도달(Reach)|지원 국가 수, 지원 언어 수, 월간 유니크 사용자 수(MAU)|144개국 커버리지, 우선 10~20개 핵심 언어 집중|
|사용(Usage)|일간 사진→말씀 추천 요청 수, DST(주당 사용일 수)|텍스트 성경 앱 대비 낮은 진입장벽을 활용해 습관 형성|
|깊이(Depth)|카드당 평균 감정/기도 기록률, 복습(리뷰) 완료율|‘사진→말씀→기록→재방문’ 루프 완성도 측정|
|신뢰(Trust)|신학 이슈 신고율, 프라이버시/데이터 관련 문제 제기 건수|교단·교회 파트너, 사용자 커뮤니티의 신뢰 수준 반영|
|파트너십|정식 추천/제휴 교단·교회·선교 단체 수, 공식 인용/소개 건수|특정 교단 소유가 아닌, 협력 네트워크 형태를 지향|

---

## 8.2 글로벌 사용자 세그먼트 정의

### 8.2.1 세그먼트 축

- **신앙 배경 축**: 기존 신앙인 / 초신자 / 탐색자(Seeker)
    
- **사용 환경 축**: 고속 네트워크·고성능 단말 / 저속 네트워크·저사양 단말 / 공용 단말
    
- **이용 패턴 축**: 개인 묵상 중심 / 소그룹·셀 모임 중심 / 설교·콘텐츠 제작자 중심
    

### 8.2.2 대표 페르소나(글로벌)

|Persona ID|페르소나 이름|지역/환경 예시|핵심 요구|
|---|---|---|---|
|G1|이동 중 묵상형 개인 신앙인|한국, 미국, 유럽 도시권(지하철, 출퇴근), 스마트폰 보급 국가|짧은 시간, 사진 한 장으로 말씀/위로, 개인정보·좌표 노출에 대한 최소 부담|
|G2|저사양·저속 환경 신앙인|아프리카, 남아시아, 저소득 국가, 저가 안드로이드|오프라인/저데이터 소비, 가벼운 앱, 단순 인터페이스, 데이터 요금 부담 최소화|
|G3|소그룹 리더·교회 사역자|전 세계 도시/농촌 교회, 셀/순/소그룹 인도자|모임에서 사용할 수 있는 **사진 기반 말씀 나눔 자료**, 신학적으로 안전한 내용|
|G4|콘텐츠 크리에이터/디자이너|유튜브/인스타/틱톡 등 SNS 활용 크리스천 크리에이터|사진+말씀 카드의 저작권·라이선스 명확화, 고해상도 이미지, 브랜딩 최소 간섭|
|G5|조심스러운 탐색자(Seeker)|종교 규제가 있거나 가족·사회 눈치를 보는 신앙 탐색자|눈에 띄지 않는 UI, 로그 최소화, 데이터·위치 노출이 없는 개인적 묵상 도구|
|G6|번역·현지화 협력자(목회자/학자)|각국 성서공회·교단 신학자·목회자|주제·구절·묵상 텍스트의 **현지 신학 기준** 반영, 리뷰·수정 권한 및 도구 제공|

---

## 8.3 지역·국가 티어링 전략(우선순위)

### 8.3.1 티어 정의 원칙

144개국 데이터(인구, 개신교 인구, 스마트폰 보급률, 인터넷 접근성, 규제 수준 등)를 바탕으로, 다음과 같이 3단계 티어를 정의한다.

|티어|특징|예시 국가(개념적 예시)|
|---|---|---|
|Tier 1|개신교/복음주의 인구 규모 크고, 스마트폰·데이터 인프라 양호, 종교 자유 상대적으로 보장|미국, 브라질, 한국, 나이지리아, 필리핀, 멕시코 등|
|Tier 2|개신교 인구는 상대적 중간/성장 단계, 인프라는 양호하나 종교·문화 특수성이 큼|인도, 독일, 프랑스, 남아공, 인도네시아 등|
|Tier 3|종교/정치 규제가 강하거나, 인터넷·스마트폰 인프라가 제한적이거나, 박해 위험이 있는 지역|일부 중동 국가, 중앙아시아, 특정 아시아/아프리카 국가 등|

> 실제 국가는 144개국 스코어링 엑셀(별도 문서)을 기준으로 세부 정의.

### 8.3.2 론칭 파이프라인

|단계|내용|대상 티어|
|---|---|---|
|Phase 1|코어 기능 MVP(사진→말씀 추천, 기본 기록, 한 언어)|1~2개 시범 국가(Tier 1)|
|Phase 2|언어 추가, 오프라인팩 강화, 월드맵 베타, 기부 채널 도입|추가 Tier 1, 일부 Tier 2|
|Phase 3|교단·교회 공식 파트너십 확장, 로컬 묵상 플랜, 번역/주석 연동|Tier 1 전체 + 전략 Tier 2|
|Phase 4|보안 모드·위장 모드·완전 오프라인 모듈, 폐쇄형 배포(파일/사설 마켓 등)|제한적 Tier 3|

---

### 8.3.3 144개국 서비스 우선순위 산정 체계(요약)

이 섹션은 성경 프로젝트가 대상으로 삼는 **144개국**에 대해, 어떤 기준과 방식으로 **서비스 우선순위(A/B/C/D 티어)**를 산정하는지 개요만 정리합니다. 실제 산정 규칙과 엑셀 구조는 **부록 B — 144개국 서비스 우선순위 산정 기준 & 엑셀 구조**를 따릅니다.

---

#### 8.3.3.1 목적

- 전 세계 144개국을 대상으로, 다음 요소를 종합 반영해 **우선 진출 국가군(A/B/C/D)**을 정의하기 위함입니다.
    
    - (1) 선교·영적 필요(Mission Need)
        
    - (2) 법·라이선스 환경
        
    - (3) 접근성·인프라(모바일·네트워크)
        
    - (4) 개신교/성경 친화도
        
    - (5) 온디바이스 전략 필요도
        
    - (6) 기존 성경 앱 생태계 구조
        
    - (7) 파트너십(성서공회, 교단, 방송, NGO 등) 잠재력
        
- 이 지표를 기반으로 **1차 론칭국, 2차 론칭군, 중기·장기 후보군**을 일관된 기준으로 관리합니다.
    

---

#### 8.3.3.2 7개 평가 지표 개요

국가별 우선순위를 평가하는 7개 지표는 다음과 같습니다.

|코드|지표 이름|의미 요약|
|---|---|---|
|MN|선교 필요성 (Mission Need)|기독교/복음 접근성이 낮을수록 점수가 높아지는 지표 ("어디가 더 시급한가")|
|LF|라이선스 현실성 (License Feasibility)|성경 번역·배포 라이선스 확보 가능성과 종교/출판 규제 환경|
|AC|접근성 (Access)|스마트폰 보급, 모바일 회선 수, 인터넷 사용성 등 기본 인프라 수준|
|PR|개신교/성경 친화도 (Protestant / Bible Friendliness)|개신교 비율, 성경 읽기 문화, 디지털 성경 수용성|
|OD|온디바이스 필요도 (On-Device Need)|검열·망 불안정·감시 등으로 온디바이스/오프라인 서비스가 필수인지 여부|
|AE|앱 생태계 기회 (App Ecosystem Opportunity)|기존 성경 앱 시장 구조 속에서 사진·감성·온디바이스 UX의 틈새 크기|
|PP|파트너십 잠재력 (Partnership Potential)|성서공회·교단·방송·NGO 등과의 협력 가능성 및 시너지 잠재력|

> MN/LF/AC는 주로 **정량 데이터(종교 비율, 법·규제, 모바일 인프라)**에 직접 연결되고,  
> PR/OD/AE/PP는 **국가별 상황을 클러스터(유형)**로 나눈 뒤 대표 점수를 부여하는 방식으로 운용합니다.

---

#### 8.3.3.3 최종 점수 공식 (FinalScore)

각 국가는 아래 단일 공식으로 **최종 점수 FinalScore(0~100)**를 계산합니다.

- 가중치(기본값)
    

|파라미터|의미|기본값|
|---|---|---|
|w_mission|선교 필요성(MN) 가중치|0.30|
|w_license|라이선스 현실성(LF) 가중치|0.20|
|w_access|접근성(AC) 가중치|0.20|
|w_protestant|개신교/성경 친화도(PR) 가중치|0.10|
|w_ondevice|온디바이스 필요도(OD) 가중치|0.10|
|w_ecosystem|앱 생태계 기회(AE) 가중치|0.05|
|w_partnership|파트너십 잠재력(PP) 가중치|0.05|

- 최종 점수 공식
    

> **FinalScore = 0.30·MN + 0.20·LF + 0.20·AC + 0.10·PR + 0.10·OD + 0.05·AE + 0.05·PP**

엑셀에서는 각 지표(MN~PP)를 열로 두고, `Parameters` 시트의 가중치를 참조해 위 식을 그대로 구현합니다.

---

#### 8.3.3.4 우선순위 티어 정의 (A/B/C/D)

FinalScore를 기준으로 국가를 4개 티어로 분류합니다.

|티어|기준 점수 범위|의미|
|---|---|---|
|A|FinalScore ≥ 90|1차 론칭 및 전략적 최중요 국가군|
|B|80 ≤ FinalScore < 90|2차 론칭 핵심 후보군|
|C|70 ≤ FinalScore < 80|중기 진출 후보, 상황·리소스에 따라 단계적 진입|
|D|FinalScore < 70|장기 검토·기도/관찰 대상 국가군|

- Excel 예시 수식(국가별 점수가 2행에 있을 때):
    

```excel
=IF(O2>=90,"A",IF(O2>=80,"B",IF(O2>=70,"C","D")))
```

> A티어 국가는 **1차 론칭 + 집중 현지화 + 온디바이스 인프라 우선 배포** 대상,  
> B티어는 1.5~2차 론칭 핵심 후보, C/D티어는 중장기 모니터링 및 선교·네트워크 구축 중심으로 운영합니다.

---

#### 8.3.3.5 엑셀 파일 및 부록 연동

- 실제 운용 파일명(예시): `성경프로젝트_144개국_우선순위_vFinal.xlsx`
    
- 주요 시트 구성:
    
    - `CountryScores_Final`: 144개국별 MN~PP, FinalScore, Tier 관리 메인 시트
        
    - `Parameters`: 7개 지표의 가중치 테이블
        
    - `AE_Clusters` / `PP_Clusters`: 앱 생태계·파트너십 클러스터별 점수 정의
        
    - `TierRules`: FinalScore에 따른 티어 구간 정의
        
    - `README`: 파일 구조 및 운용 플로우 설명
        
- **부록 B — 144개국 서비스 우선순위 산정 기준 & 엑셀 구조**에서
    
    - 각 지표 정의, 클러스터 규칙, 엑셀 시트 구조, 실무 운용 예시를 전체 상세 버전으로 제공합니다.
        

> 이 8.3.3 섹션은 “144개국 우선순위 산정 체계의 개요 요약” 역할만 수행하며,  
> 실제 구현·운영은 전적으로 부록 B와 엑셀 마스터 파일을 기준으로 관리합니다.

#### 8.3.3.6 기존 합계점수 Top20 스냅샷

| 서비스 필요 순위 | 국가     | 대륙    | 세부 지역명  | 공용어       | 성경 번역본               | 개신교 비율 | 선교 필요성 점수 | 라이선스 현실성 점수 | 접근성 점수 | 합계 점수 |
| --------- | ------ | ----- | ------- | --------- | -------------------- | ------ | --------- | ----------- | ------ | ----- |
| 1         | 일본     | 아시아   | 동아시아    | 일본어       | 新共同訳, 新改訳            | 0.45   | 46        | 28          | 18     | 92    |
| 1         | 크로아티아  | 유럽    | 동유럽     | 크로아티아어    | Croatian Bible       | 0.5    | 46        | 28          | 18     | 92    |
| 3         | 그리스    | 유럽    | 남유럽     | 그리스어      | Greek Bible          | 1      | 44        | 28          | 18     | 90    |
| 3         | 불가리아   | 유럽    | 동유럽     | 불가리아어     | Bulgarian Bible      | 1      | 44        | 28          | 18     | 90    |
| 3         | 북마케도니아 | 유럽    | 남유럽     | 마케도니아어    | Macedonian Bible     | 1      | 44        | 28          | 18     | 90    |
| 3         | 루마니아   | 유럽    | 동유럽     | 루마니아어     | Romanian Bible       | 6      | 44        | 28          | 18     | 90    |
| 3         | 체코     | 유럽    | 동유럽     | 체코어       | Czech Bible          | 1      | 44        | 28          | 18     | 90    |
| 3         | 슬로바키아  | 유럽    | 동유럽     | 슬로바키아어    | Slovak Bible         | 2      | 44        | 28          | 18     | 90    |
| 3         | 헝가리    | 유럽    | 동유럽     | 헝가리어      | Hungarian Bible      | 2      | 44        | 28          | 18     | 90    |
| 3         | 폴란드    | 유럽    | 동유럽     | 폴란드어      | Polish Bible         | 1      | 44        | 28          | 18     | 90    |
| 3         | 세르비아   | 유럽    | 동유럽     | 세르비아어     | Serbian Bible        | 0.7    | 44        | 28          | 18     | 90    |
| 3         | 슬로베니아  | 유럽    | 동유럽     | 슬로베니아어    | Slovenian Bible      | 1      | 44        | 28          | 18     | 90    |
| 3         | 리투아니아  | 유럽    | 북유럽     | 리투아니아어    | Lithuanian Bible     | 1      | 44        | 28          | 18     | 90    |
| 3         | 라트비아   | 유럽    | 북유럽     | 라트비아어     | Latvian Bible        | 1      | 44        | 28          | 18     | 90    |
| 3         | 에스토니아  | 유럽    | 북유럽     | 에스토니아어    | Estonian Bible       | 1      | 44        | 28          | 18     | 90    |
| 3         | 아일랜드   | 유럽    | 서유럽     | 영어, 아일랜드어 | English/Irish Bible  | 2      | 44        | 28          | 18     | 90    |
| 3         | 뉴질랜드   | 오세아니아 | 오스트랄라시아 | 영어        | English Bible        | 12     | 44        | 28          | 18     | 90    |
| 3         | 호주     | 오세아니아 | 오스트랄라시아 | 영어        | English Bible        | 15     | 44        | 28          | 18     | 90    |
| 3         | 캐나다    | 아메리카  | 북아메리카   | 영어, 프랑스어  | English/French Bible | 23     | 44        | 28          | 18     | 90    |
| 3         | 미국     | 아메리카  | 북아메리카   | 영어        | English Bible        | 25     | 44        | 28          | 18     | 90    |
## 8.4 글로벌 기능 전략(코어 vs 옵션)

### 8.4.1 코어 기능(모든 국가 공통)

|코드|기능 이름|설명|
|---|---|---|
|F-C1|사진→말씀 추천|사진 기반 성경 구절 자동 추천(개역개정+NIV, 국가별 번역본 확장)|
|F-C2|설명 카드(Why)|왜 이 구절인지에 대한 2~3문장 설명(상징·주제·문맥 근거)|
|F-C3|감정·기도 기록 루프|추천 후 감정 태그·기도·메모 기록, 1/3/7/30일 복습 루프|
|F-C4|프라이버시 기본 정책|좌표 미수집, 민감 이미지 보호, 비상업·기부형 메시지|
|F-C5|로컬 오프라인팩|네트워크 불안정 상태에서도 최소한의 추천이 가능하도록 대표 구절·임베딩을 로컬 저장|
|F-C6|기부·후원 모듈|광고 대신, 자발적 기부·후원 모듈(국가별 결제 수단·세제 이슈는 별도 설계)|

### 8.4.2 선택 기능(국가·파트너 별 옵션)

|코드|기능 이름|대상/조건|
|---|---|---|
|F-O1|월드맵(글로벌/지역 히트맵)|종교의 자유가 비교적 보장되는 국가, 규제 리스크 낮은 지역|
|F-O2|교회/소그룹 모드|교회/단체 파트너십 체결 국가, 공식 추천 도구로 사용되는 경우|
|F-O3|로컬 묵상 플랜(절기·공휴일 연동)|한국(사순절/부활절/추석 등), 미국(Thanksgiving 등) 등 문화/절기 특성이 뚜렷한 국가|
|F-O4|오디오 묵상/기도문|네트워크·저작권·언어 인프라가 충분하고, 오디오 콘텐츠 제작 파트너가 있는 국가|
|F-O5|제3자 성경 앱 연동(딥링크/계정 연동)|기존 텍스트/오디오 성경 앱과 협업 가능성이 높은 국가/파트너|
|F-O6|완전 오프라인 패키지|인터넷 검열/박해 위험이 높은 지역, 폐쇄형 배포(USB, SD카드 등)|

---

## 8.5 파트너십 전략

### 8.5.1 파트너 유형

|유형|역할|
|---|---|
|성서공회/출판사|번역본 라이선스, 본문 제공, 번역·주석·주제 태깅 협력|
|교단/교회|신학 가이드라인 검토, 목회자/리더 대상 교육, 성도 대상 공식 추천|
|선교 단체|특정 지역/언어권 배포, 폐쇄 환경에서의 사용(오프라인 배포, USB, SD카드 등) 지원|
|기술 파트너|클라우드 인프라, 번역·음성 TTS/ASR, 보안, 결제·기부 모듈 등 기술협력|
|로컬 커뮤니티|로컬 문화·언어·신학 차이 피드백, 현지화된 묵상 텍스트·기도문 제작|

### 8.5.2 파트너십 단계

|단계|내용|산출물/성공 지표|
|---|---|---|
|P1|탐색·대화 단계|미팅 메모, 이해 각서(MoU) 초안|
|P2|파일럿·공동 기획|파일럿 국가/교회 선정, 기능 범위 합의, 일정 계획|
|P3|정식 파트너십(브랜딩 최소·공동 목표 명시)|로고·명칭 표기 규칙, 데이터·신학 가이드라인 합의, 공동 발표|
|P4|장기적 협력(교육·연구·콘텐츠 공동 제작)|정기 리포트, 현지화 묵상/기도문·교육 콘텐츠, 공동 컨퍼런스/세미나|

> 원칙: **광고형·코인형 BM**을 요구하는 파트너십은 지양하고, **비상업·사역형** 목적이 분명한 파트너와의 협력을 우선한다.

---

## 8.6 현지화(L10N)·문화/신학 차이 전략

### 8.6.1 현지화 범위

|범위|내용|
|---|---|
|UI 언어|메뉴·버튼·설명·에러 메시지 등 전체 텍스트|
|성경 번역본|개역개정·NIV 외 국가별 대표 공인 번역본(성서공회 등과의 계약 필요)|
|주제·상징|24 주제·120 라벨의 현지 문화 번역(예: 농업 비유, 지리·기후, 상징의 의미 차이)|
|묵상·설명 카드|Why 카드·기도문·감정 태그 텍스트의 현지 언어·신학 기준 반영|
|절기·공휴일|로컬 절기(사순절·부활절·추수감사절·성탄절 등)·국가 공휴일 연동 묵상 플랜|

### 8.6.2 신학 스펙트럼 고려

- 기본 교리 기준은 **예장통합**이지만, 글로벌 서비스 특성상 다음을 고려한다.
    
    - 복음주의/개신교 공통 분모가 큰 본문·주제 우선
        
    - 교단 간 논쟁이 큰 본문/해석은 **완화 또는 ALT-1** 중심으로 제공
        
    - 각 국가·지역의 신학 자문 그룹과 협의하여, **현지 “허용/완화/차단” 룰을 미세 조정**
        

### 8.6.3 민감 주제 처리(문화·법규 반영)

- 정치·전쟁·성·가정폭력·자살 등 민감 주제에 대해, 각 국가의 **법적 규제·문화적 민감도**를 반영
    
- 필요 시 특정 국가에서는
    
    - 민감 사진 업로드 자체를 제한하거나,
        
    - 해당 주제의 추천을 더 보수적으로 제한,
        
    - 혹은 해당 시나리오에서는 사진→말씀 추천 대신 **일반 위로/소망 본문** 위주로 노출
        

---

## 8.7 기술/접근성 전략(글로벌)

### 8.7.1 저사양·저속 환경 지원

|영역|전략/원칙|
|---|---|
|앱 용량|핵심 기능만 포함한 **Lite 모드** 제공, 리소스·폰트·이미지 최소화|
|네트워크|이미지 업로드 압축, 재시도 로직, 저품질 네트워크에서도 견디는 타임아웃·폴백 설계|
|오프라인팩|대표 구절·임베딩·설명 카드 일부를 로컬 저장, 1차 추천은 온디바이스에서 처리|
|배포|공식 마켓 외에, 지역별로 **APK/사설 배포**, 오프라인 패키지(USB/SD 카드) 지원 고려|

### 8.7.2 접근성·포용성(다언어·장애·연령)

- 시각 장애 사용자를 위한 스크린리더·큰 글자·대비 색상 규칙 준수
    
- 연령대가 높은 사용자를 위한 **단순한 인터페이스, 큰 버튼, 적은 단계**
    
- 읽기 어려운 사용자(문해력 저하)를 위한, 향후 **오디오 읽기·간단 설명 모드** 확장 가능성 열어 두기
    

### 8.7.3 보안·위장 모드(특수 국가)

- 앱 아이콘·이름을 일반 사진/노트 앱처럼 보이게 하는 **위장 모드**(옵션)
    
- 앱 내부에서도, 비상 상황에서 빠르게 내용 숨김/로그아웃/잠금하는 **“긴급 숨기기(패닉 버튼)”** 설계
    
- 로그 최소화, 계정 없이 사용 가능한 모드(게스트/로컬 모드)를 **특정 국가에서 기본값**으로 설정
    

### 8.7.4 위치·월드맵 프라이버시 정책

1. **좌표 미수집 원칙**
    
    - 추천 로직과 월드맵 집계에서 **GPS 정밀 좌표는 저장하지 않음**.
        
    - 위치 동의 시에도 **country_code(ISO 3166-1)**, 필요 시 **region_bucket(ISO 3166-2 또는 커스텀)**까지만 사용/저장.
        
2. **GeoContext 스키마(요약)**
    

> ※ 아래 필드 정의는 추후 **부록(데이터 스키마 & API 명세)**의 `C.X` 절에 동일하게 수록하여, 구현/검수의 단일 기준으로 사용합니다.

```json
GeoContext {
  country_code: string,      // ISO 3166-1 alpha-2, 예: "KR","US","NG"
  region_bucket: string,     // ISO 3166-2 또는 커스텀 버킷, 예: "KR-11"
  env_tags: string[],        // ["coastal","mountainous","urban_dense",...]
  confidence: float,         // 0.0~1.0
  source: string[],          // ["ocr","device_locale","timezone"]
  time_bucket: string        // 예: "sunrise","day","sunset","night","weekend"
}
```

3. **월드맵 집계 단위(Polgyon Aggregation)**
    
    - 월드맵은 **국가/광역 폴리곤 단위**로만 집계한다(핀/정밀 위치 표시는 금지).
        
    - 제공 지표는 **집계형**으로만 제한한다.
        
        - 핀 수(또는 카드 수)
            
        - **아멘/기도/저장 비율**
            
        - 상위 주제 **뱃지**(Top Topics)
            
4. **민감 장면 기본 정책(집계 제외)**
    
    - **아동/가정/의료/예배** 등 민감 장면은 기본적으로 **비공개 권고**를 우선 적용한다.
        
    - 해당 유형은 월드맵 집계에서 **기본 제외**하여 재식별·노출 리스크를 낮춘다.
        
5. **편향 최소화 원칙(추론 리스크 저감)**
    
    - `env_tags`(해안/산악/사막/열대/도시밀집)는 추천 점수에서 **소가중치**로만 사용하며, 본문 선택(Top-K) 이후 **재랭킹(Re-ranking)** 수준에서만 반영한다.
        
    - 공항/면세/다언어 혼재 구역처럼 지오·언어 신호가 불안정한 환경은 기본적으로 **UNKNOWN** 처리하여 편향·과추론 위험을 낮춘다.
        

### 8.7.5 추천 API I/O 계약(요약)

- 상세 I/O 계약 표는 **부록 C — 추천 API I/O 계약(요약)**을 참조합니다.

### 8.7.6 국가·언어 론칭 체크리스트(운영 표준)

|No|체크 항목|완료 조건(DoD)|비고|
|--:|---|---|---|
|1|기본 언어 결정|`device_lang` 우선순위에 따라 기본 언어 확정|초기 Tier는 2~3개 언어 우선|
|2|게스트 기본값|첫 실행은 게스트 모드로 진입|가입 강제 금지|
|3|위장/보호 모드|국가 정책에 따라 기본 ON/OFF 설정|국가별 스위치|
|4|민감 라우팅 정책|아동/의료/장례/NSFW 감지 시 라우팅 규칙 확정|공유 차단/비공개 권고 포함|
|5|저사양 프로파일|Lite/Thumbnail 업로드 모드 기본값 확정|저속망 국가 우선|
|6|데이터 보관 정책|원본 이미지 미보관/최소 보관 정책 적용|좌표 원본 미저장|
|7|기부/후원 현지화|금액 단위/표기/결제 수단/문구 확정|국가별 문구 분리|
|8|롤백 스위치|문제 발생 시 기능 OFF/룰셋 롤백 절차 준비|운영자 절차 1페이지로 고정|

---

## 8.8 글로벌 리스크 & 대응 전략

### 8.8.1 주요 리스크 목록

|카테고리|리스크 예시|대응 방향|
|---|---|---|
|규제/법률|종교 콘텐츠 차단, 데이터 국외 이전 금지, AI 관련 규제|로컬 법률 자문, 데이터 주권 존중, 국가별 데이터 센터/완전 오프라인 모드 검토|
|신학/교단|특정 추천 카드로 인한 논쟁, 교단 간 해석 차이|신학 자문 위원회 구성, 이슈 발생 시 빠른 수정·가이드라인 업데이트|
|보안/프라이버시|데이터 유출, 위치 역추적, 민감 이미지 유출|좌표 미수집·지오해시·퍼징, 최소 로그, 정기 보안 점검·침투 테스트|
|경쟁/카피|대형 앱의 기능 카피, 유사 서비스 난립|기능보다 **철학(비상업·신학·프라이버시)**과 파트너십 네트워크로 차별화|
|재정/운영|기부·후원 부족으로 인한 서버·운영 비용 부담|최소 인프라 구조 설계, 파트너 기관과의 운영비 분담, 프로젝트 범위·페이스 조정|

### 8.8.2 위기 커뮤니케이션 원칙

- 이슈 발생 시
    
    - **투명하게 사실 공유**, 과장/축소 없이 현재 상황·영향·대응 계획을 설명
        
    - 신학/데이터/기술 이슈는 각 전담 팀(T6, T2/T3)이 **책임 있는 설명** 제공
        
    - 교단·파트너 교회에는 우선적으로 상세 보고, 사용자에게는 이해하기 쉬운 버전으로 공지
        

---

## 8.9 글로벌 로드맵(요약)

### 8.9.1 기능 로드맵(예시)

|단계|기간(예시)|주요 목표|주요 기능|
|---|---|---|---|
|M0|준비 단계|코어 AI·앱 MVP 완성|사진→말씀 추천, 기본 기록, 한국어+영어, 오프라인팩 기본|
|M1|파일럿 1국가|실제 교회·사용자 그룹에서 파일럿 검증|버그 수정, UI 튜닝, 신학/프라이버시 이슈 보정|
|M2|다국어 확장|3~5개 핵심 언어, 3~5개 국가로 확장|언어 선택, 로컬 절기 묵상, 간단 통계/리포트|
|M3|월드맵·교회 모드|월드맵(일부 국가), 교회/소그룹 모드 도입|퍼징 지도, 소그룹 코드, 리더용 리포트|
|M4|특수 국가 대응|Tier 3 대응(위장 모드, 완전 오프라인 패키지)|위장 아이콘/이름, 패닉 버튼, 로컬 데이터만 사용하는 모드|

### 8.9.2 조직·파트너 로드맵(예시)

- Year 1: 코어 팀 구성(앱·AI·데이터·신학·운영), 1~2개 교단/교회 파일럿
    
- Year 2: 3~5개 언어·국가 확대, 성서공회/선교 단체와의 공식 파트너십 2~3건 확보
    
- Year 3: 10개 이상 언어, 10개 이상 국가, 교회/소그룹 모드 정식 운영
    

---

## 8.10 용어 설명 인덱스(8장 관련)

|용어|설명|
|---|---|
|**티어(Tier)**|국가를 우선순위·특성에 따라 묶은 그룹(예: Tier 1, Tier 2, Tier 3).|
|**파일럿(Pilot)**|소규모 사용자·국가·교회를 대상으로 먼저 시험 운영해 보는 단계.|
|**코어 기능(Core Feature)**|어떤 국가·환경에서도 반드시 제공되어야 하는 기본 기능.|
|**옵션 기능(Optional Feature)**|국가·파트너·환경에 따라 선택적으로 제공되는 추가 기능.|
|**L10N(현지화)**|Localization. 언어·문화·법규에 맞게 제품을 조정하는 작업.|
|**Seeker(시커)**|신앙을 탐색 중이지만, 공식적으로 신앙을 고백하지 않았거나 조심스러운 사용자.|
|**위장 모드**|앱 아이콘·이름·UI를 일반 앱처럼 보이게 하여, 외부에서 종교 앱으로 보이지 않게 하는 모드.|
|**패닉 버튼(Panic Button)**|위급 상황에서 앱 내용을 빠르게 숨기거나 잠그는 긴급 조치 버튼.|
|**비상업·사역형**|광고·코인·과금 위주가 아니라, 선교·목회·사역을 주 목적으로 하는 서비스 형태.|
|**월드맵**|전 세계/지역별로 사진과 함께 묵상된 말씀의 분포를 보여주는 지도형 시각화 기능.|
|**GeoContext**|월드맵/추천에서 사용하는 국가·지역 버킷 기반 위치 맥락 데이터 구조(정밀 좌표 미포함).|
|**ISO 3166-1/2**|국가(**ISO 3166-1**) 및 하위 행정구역(**ISO 3166-2**)을 표준 코드로 표현하는 규격.|
|**폴리곤 집계(Polygon Aggregation)**|지도에서 정밀 좌표/핀 대신 국가·광역 경계(폴리곤) 단위로만 통계를 집계하는 방식.|
|**재랭킹(Re-ranking)**|1차 후보(Top-K)를 뽑은 뒤, 부가 신호(예: env_tags)를 **소가중치**로 적용해 순서를 미세 조정하는 단계.|
|**UNKNOWN**|위치/언어/환경 신호가 불안정하거나 추론 위험이 큰 경우에 의도적으로 더 이상 특정하지 않는 처리 라벨.|
|**time_bucket**|사용자의 시간 맥락을 거칠게 구간화한 값(예: sunrise/day/sunset/night/weekend)으로, 정밀 위치 없이 추천/집계를 보조.|
|**EXIF**|사진 파일에 포함되는 메타데이터(촬영 시각 등). 이 프로젝트에서는 `exif_time` 등 최소 필드만 활용하고 민감 정보는 저장하지 않음.|
|**ISO-8601**|날짜/시간을 문자열로 표현하는 국제 표준 형식(예: 2025-12-18T17:12:00+09:00).|
|**sRGB**|디스플레이/이미지 처리에서 널리 쓰이는 표준 색 공간.|
|**지오해시(Geohash)**|위경도를 문자열로 근사 압축하는 인코딩. 본 프로젝트는 정밀 좌표 영구 저장을 금지하며, 필요 시에도 일시 처리 범위로 제한.|
|이 8장은 “**어디서, 누구에게, 어떤 방식으로 이 프로젝트를 펼쳐 나갈 것인가**”에 대한 글로벌 전략의 뼈대를 제공한다.||
|이후 실제 실행 시에는 144개국 스코어링 엑셀과 전 세계 성경 앱 전략 보고서를 참고하여,||
|각 국가·언어·파트너별 **세부 실행 플랜(Execution Plan)** 문서로 분화할 수 있다.||

---

# 9장. AI 로직 & 점수 산정 구조 (정본 기준)

## 9.1 장 AI 로직 & 데이터 구조 (사진→말씀)

### 9.1.1 목적

- 사진→말씀 추천의 **엔드투엔드 AI 파이프라인** 구조 정리
    
- 각 단계에서 사용하는 **데이터 구조(스키마)** 정의
    
- **성능·품질·안전 기준** 및 **예외 처리·폴백** 원칙 명시
    
- 향후 AI/데이터 팀이 참고할 **단일 기준 문서(데이터북 & 로직 스펙)** 역할
    

### 9.1.2 범위

- 범위에 포함
    
    - **사진 지각→상징→주제→검색→재랭킹→가이드라인→최종 1–2절** 전 과정
        
    - **데이터 엔티티(이벤트·구절·매핑·기록)** 스키마
        
    - **데이터북(24 주제, 120 라벨, 매핑 매트릭스)** 구조
        
    - 모델 품질 기준, 예외 처리, 오프라인팩 구조
        
- 범위에서 제외
    
    - 앱/백엔드 인프라 상세는 **10장(플랫폼·인프라)**에서 다룸
        
    - 운영/비용/QA 조직은 **11장, 12장**에서 다룸
        

---

## 9.2 한 줄 요약

> 사용자의 사진을 **지각(피사체·장면·텍스트·컨텍스트)** 한 뒤,  
> 이를 **상징→주제**로 바꾸고, **벡터 검색 + 재랭킹 + 가이드라인 엔진**을 거쳐  
> **1–2절**과 **설명 카드**를 선택하는 **모듈형 AI 파이프라인**이며,  
> 모든 로직은 **데이터북(24 주제·120 라벨·매핑 매트릭스)**에 의해 통제된다.

---


## 9.3 점수 파이프라인 개요 (v9.1 v1.1)

본 프로젝트의 절(Verse) 분류 및 우선순위 산정은 다음의 3단계 파이프라인으로 구성됩니다.

1) **S1~S4** 신호 추출  
2) 가중합(**score_total**) 계산  
3) 보너스 적용 후 **priority_score** 산출  

본 절은 “기획 의도”가 아니라 **현재 코드에서 실제로 동작하는 로직**만 기술합니다.

## 9.4 S1~S4 신호 정의 및 가중치 적용

### 9.4.1 S1~S4 신호 체계

각 절은 다음 네 가지 축(**Signal**)으로 평가됩니다.

|구분|코드상 명칭|의미|
|---|---|---|
|S1|Object / Scene Anchors|사물·장면·상징 기반 키워드|
|S2|Emotion Anchors|감정·정서 표현|
|S3|Action Anchors|행위·명령·동작|
|S4|Theology Anchors|교리·신학 개념|

각 S값은 **키워드 매칭 히트 수 × 앵커 가중치** 누적으로 계산됩니다.

### 9.4.2 weights 시트 기반 가중치 (비율형)

**weights** 시트에는 S1~S4의 비율형 가중치가 정의되어 있습니다.

|key|의미|현재 적용 상태|
|---|---|---|
|w1|S1 가중치|✅ 사용됨|
|w2|S2 가중치|✅ 사용됨|
|w3|S3 가중치|✅ 사용됨|
|w4|S4 가중치|✅ 사용됨|
|secondary_ratio|보조 후보 제어|❌ 현재 코드 미사용|
|primary_margin|1위 확정 마진|❌ 현재 코드 미사용|

현재 운영 기준 예시: `w1=0.4, w2=0.2, w3=0.2, w4=0.2`  
→ 합계 1.0의 **비율형(weight ratio)** 설계

### 9.4.3 score_total 계산식 (현재 코드 기준)

`score_total = (w1 × S1) + (w2 × S2) + (w3 × S3) + (w4 × S4)`

- **S1~S4**는 독립적으로 계산된 후 가중합됩니다.  
- **score_total**은 정규화 이전의 기본 점수(**base score**) 역할을 합니다.

## 9.5 토픽 선정 로직 (Primary / Secondary)

### 9.5.1 토픽 점수 산정 방식
1) 각 토픽(**topic**)은 S1~S4에서 히트된 점수를 누적하여 보유합니다.  
2) 모든 토픽을 점수 기준으로 내림차순 정렬합니다.

### 9.5.2 결과 필드 구성 (현재 코드 기준)

|필드명|의미|
|---|---|
|topic_primary|점수 1위 토픽|
|topic_secondary_1|점수 2위 토픽|
|topic_secondary_2|점수 3위 토픽|
|topic_secondary_3|점수 4위 토픽|

**주의(중요)**  
현재 코드에는 아래 로직이 존재하지 않습니다.

- Top1–Top2 점수 차이에 따른 병기 여부 판단  
- **secondary_ratio / primary_margin** 기반 조건 분기  

즉, **항상 Top1~Top4가 고정 출력**됩니다.

## 9.6 우선순위 점수(priority_score) 계산

### 9.6.1 priority_rules 시트 구조

**priority_rules** 시트에는 다음 키들이 정의되어 있습니다.

|key|의미|현재 코드 적용 여부|
|---|---|---|
|bonus_anchor|앵커 보너스|✅ 적용|
|bonus_gospel|복음서 보너스|❌ 미적용|
|bonus_wcf|추가 보너스|❌ 미적용|
|normalize_divisor|정규화 분모|✅ 적용|

### 9.6.2 priority_score 계산식 (현재 코드 기준)

`bonus = (S1 > 0) ? bonus_anchor : 0`  

`priority_score = (score_total + bonus) / normalize_divisor`

- 보너스 조건은 **S1 히트 여부**만 사용합니다.  
- 복음서 여부, 예수 직접 발화 여부 등은 **현재 코드에 반영되지 않습니다.**  
- `normalize_divisor=1`이면 정규화 효과는 없습니다.

## 9.7 현재 설계의 해석 및 한계 (정본 명시)

- **weights / priority_rules**는 정책 선언용 파라미터 집합이지만, 실제 적용 여부는 **코드**에 의해 제한됩니다.
- 현재 운영 버전(**v9.1 v1.1**)에서는:  
  - S1~S4 가중합 → 정상 동작  
  - 앵커 기반 보너스 → 정상 동작  
  - 복음서/발화/마진/비율 제어 → 미적용  

본 MD는 **현재 구현된 동작**을 기준으로 작성되었으며, 미적용 항목은 향후 버전에서 확장 가능합니다.

### 9.7.1 미적용 정책 파라미터 목록 (현 버전)

|항목|시트|상태|
|---|---|---|
|bonus_gospel|priority_rules|선언만 존재|
|bonus_wcf|priority_rules|선언만 존재|
|secondary_ratio|weights|선언만 존재|
|primary_margin|weights|선언만 존재|

## 9.8 전체 파이프라인 개요

> **추가(정본 · v9.1 v1.1):** 점수 산정은 9.6에서 정의한 대로  
> **S1~S4 신호 추출 → score_total(가중합) → priority_score(보너스+정규화)** 순서로 동작합니다.

### 9.8.1 블록 다이어그램(텍스트 버전)
1. 사진 입력
    
2. **지각 레이어**: 피사체/장면/텍스트(OCR)/랜드마크 태깅
    
3. **컨텍스트 추론**: 시간·요일·계절·날씨·기기 언어
    
4. **상징 매핑**: 태그→성경적 상징(예: 산, 길, 병상 등)
    
5. **주제 매핑**: 상징→24개 **주제(Topic)**
    
6. **쿼리 벡터 생성**: 태그·상징·주제·컨텍스트를 하나의 **임베딩**으로 만듦
    
7. **벡터 검색**: 성경 구절 임베딩 DB에서 Top-K 후보 구절 검색
    
8. **재랭커(Re-ranker)**: 후보 구절과 현재 사진/주제의 적합도 심층 평가
    
9. **가이드라인 엔진**: 교리·민감도 규칙(Allow/Attenuate/Block) 적용
    
10. **다양성 픽(Diversity Pick)**: 최대 2절(Top-1, ALT-1) 선정
    
11. **설명 카드 생성**: "왜 이 구절인가?"를 **Why-score** 기반으로 요약
    
12. **사후 기록(PostAffection)**: 감정·기도·메모 기록 + 복습 스케줄 생성
    

### 9.8.2 단계별 요약 표
|단계|이름|입력|출력|
|---|---|---|---|
|1|**지각 레이어**|사진|태그(피사체·장면·OCR·랜드마크)|
|2|**컨텍스트 추론**|EXIF, 기기 정보|시간, 요일, 계절, 언어 등|
|3|**상징 매핑**|태그|상징 리스트|
|4|**주제 매핑(24 Topics)**|상징, 태그|주제(Topic) 가중치 벡터|
|5|**쿼리 벡터 생성**|태그, 주제, 컨텍스트|쿼리 임베딩 벡터|
|6|**벡터 검색**|쿼리 벡터|후보 구절 Top-K|
|7|**재랭커**|후보 구절 + 모든 컨텍스트|점수 리스트|
|8|**가이드라인 엔진**|점수 리스트, 규칙 테이블|필터링·감쇠된 점수 리스트|
|9|**다양성 픽**|필터링된 점수 리스트|최종 1–2절(Top-1, ALT-1)|
|10|**설명 카드 생성**|최종 구절, 태그, 주제, 근거|Why 카드 텍스트|
|11|**사후 기록 로직**|사용자 입력(감정, 메모, 기도)|PostAffection 이벤트|

### 9.8.3 시스템 아키텍처(엔드투엔드 레이어 구성)
위 단계별 파이프라인을 **어디서(앱/서버) 어떤 데이터와 함께 처리하는지**를 한 눈에 보기 위한 구조입니다.

_엔드투엔드 플로우(요약)_  
지각(Perception) → 상징(P1) → 신학 주제(P2) → 컨텍스트 보정(P3) → 임베딩 검색/재랭킹 → Top-1/2 선출 → 설명 카드 생성 → 사후 감정/기도 기록 → 월드맵(선택 공개) 집계

|레이어|앱(온디바이스)|서버|데이터/정책|
|---|---|---|---|
|지각|객체/장면/CLIP/OCR/랜드마크 인식, 시간대·기기 정보 추출|—|—|
|주제화|상징→주제 1차 매핑(경량 룰/모델)|주제 보정(P2, P3 레벨 신학·컨텍스트 보정)|24 주제·120 라벨, SymbolThemeMap 매트릭스|
|검색|오프라인 코어팩 기반 후보 구절(제한된 로컬 추천)|전체 임베딩 DB 벡터 검색 + 재랭킹|임베딩 벡터, 가이드라인 정책(Allow/Attenuate/Block)|
|결과|최종 1–2절 및 설명 카드 표시, 감정/기도 입력 UI 처리|Why-score 및 Why 로그 저장, 월드맵 집계|위치 좌표는 원칙적 비보관·퍼징, 민감도/프라이버시 정책 적용|

이 표를 통해 **어디까지를 온디바이스에서 처리하고, 어디서부터 서버·정책 레이어가 개입하는지**를 개발자들이 바로 이해할 수 있도록 했습니다.

### 9.8.4 파이프라인(초등학생도 이해 버전)
- 사진 읽기 → 힌트 만들기 → 상징·주제로 바꾸기 → 구절 찾기 → 똑똑한 재정렬 → 교리 점검 → 1–2절 + 짧은 설명 → 사후 감정 기록
    

> 위 흐름은 9.3.1~9.3.3에서 정의한 동일 파이프라인을 **어린이·비개발자도 이해하기 쉬운 언어**로 압축한 설명입니다.

### 9.8.5 의사코드(개발팀 참고용)
```pseudo
function recommendVerses(photo):
  tags = perceive(photo)
  symbols = map_to_symbols(tags)
  themes = symbols_to_themes(symbols)
  qvec = build_query_vector(tags, themes, context=weekday/season/weather)
  cands = vector_search(VerseDB, qvec, topK=50)
  scored = cross_encode(cands, tags, themes)
  scored2 = doctrinal_guard(scored, rules=EJTP_rules)
  final = diversity_pick(scored2, n=2)
  explain = make_explain_card(tags, themes, final)
  return {verses: final, reason: explain, themes: themes}
```

> 이 의사코드는 실제 구현 언어(Typescript, Kotlin 등)와 무관하게, 9장에서 정의한 각 모듈이 어떤 순서로 호출되는지 **개발팀에 전달하기 위한 표준 흐름**입니다.

---

### 9.8.3 시스템 개요 (개발자용 요약)
입력(이미지, EXIF, OCR) → **Perception** → **P1 상징** → **P2 주제** → **P3/S 보정** → **검색 Top-K/재랭킹** → **가이드라인 필터** → **Top-1 구절 + 이유 + 태그 + 점수**.

|No.|블록|입력/출력|비고|
|--:|---|---|---|
|1|Perception|img/EXIF/OCR → 라벨·장면·텍스트·POI·시각특징|온디바이스 우선(≤120ms)|
|2|P1 상징|라벨/장면/OCR → SYM-* 정규화|`P1_score=max(conf_i)×weight`|
|3|P2 주제|상징 집합 → 주제 가중 합산|그래프 간선 w_map|
|4|P3/S 보정|시간/장소/시각특징/군중성|±0.05~0.15 보정|
|5|검색/랭크|Top-K 벡터검색 → 재랭킹|KO 기본, EN 병기|
|6|가이드라인|교리/톤/민감 정책 적용|심판 단독 금지 등|
|7|응답|구절(ko/en), 이유, 태그, 점수, 안전플래그|Top-1(+보조1)|

### 9.8.4 I/O 계약 (추천 API 입·출력)
#### 9.8.4.1 입력 (클라이언트 → 추천 API)
|No.|필드|형식/설명|
|--:|---|---|
|1|image|긴 변 2048px, sRGB, ≤5MB|
|2|exif_time|ISO-8601, 서버 UTC 정규화|
|3|exif_location|lat,lon → 저장 시 **지오해시(6–7자)**|
|4|device_lang|`ko-KR` 기본, `en-US` 선택|
|5|network_state|`online`/`offline`|
|6|ocr_text|선택, 전처리·정규화 적용|
|7|user_flags|JSON(아동/민감 힌트 등)|

#### 9.8.4.2 출력 (표준 JSON)
|No.|필드|형식/설명|
|--:|---|---|
|1|verses[≤2]|`{book,chapter,v_from,v_to,text_ko,text_en?}` (첫 요소가 최종)|
|2|reasons|2–3문장: **상징→주제→근거** 인과|
|3|themes|최종 주제 태그(코드 ID) 2–4개|
|4|scores|`ImgRel/ContextFit/ThemeOrthodoxy/Penalty` 0.0–1.0|
|5|safety_flags|민감/완화/배제 코드 배열|

## 9.9 핵심 데이터 엔티티 구조
### 9.9.1 엔티티 개요
|엔티티 이름|역할 설명|
|---|---|
|**PhotoEvent**|한 번의 사진 촬영/선택 사건|
|**PerceptionResult**|사진에 대한 지각 결과(태그·컨텍스트)|
|**RecommendationResult**|추천된 구절·점수·근거·플래그|
|**Verse**|성경 한 절(또는 두 절 묶음)|
|**SymbolThemeMap**|태그/상징 ↔ 주제(Topic) 매핑|
|**ThemeVerseMap**|주제 ↔ 구절 매핑|
|**PostAffection**|추천 이후 사용자의 감정·기도·메모 기록|
|**OfflinePack**|오프라인 상황에서 사용할 코어 구절·임베딩 묶음|
|**EmotionVector**|표정·텍스트 등에서 추출된 감정 확률 벡터 및 대표 감정 태그|
|**EmotionScriptureMap**|감정·상황 키 ↔ 성경 구절 리스트 매핑 규칙|

### 9.9.2 PhotoEvent
- 목적: "사진 한 장"에 대해 **무엇이 입력되었는지**를 표현
    

|필드명|타입|설명|
|---|---|---|
|event_id|string|고유 ID|
|user_id|string|사용자 ID(익명/가명 가능)|
|image_id|string|이미지 저장 키(or 해시)|
|created_at|datetime|이벤트 발생 시각|
|exif_time|datetime|사진 촬영 시각(있다면)|
|device_locale|string|기기 언어(예: `ko-KR`, `en-US`)|
|country_code|string|국가 코드(예: `KR`, `US`)|
|privacy_flags|json|프라이버시 관련 플래그(위치 비저장, 민감 이미지 등)|

### 9.9.3 PerceptionResult
|필드명|타입|설명|
|---|---|---|
|event_id|string|PhotoEvent와 1:1 연결|
|obj_tags|json|피사체 라벨 리스트(예: 사람, 산, 병원)|
|scene_tags|json|장면 라벨(실내/실외, 도시/자연 등)|
|ocr_text|string|OCR로 읽은 텍스트 요약|
|landmark|string|랜드마크 라벨(있다면)|
|weekday|int|요일(0~6)|
|season|string|계절(예: SPRING, SUMMER)|
|time_bucket|string|시간대(예: MORNING, EVENING)|

### 9.9.4 RecommendationResult
|필드명|타입|설명|
|---|---|---|
|event_id|string|PhotoEvent와 연결|
|top1_verse_id|string|최종 추천 1순위 구절 ID|
|alt1_verse_id|string|대체 구절 ID(있다면)|
|themes|json|주제(Topic) 리스트 및 가중치|
|scores|json|이미지 적합도, 컨텍스트 적합도, 교리 적합도 등|
|filter_hits|json|가이드라인 엔진에서 적용된 규칙 목록|
|why_card_text|string|설명 카드 텍스트("왜 이 구절인가")|

### 9.9.5 Verse
|필드명|타입|설명|
|---|---|---|
|verse_id|string|고유 ID|
|book|string|성경 책 이름|
|chapter|int|장 번호|
|verse_from|int|시작 절|
|verse_to|int|끝 절(1절만이면 = verse_from)|
|text_ko|text|개역개정 본문|
|text_en|text|NIV 본문(옵션)|
|topic_ids|json|연관 주제(Topic) 리스트|
|symbol_ids|json|연관 상징 리스트|
|embed_vector|vector|임베딩 벡터|
|doctrinal_tag|json|교리 관련 메모(주의/금지 플래그 등)|

### 9.9.6 PostAffection
|필드명|타입|설명|
|---|---|---|
|event_id|string|PhotoEvent와 1:1 연결|
|verse_id|string|사용자가 실제로 묵상한 구절 ID|
|feeling_tags|json|감정 태그(위로, 감사, 슬픔 등)|
|memo|text|자유 메모|
|prayed|bool|기도 여부|
|next_reviews|json|1/3/7/30일 복습 예약 정보|

### 9.9.7 엔티티 요약 스키마(정식 정의)
|엔티티|필드 요약|
|---|---|
|PhotoEvent|{ event_id, user_id, exif_time, device_locale, country_code, privacy_flags }|
|PerceptionResult|{ obj_tags[], scene_tags[], ocr_text, landmark, weekday, season, time_bucket }|
|Verse|{ verse_id, book, chapter, verse_from, verse_to, text_ko, text_en, topic_ids[], symbol_ids[], embed_vector, doctrinal_tag }|
|Mapping|{ symbol↔theme[], theme↔verse_ids[], guidelines{doctrinal_rules[], regional[]} }|
|PostAffection|{ user_id, event_id, verse_id, feeling_tags[], memo, prayed, next_reviews, timestamp }|
|GeoPin|{ pin_id, photo_id, verse_id, geohash, jittered_lat, jittered_lon, time_bucket, visibility, k_score, flags{sensitive, child, church} }|

#### 9.9.8 GeoPin 기반 실전 예시(지도·위치 연동)
아래 표는 **GeoPin·time_bucket·위치 컨텍스트**가 추천 엔진과 어떻게 연결되는지 보여주는 예시입니다. 실제 수치·정책은 9.7 데이터북 및 가이드라인 엔진 규칙에 따라 결정됩니다.

|예시|탐지/문맥|추천 구절(개역개정)|대안 구절|설명|
|---|---|---|---|---|
|A 해변 일출(제주, 주일 새벽)|바다·새벽·주일·해안/항구 컨텍스트|예레미야애가 3:22–23|시편 130:5 등|새벽의 ‘새로움’과 바다·빛 상징으로 소망·신실 주제 강화|
|B 도심 우천(서울, 평일 밤)|도심·야간·우천·인도/불안 컨텍스트|시편 23:4|이사야 41:10|어두운 비 오는 도시 한가운데에서도 하나님이 함께 인도하신다는 주제를 강조|

### 9.9.7 EmotionVector
- 목적: **감정 인식 모델**이 산출한 7개 기본 감정 확률과 대표 감정 태그를 구조화하여 저장
    

|필드명|타입|설명|
|---|---|---|
|event_id|string|PhotoEvent와 1:1 연결|
|emotion_probs|json|7개 기본 감정(행복·놀람·슬픔·분노·혐오·두려움·중립)의 확률 벡터|
|primary_label|string|가장 높은 확률을 갖는 대표 감정 라벨|
|intensity|float|감정 강도(0.0~1.0)|
|source|string|감정 소스(`face_model`, `manual`, `text_model` 등)|
|updated_at|datetime|마지막 계산 시각|

### 9.9.8 EmotionScriptureMap
- 목적: **감정+상황 조합 키**를 성경 구절 리스트와 연결하는 규칙 DB 정의
    

|필드명|타입|설명|
|---|---|---|
|key_id|string|매핑 키 ID(예: `sad_alone`, `joy_wedding`)|
|emotion_key|string|정규화된 감정+상황 문자열 키|
|topic_ids|json|이 키와 연관된 24개 주제 중 주요 주제 ID 리스트|
|verse_ids|json|기본 추천 대상이 되는 Verse ID 리스트|
|priority|int|동일 키 내 구절 랭킹 우선순위|
|notes|text|신학적 유의사항·사용 메모|
|updated_at|datetime|마지막 수정 시각|

---

## 9.10 AI 모듈 상세
### 9.10.1 지각 레이어
#### 9.10.1.1 입력·전처리 & 민감 라우팅(Perception 연결)
이 절은 **Perception(지각) 실행 직전**에 수행되는 입력 표준화·전처리와, 민감 상황을 **안전 플로우로 라우팅**하기 위한 규칙을 정의합니다. (Perception 결과는 이후 P1→P2→P3/S→검색/재랭킹으로 이어짐)

##### 9.10.1.1.1 사용자 플로우(텍스트 상태도)
촬영/업로드  
→ EXIF 확인(회전/시각)  
→ 입력 표준화(리사이즈 + 레터박스)  
→ 민감 라우팅(safety_flags 산출)  
→ Perception 실행(객체/장면/CLIP/OCR/선택: 랜드마크)  
→ 정규화 태그 패킹(JSON)  
→ P1 상징 → P2 주제 → P3/S 보정 → 추천/재랭킹  
→ Top-1(±보조) + Why 카드  
→ (옵션) 사후 기록(감정/기도/메모)

##### 9.10.1.1.2 전처리(표준화) 규칙 표
|단계|입력|처리 규칙(권장)|출력|로그(권장)|
|---|---|---|---|---|
|1|이미지 + EXIF|EXIF Orientation 적용(정방향), 촬영시각 추출(없으면 업로드 시각)|정방향 이미지, 기준 시각|exif_present, orientation_applied, time_source|
|2|원본 이미지|긴 변 2048px 기준 리사이즈, 비율 유지, 레터박스(패딩)로 정사각/지정 비율 정규화|모델 입력 텐서(표준 크기)|resize_scale, pad(px), input_size|
|3|색공간/품질|sRGB 가정, 과도한 샤프/노이즈 억제(선택), 압축 품질 표준화|안정적 시각 피처|color_space, jpeg_q|
|4|OCR 입력|OCR 텍스트 정규화(공백/개행, 기호 정리, 금칙어·개인정보 패턴 마스킹)|ocr_text_norm|ocr_len, pii_masked|
|5|위치(선택)|좌표 저장 금지 원칙. 필요 시 지오해시(6–7자)로만 변환 후 사용|geo_ctx(거친 단위)|geo_mode(off/geohash), geohash_len|

##### 9.10.1.1.3 민감 라우팅(safety_flags) 규칙(요약)
- 목적: 민감 사진(아동/의료/장례/정치·갈등/정밀 위치 등)에서 **추천 톤·공개 정책·차단 정책**을 일관되게 적용하기 위함
    
- 출력: `safety_flags[]` (예: `child_present`, `medical_scene`, `funeral_scene`, `politics_conflict`, `precise_location_hint`)
    
- 적용 위치
    
    - **Perception 이전**: 공유 기본값/저장 정책(비공개 권고 등) 결정
        
    - **Top-1 직전**: 가이드라인 엔진에서 Allow/Attenuate/Block을 최종 적용(9.6.4, 9.7 policies 시트와 연결)
        

|민감 유형|탐지 힌트(예시)|라우팅 기본값(권장)|후속 영향|
|---|---|---|---|
|아동/의료|얼굴/유아 키포인트, 병원/병실, 의료기기, OCR(ER 등)|비공개 권고 + 외부 공유 억제|위로/보호 톤 우선, 민감 본문 감쇠/차단|
|장례/병상|관/조문/묘지/병상 장면|위로/소망 본문 우선|정죄 단독 구절 차단(가이드라인)|
|정치/갈등|현수막/시위/갈등 상징, OCR(정당/구호)|중립 권면 우선|선동/분열 조장 문구 감쇠/차단|
|정밀 위치|좌표/주소/차량번호/학교명 등 OCR 패턴|좌표 저장 금지 + 공유 제한|지오해시/퍼징만 허용, 노출 최소화|

- 역할: 사진 안의 **피사체·장면·텍스트·랜드마크**를 인식
    
- 내부 구성
    
    - **객체 탐지 모델** (예: 사람, 나무, 도로, 침대, 십자가 등)
        
    - **장면 분류 모델** (실내/실외, 도시/자연, 병원/교회 등)
        
    - **OCR 엔진** (간판, 문서, 디스플레이 텍스트)
        
    - **랜드마크 인식** (교회 외관, 산/바다, 도시 스카이라인 등)
        
- 품질 기준(예시)
    
    - 주요 객체 Top-5 인식 **정확도 ≥ 80%**
        
    - 민감 장면(아동, 병원, 장례 등) **리콜 ≥ 90%**
        
- 세부 서브모듈 설계
    
    - **감정 인식 모델(Emotion Analysis Model)**: MobileNetV2 계열 경량 CNN + Dense 분류 헤드, 64×64 얼굴 크롭 입력, 7개 기본 감정(행복·놀람·슬픔·분노·혐오·두려움·중립)에 대한 softmax 확률 출력.
        
    - **객체 탐지 모델(Object Detection Model)**: SSD MobileNet V3 또는 YOLOv5n 급 1단계 감지 모델, COCO 계열 80종 이상 객체 지원, INT8 양자화 TFLite로 변환, 신뢰도 60% 이상 상위 3개 객체만 태그로 사용.
        
    - **도메인 확장 태그**: 십자가, 교회 건물, 강단 등 일반 COCO에 없는 상징 객체는 커스텀 데이터로 추가 학습하여 성경 맥락 관련 장면 인식률을 높인다.
        
- 온디바이스
    
    - **지각 레이어**(경량 모델: 감정 인식·객체 탐지 TFLite, 단일 사진 기준 50~150ms)
        
    - 오프라인팩 기반 간단 추천
        
- 서버
    
    - 전체 벡터 검색/재랭킹
        
    - 가이드라인 엔진
        
    - 월드맵·통계 등
        

##### 9.10.1.1.4 상태·트리거·조치(TSV)
아래 표는 9.5.1.1.1의 사용자 플로우를 **상태 머신 관점**으로 쪼갠 것입니다. 개발·QA·UX가 같은 용어로 "지금 무슨 단계이며, 무엇을 해야 하고, 사용자에게 무엇을 보여줄지"를 합의할 때 사용합니다.

|No.|상태|진입 트리거|핵심 조치|UX 노출|
|--:|---|---|---|---|
|1|EXIF_NORMALIZE|이미지 수신|Orientation 정방향, 촬영시각 추출|없음(백그라운드)|
|2|INPUT_STANDARDIZE|모델 입력 준비|리사이즈 + 레터박스 패딩(규격 통일)|없음|
|3|SAFETY_ROUTING|민감 신호 가능성|얼굴/아동/의료 탐지 시 safety_flags만 유지|공유/공개 권고(필요 시)|
|4|PERCEPTION_RUN|전처리 완료|objects/scenes/clip/ocr/(선택)landmark 산출|로딩(짧게)|
|5|LOW_CONFIDENCE|역광/야간/블러 등|conf 저하 감지 → 추천 보수화|“정확도 낮음” 1줄(선택)|
|6|PACK_JSON|Perception 완료|정규화·필터·Top-K 적용 후 JSON 패킹|없음|
|7|RECOMMEND|태그 패킹 완료|상징/주제/보정/재랭킹 후 결과 생성|Top-1 + Why 카드|

```tsv
No	상태	진입 트리거	핵심 조치	UX 노출
1	EXIF_NORMALIZE	이미지 수신	Orientation 정방향, 촬영시각 추출	없음(백그라운드)
2	INPUT_STANDARDIZE	모델 입력 준비	리사이즈 + 레터박스 패딩(규격 통일)	없음
3	SAFETY_ROUTING	민감 신호 가능성	얼굴/아동/의료 탐지 시 safety_flags만 유지	공유/공개 권고(필요 시)
4	PERCEPTION_RUN	전처리 완료	objects/scenes/clip/ocr/(선택)landmark 산출	로딩(짧게)
5	LOW_CONFIDENCE	역광/야간/블러 등	conf 저하 감지 → 추천 보수화	“정확도 낮음” 1줄(선택)
6	PACK_JSON	Perception 완료	정규화·필터·Top-K 적용 후 JSON 패킹	없음
7	RECOMMEND	태그 패킹 완료	상징/주제/보정/재랭킹 후 결과 생성	Top-1 + Why 카드
```

### 9.10.2 상징(Signal→Symbol) 매핑
P1 레이어는 지각(Perception) 단계에서 추출된 **라벨·장면·CLIP(유사 텍스트)·OCR·POI 신호**를 성경적 상징(Symbol) 단위로 정리하고 가중치를 부여하는 구간입니다. 이 단계의 출력이 곧 P2 주제 레이어의 핵심 입력이 됩니다.

- Perception → Symbol 변환: 객체/장면/CLIP/OCR 태그를 **상징 코드(SYM-**)로 정규화
    
- 스코어링: `P1_score = max(conf_i) × weight_sym`
    
- 충돌 처리: 상위 두 상징 점수 차이가 작을 때 `|Δscore| < τ(=0.08)`이면 **복합 상징 병치** 허용
    
- 정책: 장례·병상·아동·전쟁 등 **민감 상징은 기본 Attenuate** 후, 위로/보호 톤 위주의 주제로 넘김
    

#### 9.10.2.1 P1 상징 레이어 (기획 의도 + 코어 상징 테이블)
P1 상징 레이어는 다음 **5개 코어 군**으로 구성됩니다. 각 군은 9.7 데이터북의 `objects` 시트와 코드(SYM-*)로 연결되며, 아래 표는 **기획 의도·대표 주제·개발 메모**를 정리한 기준 버전입니다.

##### 9.10.2.1.1 자연(지형·천체·기상) — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|산|피난/견고/시련|인도·보호·거룩|윤곽/고도·수평선 구분|
|2|바다|혼돈/깊음/광활|창조·권능·소망|수평선/파도 패턴|
|3|강·샘|생명/공급|회복·은혜·기억|흐름성/연안 구조|
|4|광야|시험/의존|훈련·소명|식생 희소/고립성|
|5|숲·나무|생장/의지|번성·정의|수관/밀도 지표|
|6|꽃·풀|덧없음/은혜|겸손·감사|색채/비율≥3%|
|7|해·빛|창조/인도/영광|소망·계시|역광/색온도 트리거|
|8|달·별|시간/질서|기억·약속|야간·점광 패턴|
|9|비·눈|은혜/정결|회복·자비|강수/텍스처|
|10|폭풍·바람|위기/전환|보호·신뢰|구름질/흐림도 급변|

##### 9.10.2.1.2 생명(식물·동물·인간·표정) — 9코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|씨앗·열매|시작/결과·성장·충만|창조/섭리, 지혜/훈련, 감사|과일/종자 형태, 포도원 OCR 동의어 관리|
|2|포도나무·가지|연합·의존·열매|공동체/연합, 소명/순종|덩굴형·송이 패턴, 표지판 OCR 우선|
|3|양|보호 필요·목자 관계|사랑/긍휼, 인도/소망|종 분류 conf≥0.8, 군집 보정|
|4|사자|권세·위엄·경계|공의/정의, 소명/순종|갈기/체형, 엠블럼 OCR 보조|
|5|비둘기|평화·성령 상징|위로/평강, 예배/감사|흰색 소형 조류·올리브 가지|
|6|물고기|공급·증언·사명|선교/증언, 감사|ΙΧΘΥΣ/상점 구분, 표식 OCR|
|7|어린아이|보호·양육·순수|사랑/긍휼, 공동체/연합|유모차/젖병 키포인트, 민감 플래그|
|8|노인|지혜·기억·돌봄|지혜/훈련, 사랑/긍휼|보행보조구/백발, 존칭 톤|
|9|인간 표정|정서 단서|위로/평강, 사랑/긍휼|감정 conf≥0.60, 분노/공포 완화|

##### 9.10.2.1.3 인공물(인간 제작물) — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|집·가정|쉼·돌봄|공동체/연합, 사랑/긍휼|지붕/창호, 간판 OCR|
|2|도시·거리|세상·소명 현장|선교/증언, 공의/정의|간판 밀도/교통량, 야간 보정|
|3|길·다리|인도·결단·연결|인도/소망, 지혜/훈련|차선/소실점, 표지 OCR|
|4|학교|배움·훈련|지혜/훈련, 소명/순종|교복/강의실/간판 OCR|
|5|병원|치유·위로·보호|위로/평강, 사랑/긍휼|ER/응급실 OCR, 위로 톤|
|6|시장·상점|생계·공정|공의/정의, 감사|저울/가격표 OCR, 로고 블러|
|7|법정·재판|정의·책임|공의/정의, 지혜/훈련|법봉/저울 아이콘, 균형 톤|
|8|공장·도구·차/기차/비행기|노동·생산·이동|소명/순종, 청지기|공구/기계/탑승권 OCR|
|9|교회·예배당|예배·연합·기억|예배/감사, 공동체/연합|종탑/십자가/예배 인파|
|10|무덤·기념|유한성·기억·소망|위로/평강, 구원/복음|묘비/헌화, 공유 제한 검토|

##### 9.10.2.1.4 인간 활동 — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|노동·수고|책임·정직·청지기|소명/순종, 공의/정의|작업복/공구 포즈|
|2|농사·수확|씨앗→열매·인내|지혜/훈련, 감사|작물/계절 보정|
|3|공부·독서|배움·분별|지혜/훈련, 소명/순종|책/필기구/성경 OCR|
|4|음악·예술|찬양·표현·재능|예배/감사, 공동체/연합|악기/무대/합창|
|5|스포츠·경기|절제·경주·상급|지혜/훈련, 소명/순종|트랙/메달/유니폼|
|6|결혼·잔치|언약·기쁨·연합|공동체/연합, 예배/감사|반지/부케/예식장 OCR|
|7|육아·돌봄|보호·양육·책임|사랑/긍휼, 공동체/연합|아기용품/포옹, 민감 플래그|
|8|여행·순례|보냄·인도·보호|인도/소망, 선교/증언|공항/탑승권/배낭|
|9|전쟁·무기|갈등·위험·분별|공의/정의, 위로/평강|무기 탐지 시 완화/화해 톤|
|10|정치·회의|공공 판단·지혜|지혜/훈련, 공의/정의|의사봉/회의실/현수막|

##### 9.10.2.1.5 공간·장면 — 7코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|실내·집중|묵상·학습·기도|지혜/훈련, 예배/감사|실내 조도/정숙도|
|2|실외·광장|개방·선포·연합|선교/증언, 공동체/연합|확장 공간/현수막|
|3|군중|긍휼·질서·연대|사랑/긍휼, 공동체/연합|인원/밀도, 얼굴 블러 ON|
|4|고립·홀로|성찰·임재·보호|위로/평강, 인도/소망|단일 인물/야간 보정|
|5|골목·어둑함|경계·분별·지혜|지혜/훈련, 보호|저조도/협폭, 공포 금지 톤|
|6|병실·대기실|연약함·위로·기다림|위로/평강, 사랑/긍휼|의료기기, 공유 제한|
|7|성지·랜드마크|기억·예배·감사|예배/감사, 선교/증언|랜드마크 POI/OCR|

### 9.10.2 상징(Signal→Symbol) 매핑
지각 레이어에서 나온 객체·장면·OCR·POI 신호를 **성경적 상징(Symbol)** 단위로 정규화하고, 각 상징에 가중치를 부여해 P2 주제 레이어의 입력으로 사용하는 단계입니다. 이 절에서는 P1 상징 레이어의 설계 의도와, 핵심 상징 테이블(코어 상징 세트)을 정식 번호 체계로 정리합니다.

#### 9.10.2.1 P1 상징 레이어 (기획 의도 + 기술 규칙)
Perception 라벨/장면/OCR/POI 신호를 **성경적 상징(Symbol)** 단위로 표준화하고 가중치를 부여합니다. 출력은 P2 주제 레이어의 핵심 피처입니다.  
**스코어링** `P1_score = max(conf_i) × weight_sym`  
**충돌** `|Δscore| < τ(=0.08)` → 복합 상징 병치  
**정책** 민감 상징 **완화(Attenuate)** + 톤 가이드

#### 9.10.2.2 자연(지형·천체·기상) — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|산|피난/견고/시련|인도·보호·거룩|윤곽/고도·수평선 구분|
|2|바다|혼돈/깊음/광활|창조·권능·소망|수평선/파도 패턴|
|3|강·샘|생명/공급|회복·은혜·기억|흐름성/연안 구조|
|4|광야|시험/의존|훈련·소명|식생 희소/고립성|
|5|숲·나무|생장/의지|번성·정의|수관/밀도 지표|
|6|꽃·풀|덧없음/은혜|겸손·감사|색채/비율≥3%|
|7|해·빛|창조/인도/영광|소망·계시|역광/색온도 트리거|
|8|달·별|시간/질서|기억·약속|야간·점광 패턴|
|9|비·눈|은혜/정결|회복·자비|강수/텍스처|
|10|폭풍·바람|위기/전환|보호·신뢰|구름질/흐림도 급변|

#### 9.10.2.3 생명(식물·동물·인간·표정) — 9코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|씨앗·열매|시작/결과·성장·충만|창조/섭리, 지혜/훈련, 감사|과일/종자 형태, 포도원 OCR 동의어 관리|
|2|포도나무·가지|연합·의존·열매|공동체/연합, 소명/순종|덩굴형·송이 패턴, 표지판 OCR 우선|
|3|양|보호 필요·목자 관계|사랑/긍휼, 인도/소망|종 분류 conf≥0.8, 군집 보정|
|4|사자|권세·위엄·경계|공의/정의, 소명/순종|갈기/체형, 엠블럼 OCR 보조|
|5|비둘기|평화·성령 상징|위로/평강, 예배/감사|흰색 소형 조류·올리브 가지|
|6|물고기|공급·증언·사명|선교/증언, 감사|ΙΧΘΥΣ/상점 구분, 표식 OCR|
|7|어린아이|보호·양육·순수|사랑/긍휼, 공동체/연합|유모차/젖병 키포인트, 민감 플래그|
|8|노인|지혜·기억·돌봄|지혜/훈련, 사랑/긍휼|보행보조구/백발, 존칭 톤|
|9|인간 표정|정서 단서|위로/평강, 사랑/긍휼|감정 conf≥0.60, 분노/공포 완화|

#### 9.10.2.4 인공물(인간 제작물) — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|집·가정|쉼·돌봄|공동체/연합, 사랑/긍휼|지붕/창호, 간판 OCR|
|2|도시·거리|세상·소명 현장|선교/증언, 공의/정의|간판 밀도/교통량, 야간 보정|
|3|길·다리|인도·결단·연결|인도/소망, 지혜/훈련|차선/소실점, 표지 OCR|
|4|학교|배움·훈련|지혜/훈련, 소명/순종|교복/강의실/간판 OCR|
|5|병원|치유·위로·보호|위로/평강, 사랑/긍휼|ER/응급실 OCR, 위로 톤|
|6|시장·상점|생계·공정|공의/정의, 감사|저울/가격표 OCR, 로고 블러|
|7|법정·재판|정의·책임|공의/정의, 지혜/훈련|법봉/저울 아이콘, 균형 톤|
|8|공장·도구·차/기차/비행기|노동·생산·이동|소명/순종, 청지기|공구/기계/탑승권 OCR|
|9|교회·예배당|예배·연합·기억|예배/감사, 공동체/연합|종탑/십자가/예배 인파|
|10|무덤·기념|유한성·기억·소망|위로/평강, 구원/복음|묘비/헌화, 공유 제한 검토|

#### 9.10.2.5 인간 활동 — 10코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|노동·수고|책임·정직·청지기|소명/순종, 공의/정의|작업복/공구 포즈|
|2|농사·수확|씨앗→열매·인내|지혜/훈련, 감사|작물/계절 보정|
|3|공부·독서|배움·분별|지혜/훈련, 소명/순종|책/필기구/성경 OCR|
|4|음악·예술|찬양·표현·재능|예배/감사, 공동체/연합|악기/무대/합창|
|5|스포츠·경기|절제·경주·상급|지혜/훈련, 소명/순종|트랙/메달/유니폼|
|6|결혼·잔치|언약·기쁨·연합|공동체/연합, 예배/감사|반지/부케/예식장 OCR|
|7|육아·돌봄|보호·양육·책임|사랑/긍휼, 공동체/연합|아기용품/포옹, 민감 플래그|
|8|여행·순례|보냄·인도·보호|인도/소망, 선교/증언|공항/탑승권/배낭|
|9|전쟁·무기|갈등·위험·분별|공의/정의, 위로/평강|무기 탐지 시 완화/화해 톤|
|10|정치·회의|공공 판단·지혜|지혜/훈련, 공의/정의|의사봉/회의실/현수막|

#### 9.10.2.6 공간·장면 — 7코어
|No.|상징|의미/역할|주된 매핑(예시 주제)|개발자 메모|
|--:|---|---|---|---|
|1|실내·집중|묵상·학습·기도|지혜/훈련, 예배/감사|실내 조도/정숙도|
|2|실외·광장|개방·선포·연합|선교/증언, 공동체/연합|확장 공간/현수막|
|3|군중|긍휼·질서·연대|사랑/긍휼, 공동체/연합|인원/밀도, 얼굴 블러 ON|
|4|고립·홀로|성찰·임재·보호|위로/평강, 인도/소망|단일 인물/야간 보정|
|5|골목·어둑함|경계·분별·지혜|지혜/훈련, 보호|저조도/협폭, 공포 금지 톤|
|6|병실·대기실|연약함·위로·기다림|위로/평강, 사랑/긍휼|의료기기, 공유 제한|
|7|성지·랜드마크|기억·예배·감사|예배/감사, 선교/증언|랜드마크 POI/OCR|

## 9.11 데이터북(Data Book) 구조
### 9.11.1 데이터북 개요
- 단일 **엑셀/CSV 세트**로 관리되는, 본 프로젝트의 핵심 지식 구조.
    
- 구성
    
    - **topics** 시트: 24개 주제 정의
        
    - **objects** 시트: 120개 라벨 정의
        
    - **mapping_object_topic** 시트: 라벨×주제 가중치 매트릭스
        
    - **policies** 시트: Allow/Attenuate/Block 규칙
        
    - **notes** 시트: 신학·데이터 메모
        

### 9.11.2 topics 시트
|필드명|설명|
|---|---|
|topic_id|주제 ID(정수 또는 문자열)|
|slug|영문 슬러그|
|name_ko|한글 이름|
|name_en|영문 이름|
|desc_ko|한글 설명|
|desc_en|영문 설명|
|policy_tag|정책 관련 태그 목록|
|anchor_refs|대표 성경 구절 ID 리스트|
|updated_at|마지막 수정일|

### 9.11.3 objects 시트
|필드명|설명|
|---|---|
|object_id|라벨 ID|
|slug|영문 슬러그|
|name_ko|한글 이름(예: 산, 길, 침대)|
|name_en|영문 이름|
|synonyms_ko|한글 동의어 리스트|
|synonyms_en|영문 동의어 리스트|
|category|상위 카테고리(사람, 자연, 건물 등)|

### 9.11.4 mapping_object_topic 시트
|필드명|설명|
|---|---|
|object_id|라벨 ID|
|topic_id|주제 ID|
|w_obj|피사체 기반 가중치|
|w_scene|장면 기반 가중치|
|w_ocr|OCR 텍스트 기반 가중치|
|w_landmark|랜드마크 기반 가중치|
|penalty|페널티 값(논쟁성/민감성 등)|
|notes|특이사항 메모|

### 9.11.5 데이터북 요약 표
|구성|설명|
|---|---|
|24 주제(Topics)|신학 주제 정의·정책·번역키|
|120 라벨(Objects)|피사체 라벨·동의어|
|라벨×주제 매트릭스|가중치·보정|
|정책/노트|Allow/Attenuate/Block 규칙·메모|

### 9.11.6 파일 목록(실제 산출물)
|파일|용도|
|---|---|
|24Topics_AllInOne_v2_3_ready_final.xlsx|24 주제 정의/정책/번역키 마스터|
|성경앱_신학주제_24개_v1.csv|24 주제 경량 버전(앱·온디바이스용)|
|성경앱_피사체라벨_120개_v1.csv|120 라벨 정의(피사체·동의어 포함)|
|피사체120_라벨_주제가중치_v1.csv|120×24 매트릭스(라벨×주제가중치)|

#### 9.11.6.1 데이터 파일 인덱스(정본)
| 파일                                      | 주요 시트                                                                          | 주요 용도                           |
| --------------------------------------- | ------------------------------------------------------------------------------ | ------------------------------- |
| 1208_성경프로젝트_144개국_우선순위_vFinal.xlsx      | Raw_Original(140), Parameters(7), TierRules(4), AE_Clusters(4), PP_Clusters(4) | 144개국 우선순위 산정(원본+규칙)            |
| 24Topics_AllInOne_v2_3_ready_final.xlsx | topics_24(24), anchors_ko, anchors_en, weights, verses, import_ko, ...         | 역본/구절/주제/앵커 데이터북(통합)            |
| 피사체120_라벨_주제가중치_v1.csv                  | -                                                                              | 120 피사체 × 24 주제 가중치(정본)         |
| Bible_Object_Definition_120_v1.csv      | -                                                                              | 120 피사체 라벨 정의/동의어(정본)           |
| detection_labels_map.csv                | -                                                                              | 온디바이스 감지 라벨(모델) ↔ object_tag 매핑 |
### 9.11.7 공통 스키마 규칙
|규칙|값|
|---|---|
|인코딩|UTF-8|
|키|PK id, FK *_id|
|가중치 범위|0.00~1.00|
|날짜|YYYY-MM-DD|
|로케일|BCP 47|

### 9.11.8 CSV 스키마(경량 배포용)
|테이블|컬럼|
|---|---|
|24주제|topic_id, slug, name_ko, name_en, desc_ko, desc_en|
|120라벨|object_id, slug, name_ko, name_en, synonyms_ko[], synonyms_en[]|
|매트릭스|object_id, topic_id, w_obj, w_scene, w_ocr, w_landmark, penalty|

### 9.11.9 관계 모델 & 가중치 합성 규칙
- 관계 모델
    
    - **Topics(24) ⟷ Objects(120)**: N:M 구조이며, `mapping_object_topic` 매트릭스가 두 엔티티 사이의 가중치·보정 값을 저장합니다.
        
- 가중치 합성 규칙(내부 구현용)
    
    - `w_base = w_obj + w_scene + w_ocr + w_landmark`
        
    - `w_penalized = max(0, w_base - penalty)`
        
    - 정규화된 `w_penalized` 값들을 기반으로 주제별 사전 점수(preThemeScore)를 계산하고, 이는 9.5.3.1의 `ThemeScore(t)` 및 9.6.1의 최종 Score 식에서 **ImgRel/ThemeOrthodoxy** 성분을 구성하는 핵심 입력으로 사용됩니다.
        

#### 9.11.9.1 추천 엔진과의 연결(문맥별 주제 가중치 예시)
다음 표는 **대표적인 장면·문맥에 따라 어떤 주제 가중치가 강화되는지**를 예시로 보여 줍니다. 실제 값은 `mapping_object_topic` 매트릭스 및 컨텍스트 보정 로직에서 수치화됩니다.

|문맥|가중 주제 예|
|---|---|
|산/고도↑|경외, 도움, 인내|
|해안/항구|창조, 빛, 인도|
|도심 야간/우천|안식, 인도|
|교회/주일 오전|예배, 공동체|

---
### 9.11.10 데이터 정본 스냅샷 (24 주제/120 피사체/Top 가중치)
#### 9.11.10.1 24 주제 표준 목록
|topic_id|topic_name|
|---|---|
|1|창조·섭리|
|2|임재·영광|
|3|거룩·성화|
|4|은혜|
|5|믿음·신뢰|
|6|회개|
|7|구원·의(칭의)|
|8|소망·부활|
|9|말씀·진리|
|10|기도|
|11|예배·찬양|
|12|순종·겸손|
|13|사랑(아가페)|
|14|인내·시험|
|15|지혜·분별|
|16|성령·열매|
|17|평강·샬롬|
|18|공동체·연합|
|19|정의·공의|
|20|화해·용서(관계)|
|21|소명·일·청지기|
|22|가정·양육|
|23|치유·회복|
|24|보호·인도|

#### 9.11.10.2 120 피사체(Objects) 표준 목록
|id|대분류|라벨|별칭|
|---|---|---|---|
|1|자연/기상|산|mountain, 산맥|
|2|자연/기상|언덕||
|3|자연/기상|바다|sea, 바닷가|
|4|자연/기상|호수|lake|
|5|자연/기상|강|river|
|6|자연/기상|숲|forest|
|7|자연/기상|나무|tree|
|8|자연/기상|들판|field|
|9|자연/기상|하늘|sky|
|10|자연/기상|구름|cloud|
|11|자연/기상|비|rain|
|12|자연/기상|눈|snow|
|13|자연/기상|폭풍|storm|
|14|자연/기상|무지개|rainbow|
|15|자연/기상|태양|sun|
|16|자연/기상|달|moon|
|17|자연/기상|별|star|
|18|자연/기상|불|fire|
|19|자연/기상|물|water|
|20|자연/기상|바람|wind|
|21|도시/장소|길|road|
|22|도시/장소|다리|bridge|
|23|도시/장소|도시|city|
|24|도시/장소|건물|building|
|25|도시/장소|집|home, house|
|26|도시/장소|교회|church|
|27|도시/장소|성전|temple|
|28|도시/장소|시장|market|
|29|도시/장소|학교|school|
|30|도시/장소|병원|hospital|
|31|도시/장소|감옥|prison|
|32|도시/장소|법정|court|
|33|도시/장소|왕궁|palace|
|34|도시/장소|문|gate|
|35|도시/장소|성벽|wall|
|36|도시/장소|광장|square|
|37|도시/장소|무덤|tomb, grave|
|38|사람/신체|사람|person|
|39|사람/신체|아이|child|
|40|사람/신체|가족|family|
|41|사람/신체|군중|crowd|
|42|사람/신체|손|hand|
|43|사람/신체|발|foot|
|44|사람/신체|눈(신체)|eye|
|45|사람/신체|입|mouth|
|46|사람/신체|눈물|tear|
|47|사람/신체|무릎|knee|
|48|사람/신체|머리|head|
|49|동물|양|sheep|
|50|동물|염소|goat|
|51|동물|소|cow|
|52|동물|말|horse|
|53|동물|낙타|camel|
|54|동물|당나귀|donkey|
|55|동물|사자|lion|
|56|동물|독수리|eagle|
|57|동물|비둘기|dove|
|58|동물|물고기|fish|
|59|동물|뱀|snake|
|60|동물|개|dog|
|61|동물|새|bird|
|62|식물/음식|포도|grape|
|63|식물/음식|포도나무|vine|
|64|식물/음식|무화과|fig|
|65|식물/음식|올리브|olive|
|66|식물/음식|감람나무|olive tree|
|67|식물/음식|곡식|grain|
|68|식물/음식|빵|bread|
|69|식물/음식|포도주|wine|
|70|식물/음식|기름|oil|
|71|식물/음식|꿀|honey|
|72|식물/음식|소금|salt|
|73|식물/음식|물(음료)|drink water|
|74|종교/상징|십자가|cross|
|75|종교/상징|성경|bible|
|76|종교/상징|촛불|candle|
|77|종교/상징|향|incense|
|78|종교/상징|제단|altar|
|79|종교/상징|떡|communion bread|
|80|종교/상징|잔|cup|
|81|종교/상징|세례|baptism|
|82|종교/상징|기도하는 손|praying hands|
|83|종교/상징|하트|heart|
|84|종교/상징|면류관|crown|
|85|종교/상징|왕관|royal crown|
|86|종교/상징|검|sword|
|87|종교/상징|방패|shield|
|88|종교/상징|나팔|trumpet|
|89|종교/상징|등불|lamp|
|90|종교/상징|문(상징)|door|
|91|종교/상징|열쇠|key|
|92|생활/사물|돈|money|
|93|생활/사물|동전|coin|
|94|생활/사물|집(소유)|property|
|95|생활/사물|옷|clothes|
|96|생활/사물|신발|shoes|
|97|생활/사물|배|ship|
|98|생활/사물|그물|net|
|99|생활/사물|낚싯대|fishing rod|
|100|생활/사물|책|book|
|101|생활/사물|편지|letter|
|102|생활/사물|도장/인장|seal|
|103|생활/사물|저울|scale|
|104|생활/사물|등|light|
|105|생활/사물|창|window|
|106|생활/사물|침대|bed|
|107|생활/사물|식탁|table|
|108|생활/사물|의자|chair|
|109|생활/사물|길(여정)|journey|
|110|생활/사물|지도|map|
|111|생활/사물|배낭|bag|
|112|생활/사물|꽃|flower|
|113|생활/사물|향수/향유|perfume|
|114|생활/사물|약|medicine|
|115|생활/사물|붕대|bandage|
|116|생활/사물|문서|document|
|117|생활/사물|깃발|flag|
|118|생활/사물|피|blood|
|119|생활/사물|돌|stone|
|120|생활/사물|샘/우물|well|

#### 9.11.10.3 주제별 Top5 피사체(가중치) 스냅샷
| topic_id | topic_name | rank | object_id | object_label | w_obj |
| -------- | ---------- | ---- | --------- | ------------ | ----- |
| 1        | 창조·섭리      | 1    | 1         | 산            | 0.7   |
| 1        | 창조·섭리      | 2    | 8         | 들판           | 0.7   |
| 1        | 창조·섭리      | 3    | 2         | 언덕           | 0.7   |
| 1        | 창조·섭리      | 4    | 11        | 비            | 0.7   |
| 1        | 창조·섭리      | 5    | 10        | 구름           | 0.7   |
| 2        | 임재·영광      | 1    | 84        | 면류관          | 0.6   |
| 2        | 임재·영광      | 2    | 57        | 관            | 0.5   |
| 2        | 임재·영광      | 3    | 9         | 하늘           | 0.3   |
| 2        | 임재·영광      | 4    | 10        | 구름           | 0.3   |
| 2        | 임재·영광      | 5    | 74        | 성전           | 0.3   |
| 3        | 거룩·성화      | 1    | 26        | 교회           | 0.7   |
| 3        | 거룩·성화      | 2    | 78        | 제단           | 0.7   |
| 3        | 거룩·성화      | 3    | 74        | 성전           | 0.7   |
| 3        | 거룩·성화      | 4    | 81        | 세례           | 0.6   |
| 3        | 거룩·성화      | 5    | 75        | 성경           | 0.5   |
| 4        | 은혜         | 1    | 71        | 꿀            | 0.7   |
| 4        | 은혜         | 2    | 68        | 빵            | 0.7   |
| 4        | 은혜         | 3    | 70        | 기름           | 0.6   |
| 4        | 은혜         | 4    | 69        | 포도주          | 0.6   |
| 4        | 은혜         | 5    | 62        | 포도           | 0.5   |
| 5        | 믿음·신뢰      | 1    | 42        | 손            | 0.6   |
| 5        | 믿음·신뢰      | 2    | 48        | 머리           | 0.4   |
| 5        | 믿음·신뢰      | 3    | 82        | 기도하는 손       | 0.4   |
| 5        | 믿음·신뢰      | 4    | 74        | 성전           | 0.3   |
| 5        | 믿음·신뢰      | 5    | 26        | 교회           | 0.3   |
| 6        | 회개         | 1    |           |              |       |
| 6        | 회개         | 2    |           |              |       |
| 6        | 회개         | 3    |           |              |       |
| 6        | 회개         | 4    |           |              |       |
| 6        | 회개         | 5    |           |              |       |
| 7        | 구원·의(칭의)   | 1    | 74        | 성전           | 0.4   |
| 7        | 구원·의(칭의)   | 2    | 75        | 성경           | 0.4   |
| 7        | 구원·의(칭의)   | 3    | 81        | 세례           | 0.4   |
| 7        | 구원·의(칭의)   | 4    | 78        | 제단           | 0.3   |
| 7        | 구원·의(칭의)   | 5    | 26        | 교회           | 0.3   |
| 8        | 소망·부활      | 1    | 14        | 무지개          | 0.7   |
| 8        | 소망·부활      | 2    | 17        | 별            | 0.5   |
| 8        | 소망·부활      | 3    | 15        | 태양           | 0.5   |
| 8        | 소망·부활      | 4    | 16        | 달            | 0.4   |
| 8        | 소망·부활      | 5    | 9         | 하늘           | 0.4   |
| 9        | 말씀·진리      | 1    | 75        | 성경           | 0.7   |
| 9        | 말씀·진리      | 2    | 100       | 책            | 0.6   |
| 9        | 말씀·진리      | 3    | 116       | 문서           | 0.5   |
| 9        | 말씀·진리      | 4    | 101       | 편지           | 0.4   |
| 9        | 말씀·진리      | 5    | 88        | 나팔           | 0.3   |
| 10       | 기도         | 1    | 82        | 기도하는 손       | 0.7   |
| 10       | 기도         | 2    | 46        | 눈물           | 0.5   |
| 10       | 기도         | 3    | 47        | 무릎           | 0.5   |
| 10       | 기도         | 4    | 42        | 손            | 0.4   |
| 10       | 기도         | 5    | 26        | 교회           | 0.3   |
| 11       | 예배·찬양      | 1    | 26        | 교회           | 0.7   |
| 11       | 예배·찬양      | 2    | 88        | 나팔           | 0.6   |
| 11       | 예배·찬양      | 3    | 74        | 성전           | 0.6   |
| 11       | 예배·찬양      | 4    | 78        | 제단           | 0.5   |
| 11       | 예배·찬양      | 5    | 76        | 촛불           | 0.4   |
| 12       | 순종·겸손      | 1    | 47        | 무릎           | 0.7   |
| 12       | 순종·겸손      | 2    | 42        | 손            | 0.4   |
| 12       | 순종·겸손      | 3    | 96        | 신발           | 0.4   |
| 12       | 순종·겸손      | 4    | 95        | 옷            | 0.3   |
| 12       | 순종·겸손      | 5    | 109       | 길(여정)        | 0.3   |
| 13       | 사랑(아가페)    | 1    | 83        | 하트           | 0.7   |
| 13       | 사랑(아가페)    | 2    | 40        | 가족           | 0.6   |
| 13       | 사랑(아가페)    | 3    | 39        | 아이           | 0.5   |
| 13       | 사랑(아가페)    | 4    | 57        | 비둘기          | 0.4   |
| 13       | 사랑(아가페)    | 5    | 112       | 꽃            | 0.4   |
| 14       | 인내·시험      | 1    | 13        | 폭풍           | 0.7   |
| 14       | 인내·시험      | 2    | 12        | 눈            | 0.6   |
| 14       | 인내·시험      | 3    | 11        | 비            | 0.6   |
| 14       | 인내·시험      | 4    | 20        | 바람           | 0.5   |
| 14       | 인내·시험      | 5    | 1         | 산            | 0.4   |
| 15       | 지혜·분별      | 1    | 100       | 책            | 0.6   |
| 15       | 지혜·분별      | 2    | 75        | 성경           | 0.6   |
| 15       | 지혜·분별      | 3    | 116       | 문서           | 0.4   |
| 15       | 지혜·분별      | 4    | 103       | 저울           | 0.3   |
| 15       | 지혜·분별      | 5    | 32        | 법정           | 0.3   |
| 16       | 성령·열매      | 1    | 57        | 비둘기          | 0.7   |
| 16       | 성령·열매      | 2    | 112       | 꽃            | 0.5   |
| 16       | 성령·열매      | 3    | 62        | 포도           | 0.4   |
| 16       | 성령·열매      | 4    | 7         | 나무           | 0.4   |
| 16       | 성령·열매      | 5    | 63        | 포도나무         | 0.4   |
| 17       | 평강·샬롬      | 1    | 14        | 무지개          | 0.5   |
| 17       | 평강·샬롬      | 2    | 3         | 바다           | 0.4   |
| 17       | 평강·샬롬      | 3    | 4         | 호수           | 0.4   |
| 17       | 평강·샬롬      | 4    | 57        | 비둘기          | 0.4   |
| 17       | 평강·샬롬      | 5    | 9         | 하늘           | 0.3   |
| 18       | 공동체·연합     | 1    | 41        | 군중           | 0.6   |
| 18       | 공동체·연합     | 2    | 40        | 가족           | 0.6   |
| 18       | 공동체·연합     | 3    | 26        | 교회           | 0.5   |
| 18       | 공동체·연합     | 4    | 79        | 떡            | 0.4   |
| 18       | 공동체·연합     | 5    | 80        | 잔            | 0.4   |
| 19       | 정의·공의      | 1    | 32        | 법정           | 0.6   |
| 19       | 정의·공의      | 2    | 103       | 저울           | 0.6   |
| 19       | 정의·공의      | 3    | 110       | 지도           | 0.3   |
| 19       | 정의·공의      | 4    | 31        | 감옥           | 0.3   |
| 19       | 정의·공의      | 5    | 72        | 소금           | 0.3   |
| 20       | 화해·용서(관계)  | 1    | 83        | 하트           | 0.4   |
| 20       | 화해·용서(관계)  | 2    | 40        | 가족           | 0.4   |
| 20       | 화해·용서(관계)  | 3    | 46        | 눈물           | 0.3   |
| 20       | 화해·용서(관계)  | 4    | 42        | 손            | 0.3   |
| 20       | 화해·용서(관계)  | 5    | 57        | 비둘기          | 0.3   |
| 21       | 소명·일·청지기   | 1    | 21        | 길            | 0.4   |
| 21       | 소명·일·청지기   | 2    | 67        | 곡식           | 0.4   |
| 21       | 소명·일·청지기   | 3    | 98        | 그물           | 0.4   |
| 21       | 소명·일·청지기   | 4    | 99        | 낚싯대          | 0.4   |
| 21       | 소명·일·청지기   | 5    | 109       | 길(여정)        | 0.3   |
| 22       | 가정·양육      | 1    | 40        | 가족           | 0.7   |
| 22       | 가정·양육      | 2    | 39        | 아이           | 0.7   |
| 22       | 가정·양육      | 3    | 25        | 집            | 0.5   |
| 22       | 가정·양육      | 4    | 107       | 식탁           | 0.3   |
| 22       | 가정·양육      | 5    | 106       | 침대           | 0.3   |
| 23       | 치유·회복      | 1    | 114       | 약            | 0.7   |
| 23       | 치유·회복      | 2    | 115       | 붕대           | 0.6   |
| 23       | 치유·회복      | 3    | 30        | 병원           | 0.5   |
| 23       | 치유·회복      | 4    | 46        | 눈물           | 0.4   |
| 23       | 치유·회복      | 5    | 71        | 꿀            | 0.3   |
| 24       | 보호·인도      | 1    | 87        | 방패           | 0.7   |
| 24       | 보호·인도      | 2    | 91        | 열쇠           | 0.4   |
| 24       | 보호·인도      | 3    | 90        | 문(상징)        | 0.4   |
| 24       | 보호·인도      | 4    | 22        | 다리           | 0.3   |
| 24       | 보호·인도      | 5    | 109       | 길(여정)        | 0.3   |
### 9.11.11 개발 인덱싱/목록화 (P1·P2·P3 코드 정책)
이 절은 P1(상징), P2(주제), P3/S(컨텍스트) 단계에서 사용하는 **코드 네이밍 규칙과 로그 형태**를 통일하기 위한 개발자용 인덱싱 규약을 정의합니다. 동일한 규칙을 사용하면, 데이터북·로그·대시보드·API 응답을 한눈에 추적하기 쉬워집니다.

|No.|체계|규칙|
|--:|---|---|
|1|상징 코드|`SYM-도메인코드+번호` (예: `SYM-A07` 해·빛)|
|2|주제 코드|`THEME-XX` (12대분류 고정, 하위분류 확장)|
|3|컨텍스트|`CTX-time/scene/poi/visual` 키|
|4|버전|스키마/룰 `vX.Y` (호환성: optional 추가만 허용)|
|5|로그|`[{symbol_id, conf, weight, source}]` 스냅샷|

**설명**

- **상징 코드(SYM-*)**: 상징 도메인(예: A=천체/빛, B=자연, C=도시…) + 2자리 번호 형식으로 관리하여, 120라벨 확장 시에도 정렬·그룹핑이 쉽도록 합니다.
    
- **주제 코드(THEME-XX)**: 상위 12대 분류(예: 위로, 소망, 창조, 죄·용서 등)에 고정 코드를 부여하고, 필요 시 하위 분류는 메타필드로 확장합니다. 이렇게 하면 상·하위 주제를 혼동하지 않고 통계/대시보드에서 상위 축을 안정적으로 유지할 수 있습니다.
    
- **컨텍스트 키(CTX-*)**: 시간대(`CTX-time`), 장면(`CTX-scene`), 장소·POI(`CTX-poi`), 시각적 특징(`CTX-visual`)처럼 **역할 기준 네이밍**을 강제하여, 로그/피쳐 추출 코드가 서로 다른 이름을 쓰지 않도록 합니다.
    
- **버전(vX.Y)**: P1/P2/P3 스키마·룰 버전은 `vX.Y` 형식으로 관리하고, 뒤로 갈수록 **호환성 유지(필드 optional 추가만 허용)**를 원칙으로 합니다. 필드 삭제/이름 변경은 새로운 메이저 버전에서만 허용합니다.
    
- **로그 스냅샷**: `[{symbol_id, conf, weight, source}]` 형태로, 상징별 **탐지 신뢰도(conf)**, **가중치(weight)**, **출처(source: obj/scene/ocr/landmark 등)**를 함께 남겨두면, 나중에 왜 특정 ThemeScore가 나왔는지 역추적이 용이합니다.
    

이 규약은 9.4(엔티티 스키마), 9.6(점수식·Top-1 규칙), 9.7(데이터북 구조)와 연결되어, 전체 시스템이 **동일한 코드 체계**로 동작하도록 하는 최소 기준입니다.

## 9.12 ETL & 버전 관리
### 9.12.1 ETL 파이프라인
1. **Draft 수집**: 신학팀·데이터팀이 초안 작성
    
2. **Validate**: 스키마 검증, 중복/누락 체크
    
3. **Freeze**: 릴리즈용 버전으로 동결
    
4. **Export**: JSON/CSV/오프라인팩 포맷 생성
    
5. **Deploy**: 서버·온디바이스용 배포
    
6. **Audit**: 해시/샘플링으로 회귀 테스트
    

### 9.12.2 버전 규칙
- 형식: **v2.3.x** (메이저.마이너.패치)
    
- 원칙
    
    - **id**는 삭제하지 않고 `deprecated=true` 플래그로 처리
        
    - 버전별 변경 로그에 **Top 20 주요 변경 사항** 요약
        
    - 모델·데이터 버전 연동
        
        - 예: `model_version = "m2.3.1"`, `data_version = "d2.3.4"`
            

### 9.12.3 데이터 운영 체크리스트 — 매트릭스/룰셋 변경 시(정본)
|No|단계|규칙|완료 조건(DoD)|
|--:|---|---|---|
|1|변경 범위 고정|변경 대상(라벨/주제/가중치/페널티)을 명확히 고정|변경 목록 1페이지로 확정|
|2|모드 선택|`Edit / Safe / Freeze` 중 선택|현재 작업 상태가 모드로 표현됨|
|3|Copy 매핑|기준 키(예: `object_id-theme_id`)로 Copy|행/열 뒤틀림 없이 복사됨|
|4|기본값 처리|누락 셀은 `0.00`으로 채움|빈칸/NaN 없음|
|5|Validate 실행|범위/형식/누락/이상치 검증|Validate 로그 OK|
|6|Freeze(버전 고정)|`ruleset_version` + 데이터 버전 태깅|재현 가능(rollback 가능)|
|7|Export|CSV/JSON Export 후 배포 경로에 반영|아티팩트 생성 완료|
|8|스모크 테스트|대표 사진 셋으로 추천 결과 점검|반복/unknown/민감 오탐 지표 확인|

---

## 9.13 모델 품질 & 성능 기준
### 9.13.1 데이터셋 구조
- 학습/검증/테스트 분리
    
    - Train: 80%
        
    - Validation: 10%
        
    - Test: 10%
        
- 각 샘플 구성
    
    - 사진(또는 태그)
        
    - 컨텍스트(시간, 장소, 디바이스 언어 등)
        
    - 정답 구절
        
    - 정답 주제
        
    - 평가 라벨(적합/부적합 등)
        
- 데이터 출처
    
    - **Bible 앱**:  
        PhotoEvent, PerceptionResult, EmotionVector, RecommendationResult 로그에서 익명화·샘플링
        
    - **Soul Chorus Game**:  
        감정 라벨이 붙은 사진·세션 데이터를 익명화하여 보조 학습 데이터로 사용
        
    - 정기적인 ETL 배치로 두 소스 데이터를 병합해  
        학습/검증/테스트 세트를 재구성
        

### 9.13.2 품질 지표
|항목|목표 값(예시)|
|---|---|
|Top-1 구절 적합도(사람 평가 기준)|≥ 75%|
|Top-2(Top-1+ALT-1) 적합도|≥ 85%|
|민감 장면 리콜(아동/병원/장례 등)|≥ 90%|
|주제 분류 F1-score|≥ 0.82|

### 9.13.3 성능(지연 시간) 기준
- 전체 앱 기준 **p95 < 800ms** 중,  
    그 안에서 **AI 파이프라인이 차지하는 목표 지연 시간**:
    
    - 지각 레이어: ≤ 150ms
        
    - 벡터 검색: ≤ 80ms
        
    - 재랭커: ≤ 150ms
        
    - 가이드라인/설명: ≤ 50ms
        

### 9.13.4 차별화 포인트(품질·안전 관점 요약)
|포인트|효과|
|---|---|
|감정 사전 입력 없음|사용자가 감정을 직접 선택하지 않아도 사진·표정·상황에서 힌트를 추출해 마찰을 최소화|
|설명 가능성(Why 카드)|Why-score와 설명 카드를 통해 추천 근거를 문장과 수치로 제시, 신뢰와 수용성을 높임|
|교리 일관성(가이드라인 엔진)|예장통합 규칙에 맞지 않는 본문을 차단·감쇠해 신학적 안전을 확보|
|오프라인 팩|저연결·선교 환경에서도 대표 구절·기본 추천 기능을 유지해, 네트워크 불안정 상황에도 안정적으로 동작|
|멀티모달 입력(사진·텍스트·장소·시간)|사진·텍스트·장소·시간 등 여러 신호를 함께 사용해 다양한 상황에서도 보다 정교한 추천이 가능|
|Why-score 로깅|추천 근거를 장기적으로 기록하여, 모델 개선·품질 리뷰·감사에 활용할 수 있는 데이터 자산을 축적하는 기반이 됨|

---

### 9.11.3 동기화 전략

- 온라인 복귀 시
    
    - 오프라인에서 생성된 **PhotoEvent / PostAffection**를 **배치 업로드**
        
    - 로컬 캐시와 서버 상태를 병합
        

---

## 9.14 확장성(다국어·신규 라벨·신규 프로젝트)
### 9.14.1 다국어 확장
- 성경 번역 추가 시
    
    - Verse 테이블에 `text_xx` 컬럼 추가(예: `text_es`)
        
    - 해당 언어 임베딩 벡터 재생성
        
- UI/설명 카드
    
    - **I18N** 키 기반 번역
        
    - Why 카드도 다국어 템플릿 구조로 설계
        

### 9.14.2 신규 라벨·주제 추가
- 신규 라벨(object) 생성
    
    - objects 시트에 추가
        
    - mapping_object_topic 시트에서 가중치 정의
        
- 신규 주제(topic) 생성
    
    - topics 시트에 추가
        
    - 기존 라벨과의 매트릭스 갱신
        
    - 모델 재학습 및 회귀 테스트 필수
        

### 9.14.3 다른 프로젝트와의 연동
- 예: **Soul Chorus** 등 사진·감정 기반 서비스와 연동할 때
    
    - 공통 엔티티: PhotoEvent, PostAffection 재사용
        
    - EmotionVector를 공통 감정 표현으로 사용하여, Game에서 수집한 감정 라벨 데이터를 Bible 추천 모델(주제 분류·재랭커·Why-score)에 재학습 데이터로 활용
        
    - EmotionScriptureMap을 기반으로, Game에서 발생한 감정·상황 조합 로그를 분석해 새로운 감정-구절 매핑을 주기적으로 발견·갱신
        
    - 주제/라벨/매핑은 동일 데이터북 사용
        
    - 별도의 서비스에서는 **Verse 추천만 비활성화**하고 사진/감정만 쓰는 모드도 가능
        

---

## 9.15 용어 인덱스(기술 용어 정리)
|용어|설명|
|---|---|
|**AI**|사진·텍스트·컨텍스트를 분석하고 구절을 추천하는 인공지능 전체 기술.|
|**파이프라인**|입력부터 출력까지 여러 단계를 직렬로 연결한 처리 흐름.|
|**모듈**|특정 기능을 담당하는 독립적인 구성 요소(지각 모듈, 재랭커 모듈 등).|
|**엔티티(Entity)**|데이터베이스에서 관리하는 주요 객체 유형(PhotoEvent, Verse 등).|
|**데이터 스키마**|각 엔티티의 필드 구조와 타입을 정의한 설계.|
|**벡터 검색(Vector Search)**|임베딩 벡터 간 유사도를 계산해 가까운 항목을 찾는 검색 방식.|
|**임베딩(Embedding)**|텍스트/이미지 등의 의미를 수치 벡터로 표현한 것.|
|**라벨(Label)**|인식된 피사체/장면/텍스트 등 분류 이름(예: 산, 병원, 교회).|
|**주제(Topic)**|성경적 의미를 묶어 놓은 24개 핵심 주제(위로, 소망 등).|
|**매핑 매트릭스(Matrix)**|라벨과 주제 사이의 가중치 관계를 표로 정리한 것.|
|**ETL**|Extract-Transform-Load. 데이터 추출·변환·적재 과정.|
|**오프라인팩(Offline Pack)**|인터넷이 없어도 동작하도록 로컬에 저장한 대표 구절·임베딩 묶음.|
|**온디바이스(On-device)**|서버가 아닌 사용자 기기(스마트폰) 안에서 실행되는 연산.|
|**재랭커(Re-ranker)**|1차 후보를 다시 평가해 순서를 정교하게 조정하는 모델/로직.|
|**가이드라인 엔진**|교리·민감도 규칙을 적용해 추천 결과를 차단/감쇠/허용하는 로직.|
|**Why-score**|"왜 이 구절인가"를 설명하기 위해 남기는 근거 점수/정보 집합.|
|**F1-score**|분류 모델의 성능을 나타내는 지표(정밀도와 재현율의 조화 평균).|
|**GeoPin**|사진·구절을 지도에 표현할 때 사용하는 지리 정보 엔티티로, 실제 좌표 대신 퍼징된 지오해시·좌표와 민감도 플래그를 포함합니다.|
|**time_bucket**|하루를 아침/낮/저녁 등 시간 구간으로 나눈 필드로, 추천 로직·통계에서 시간대별 패턴 분석에 사용됩니다.|
|**pHash**|이미지의 시각적 특징을 고정 길이 해시값으로 표현해, 해시 간 거리를 통해 유사한 이미지를 빠르게 찾는 기법입니다.|
|**Signal**|점수 축(S1~S4) 하나를 구성하는 신호로, 앵커(키워드) 히트와 가중치로 계산됩니다.|
|**score_total**|S1~S4의 **가중합**으로 만든 정규화 이전의 기본 점수입니다.|
|**priority_score**|**score_total + bonus**를 **normalize_divisor**로 나눈 최종 우선순위 점수입니다.|
|**weights**|S1~S4 비율형 가중치(**w1~w4**)를 보관하는 시트(탭)입니다.|
|**priority_rules**|보너스/정규화 파라미터(**bonus_anchor**, **normalize_divisor** 등)를 보관하는 시트(탭)입니다.|
|**bonus_anchor**|S1 히트가 발생했을 때 적용되는 앵커 기반 가산점입니다.|
|**bonus_gospel**|복음서 보너스 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미적용**)|
|**bonus_wcf**|추가 보너스 파라미터(현 버전에서는 **선언만 존재**, 코드 **미적용**)입니다.|
|**normalize_divisor**|priority_score 계산에서 나누는 정규화 분모입니다.|
|**secondary_ratio**|보조 후보 제어 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미사용**)|
|**primary_margin**|Top1 확정 마진 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미사용**)|
|**쿨다운(cooldown)**|특정 구절·이벤트가 노출된 이후, 같은 항목이 다시 노출되기까지의 최소 대기 기간을 의미하며, 반복 노출과 피로도를 줄이기 위해 사용하는 로직입니다.|

# 10장. 플랫폼·인프라·보안·프라이버시

이 장은 성경 프로젝트를 실제로 서비스할 때 필요한 **기술 플랫폼·인프라 구조**와,  
사용자 데이터를 보호하기 위한 **보안·프라이버시 원칙**을 정리한다.

- 9장은 "**AI 로직 & 데이터 구조(사진→말씀)**"에 집중했다면,
    
- 10장은 그 AI·앱·데이터를 **어디에, 어떻게 안전하게 올려서 운영할 것인지**를 다룬다.
    

---

## 10.1 장 개요

### 10.1.1 목적

- 이 프로젝트의 **플랫폼 구성도(클라이언트·서버·데이터·AI)**를 한눈에 볼 수 있게 한다.
    
- 실제 구축 시 기준이 되는 **인프라·네트워크·배포 구조**를 정의한다.
    
- 신앙·사역형 서비스에 맞는 **보안·프라이버시 원칙**을 명문화한다.
    
- 이후 11장(운영·비용 구조·BM), 12장(로드맵·조직)의 기반이 되는 기술 전제를 제공한다.
    

### 10.1.2 범위

- 범위에 포함
    
    - **클라이언트 플랫폼**: iOS/Android 앱, (선택) Web 뷰어·어드민 콘솔
        
    - **백엔드·AI 플랫폼**: API 서버, AI 서빙, 맵·통계 서비스
        
    - **데이터 플랫폼**: RDB, 오브젝트 스토리지, 로깅·메트릭·트레이싱
        
    - **보안 아키텍처**: 인증·인가, 암호화, 비밀 관리, 취약점 관리
        
    - **프라이버시·규제 준수**: 좌표 미수집, 민감 이미지 처리, 데이터 보존·삭제 정책
        
    - **백업·DR**, **온디바이스/엣지 전략**, **위협 모델 요약**
        
- 범위에서 제외
    
    - 세부 BM, 월별 비용 수치, 조직 역할은 **11장, 12장**에서 상세 다룸
        
    - AI 모델 구조·데이터 스키마 자체는 **9장**에 기술됨
        

---

## 10.2 전체 플랫폼 구성(High-level)

### 10.2.1 논리 계층 구조

1. **클라이언트 계층**
    
    - iOS/Android 앱 (사진 촬영·갤러리 선택·결과 조회·사후 기록·월드맵 뷰)
        
    - (선택) Web 뷰어: 기록·월드맵·관리용 최소 뷰어
        
    - 어드민·신학 검수 콘솔(Web)
        
2. **API 계층**
    
    - **추천 API**: 사진 분석, 태깅 결과 입력, 구절 추천, 사후 기록 저장
        
    - **맵·통계 API**: 월드맵 핀·집계, 리포트용 데이터 제공
        
    - **인증·계정 API**: 로그인/게스트 모드, 교회·소그룹 계정 관리
        
3. **AI 서빙 계층**
    
    - **지각(비전) 모델 서빙**: 태그·장면·OCR·랜드마크
        
    - **벡터 검색·재랭커** 서빙
        
    - **가이드라인 엔진 & 설명 카드 생성기**
        
4. **데이터 계층**
    
    - **RDB**: 계정, PhotoEvent 메타, RecommendationResult, PostAffection, GeoPin 등
        
    - **오브젝트 스토리지**: 원본·리사이즈 이미지, 로그 압축 파일 등
        
    - **벡터 인덱스 스토어**: 성경 구절 임베딩, 주제·상징 임베딩
        
    - **캐시·키밸류 스토어**: 세션, 토큰, 핫 구절·주제 캐시
        
5. **관측성·운영 계층**
    
    - **로그 수집**: 앱·서버·AI 모듈 로그
        
    - **메트릭 수집**: 레이턴시, 에러율, 트래픽, 모델 품질 지표
        
    - **트레이싱**: 요청 단위 end-to-end 추적
        



### 10.2.3 기본 구현 기준 스택(초기 버전)

성경 프로젝트의 1차 릴리스에서는 다음과 같은 **기준 기술 스택**을 사용한다. 이후 트래픽·운영 규모에 따라 AWS/GCP 등 별도 매니지드 인프라로 이관하더라도, 아래 구성 요소의 역할은 유지되는 것을 원칙으로 한다.

1. **클라이언트(모바일 앱)**
    
    - 프레임워크: **React Native** (TypeScript)
        
    - 플랫폼: iOS / Android 공통 코드베이스
        
    - 주요 라이브러리: **React Navigation**, 전역 상태 관리(**Redux** 또는 **Context API**), **Axios/Fetch**(HTTP), **Firebase SDK**(인증·DB·스토리지), **TensorFlow Lite / Google ML Kit**(온디바이스 ML 연동)
        
2. **백엔드(BaaS 중심)**
    
    - 인증: **Firebase Authentication**(이메일/패스워드 + Google/Apple 등 OAuth)
        
    - 데이터베이스: **Cloud Firestore**(구조화 데이터), **Firebase Storage**(사진·미디어)
        
    - 서버 로직: **Cloud Functions for Firebase**(Node.js) — 알림 발송, 통계 집계, 성경 검색 API 래핑 등
        
    - 푸시 알림: **Firebase Cloud Messaging(FCM)**
        
3. **웹·콘솔**
    
    - 관리자/신학 검수 콘솔: React 기반 Web 앱 + Firebase Hosting 또는 동급 호스팅 서비스
        
    - 단, 10.2.2에서 정의한 VPC·서브넷 구조를 사용하는 별도 클라우드 환경(AWS/GCP)으로 확장 가능하도록, 도메인·API 인터페이스는 BaaS에 종속되지 않게 설계한다.
        
4. **DevOps·배포**
    
    - 모바일 앱: Git 기반 CI/CD + **Expo EAS** 또는 동급 앱 배포 서비스로 스토어 빌드 자동화
        
    - 품질/로그: **Crashlytics**, **Analytics** 등 SDK를 활용해 장애·이용 패턴을 수집하고, 10.8의 관측성 프레임과 연동한다.
        

이 스택 정의는 "현재 기준 기본 구현안"으로, 다른 클라우드(IaaS, Kubernetes 등)로 옮길 때도 **클라이언트–BaaS/API–AI–데이터** 계층 구분은 유지해야 한다.

### 10.2.4 온디바이스 중심 전체 아키텍처 (보강)

#### 10.2.4.1 설계 목표 (시나리오 B 전제)

- **비용 목표**
    
    - 하루 1,000만 장(월 3억 장) 사진 처리 기준에서도, 인프라 비용을 **월 500~1,000 USD** 수준으로 억제한다.
        
    - 관리형 비전 API(시나리오 A) 또는 GPU 서버 직접 추론(시나리오 C)에 비해 **1~2자릿수 이상 저렴한 구조**를 목표로 한다.
        
- **프라이버시 목표**
    
    - 사진 원본은 원칙적으로 **서버로 업로드하지 않고 온디바이스에서만 처리**한다.
        
    - 서버에는 비식별 메타데이터(국가, 주제, 구절 ID, 시간대 등)만 전송하여, 종교·감정 데이터에 대한 우려를 최소화한다.
        
- **교리·신학 목표**
    
    - 예장통합 교리 기준에 맞는 **정합성 높은 구절 추천**이 가능하도록, 온디바이스 추천 로직과 서버 측 교리 필터·룰을 함께 설계한다.
        
- **UX 목표**
    
    - Bible Lens의 장점이었던 `사진 → 말씀 카드`의 간편함을 유지하되,
        
        - 설명 카드, 감정 태그, 묵상 메모, 기도 여부, 월드맵·커뮤니티 루프까지 연결해 **깊이 있는 묵상 경험**을 제공한다.
            

> 한 줄 요약:  
> **“사진 분석과 말씀 추천은 온디바이스에서 처리하고, 서버는 메타데이터 집계·설정·업데이트만 담당하는 초경량 하이브리드 구조”**

#### 10.2.4.2 전체 시스템 텍스트 다이어그램

```text
[사용자 단말(App)]
  ├─ 사진 촬영/선택
  ├─ 온디바이스 비전 모델(객체/장면/CLIP/OCR)
  ├─ 120 상징/장면 매핑
  ├─ 24 주제 그래프/가중치 계산
  ├─ 로컬 성경 메타 DB에서 구절 후보 검색
  ├─ Verse 카드 + 설명 카드 렌더링
  ├─ 감정 기록/기도 여부 로컬 저장
  └─ 서버로 메타데이터 전송 (선택적)

        │ (경량 JSON, 수백 바이트 수준)
        ▼

[클라우드 서버 (최소 구조)]
  ├─ API Gateway(HTTP API): 단말→서버 진입점
  ├─ Lambda: 메타데이터 검증·저장·집계·룰 배포
  ├─ DynamoDB: 집계/설정 테이블 저장
  ├─ S3: 원시 로그/백업
  └─ Config 서비스: 모델/가중치/룰 버전 정보 제공

        │
        ▼

[운영/관리]
  ├─ 월드맵·주제 사용량 대시보드
  ├─ 가중치 튜닝/AB 테스트
  └─ 신학 검수/교리 필터 업데이트
```

- 10장은 위 다이어그램을 기준으로 **플랫폼·인프라·보안·프라이버시**의 전체 구조를 설명한다.
    
- 9장(AI 로직 & 데이터 구조)은 동일 구조 중 **비전·매핑·주제 그래프·추천 알고리즘 내부 로직**에 초점을 둔다.
    

#### 10.2.4.3 클라이언트(앱) 모듈 구성

|모듈|역할|
|---|---|
|Camera & Gallery|사진 촬영 및 앨범 선택|
|Preprocessing|리사이즈, 정규화 등 이미지 전처리|
|온디바이스 비전 엔진|경량 CNN/비전 트랜스포머로 객체·장면·색·OCR 수행|
|상징/장면 매핑 엔진|비전 결과 → 120개 상징/장면 코드로 매핑|
|주제 그래프 엔진|24 주제 그래프 상에서 위치/가중치 계산|
|로컬 성경 메타 DB|구절 ID, 주제 태그, 언어, 메타정보 저장|
|구절 추천 엔진|주제 벡터 기반 Top N 구절 후보 검색|
|Verse/설명 카드 생성기|Verse 카드 + “왜 이 구절인가” 설명 카드 생성|
|묵상·감정 기록 모듈|감정 태그, 메모, 기도 여부 등 로컬 DB 기록|
|동기화/텔레메트리 모듈|서버로 메타데이터 비동기 전송|

- 해당 표는 **앱 팀·AI 팀·데이터 팀**이 서로 역할을 나눌 때 기준이 되는 모듈 분해 구조로 사용한다.
    

#### 10.2.4.4 서버 구성 요소 및 데이터 흐름

##### (1) 서버 구성 요소

|컴포넌트|역할|
|---|---|
|API Gateway (HTTP API)|`/telemetry`, `/config`, `/verse-sync` 등 HTTP 엔드포인트 제공|
|Lambda|JSON 검증, S3/DynamoDB 저장, 집계 처리|
|DynamoDB|집계·설정·가중치 테이블 저장|
|S3|원시 로그, 백업, 대용량 분석용 데이터 저장|
|Config 서비스|가중치/룰/필터/모델 버전 정보 제공|
|운영 대시보드|월드맵, 24 주제 사용량, 상징 빈도, 성장 지표 시각화|

##### (2) 데이터 흐름 (사진 1장 기준)

1. 사용자가 사진을 촬영하거나 앨범에서 선택한다.
    
2. 온디바이스 비전 모델이 객체·장면·텍스트(OCR)를 인식한다.
    
3. 비전 결과를 120 상징/장면 코드와 24 주제 벡터로 변환한다.
    
4. 로컬 성경 메타 DB에서 Top N 구절 후보를 검색한다.
    
5. Verse 카드 + 설명 카드 UI를 생성하고, 사용자가 하나를 선택·저장/공유한다.
    
6. 단말 로컬 DB에 `PhotoEvent`, `VerseMapping`, `PostAffection`(감정·기도 기록)을 저장한다.
    
7. 별도 비동기 스레드에서 `/telemetry`로 비식별 메타데이터를 서버에 전송한다.
    
8. 서버는 Lambda를 통해 메타데이터를 집계 테이블로 축약·저장한다.
    
9. 운영팀은 대시보드를 통해 통계를 분석하고, 주제 가중치/룰/필터를 조정한다.
    
10. 조정된 설정은 Config 서비스에서 새 버전으로 제공되고, 앱은 `/config` 호출로 이를 받아 적용한다.
    

---

## 10.3 환경 분리 & 배포 구조

### 10.3.1 환경 분리

- **개발(DEV)**
    
    - 개발자 개인 테스트·실험용, 데이터·트래픽 품질 요구 낮음
        
- **스테이징(STAGE)**
    
    - 실제 운영과 거의 동일한 설정
        
    - 신학 검수, QA, 로드 테스트, 릴리즈 후보 검증에 사용
        
- **운영(PROD)**
    
    - 실제 사용자 트래픽, 강한 보안·관측성·안정성 요구
        

각 환경은 **별도 계정/프로젝트** 또는 최소한 **별도 VPC**로 분리하고,  
운영 DB·스토리지에 **테스트 계정·직접 쿼리**를 하지 않는 것을 원칙으로 한다.

### 10.3.2 네트워크 토폴로지

- 모든 외부 요청은 **로드밸런서**를 통해 API 서버로 유입된다.
    
- API 서버는 **Private Subnet**에 위치하며, 인터넷에서 직접 접근 불가하다.
    
- AI 서빙, DB, 캐시, 벡터 스토어는 **API 서버에서만** 접근 가능하도록  
    **보안 그룹(Security Group)** 과 **네트워크 ACL**을 구성한다.
    
- 백업·로그·분석용 스토리지는 별도 서브넷 또는 별도 계정으로 분리해,  
    크리덴셜 탈취 시 피해 범위를 최소화한다.
    

### 10.3.3 CI/CD 파이프라인

- 코드 저장소에 **메인 브랜치·릴리즈 브랜치** 전략 사용
    
- Pull Request 기준으로
    
    - 정적 분석(린트, **SAST**) · 단위 테스트 · 통합 테스트 자동 수행
        
- STAGE 배포는 PR 머지 후 자동,
    
- PROD 배포는 **승인 기반(gated)** 으로만 진행되도록 설정
    
- 배포는 **Blue-Green 또는 Rolling** 전략을 사용하여,  
    추천 중단·대규모 장애를 최소화한다.
    

---

## 10.4 성능·확장성 설계

### 10.4.1 트래픽 가정(초기)

- 초기 단계
    
    - DAU 1만~5만, 피크 시간대 초당 수십~수백 건의 추천 요청 가정
        
    - 사진 업로드 트래픽과 추천 API 호출은 분리해서 스케일링
        
- 장기 목표
    
    - DAU 수십만~수백만까지 수평 확장 가능한 구조를 전제로 설계
        

### 10.4.2 확장 전략

- **수평 확장(Scale-out)**
    
    - API 서버·AI 서빙 노드는 컨테이너 또는 VM 단위로 수평 확장
        
    - 오토스케일러 기준: CPU·메모리·큐 길이·레이턴시 지표
        
- **캐시 계층 사용**
    
    - 자주 쓰이는 주제·구절·설명 카드는 **Key-Value 캐시**에 저장
        
    - 월드맵 타일·집계 결과도 **CDN + 캐시**로 제공
        
- **이미지 처리 최적화**
    
    - 업로드 시 서버에서 필요한 해상도로 **리사이즈·압축** 후 AI에 전달
        
    - 클라이언트 측에서도 사전 압축 옵션 제공
        

### 10.4.3 장애·복구 전략(SLO 관점)

- 추천 API SLO(예시)
    
    - 가용성: 99.5% 이상
        
    - p95 레이턴시: 800ms 이하(앱+서버 합산 기준)
        
- 장애 대응
    
    - AI 서빙 장애 시, **오프라인팩/간단 규칙 기반 폴백** 사용
        
    - 벡터 스토어 장애 시, 제한된 주제·구절 세트에서 추천
        
    - RDB 장애 시를 대비해, 읽기 전용 리플리카 구성
        

---

### 10.4.4 인프라 시나리오 비교 및 선택 근거 (온디바이스 전략)

#### 10.4.4.1 세 가지 인프라 시나리오 요약

> **전제:** 하루 1,000만 장(월 3억 장) 처리 기준, 인프라 아키텍처 비교.

|시나리오|구조 요약|월 총 비용(3억 장 기준)|장당 비용(원화 대략)|특징|
|---|---|---|---|---|
|A. 관리형 비전 API|사진 업로드 → Rekognition 등으로 분석|90,000~100,000 USD|약 0.4~0.5원/장|개발 편하지만 비용 과다|
|B. 온디바이스 비전 + 얇은 서버|단말에서 비전/추천, 서버는 텔레메트리·집계|500~1,000 USD|약 0.005원/장|비용·프라이버시·성능 모두 유리|
|C. GPU 서버 추론|자체 모델을 GPU 인스턴스로 운영|1,500~2,000 USD|약 0.01원/장|A보다 훨씬 저렴, B보다는 비쌈|

- **A 시나리오**: 관리형 API(AWS Rekognition 등)를 사용하면 초기 개발은 쉽지만, 월 3억 장 기준 **9만~10만 USD** 수준으로, 기부·사역형 프로젝트의 현실적인 범위를 벗어난다.
    
- **B 시나리오**: 온디바이스 추론 + 얇은 서버 구조는 **500~1,000 USD/월**, 장당 0.005원 수준으로 가장 합리적이다.
    
- **C 시나리오**: GPU 서버에 직접 모델을 올리면 A보다 훨씬 저렴하지만, 여전히 B 대비 2~4배 수준의 비용이며, 사진 업로드·레이턴시·프라이버시 이슈가 남는다.
    

#### 10.4.4.2 선택 기준 및 설계 원칙

- 본 프로젝트의 **기본 인프라 아키텍처는 시나리오 B(온디바이스 중심)**를 전제로 설계한다.
    
- 시나리오 A·C는 다음과 같은 용도에만 제한적으로 고려한다.
    
    - **A(관리형 API)**: 프로토타입·PoC 단계에서 단기 테스트용으로만 사용.
        
    - **C(GPU 서버)**: 온디바이스에 올리기 어려운 대형 모델(예: GPT 기반 Q&A)의 실험용.
        
- 10장은 인프라 관점에서 이 선택의 **기술·비용·보안 근거**를 정리하고,  
    **11장(운영·비용 구조·BM)**에서는 같은 수치를 **운영비·BM 시뮬레이션** 관점에서 다시 정리한다.
    

### 10.4.5 커뮤니티·이미지 트래픽 인프라

#### 10.4.5.1 커뮤니티 기능 정의

- **게시물(월드맵/피드)**: 사진+말씀 카드 게시
    
- **좋아요·감정표시**: 게시물에 대한 공감/리액션 기록
    
- **선물하기**: 말씀 카드를 타 유저에게 선물로 보내기
    
- **쪽지·채팅**: 비동기 메시징·실시간 대화 기능
    

#### 10.4.5.2 대규모 기준(하루 1,000만 장) 인프라 비용 범위

> DAU 극대화·전 세계 서비스가 안정적으로 성장했을 때를 상정한 **최대 스케일 가이드**.

1. **커뮤니티 서버(API + DB + 채팅)**
    

- API Gateway(REST): 약 3,000 USD/월 수준 (요청 30억/월 가정)
    
- DynamoDB: 쓰기·읽기 합산 약 2,850 USD/월
    
- WebSocket(채팅): 약 300~350 USD/월
    
- 로그·기타 포함 시, **총 6,300~6,500 USD/월** 구간.
    

2. **CDN/이미지 트래픽**
    

- 게시물 3억/월, 게시물당 평균 3회 조회, 썸네일 150KB 가정 시  
    → 월 약 **135TB 트래픽**, CloudFront 비용 기준 **7,000~12,000 USD/월** 구간.
    

3. **합산(대규모 기준)**
    

- AI/말씀 추천(시나리오 B): 500~1,000 USD/월
    
- 커뮤니티 서버: 6,300~6,500 USD/월
    
- CDN/이미지: 7,000~12,000 USD/월
    
- **합계: 약 13,800~19,500 USD/월 (한화 약 2,000만~2,900만 원/월)**
    

> 결론: 대규모 단계에서는 **커뮤니티·이미지 트래픽 비용이 AI/추천 비용보다 훨씬 크다**.  
> 10장에서는 이를 인프라 설계의 상한선으로 제시하고, 실제 BM·운영 전략은 11장에서 다룬다.

#### 10.4.5.3 비용 절감을 위한 인프라 전략

- **노출 스케일 제어**
    
    - 월드맵에서 개별 좌표가 아닌 **국가/도 단위 집계** 중심으로 노출.
        
    - 전 세계 랜덤 피드보다는 **개인 피드·소그룹 중심 노출**을 우선.
        
- **이미지 전략**
    
    - 썸네일 해상도·용량을 50~80KB 수준으로 강하게 압축.
        
    - 피드에서는 썸네일만 로딩, 클릭 시 고해상도 1회 로딩.
        
    - 클라이언트 캐시 적극 활용(동일 이미지 재다운로드 최소화).
        
- **기능 단계적 확장**
    
    - 1단계: 게시물 + 좋아요·감정표시 + 선물하기(비동기).
        
    - 2단계: 채팅/쪽지(충분한 이용자·후원 기반 확보 후 도입).
        

### 10.4.6 초기 론칭 단계 인프라 스펙·비용 범위 (DAU 5~10만 기준)

#### 10.4.6.1 전제 (DAU 7.5만 중간값)

- DAU: 5만~10만 → 중간값 **75,000명** 기준으로 계산.
    
- 1인당 행동 가정:
    
    - 사진/말씀 생성 1.2장/일
        
    - 게시 비율 70%
        
    - 게시물당 좋아요·감정표시 4개
        
    - 게시물당 선물하기 0.2개
        
    - 1인당 채팅/쪽지 2메시지/일
        

이를 월간 기준으로 변환하면:

|항목|일간|월간(30일)|
|---|---|---|
|사진 처리|90,000|2,700,000 장|
|게시물|63,000|1,890,000 건|
|좋아요/감정표시|252,000|7,560,000 건|
|선물하기|12,600|378,000 건|
|채팅/쪽지|150,000|4,500,000 건|

#### 10.4.6.2 초기 단계 인프라 비용 추정 (요약)

1. **AI/말씀 추천 + 텔레메트리**
    

- 사진 270만 장/월, 텔레메트리 270만 건/월 → 시나리오 B 기준
    
- API Gateway + Lambda + S3 + DynamoDB 포함 **약 20~50 USD/월**.
    

2. **커뮤니티 API·DB**
    

- API Gateway(REST): 약 50 USD/월
    
- DynamoDB: 쓰기·읽기 합산 약 29 USD/월
    
- Lambda·모니터링: 약 20~30 USD/월
    
- **소계: 약 100~120 USD/월**.
    

3. **채팅(WebSocket)**
    

- 메시지 450만 건/월, 동시접속자 수천~1만 명 수준 가정 시
    
- 메시지·연결 시간 과금 합산 **10~20 USD/월**.
    

4. **CDN/이미지 트래픽**
    

- 월 게시물 189만 건, 게시물당 5회 조회, 썸네일 150KB 가정 시  
    → 약 **1.4TB/월** 트래픽  
    → CloudFront 기준 **120~150 USD/월**.
    

5. **기타(S3, 백업, 모니터링, 여유분)**
    

- 로그·백업·BI 쿼리 등을 포함해 **30~50 USD/월** 수준.
    

#### 10.4.6.3 초기 론칭 인프라 비용 결론

|범주|월 비용(현실적 추정)|
|---|---|
|AI/말씀 추천 + 텔레메트리|20~50 USD|
|커뮤니티 API/DB|100~120 USD|
|채팅/WebSocket|10~20 USD|
|CDN/이미지 트래픽|120~150 USD|
|기타(S3, 모니터링, 여유분)|50~100 USD|
|**합계**|**약 300~450 USD/월 (최대 500 USD 안쪽)**|

- 원화(1USD≈1,460원 가정) 기준:
    
    - 300 USD ≒ 44만 원
        
    - 450 USD ≒ 66만 원
        
    - 500 USD ≒ 73만 원 정도.
        

> 정리:  
> **온디바이스 아키텍처(시나리오 B)를 전제로 할 경우, DAU 5~10만 초기 론칭 단계에서 플랫폼·인프라·보안·커뮤니티 전체를 포함한 인프라 비용은 월 300~450 USD(최대 500 USD 안쪽)로 충분히 운영 가능하다.**  
> 10장은 이를 “기술·인프라 측면의 현실성 근거”로 제시하고, 11장은 같은 수치를 **운영비·기부·BM 시뮬레이션 관점**에서 다시 재구성한다.

### 10.4.7 핵심 백엔드/API 스펙(요청/응답·성능·캐시)

> 이 섹션은 9장에서 정의한 추천 로직·월드맵 로직을 실제로 노출하는 **HTTP API 인터페이스를 기술 관점에서 정리**한 것이다.  
> 비즈니스 상세 동작은 9장·8장에, 여기서는 **경로·입출력·성능·캐시 기준**만 정의한다.

#### 10.4.7.1 주요 엔드포인트 목록

|메서드|경로|목적|요청 요약|응답 요약|
|---|---|---|---|---|
|POST|`/v1/analyze`|지각 결과|`{image, exif?, locale, offline?}`|`{tags{obj/scene/ocr/landmark}, context, privacy_flags}`|
|POST|`/v1/recommend`|구절 추천|`{tags, context, lang, history?}`|`{verses[], reasons, themes, scores{ImgRel,ContextFit,Orthodoxy,Penalty}, safety_flags, debug{why,candidates}}`|
|POST|`/v1/affect-log`|사후 기록|`{event_id, verse_id, feelingTags?, memo?, prayed?}`|`{ok:true, next_review[]}`|
|POST|`/settings/location`|권한/정확도 설정|`{accuracy, opt_in}`|`{ok, policy}`|
|POST|`/map/pin`|퍼징 핀 생성|`{photo_id, verse_id, geohash...}`|`{pin_id, k_score}`|
|GET|`/map/tiles`|맵 타일 조회|`{area, bucket}`|`{tiles[]}`|
|GET|`/map/nearby`|인근 피드 조회|`{geohash...}`|`{pins[]}`|
|POST|`/map/report`|신고/숨김|`{pin_id, type}`|`{ok}`|

#### 10.4.7.2 성능·캐시 기준

- **성능(SLA/SLO 연동)**
    
    - 서버 구간(게이트웨이→Lambda/서버→DB/캐시) 기준 **p95 레이턴시 < 300ms**를 목표로 한다.
        
    - 10.4.3에서 정의한 앱+서버 합산 **p95 800ms SLO** 달성을 위한 서버 측 세부 기준으로 사용한다.
        
- **응답 압축**
    
    - 텍스트 위주의 JSON 응답은 기본적으로 **gzip/br 압축**을 사용해 대역폭·비용을 절감한다.
        
- **캐시 전략**
    
    - `/map/tiles`, 일부 설정 조회 API 등에 대해 **ETag/Last-Modified 기반 HTTP 캐시**를 사용한다.
        
    - 개인화·실시간성이 강한 API(`/v1/recommend`, `/v1/affect-log`, `/map/report` 등)는 **캐시 금지 또는 짧은 TTL**을 원칙으로 한다.
        

---

### 10.4.8 퍼포먼스/오프라인 기준(맵·핀)

|항목|기준|
|---|---|
|오프라인 캐시|`geohash, time_bucket` 단위로 로컬에 저장 후 네트워크 가능 시 **배치 업로드**|
|타일 캐시|**CDN + ETag/If-None-Match** 기반 브라우저/앱 캐시 활용|
|목표 응답 시간(핀)|핀 업로드 왕복 **< 600ms** (네트워크 포함)|
|목표 응답 시간(타일)|맵 타일 응답 **< 200ms** (CDN 기준)|

이 기준은 10.4.3의 SLO(앱+서버 p95 800ms) 하위에서, 특히 **월드맵·핀·타일 기능의 체감 속도 목표**를 구체화한 것이다.

### 10.4.9 API 공통 운영 규약(보안·성능·추적·캐시) — 서버/클라 공통

> 목적: 10장(플랫폼·인프라·보안·프라이버시)에서 실제 구현 시 반드시 필요한 **공통 헤더/규칙/보존/암호화/레이트리밋**을 한 블록으로 고정한다.

#### 10.4.9.1 인증·권한(Authorization)

|항목|규칙|비고|
|---|---|---|
|인증 방식|**OAuth2 Bearer Token**|`Authorization: Bearer <token>`|
|스코프 예시|`photos:write`, `recommend:read`, `affection:write`, `map:write`|최소 권한 원칙(서비스 정책에 따라 조정)|
|토큰 만료|짧게(예: 1h) + Refresh 토큰|세부는 인프라 정책에 종속|

#### 10.4.9.2 요청 안정성(재시도/중복 방지)

|항목|규칙|비고|
|---|---|---|
|**Idempotency-Key**|쓰기 요청(POST)에 `Idempotency-Key` 사용 권장|저속망·재시도 환경에서 중복 생성 방지|
|재시도 정책|`429/5xx`만 지수 백오프 재시도|`4xx`는 재시도 금지|
|업로드 크기|이미지 `≤ 5MB`(권장), Lite 모드 썸네일 우선|저사양/저속망 대응|

#### 10.4.9.3 추적(Tracing)·감사(Audit)

|항목|규칙|비고|
|---|---|---|
|**X-Trace-Id**|서버가 `X-Trace-Id` 발급/반환|요청 단위 end-to-end 연결|
|Explain Trace|`explain_trace_id`로 규칙/필터 경로 참조|“왜 이 구절인가” 근거 감사 가능|
|감사 로그 최소셋|`ruleset_version`, `filters_applied[]`, `candidates@k`, `chosen` 저장|개인정보 최소화 원칙 준수|

#### 10.4.9.4 레이트리밋(남용 방지)

|항목|규칙|비고|
|---|---|---|
|사용자 기준|분당 30회(초안)|MVP 기본값(운영에서 조정)|
|응답|`429` + `Retry-After`|클라이언트 준수 강제|
|우선 적용 대상|추천/지도 핀/신고 API|비용 폭주·DoS 방지|

#### 10.4.9.5 캐시·압축(성능)

|항목|규칙|비고|
|---|---|---|
|압축|`gzip`/`br` 사용|JSON 응답 기본|
|캐시|**ETag** + `If-None-Match`|지도 타일/설정/룰셋에 우선|
|추천 캐시|동일 `photo_id` + 동일 `ruleset_version`이면 캐시 허용|`force_refresh`로 무시 가능|

#### 10.4.9.6 데이터 보존·암호화(프라이버시 포함)

|항목|규칙|비고|
|---|---|---|
|좌표|원칙: 영구 미보관(국가/광역만)|월드맵은 지오해시/퍼징 기반(10.6 참조)|
|이미지 원본|기본 미보관(옵션 저장 정책 별도)|보관 시 명시적 동의(10.10.6 참조)|
|메타 보존|기본 365일(초안)|정책 변경 가능(운영에서 조정)|
|DB 암호화|민감 컬럼 **Row-level 암호화** 권장|키 회전 정책과 연동|
|운영 접근|운영·어드민의 데이터 접근은 **기본 읽기 전용(Read-only)** 을 원칙으로 하며, 변경 작업은 승인·감사 로그를 동반한다.|최소 권한(RBAC)과 연동|
|키 회전|90일 주기(초안)|운영 표준으로 고정|

#### 10.4.9.7 데이터 권리(삭제/내보내기)

- 사용자 데이터 **삭제/내보내기 API** 제공(지역 규정 포함).
    
- 삭제 시 `PhotoEvent/VerseMapping/PostAffection/GeoPin` 연관 데이터의 처리 규칙(소프트 삭제/즉시 삭제)을 명확히 고정한다.
    

#### 10.4.9.8 SNS/월드맵 공개 정책 집행 포인트(**Visibility**/**RiskRegion**)

|집행 지점|해야 하는 일|비고|
|---|---|---|
|클라이언트(게시/공유 UI)|게시 시 **Visibility** 기본값(V1) 적용, V4 선택 시 경고·재확인(민감/식별/위치 조건)|사용자가 “모르고 공개”하는 실수 방지|
|서버(저장 API)|업로드/저장 시점에 (1) 민감 시나리오(S1~S6), (2) **RiskRegion** 정책을 평가하여 가시성·지도 반영·외부 공유 허용 여부를 최종 확정|클라 우회 방지|
|지도/피드 조회 API|전 세계(V4)는 **익명 집계**(타일/히트맵) 우선 제공, 개별 포스트는 제한 조건을 만족할 때만 조회|확장성·안전 동시 확보|
|로그/감사|정책 결정 결과(선택값/강제값/사유)를 Trace로 남김(개인정보 최소화)|CS·분쟁 대응|

- 원칙적으로 정밀 좌표는 저장·노출하지 않고, 지도는 **GeoPin/RegionBucket** 기반의 비식별 시각화로 구성합니다.

#### 10.4.9.9 13장 단일 정본(스키마·엔드포인트·오류코드)

- 상세 엔티티/필드/인덱스/오류코드/요청·응답 예시는 **13장(부록: AI 데이터스키마 & API 명세)** 에 **단일 정본(Single Source of Truth)** 으로 둔다.
    
- 10장에서는 운영 규약(보안·프라이버시·성능·추적·캐시·보존·키)을 기준으로만 유지하고, 스키마 상세는 13장과 중복 작성하지 않는다.
    

## 10.5 보안 아키텍처

### 10.5.1 인증·인가

- 일반 사용자
    
    - 기본: **게스트 모드**(필수 정보 최소화)
        
    - 선택: 이메일/소셜 로그인 연동 → 다중 디바이스 동기화, 백업 제공
        
- 교회/소그룹/신학·운영 계정
    
    - **역할 기반 접근 제어(**RBAC**)** 적용
        
    - 어드민 콘솔 접근에 **MFA(다중 인증)** 필수
        
- 토큰
    
    - **짧은 수명의 액세스 토큰** + 리프레시 토큰 구조
        
    - $1
        

#### 10.5.1.1 통합 계정·ID 시스템 기준

- 사용자 계정은 **단일 ID(UID)**를 기준으로 관리하며, 향후 형제 앱·웹 서비스가 추가되더라도 동일 UID를 공유해 **플랫폼 단일 로그인(SSO에 준하는 경험)**을 제공한다.
    
- 초기 구현에서는 **Firebase Authentication**의 UID를 기준으로 다음과 같이 논리 구조를 갖는다.
    
    - Users/{uid}/profile: 이름, 이메일, 프로필 사진, 언어/로케일 등 공통 프로필
        
    - Users/{uid}/bible_data: 즐겨찾기 구절, 선호 번역, 묵상 플랜 진행 상황 등 성경 앱 전용 데이터
        
    - (옵션) Users/{uid}/{app_id}_data 패턴을 사용해, 다른 앱 데이터도 동일 계층에 확장 가능
        
- 데이터베이스 보안 정책은
    
    - "인증된 사용자는 **자신의 uid 아래 노드만** 읽기/쓰기"를 기본으로 하고,
        
    - 관리자/신학 검수 계정은 **별도 컬렉션과 역할(Role)** 기반으로 분리하며,
        
    - 모든 규칙은 **Firebase Security Rules** 혹은 동급 정책 엔진으로 코드화한다.
        

### 10.5.2 데이터 암호화

- 전송 구간
    
    - 모든 통신은 **HTTPS(TLS)** 로 암호화
        
- 저장 구간
    
    - DB·스토리지·백업은 **디스크 암호화** 활성화
        
    - 민감 필드(이메일 등)는 **컬럼 단위 암호화** 또는 **토큰화** 적용
        

### 10.5.3 비밀 관리

- API 키·DB 비밀번호·암호화 키는 **소스 코드에 포함 금지**
    
- 클라우드 **비밀 관리 서비스** 또는 **키 관리 서비스(KMS)** 를 사용
    
- 키 교체 주기와 권한 범위를 운영 문서에 명시
    

### 10.5.4 로그·감사·모니터링

- 주요 액션(로그인, 권한 변경, 데이터 조회/삭제, 신학 검수 변경 등)에 대해  
    **감사 로그(Audit Log)** 를 남기고, 보관 기간·접근 권한을 제한
    
- 운영팀은 **대시보드·알림 시스템**을 통해 보안 이벤트를 모니터링
    

### 10.5.5 취약점 관리

- 정기적으로
    
    - **취약점 스캐닝**(OS·라이브러리)
        
    - **웹 취약점 점검**(예: XSS, SQL Injection 등)
        
    - 필요 시 **침투 테스트(Pen-test)** 수행
        
- 주요 릴리즈 전에는 최소한의 **보안 리그레션 테스트**를 거친다.
    

---

## 10.6 프라이버시·데이터 최소 수집

### 10.6.1 기본 원칙

- "**좌표 미수집**"을 기본으로 하고,
    
    - 월드맵·통계 기능은 **국가·광역 단위 퍼징**과 **지오해시** 기반 집계만 사용
        
- 얼굴·아동·의료·장례 등 **민감 이미지**는 자동 감지 후,
    
    - 기본값을 "**비공개 권고**"로 설정
        
- 감정·기도·메모 등은 반드시 **옵션**으로, 최소한의 텍스트만 저장
    

### 10.6.2 데이터 카테고리별 처리 정책

|데이터 종류|처리 원칙|
|---|---|
|사진 원본|오브젝트 스토리지에 암호화 저장, 만료/삭제 주기 설정|
|위치(좌표)|원본 좌표는 저장하지 않음|
|국가/광역/지오해시|통계·월드맵용 집계에만 사용|
|계정 정보(이메일 등)|필수 최소 정보만, 암호화 저장|
|감정·메모·기도 텍스트|사용자가 명시적으로 입력한 내용만 저장|
|로그·메트릭|개인 식별 정보 최소화, 보존 기간 제한|

#### 10.6.2.1 데이터 & 보안 설계 요약 매핑

|원칙|구현|
|---|---|
|정밀 좌표 미저장|GeoPin(퍼징+지오해시)만 저장|
|시간 퍼징|개별 시각이 아닌 "오전/오후/이번 주" 등 시간 버킷 단위로 집계|
|**k-익명성**|임계 사용자 수 미만 구간·집계는 자동 비공개 처리|
|홈/직장 보호|동일 좌표·지오해시 반복 업로드 시 자동 비공개·노출 제한|

### 10.6.3 데이터 보존·삭제

- 보존 기간
    
    - 로그: 90일(기본), 법적 요구가 없으면 자동 삭제
        
    - 백업: 30~90일 롤링 보관
        
- 사용자 삭제 요청
    
    - 계정 삭제 시, 계정 연결 데이터(메모·기도 등)를 최대한 익명화 또는 삭제
        
    - 통계용 집계 데이터는 개별 사용자를 역추적할 수 없도록 설계
        

### 10.6.4 DPIA(Data Protection Impact Assessment)

- 새로운 기능(예: 새로운 위치 기능, 새로운 통계 기능) 도입 전,
    
    - 어떤 데이터가 추가 수집/처리되는지,
        
    - 프라이버시·신학적 윤리에 어떤 영향을 주는지  
        를 **사전 평가(DPIA)** 하고, 문서화하는 프로세스를 둔다.
        

---

### 10.6.5 거버넌스·안전

|억제 규칙|조치|
|---|---|
|집 주소 근접 반복 업로드|해당 지오해시·반경 내 반복 업로드 시 **자동 비공개** 처리|
|아동 얼굴 + 정밀 좌표 포함|**자동 비공개 + 모자이크 권고** (필요 시 업로드 전 안내 문구 표시)|
|의료/장례 관련 이미지|기본값 **자동 비공개 권고**, 공개 시 추가 경고 배너 노출|
|교회·소그룹 모드 게시물|공개 게시 시 **관리자 승인 필요 + 항상 퍼징(정밀 좌표 비저장)**|

이 표는 10.6.1~10.6.2에서 정의한 프라이버시·민감 데이터 원칙을 실제 운영 규칙(거버넌스)으로 묶어 정리한 것이다.

### 10.6.6 감정 데이터 프라이버시 정책 (120×24 모듈 연동)

이 절은 9장에서 정의한 **사진→상징 120×주제 24 모듈**이 생성하는 감정·묵상 데이터에 적용되는 별도 프라이버시 기준을 정리한 것이다.

#### 10.6.6.1 감정 데이터 저장 원칙

- **로컬 우선·단기 보존**
    
    - 감정 태그, 묵상 메모, 기도 여부 등 **감정·메모 데이터**는 기본값을 **로컬 임시 저장(24–72시간)** 으로 한다.
        
    - 사용자가 별도 동의를 하지 않는 한, 서버로 자동 동기화하지 않는다.
        
- **서버 동기화 조건(동시 충족 필요)**
    
    1. 사용자가 설정 화면 또는 명시 팝업에서 **동의**했을 것.
        
    2. 계정·좌표 등 직접 식별 요소는 제거되거나 **가명화**(ID 토큰·지오해시 등)된 형태일 것.
        
    3. 활용 목적이 **신학·품질 개선(추천 로직·주제 가중치·버그 분석 등)**에 한정될 것.
        
- 위 조건을 충족하지 않으면 감정 데이터는 로컬에만 머물고, 동기화 대상에서 제외된다.
    

#### 10.6.6.2 운영·보안 가이드

- **강화된 보호 레이어**
    
    - 감정 데이터는 신앙·심리 정보에 해당하므로, 일반 행동 로그보다 더 강한 보호 레이어를 적용한다.
        
    - 서버 저장 시에는 **암호화(Encryption)** 및 **최소 권한 원칙(RBAC)** 을 적용해 접근 가능한 계정을 엄격히 제한한다.
        
- **집계·통계 단위 분석 원칙**
    
    - 모델·품질 개선을 위한 분석은 개인 단위가 아니라 **집계·통계 단위**에서 수행하는 것을 원칙으로 한다.
        
    - 개별 사용자의 감정 히스토리가 외부 리포트나 대시보드에 그대로 노출되지 않도록 한다.
        
- **삭제 요청 처리**
    
    - 사용자가 “감정 기록 삭제”를 요청하는 경우,
        
        - 단말 로컬 기록은 즉시 삭제 처리하고,
            
        - 이미 서버에 동기화된 레코드는 **논리 삭제 플래그**를 먼저 설정한 뒤, 주기적인 **물리 삭제 배치 작업**과 연계해 완전 삭제를 완수한다.
            

---

## 10.7 규제·윤리 준수(국가·지역별)

### 10.7.1 데이터·프라이버시 규범 준수 프레임

- 국제적으로 널리 통용되는 **개인정보 보호 원칙**(데이터 최소 수집, 목적 제한, 보존 기간 제한 등)을 기본으로 삼는다.
    
- EU, 북미, 아시아 등 주요 지역의 규범에 맞춰,
    
    - 쿠키·추적 사용 시 명확한 고지
        
    - 데이터 국외 이전 시, 해당 국가 규범 검토
        

### 10.7.2 종교·콘텐츠 관련 규제

- 특정 국가·지역에서는 종교 앱·성경 콘텐츠에 대한 규제가 존재할 수 있으므로,
    
    - **국가별 서비스 정책**(서비스 제공 여부, 기능 제한 등)을 8장 글로벌 전략과 연동해 관리
        
    - 민감 지역에서는 월드맵·공개 기능을 제한하거나 비활성화할 수 있음
        

### 10.7.3 아동·청소년 보호

- 아동·청소년 사용자에 대해
    
    - 회원 가입·데이터 수집 시 보호자 동의가 필요한지 여부를 국가별로 검토
        
    - 아동이 포함된 사진에 대해서는,
        
        - 자동으로 **공개 공유 차단 + 비공개 권고 + 모자이크 옵션** 제공
            

---

## 10.8 관측성(Observability) & 운영

### 10.8.1 관측성 3요소

1. **로그(Log)**
    
    - 에러·경고·중요 비즈니스 이벤트 기록
        
2. **메트릭(Metric)**
    
    - 레이턴시, 에러율, 트래픽, AI 품질 지표, 큐 길이 등
        
3. **트레이스(Trace)**
    
    - 한 요청이 앱→API→AI→DB까지 거치는 경로와 시간 분해
        

### 10.8.2 대시보드 & 알람

- 운영팀이 상시 모니터링할 항목 예시
    
    - 추천 API 레이턴시(p95), 에러율
        
    - AI 서빙 실패율, 오프라인팩 폴백 비율
        
    - DB 커넥션 수, 캐시 히트율
        
- 임계치 초과 시 알림(예: 메신저·이메일·Ops 툴) 발송
    

### 10.8.3 장애 대응 Runbook

- 주요 장애 유형별로 **Runbook**을 작성
    
    - 예: API 타임아웃 증가, AI 모듈 장애, DB 연결 고갈, 캐시 장애 등
        
- 각 Runbook에는
    
    - 1. 증상, 2) 우선 확인 항목, 3) 임시 완화 조치, 4) 영구 해결 가이드를 기재
            

---

## 10.9 백업·재해 복구(DR)

### 10.9.1 백업 대상·주기

- RDB 스냅샷: 최소 하루 1회, PITR(Point-in-time Recovery) 옵션 고려
    
- 오브젝트 스토리지: 버전 관리·라이프사이클 정책으로 삭제/변경 보호
    
- 설정·정책·데이터북 파일: 형상관리와 별도 백업 병행
    

### 10.9.2 RTO/RPO 목표(예시)

- **RTO**(복구 시간 목표): 4시간 이내
    
- **RPO**(복구 시점 목표): 1시간 이내 데이터 손실
    

### 10.9.3 DR 연습

- 정기적으로(예: 연 1~2회)
    
    - 장애·데이터 손실을 가정한 **복구 연습**을 수행하고,
        
    - 실제 복구에 걸린 시간과 문제점을 기록해 개선한다.
        

---

## 10.10 온디바이스·엣지 전략(9장과 연동)

### 10.10.1 온디바이스 모델 배포

- 9장에서 정의한 **오프라인팩·경량 모델**을 실제 단말에 배포할 때,
    
    - 앱 번들에 포함할지,
        
    - 설치 후 다운로드/업데이트 방식으로 할지 정책 정의
        
- 모델·데이터 업데이트는
    
    - Wi‑Fi 환경에서만,
        
    - 백그라운드로,
        
    - 사용자에게 알림·동의(특히 데이터 사용량)를 제공하는 것을 권장
        

### 10.10.2 버전 호환 정책

- 앱 버전, API 버전, 모델·데이터 버전 간 **호환 매트릭스**를 관리해,
    
    - 구버전 앱에서도 최소한의 추천 기능이 동작하도록 한다.
        

### 10.10.3 저사양·저속 환경 대응

- 저사양 단말, 저속 네트워크 환경에서는
    
    - 온디바이스 추천 비율을 높이고,
        
    - 서버 호출 실패 시 사용자에게 **명확한 안내 + 재시도 옵션** 제공
        

---

### 10.10.4 저사양(PWA) 아키텍처

#### 10.10.4.1 실행 모드

- **텍스트 모드(보장)**: 사진 없이 아이콘/태그 1–2개로 추천. 룰셋 100KB 내, 완전 오프라인 동작을 전제로 한다.
    
- **라이트 사진 모드(기본)**: 224px 썸네일 업로드(20–60KB)를 기준으로, 엣지(Edge) 구간에서 키워드를 추출한 뒤 온디바이스 룰·검색 로직과 결합한다.
    
- **클라우드 모드(옵션)**: 네트워크 상태 양호·고사양 단말에서만 선택적으로 장면·OCR 보조 추론을 수행하고, 그 결과를 점진적으로 업데이트한다.
    

#### 10.10.4.2 성능 예산(PWA)

- 초기 번들은 **≤ 300KB**를 목표로 한다.
    
- 3G 환경 기준, 첫 구절 노출 시간은 **2–4초** 범위를 목표로 설계한다.
    
- 1 세션당 데이터 사용량은 **≤ 500KB**를 목표로 한다.
    
- 폰트는 **시스템 기본 폰트**를 사용하여 번들 용량을 최소화한다.
    

### 10.10.5 품질·보안·운영 체크리스트

> 이 체크리스트는 9장(AI 로직), 10장(플랫폼·인프라·보안), 11장(운영·비용·BM)에 흩어져 있는 핵심 기준을 **실행 직전 점검용 요약**으로 정리한 것이다.

|항목|기준|관련 섹션|
|---|---|---|
|성능(온디바이스)|한 사진당 후보 산출 **≤ 150ms** (단말 내 모델 추론 기준)|9장, 10.4, 10.10|
|성능(전체 응답)|라이트 모드 기준 **p95 < 800ms** (앱+서버 왕복)|10.4.3, 10.4.7|
|성능(PWA/3G)|3G 환경에서 **첫 구절 노출 2–4초**|10.10.4|
|안전(프라이버시)|얼굴 **블러/모자이크 옵션 제공**, 좌표는 지오해시·퍼징으로 가명화 처리|10.6.1~10.6.2, 10.6.5|
|안전(신학 톤)|민감 장면(장례·의료·재난 등)에서는 **위로·소망 주제 구절 우선 랭킹** 적용|9장(추천 로직), 10.7|
|회귀 QA|표준 30장×주제 테스트셋 기준 **오해율 < 2%, p95 < 800ms**|9장 품질·QA, 10.8|
|오프라인 코어팩|**Top-500 절/상징 매핑 코어팩**을 온디바이스에 포함|9장, 10.10.1|
|PWA 캐시|**Service Worker**로 코어팩·설정 버전 캐시 및 점진 업데이트|10.10.4, 10.10.1|

### 10.10.6 온디바이스 최적화 & 민감 처리 결합 정책

이 절은 10.6(프라이버시)에서 정의한 **데이터 최소 수집** 원칙과, 10.10(온디바이스/엣지)에서 정의한 **경량 추론** 원칙을 하나의 운영 정책으로 결합해 정리한 것이다.

#### 10.10.6.1 저장/전송 원칙(요약 표)

|No|항목|원칙|
|--:|---|---|
|1|원본 이미지|기본 **미보관**(온디바이스 처리). 단, 사용자가 공개 게시/공유를 선택한 경우에도 **썸네일·카드 이미지 등 최소본**만 저장하고 만료/삭제 주기를 적용한다.|
|2|좌표|(중복 방지) 좌표 관련 원칙은 **10.6.1~10.6.2**의 ‘좌표 미수집/미저장·퍼징’ 정책을 그대로 따른다.|
|3|민감 신호|얼굴/아동/의료/장례 등 민감 신호는 원본 특징을 보내지 않고 **safety_flags**로만 전달·저장한다.|
|4|**Perception** 결과|`objects/scenes/clip/ocr` 등은 다음 레이어(추천·집계)로 전달할 때 **최소 태그·최소 점수**만 전달하고, 원시 출력(전체 박스/전체 텍스트)은 기본 비활성화한다.|

#### 10.10.6.2 온디바이스 성능·경량화 운영

- 모델
    
    - **백본(Backbone)** 은 경량 계열 우선 적용하고, 기기 성능 등급에 따라 **프로파일(Profile)** 을 분기한다(저사양=라이트/텍스트 모드 우선).
        
- 최적화
    
    - 기본은 **PTQ(INT8)** 를 우선 적용하고, 품질 하락이 허용 범위를 벗어날 때만 **QAT** 단계로 전환한다.
        
- 과밀 장면 방어
    
    - 과도한 박스/태그 폭주를 방지하기 위해 **Top-K 제한 + NMS 파라미터 정책 고정**을 적용한다.
        
    - 고정 값은 7장에서 수행하는 임계값·파라미터 스윕 결과를 반영해 확정한다.
        

---

## 10.11 위협 모델 요약(STRIDE 관점)

> 세부 위협 모델링 문서는 보안 팀 별도 문서로 관리하고,  
> 이 장에서는 핵심 축만 요약한다.

|범주|예시 위협|주요 대응 통제|
|---|---|---|
|**위장(Spoofing)**|계정 탈취, 토큰 도용|짧은 만료 토큰, MFA, IP·디바이스 패턴 모니터링|
|**변조(Tampering)**|요청·응답 위조, 데이터 변조|TLS, 서명·MAC, 서버 측 스키마 검증|
|**부인(Repudiation)**|행위 부인("내가 한 게 아니다")|감사 로그, 서명된 이벤트, 시간 동기화|
|**정보 유출(Information Disclosure)**|좌표·민감 데이터 유출|좌표 미수집, 지오해시·퍼징, 최소 권한, 암호화|
|**서비스 거부(DoS)**|과도한 요청으로 추천 API 마비|레이트 리밋, 큐 관리, 캐시, 서킷 브레이커|
|**권한 상승(Elevation of Privilege)**|일반 계정이 어드민 권한 획득|RBAC, 코드 리뷰, 어드민 콘솔 분리, 정기 권한 점검|

---

## 10.12 용어 인덱스(플랫폼·보안 용어)

|용어|설명|
|---|---|
|**플랫폼(Platform)**|앱·서버·데이터·AI가 올라가는 전체 기술 기반 구조.|
|**인프라(Infrastructure)**|서버, 네트워크, 스토리지 등 물리/가상 자원을 포함한 기반 시스템.|
|**API**|앱과 서버가 데이터를 주고받기 위해 사용하는 표준화된 호출 인터페이스.|
|**VPC**|가상 사설 네트워크. 클라우드 안에서 격리된 네트워크 공간.|
|**서브넷(Subnet)**|VPC 안을 여러 구역으로 나눈 네트워크 단위.|
|**로드밸런서(Load Balancer)**|들어오는 요청을 여러 서버에 나눠 보내는 장치/서비스.|
|**CI/CD**|코드 변경을 자동으로 빌드·테스트·배포하는 파이프라인.|
|**캐시(Cache)**|자주 쓰는 데이터를 빠르게 꺼내 쓰기 위해 임시 저장하는 공간.|
|**벡터 인덱스(Vector Index)**|임베딩 벡터들을 효율적으로 검색하기 위한 특수 데이터 구조.|
|**TLS/HTTPS**|인터넷 통신 내용을 암호화하는 표준 기술.|
|**RBAC**|역할(Role)에 따라 권한을 나누는 접근 제어 방식.|
|**암호화(Encryption)**|데이터를 알아볼 수 없게 변환해 보호하는 기술.|
|**KMS**|암호화 키를 안전하게 관리하는 서비스(Key Management Service).|
|**로그(Log)**|시스템에서 일어난 사건을 기록한 데이터.|
|**메트릭(Metric)**|성능·상태를 수치로 표현한 지표.|
|**트레이스(Trace)**|한 요청이 여러 서비스를 거치는 경로를 추적한 정보.|
|**SLO/RTO/RPO**|서비스 목표, 복구 시간/데이터 손실 허용 범위를 정량화한 지표.|
|**DR(Disaster Recovery)**|장애·재해 발생 시 시스템을 복구하는 절차와 체계.|
|**DPIA**|새로운 데이터 처리로 인한 프라이버시 영향을 사전에 분석하는 절차.|
|**Service Worker**|웹·PWA 환경에서 백그라운드에서 캐싱·동기화 등을 담당하는 스크립트.|
|**OAuth2 Bearer Token**|API 호출 시 토큰을 `Authorization: Bearer ...` 형태로 전달하는 표준 인증 방식.|
|**Idempotency-Key**|동일 요청을 여러 번 보내도 서버가 한 번만 처리하도록 중복을 방지하는 요청 식별 키.|
|**X-Trace-Id**|한 요청이 앱→API→AI→DB를 거치는 전체 경로를 연결해 추적하기 위한 요청 식별자.|
|**ETag**|리소스(설정/타일 등)의 버전을 나타내는 값. `If-None-Match`와 함께 변경이 없으면 응답을 생략해 트래픽을 줄인다.|
|**Retry-After**|`429` 응답 시, 클라이언트가 재시도를 언제 할지(대기 시간)를 알려주는 헤더.|
|**키 회전(Key Rotation)**|암호화 키를 주기적으로 교체해, 키 노출 시 피해 범위를 줄이는 운영 보안 절차.|
|**Row-level 암호화**|DB에서 특정 행/필드 단위로 별도 암호화해, 민감 데이터 노출 위험을 줄이는 방식.|
|**가명화**|직접 식별자를 다른 값으로 치환해, 통계·분석은 가능하지만 개인을 바로 특정하기 어렵게 만드는 처리 방식.|
|**백본(Backbone)**|AI 모델에서 입력을 받아 핵심 특징을 뽑아내는 ‘뼈대’ 신경망 부분. 경량 백본은 저사양 기기에서 빠르게 동작하도록 설계된 구조를 뜻한다.|
|**프로파일(Profile)**|기기 성능·네트워크 상태에 따라 서로 다른 모델/해상도/모드(텍스트·라이트·클라우드)를 선택하는 운영 설정 묶음.|
|**PTQ**|학습이 끝난 모델을 배포 단계에서 **양자화(Quantization)** 하는 방식. 보통 속도·용량을 줄이기 위해 사용한다.|
|**QAT**|학습 과정에서 양자화를 고려해 다시 학습하여(또는 미세 조정하여) **양자화 후 품질 저하**를 줄이는 방식.|
|**INT8**|8비트 정수 정밀도로 계산/저장을 수행하는 표현 방식. 모델 용량과 추론 지연을 줄이는 데 유리하다.|
|**NMS**|객체 탐지에서 겹치는 박스를 정리(제거)해 중복 탐지를 줄이는 후처리 기법(Non‑Maximum Suppression).|
|**Top-K**|후보(태그/박스/구절 등) 중 점수가 높은 상위 K개만 유지하는 제한 정책. 과밀 장면 폭주와 비용을 줄이는 데 사용한다.|
|$1|**React Native**|
|**Firebase Authentication**|이메일·소셜 로그인을 포함한 인증을 제공하는 BaaS 서비스. UID 기반 계정 관리를 지원한다.|
|**Cloud Firestore**|문서/컬렉션 구조의 NoSQL 클라우드 데이터베이스.|
|**Firebase Cloud Messaging(FCM)**|모바일·웹 클라이언트에 푸시 알림을 보내는 서비스.|
|**Cloud Functions for Firebase**|이벤트 기반 서버 코드를 서버리스로 실행할 수 있게 하는 함수형 백엔드.|
|**TensorFlow Lite(TFLite)**|모바일·엣지 디바이스용 경량 ML 추론 엔진.|
|**Google ML Kit**|온디바이스 비전·NLP 기능을 제공하는 모바일 ML SDK.|
|**Firebase Security Rules**|Firestore·Storage 등 리소스 접근 권한을 정의하는 정책 언어.|
|$1|**k-익명성**|

# 11장. 운영·비용 구조 & BM(수익·기부 구조) (v2)
    

이 장은 성경 프로젝트의 운영비를 극단적으로 낮추면서도,  
**144개국·일 1,000만 장까지 확장 가능한 인프라 구조와 BM(수익·기부 구조)**를 정의하는 최종 기준입니다.

핵심 전제는 **“온디바이스 비전 + 초경량 서버리스 인프라 + 기부 중심 BM”**입니다.

---

## 11.1 장 개요

### 11.1.1 목적

이 장의 목적은 다음과 같습니다.

사진→말씀 추천이라는 비교적 무거운 AI 서비스를  
폭리·중독형 BM 없이, 기부·후원 중심으로 장기 운영하기 위한

- 인프라 구조
    
- 월별 비용 범위
    
- BM(수익·기부 구조)
    

를 체계적으로 정의합니다.

- 10장에서 정의한 온디바이스 중심 아키텍처를 실제 월 예산 수치와 연결합니다.
    
- 초기 MVP부터 144개국·일 1,000만 장까지 확장 가능한 스케일 플랜을 제시합니다.
    

### 11.1.2 범위 및 전제

**범위**

이 장에서 다루는 범위는 다음과 같습니다.

- 인프라 구성 요소별 비용 구조 (AI, 서버/API, 스토리지/CDN, 데이터/로그)
    
- 스테이지별 운영비 (MVP → 초기 론칭 → 성장기 → 글로벌 확장) 추정
    
- 온디바이스 AI와 기술 보호 관점 정리
    
- BM(수익·기부 구조) 및 “최소 후원 목표” 정의
    

**기술·인프라 전제**

- AI/비전 구조: 시나리오 B — 온디바이스 비전 + 얇은 서버 구조를 최종 선택
    
    - 객체 탐지·장면 분류·간단한 OCR: 모두 온디바이스
        
    - 서버: 텍스트 기반 추천, 벡터 검색, 로그·커뮤니티 API만 담당
        
- 인프라 스택(최소 비용 기준):
    
    - Cloudflare Workers: 서버리스 API, 추천/로그/커뮤니티 엔드포인트
        
    - Cloudflare R2: 썸네일·정적 파일 스토리지
        
    - Supabase: DB + Auth (초기 Free → 성장 후 Pro)
        
- 이미지 정책:
    
    - 사진 원본은 서버에 저장하지 않음
        
    - 서버에는 **썸네일(전체의 약 10%, 50~100KB 수준)**만 저장
        

---

## 11.2 비용 구조 설계 원칙

### 11.2.1 원칙 ① AI 변동비를 0에 가깝게

클라우드 비전 API 또는 GPU 서버 추론은 호출당 비용이 붙는 구조입니다.

- 이용량이 늘수록 월 수백만~수만 달러까지 쉽게 상승
    
- 선교·사역형 프로젝트에는 구조적으로 맞지 않음
    

**성경 프로젝트의 전략**

- 이미지 인식·감정 분석은 모두 온디바이스 모델로 처리
    
- 서버에서는 텍스트 기반 추천·스코어링·로그 집계만 수행
    
- 결과적으로 AI 관련 변동비는 거의 0에 수렴하도록 설계
    

### 11.2.2 원칙 ② 이미지 원본 미보관 & 썸네일 10% 정책

일반 사진 서비스의 가장 큰 비용 요소는 다음과 같습니다.

- TB~PB 단위로 증가하는 원본 이미지 스토리지 + CDN 트래픽
    
- 인스타그램·클라우드 포토류의 비용 구조는 대부분 여기에 집중
    

**성경 프로젝트의 이미지 정책**

- 사진 원본은 온디바이스에만 남기고 서버에는 올리지 않거나,  
    올리더라도 짧은 기간(예: 7~30일) 후 자동 삭제를 기본 원칙으로 함.
    
- 서버에 장기 보관하는 것은:
    
    - 월드맵·피드 노출용 썸네일 이미지(대표 카드) 정도
        
    - 전체 사진의 약 10%, 1장 50~100KB 목표
        

→ 이 정책 하나만으로도 스토리지/트래픽 비용을 한 자릿수~두 자릿수 낮추는 효과가 있습니다.

### 11.2.3 원칙 ③ “가장 싼 조합”: Cloudflare + Supabase

**서버/API**

- Cloudflare Workers:
    
    - 월 5 USD에 10M(천만) 요청 포함
        
    - 초과분도 100만 요청당 0.5 USD 수준으로 매우 저렴
        

**스토리지/CDN**

- Cloudflare R2:
    
    - GB당 약 0.015 USD/월의 낮은 저장 단가
        
    - R2→Cloudflare 네트워크(Workers·CDN)로 나가는 트래픽은 무료
        

**DB + 인증**

- Supabase:
    
    - 초기 론칭(최대 50k MAU)까지는 Free 플랜으로 충분
        
    - 이후 성장기에 월 25 USD 정도의 Pro 플랜으로 확장
        

→ 이 조합을 기준으로 하면, 사진 기반 글로벌 서비스임에도  
월 수십~수백 달러 수준에서 인프라를 운영할 수 있습니다.

### 11.2.4 원칙 ④ MVP→144개국까지 인프라 구조는 그대로 유지

MVP 단계에서 사용한 스택(온디바이스 + Cloudflare + Supabase)을  
그대로 144개국까지 가져간다는 전제로 설계합니다.

스케일 업은

- 더 큰 서버를 사는 것이 아니라
    
- 요청 수·저장 용량이 늘어나는 만큼 비용이 조금씩 증가하는 구조로 해결
    

---

## 11.3 인프라 구성 및 단계별 비용 (B 시나리오 기준)

### 11.3.1 주요 인프라 컴포넌트 요약

|계층|컴포넌트|역할 요약|
|---|---|---|
|클라이언트|온디바이스 비전/AI|객체·장면·감정·OCR 태깅, 코어팩 추천|
||앱 로컬 DB|PhotoEvent, VerseMapping, 감정 기록 저장|
|API/서버|Cloudflare Workers|/recommend, /log, /feed, /chat 등 API|
|스토리지/CDN|Cloudflare R2|썸네일 이미지, 정적 자산(아이콘, 폰트 등)|
|데이터베이스|Supabase(Postgres)|사용자·게시물·로그·설정 데이터|
|모니터링/BI|Cloudflare Analytics 등|요청 수, 에러율, 국가별 사용량 모니터링|

### 11.3.2 트래픽/요청량 가정 (스테이지별)

|스테이지|설명|MAU|월 사진 수(장)|대략적인 API 요청 수(추천·로그·커뮤니티)|
|---|---|---|---|---|
|S0|MVP/내부 테스트|10,000|300,000|1~2M|
|S1|초기 론칭(국가 1~2개)|50,000|1,500,000|5~10M|
|S2|성장기(주요 몇 개 국가)|200,000|6,000,000|20~40M|
|S3|글로벌 론칭(일 100만 장급)|1,000,000+|30,000,000|100~150M|
|S3’|최대 목표(일 1,000만 장)|-|300,000,000|최대 900M|

### 11.3.3 스테이지별 월 비용 요약 (최소·현실적 추정)

기준: B 온디바이스 + Cloudflare Workers + R2 + Supabase

**1) Stage 0 – MVP (내부·클로즈 베타)**

|항목|금액(USD/월)|비고|
|---|---|---|
|Cloudflare Workers|~5|10M 요청 포함 유료 플랜|
|Cloudflare R2|~0|썸네일 3GB 수준|
|Supabase|0|Free 플랜(50k MAU, 500MB DB 내)|
|도메인·모니터링 등 기타|~10||
|**합계**|**≈ 15**|한화 약 2만 원 내외|

**2) Stage 1 – 초기 론칭 (1~2개 국가, 50k MAU)**

|항목|금액(USD/월)|비고|
|---|---|---|
|Cloudflare Workers|5~10|요청 5~10M 내외|
|Cloudflare R2|~0.2|썸네일 10~20GB 수준|
|Supabase|0|여전히 Free 내에서 운용 가능|
|기타(도메인·모니터링 등)|~10||
|**합계**|**≈ 20~30**|한화 약 3~4만 원 수준|

**3) Stage 2 – 성장기 (수 개국, 200k MAU)**

|항목|금액(USD/월)|비고|
|---|---|---|
|Cloudflare Workers|10~25|요청 20~40M|
|Cloudflare R2|~1|썸네일 60GB 내외|
|Supabase Pro|25|Pro 플랜 전환|
|기타(도메인·모니터링 등)|10~20||
|**합계**|**≈ 50~70**|한화 약 7~10만 원 수준|

**4) Stage 3 – 글로벌 론칭 (144개국, 일 100만 장급)**

|항목|금액(USD/월)|비고|
|---|---|---|
|Cloudflare Workers|50~80|요청 100~150M|
|Cloudflare R2|~5|썸네일 300GB|
|Supabase/DB|50~100|Pro + 확장 옵션|
|기타(모니터링/로그/대시보드 등)|20~30||
|**합계**|**≈ 120~215**|한화 약 15~30만 원 수준|

**5) Stage 3’ – 최대 목표 (일 1,000만 장, 월 3억 장)**

|항목|금액(USD/월)|비고|
|---|---|---|
|Cloudflare Workers|~450|최대 900M 요청 가정|
|Cloudflare R2|~40|썸네일 2.8TB 수준|
|Supabase/DB|100~150|Pro + 고급 옵션|
|기타(모니터링/로그/여유분)|50~100|SRE/보안 등 여유 비용 포함|
|**합계**|**≈ 600~1,000**|한화 약 80~140만 원 (10장에서 정의한 목표 범위와 일치)|

### 11.3.4 장기 목표와 10장과의 정합성

10장에서 제시한 목표:

> “일 1,000만 장(월 3억 장) 처리 기준에서도 인프라 비용을 월 500~1,000 USD 수준으로 억제”

11장의 재계산 결과:

- B 온디바이스 + Cloudflare 기준으로
    
- 600~1,000 USD/월 구간에 현실적으로 안착 가능
    

**결론:**

- 10장 아키텍처 목표와 11장 비용 추정이 정합적이며,
    
- “144개국·일 1,000만 장”이라는 공격적인 장기 목표도  
    사역형 BM으로 현실적으로 커버 가능한 범위에 들어갑니다.
    

---

## 11.4 모듈별 비용 최적화 전략

### 11.4.1 AI 모듈(온디바이스) 최적화

**온디바이스 모델 설계**

- MobileNet 계열 등의 소형 CNN/비전 트랜스포머를 사용
    

**인식 범위:**

- 120 피사체/상징 코드
    
- 실내/실외, 자연/도시, 낮/밤 등 장면 코드
    
- 간단한 OCR(간판/책 표지/포스터 텍스트)
    

**저사양 기기 대응**

- INT8 양자화 모델로 배포해 모델 크기와 추론 시간을 줄임
    
- 극저사양 기기에서는
    
    - 저해상도 입력
        
    - 클래스 수 축소
        
    - 또는 경우에 따라 간단한 질문(“산인가요/바다인가요?”) 으로 보완
        

**폴백 전략**

온디바이스 추론이 매우 느리거나 실패할 경우:

- 로컬/서버 자동 선택 모드 적용
    
- 극히 일부 기기만 제한적으로 서버 비전(or 텍스트 기반 보정)을 사용
    

### 11.4.2 서버/API 모듈 최적화

**서버리스 구조**

- 모든 API(추천, 로그, 피드, 채팅 등)는 Cloudflare Workers로 구현
    
- API 서버 상시 유지가 아니라, 요청이 들어올 때만 코드 실행
    

**호출 수 줄이기**

- 클라이언트 측
    
    - 한 번 받은 추천 결과를 캐시해 재요청 최소화
        
    - 피드·스크롤 시 페이지네이션 + 지연 로딩
        
- 서버 측
    
    - 동일/유사 요청에 대한 결과 캐싱 레이어 추가
        
    - “더 보기”를 눌렀을 때만 고급 추천/RAG 호출
        

### 11.4.3 스토리지/CDN 최적화

**썸네일 전략**

- 피드/월드맵에는 50~100KB 수준의 썸네일만 사용
    
- 고해상도 이미지는
    
    - 사용자가 직접 공유하거나
        
    - 필요한 화면에서만 1회 로딩
        

**캐싱·중복 제거**

- 같은 썸네일을 여러 곳에서 재사용할 경우
    
    - 파일 해시 기반으로 중복 저장 방지
        
- Cloudflare CDN 캐시를 활용해
    
    - 자주 열리는 썸네일은 엣지에서 바로 제공
        

### 11.4.4 데이터/로그 & 분석 비용 관리

**로그 최소화**

- 운영에 꼭 필요한 항목만 텔레메트리:
    
    - 국가, 언어, 주제 ID, 구절 ID, 에러 코드 등
        
- 민감 데이터(감정/기도 내용)는 로컬 우선,
    
    - 클라우드 동기화는 옵트인 기준
        

**분석 파이프라인**

- R2/Supabase에 저장된 데이터를
    
    - 간단한 ETL 후
        
    - 주 단위/월 단위 배치 분석 위주로 처리
        
- 실시간 스트리밍 분석은 필요한 부분에 한정
    

---

## 11.5 온디바이스 AI와 기술 보호 전략

### 11.5.1 카피 리스크 현실 인식

- 온디바이스 모델은 APK/앱 번들에서 이론적으로 추출 가능
    
- “모델 파일 자체를 완전히 숨기는 것”은 비현실적
    

그러나 성경 프로젝트의 진짜 자산은:

- 66권 전체 성경에 대한 구조화·주제 태깅
    
- 120 피사체 × 24 주제 × 성구 매핑 표
    
- 교단 기준(예장통합)에 맞춘 신학 검수·교리 필터
    
- 사진 → 태그 → 주제 → 구절 → 설명 카드에 이르는 전체 파이프라인 설계
    

→ 모델 파일 그 자체보다,  
데이터·룰셋·그래프 구조가 훨씬 더 큰 진입장벽입니다.

### 11.5.2 로컬/서버 로직 분리 원칙

**로컬에 둬도 되는 것**

- 경량 비전 모델 (사람/풍경/실내/실외 등)
    
- 간단한 OCR 모델
    
- 피사체/장면 태그를 도출하는 1차 규칙 일부
    

**서버에만 둬야 하는 것**

- 피사체·장면·감정·문맥을 성경 구절과 연결하는 상징·주제·매핑 표
    
- 각 구절의 주제 벡터, 정합성 점수, 교리 필터, 정렬/스코어링 공식
    
- “왜 이 사진에 이 구절을 추천하는지”를 결정하는 최종 로직
    

→ 설령 누군가 앱을 디컴파일하더라도,  
온전히 같은 품질의 추천을 복제하기는 어려운 구조를 지향합니다.

### 11.5.3 보호 기법

- 코드 난독화(Obfuscation) 적용
    
- 모델 파일 암호화 후 런타임 복호화
    
- 일부 핵심 파라미터(가중치, 필터)는 /config API를 통해 서버에서만 제공
    

---

## 11.6 BM(수익·기부 구조) 설계

### 11.6.1 BM 설계 원칙

**금지선**

- 성경 말씀으로 폭리를 취하거나 중독형 BM을 사용하는 구조는 배제
    
- 과도한 광고·루트박스·가챠·도파민 유도 패턴 사용 금지
    

**지향점**

- “운영이 가능한 최소한의 비용만” 회수
    
- 남는 재원은
    
    - 성경 번역·라이선스
        
    - 신학 검수/콘텐츠 제작
        
    - 선교 파트너십  
        에 재투자하는 사역형 구조
        

### 11.6.2 인프라 비용 기준 최소 후원 목표

**인프라 기준 최소 목표**

- 성장기(Stage 2): 월 50~70 USD (7~10만 원)
    
- 글로벌(Stage 3): 월 120~215 USD (15~30만 원)
    
- 최대 목표(Stage 3’): 월 600~1,000 USD (80~140만 원)
    

**후원 관점 환산 예시**

- 예: 활성 사용자 10만 명 기준
    
    - 1인당 월 100원만 후원해도 → 월 1,000만 원
        
    - 인프라 비용(수십만~백만 원 수준)은 전체 후원의 10%도 안 됨
        

**결론:**

- 인프라 비용은 **“조용히 가릴 수 있는 정도”**로 설계되었고,
    
- 실질적인 BM·후원 설계의 초점은
    
    - 콘텐츠·선교 파트너십·사역 확장에 맞출 수 있습니다.
        

### 11.6.3 기부·후원 플로우 예시

**개인 후원**

- 앱 내 “조용한 후원하기” 버튼
    
    - 1회성 소액 후원 (예: 3,000원·5,000원)
        
    - 정기 후원 (월 3,000원·5,000원·1만 원 등)
        
- 후원 결과는
    
    - “이 달의 인프라 비용 100% 충당 완료”
        
    - “남은 재원은 ○○ 언어 성경 태깅/검수에 사용됩니다”  
        같은 간단한 리포트로 공유
        

**교회/단체 후원**

- 교회 단위로
    
    - “우리 교회가 ○○국 성경 프로젝트를 함께 지원합니다”
        
- 대시보드:
    
    - 후원을 통해 커버된
        
        - 국가 수
            
        - 언어 수
            
        - 사용자 수 등을 보여주는 뷰 제공
            

### 11.6.4 조심스럽게 허용 가능한 추가 수익 옵션

아래는 선교·사역 목적에 훼손이 없는 범위에서만 검토 가능한 옵션입니다.

**프리미엄 기능**

- 예: “개인 묵상 리포트 PDF”, “연간 묵상 캘린더 인쇄용 파일” 등
    
- 유료 판매가 아니라, 기부/후원 리워드 형태에 가깝게 설계
    

**출판·콘텐츠 협업**

- 성서공회/출판사와 협력하여
    
    - 특정 묵상 콘텐츠·해설집과 연동
        
- 수익은 투명하게
    
    - 번역 라이선스
        
    - 신규 언어 지원
        
    - 선교 파트너 지원에 사용
        

---

## 11.7 리스크 및 시나리오별 플랜 B

### 11.7.1 트래픽 급증·단가 상승 시

Cloudflare 요금 정책 변경 또는 트래픽 급증으로  
예상보다 비용이 상승할 경우:

- 이미지 정책 더 강화
    
    - 썸네일 비율 10% → 5%로 축소
        
    - 더 aggressive한 압축, 캐시 만료 기간 연장
        
- 고급 기능 임시 제동
    
    - 글로벌 랜덤 피드/추천 등 트래픽이 큰 기능을  
        일시적으로 권역/티어 제한으로 전환
        

### 11.7.2 비영리 크레딧/후원 축소 시

**비영리 클라우드 크레딧 활용**

- AWS/Azure/GCP 비영리 프로그램은 보조 수단으로 활용
    
- 사라지더라도 Cloudflare + Supabase 조합만으로도 유지 가능하게 설계
    

**후원 변동에 대한 대응**

- 인프라 비용이 여전히 월 100~200 USD 수준인 단계에서는
    
    - 후원 감소 시에도 개발자·운영진의 자부담/내부 교회 후원으로 버틸 수 있는 규모
        

### 11.7.3 법/검열 변화에 따른 온디바이스 비중 조정

특정 국가에서:

- 종교 앱 검열/차단이 강화될 경우,
    
    - 온디바이스 비중을 더 높이고 서버 의존성을 줄이는 프로파일 적용
        
- 144개국 전략(부록 B, 8장 글로벌 전략)과 연계하여
    
    - **OD 점수(온디바이스 필요도)**가 높은 국가일수록
        
        - 서버 호출 없이도 돌아가는 오프라인 코어팩 기능을 우선 강화
            

---

## 11.8 장 요약

이 프로젝트는 B 온디바이스 시나리오를 전제하고 있습니다.

- AI 추론·비전은 온디바이스에서 수행
    
- 서버는 텍스트 추천·커뮤니티·로그만 담당
    
- 썸네일만 제한적으로 저장
    

이 구조와 Cloudflare + Supabase 스택을 조합하면:

- MVP/초기 론칭: 월 20~30 USD
    
- 성장기(수 개국): 월 50~70 USD
    
- 글로벌 론칭(일 100만 장): 월 120~215 USD
    
- 최대 목표(일 1,000만 장): 월 600~1,000 USD
    

인프라 비용은 정말로 “최소한의 사역 비용” 수준으로 통제되며,

BM은 중독형·폭리형이 아니라

- 기부·후원 + 선교 파트너십 기반으로 설계할 수 있습니다.
    

10장의 온디바이스 아키텍처 목표,  
8장/부록 B의 144개국 전략과 충돌 없이 정합적인 최종 비용 구조로,  
이 장의 수치와 원칙을 **“성경 프로젝트 운영비 기준서(최종안)”**로 사용합니다.

---

## 11.9 용어 인덱스(굵은 용어 정의)

|No.|용어|설명|
|--:|---|---|
|1|**온디바이스 비전**|사진·영상 인식을 클라우드 서버가 아니라, 사용자의 기기 안에 탑재된 모델로 직접 수행하는 방식.|
|2|**서버리스 인프라**|항상 켜져 있는 서버를 두지 않고, 요청이 들어올 때만 짧게 코드가 실행되는 클라우드 실행 환경 구조.|
|3|**Cloudflare Workers**|Cloudflare가 제공하는 서버리스 실행 환경으로, 전 세계 엣지 노드에서 HTTP 요청을 처리하는 경량 API 플랫폼.|
|4|**Cloudflare R2**|Cloudflare의 객체 스토리지 서비스로, 낮은 저장 단가와 Cloudflare 네트워크로의 무과금 아웃바운드가 특징인 저장소.|
|5|**Supabase**|PostgreSQL 기반의 DB·인증·스토리지 등을 통합 제공하는 BaaS(Backend as a Service) 플랫폼.|
|6|**MAU**|한 달 동안 최소 1회 이상 서비스를 사용한 고유 사용자 수를 뜻하는 월간 활성 사용자 수(Monthly Active Users).|
|7|**썸네일**|원본 사진을 작게 축소·압축한 대표 이미지로, 피드·리스트 화면 등에서 빠르게 미리보기를 제공하기 위해 사용하는 이미지.|
|8|**CDN**|전 세계 여러 지역에 분산된 서버에 정적 파일을 캐시해, 사용자와 가까운 위치에서 빠르게 전달하는 콘텐츠 전송 네트워크(Content Delivery Network).|
|9|**INT8 양자화**|신경망 모델의 가중치·연산을 32비트 부동소수점 대신 8비트 정수로 줄여, 모델 크기와 연산 비용을 낮추는 최적화 기법.|
|10|**CNN**|이미지·영상 처리에 많이 사용하는 합성곱 신경망(Convolutional Neural Network) 구조로, 지역 패턴을 필터로 추출하는 딥러닝 모델.|
|11|**비전 트랜스포머**|이미지를 패치 단위로 나눠, 트랜스포머 구조로 처리하는 최신 비전 딥러닝 모델 계열(Vision Transformer).|
|12|**OCR**|이미지 속 문자(텍스트)를 인식해 디지털 문자 데이터로 변환하는 광학 문자 인식(Optical Character Recognition) 기술.|
|13|**ETL**|원본 데이터에서 필요한 정보를 추출(Extract)·변환(Transform)·적재(Load)해 분석용/운영용 데이터베이스로 옮기는 처리 파이프라인.|
|14|**RAG**|검색(Retrieval)과 생성(Generation)을 결합해, 외부 지식 검색 결과를 기반으로 답변을 생성하는 Retrieval-Augmented Generation 구조.|
|15|**SRE**|서비스의 안정성과 신뢰성을 유지·개선하는 역할을 담당하는 사이트 안정성 엔지니어링(Site Reliability Engineering) 또는 그 담당 조직/역할.|
|16|**오프라인 코어팩**|네트워크가 없어도 핵심 기능이 동작하도록, 자주 쓰이는 상징·주제·대표 구절 세트를 앱 안에 미리 동봉해 두는 데이터 팩.|

# 12장. 프로젝트 로드맵 & 조직 구조 (v3)

이 장은 성경 프로젝트를 **어떤 순서와 단계(로드맵)**로 진행하고,  
그 과정에서 **어떤 조직 구조와 역할 분담**으로 운영할지를 정의한다.

- 9장은 **AI 로직 & 데이터 구조(사진→말씀)**,
    
- 10장은 **플랫폼·인프라·보안·프라이버시**,
    
- 11장은 **운영·비용 구조·BM(수익·기부 구조)**를 다루었다면,
    
- 12장은 이 모든 내용을 **시간 축(Phase) + 사람 축(조직)**으로 정리한 실무용 지침이다.
    

---

## 12.1 장 개요

### 12.1.1 목적

- 프로젝트를 **단계별(Phase)·마일스톤**으로 쪼개, 각 단계의 목표·산출물·게이트를 명확히 한다.
    
- **최소 인력(코어팀)** 기준과, 이후 **확장 조직 구조**를 정의한다.
    
- 기술·신학·운영·재정·파트너십 팀 간의 **의사결정 구조**와 커뮤니케이션 룰을 제시한다.
    

### 12.1.2 범위

- 포함 범위
    
    - **로드맵(Phase 0~5)**: 준비→PoC→MVP→Public Beta→Global v1.0→확장
        
    - 각 Phase별 **주요 마일스톤**, **KPI 기반 게이트** 정의
        
    - **조직 구조**(코어팀·확장팀), 역할·책임(R&R) 정리
        
    - **의사결정·회의 구조**, 외부 파트너·교회 협력 방식
        
    - 리스크·의존성 관리의 큰 틀
        
- 제외 범위
    
    - 개별 인력 채용 계획, 보수·계약 조건 등은 별도 HR/재무 문서에서 관리
        
    - 국가별 세부 롤아웃 일정은 8장 글로벌 전략과 부록에서 세부화
        

---

## 12.2 전체 로드맵 개요

### 12.2.1 Phase 정의(요약)

|Phase|이름|목표 요약|
|---|---|---|
|Phase 0|준비·정렬(Preparation)|비전·신학·데이터·기술 방향 정렬, 코어팀 구성|
|Phase 1|PoC(Proof of Concept)|사진→말씀 추천 **핵심 로직**이 실제로 동작하는지 검증|
|Phase 2|MVP(Minimum Viable Product)|제한된 언어·지역에서 사용할 수 있는 **최소 기능 앱** 완성|
|Phase 3|Public Beta|실제 사용자·파일럿 교회 대상 베타 운영, 품질·신학 검증 강화|
|Phase 4|Global v1.0|우선 국가·언어에 대한 정식 론칭|
|Phase 5|확장·고도화(Scale-up)|144개국·다언어 확장, 고급 기능·연동 추가|

### 12.2.2 예상 기간(거친 가정)

> 실제 일정은 인력·예산·파트너십 상황에 따라 조정되며,  
> 여기서는 **상대적인 순서·우선순위**를 이해하기 위한 기준으로 본다.

|Phase|기간 예시(연속 기준)|비고|
|---|---|---|
|0|1~2개월|비전·신학·데이터·기술 정렬|
|1|2~3개월|코어 AI PoC|
|2|3~6개월|모바일 앱 기준 MVP|
|3|3~6개월|베타 론칭·개선|
|4|3~6개월|Global v1.0 (우선 국가·언어)|
|5|지속(연 단위)|144개국 확장·고도화|

---

## 12.3 Phase별 상세 목표·산출물·게이트

### 12.3.1 Phase 0 — 준비·정렬(Preparation)

- **핵심 질문**
    
    - 우리는 무엇을 만들며, 어떤 교리 기준과 데이터 구조 위에 설 것인가?
        
- **주요 목표**
    
    - 비전·신학·제품 개요 문서 정리(1장, 2장 정리 완료)
        
    - 글로벌 시장·사용자·기능 구조(3~5장) 큰 틀 확정
        
    - AI·데이터북(24 주제·120 라벨·매트릭스) 구조 초안 정리
        
    - 코어팀(기술·AI·기획·신학·운영) 최소 인력 확정
        
- **주요 산출물**
    
    - Masterplan v3.0 본문 골격(1~12장 목차 + 핵심 내용)
        
    - **데이터북 초안**(24Topics, 120 Objects, Mapping)
        
    - **신학 가이드라인 초안**(예장통합 기준 Allow/Attenuate/Block)
        
    - 프로젝트 **R&R 표**(역할·책임 정의)
        
- **게이트(진행 기준)**
    
    - 1~5장·9장·10장 골격이 합의된 버전으로 정리
        
    - AI 로직·데이터 구조의 **대략적 스키마**에 합의
        
    - 초기 재정·운영 구조(11장 초안)에 대한 방향성 합의
        

---

### 12.3.2 Phase 1 — PoC(Proof of Concept)

- **핵심 질문**
    
    - 사진→태그→상징→주제→구절 추천의 **기본 흐름**이 실제로 가능한가?
        
- **주요 목표**
    
    - 제한된 범위(예: 특정 몇 장면·몇 주제)에 대해 **사진→말씀 추천**이 실제 작동
        
    - **Why 카드**(왜 이 구절인가) 기본 형태 생성
        
    - 신학 자문과 함께 추천 사례 샘플을 검토하여, 교리적 위험 범위 파악
        
- **주요 산출물**
    
    - 간단한 **PoC 도구** (CLI·내부 웹툴 등)
        
    - 대표 사진 셋(예: 50~100장)에 대한 추천 결과·신학 평가 리포트
        
    - 9장 AI 로직 & 데이터 구조의 **세부 설계 업데이트**
        
- **게이트**
    
    - 대표 장면 셋에 대해 **신학적으로 수용 가능한 추천 비율**이 일정 기준 이상(예: 80% 이상)
        
    - Why 카드 설명이 **사람이 봤을 때 이해 가능**한 수준
        
    - 주요 실패 케이스 유형 정의 및, 다음 Phase에서 개선 계획 수립
        

---

### 12.3.3 Phase 2 — MVP(Minimum Viable Product)

- **핵심 질문**
    
    - 제한된 언어·국가·기능 세트 기준으로, **사용 가능한 앱**이 나왔는가?
        
- **주요 목표**
    
    - iOS/Android 기준 **촬영→추천→기록** 풀 플로우 구현
        
    - 한국어 개역개정 + 영어 NIV 최소 지원
        
    - 온디바이스/서버 하이브리드 구조 기본 구현
        
    - 좌표 미수집·프라이버시 기본 정책 구현(10장 반영)
        
    - 기부·후원 구조의 **기본 화면·흐름** 설계(MVP 수준)
        
- **주요 산출물**
    
    - 내부/소규모 파일럿 사용자용 **MVP 앱 빌드**
        
    - 5장 제품 기능 구조·6장/9장 AI 로직 세부 구현 문서
        
    - 품질·지표 & QA 계획(7장) 초안 → MVP 기준 테스트 결과
        
- **게이트**
    
    - p95 레이턴시(앱+서버) 1초 내외(목표: 800ms) 달성 여부
        
    - 심각한 신학적 오해를 유발하는 케이스가 **정기 검토에서 낮은 비율**로 유지
        
    - DAU가 소규모(예: 내부·지인 베타)라도 **DST(묵상 루프 완성)** 가 발생하는지 확인
        

---

### 12.3.4 Phase 3 — Public Beta

- **핵심 질문**
    
    - 실제 사용자·교회·소그룹과 함께 사용할 때 **신학·프라이버시·품질**이 유지되는가?
        
- **주요 목표**
    
    - 제한된 국가·언어에서 **공개 베타** 론칭
        
    - 사진→말씀 추천 + 월드맵 Lite + 사후 기록·복습 루프 운영
        
    - 파일럿 교회·소그룹과 함께 실사용 피드백·신학 검증
        
    - 기부·후원 기능을 실제로 열어, 운영 가능성 점검
        
- **주요 산출물**
    
    - 베타 앱(스토어 제한 공개 또는 초대 기반)
        
    - 신학 검수 리포트(민감 케이스·논쟁적 사례·가이드라인 업데이트)
        
    - 운영·비용·BM(11장)의 실제 수치 기반 1차 업데이트
        
- **게이트**
    
    - 신고율·오해율·정죄성 피드백이 **목표 범위 내**(예: 신고 <1%, 민감 오탐 <2%)
        
    - 베타 사용자 중, 일정 비율 이상이 **DST≥주 1회** 이상
        
    - 기부·후원 구조가 **운영비의 일정 비율**을 커버할 수 있는지 초기 지표 확보
        

---

### 12.3.5 Phase 4 — Global v1.0

- **핵심 질문**
    
    - 우선 국가·언어 기준으로, **정식 서비스**를 선언할 수 있는 수준인가?
        
- **주요 목표**
    
    - 8장 글로벌 전략에 정의된 **Tier 1~2 국가·언어** 중 일부를 대상으로 v1.0 론칭
        
    - AI 로직, 데이터북, 신학 가이드라인, BM, 운영 프로세스가 **정식 문서화**
        
    - 앱 스토어·웹 안내 페이지·FAQ 등 대외 커뮤니케이션 정비
        
- **주요 산출물**
    
    - v1.0 앱·서버·AI·데이터 세트
        
    - 공식 웹사이트·가이드·FAQ·개인정보 처리방침·이용약관
        
    - 파트너 교회·기관용 안내 자료(소개서, 도입 가이드)
        
- **게이트**
    
    - 7장 품질·지표에서 정의한 **Release Gate** 기준 통과
        
    - 주요 파트너(교회·기관) 1차 라인업 확보
        
    - 재정적으로 최소 6~12개월 운영이 가능한 수준의 준비금 확보(11장 참조)
        

---

### 12.3.6 Phase 5 — 확장·고도화(Scale-up)

- **핵심 질문**
    
    - 144개국·다언어·다문화 상황에서, **안전성과 정합성을 유지하며 확장**할 수 있는가?
        
- **주요 목표**
    
    - 8장에서 정의한 국가 우선순위에 따라 **언어·국가 추가 롤아웃**
        
    - 현지 교단·교회·선교 단체와 협력 확장
        
    - 추가 기능: 예를 들어, 특정 국가/언어 맞춤 묵상 플랜, 지역별/연령별 UX 조정 등
        
- **주요 산출물**
    
    - 롤아웃 계획표(국가·언어·일정)
        
    - 현지 파트너십 계약·MOU·가이드라인
        
    - 확장 버전 데이터북·가이드라인(현지 언어·문화 반영)
        
- **게이트**
    
    - 각 국가/언어 롤아웃 시, 신학·법무·프라이버시 체크리스트 통과
        
    - 글로벌 운영 지표(예: 지역별 DST, 신고율, 기부/비용 비율)가 안정적인 범위 유지
        

## 12.3.7 8주 MVP 로드맵(티켓화 기준)

|주차|목표|핵심 산출물(티켓 단위)|게이트(통과 조건)|
|--:|---|---|---|
|1–2주|데이터/스키마/온디바이스 지각 베타|스키마 v0.1, 코어팩 초안(500~1000절), EXIF 정규화, 민감 플래그(safety_flags/bitmask), 역본 파이프라인|샘플 200장 처리 + 결과 JSON 일관성|
|3–4주|검색/재랭킹/설명 카드|벡터 인덱스, Top-K=50, 크로스 인코더 재랭킹, Why/Explain 카드 템플릿, explain_trace_id, 이벤트/대시보드(초안)|Top-1 품질 샘플 리뷰(신학/UX)|
|5–6주|Lite/비밀 모드 + 성능 튜닝|Lite 썸네일 플로우, 비밀 모드(위장 아이콘/긴급 숨김), p95<800ms 튜닝, 회귀셋 v1|p95<800ms(타깃 단말) + 크래시율 목표치|
|7–8주|클로즈 베타(Tier1 일부) + KPI 점검|대시보드(퍼널/리텐션/오해·신고), 레이트리밋, 운영 알림, 개선 백로그|D1/7 리텐션·퍼널 기준선 확보|

## 12.3.8 6개월 확장 로드맵(글로벌 확장 포함)

|월|확장 범위|산출물|
|--:|---|---|
|1–2개월|다언어(우선 영어/스페인어/포르투갈어) + 역본 운영|번역키/역본 매핑, 언어별 품질 룰, 라이선스 운영 프로세스|
|3–4개월|오디오/콘텐츠 확장 + 상징 갤러리 강화|오디오 파트너 연동, 상징 컬렉션 UX, 주제/상징 탐색|
|5–6개월|지역 캠페인/파트너십 + Tier 확장|Tier2/3 단계 론칭 플랜, 지역 캠페인/통신 제휴(데이터 프리/선탑재 등), 현지 파트너십 운영|

---

## 12.4 조직 구조(코어팀·확장팀)

### 12.4.1 최소 코어팀 구조(초기 단계)

|역할|주요 책임|
|---|---|
|**제품/프로젝트 리드**|전체 로드맵·우선순위·기능 범위 결정, 각 팀 간 조율, 외부 커뮤니케이션 총괄|
|**기술 리드**|앱·백엔드·인프라 설계, 9~10장 구현 방향 총괄, 품질·보안 기준 수립|
|**AI/데이터 담당**|사진→말씀 AI 로직, 데이터북 운영, 모델 품질 관리|
|**신학 담당(자문)**|예장통합 기준 가이드라인, 추천 사례 검수, 민감 주제 처리, 문서 검토|
|**운영/커뮤니티 담당**|베타 운영, 사용자·교회 커뮤니케이션, 기부/후원 안내, CS·피드백 관리|

> 초기에는 실제 인력이 **겸임**하는 형태가 될 수 있다.  
> 예: 기술 리드가 앱·백엔드를 겸하고, AI도 함께 보는 구조 등.

### 12.4.2 확장 조직 구조(Scale-up 단계)

- **기술 조직 분리 예시**
    
    - 앱 스쿼드(iOS/Android)
        
    - 백엔드·플랫폼 스쿼드(API·DB·맵·보안)
        
    - AI/데이터 스쿼드(모델·데이터북·ETL)
        
- **콘텐츠·신학 조직**
    
    - 신학위원회(목회자·신학자 그룹)
        
    - 콘텐츠·번역 팀(묵상글, 예시 카드, 번역, 현지화)
        
- **운영·파트너십 조직**
    
    - 교회/기관 파트너십 팀
        
    - 사용자 커뮤니티·CS 팀
        
    - 재정·행정 팀
        

### 12.4.3 최소 운영 조직 편성(8주 MVP 기준)

|역할|인원(최소)|책임|
|---|--:|---|
|기획(PM) + 신학 QA|2–3|KPI/퍼널, 문구 가이드라인, 샘플 심사/회귀 기준|
|앱(클라)|1|카메라/오프라인/Lite/비밀 모드/접근성|
|AI/ML|1|Perception, 임베딩/재랭킹, 점수식/왜곡 방지|
|디자인|1|카드/타이포/상징 갤러리/접근성 UI|
|백엔드/데브옵스|1|API/캐시/로그/모니터링/보안/배포|

- 외부 필수 파트너(권장): 성서공회/출판사(역본·라이선스), 오디오 파트너(낭독/콘텐츠), 현지 자문(언어·문화·신학)
    

---

## 12.5 의사결정 구조 & 커뮤니케이션

### 12.5.1 거버넌스 레벨

1. **전략 레벨**
    
    - 구성: 제품/프로젝트 리드, 기술 리드, 신학 대표, 재정/운영 대표 등
        
    - 역할: 로드맵·예산·글로벌 전략·핵심 정책 결정
        
2. **제품·기술 레벨**
    
    - 구성: 제품 기획, 앱, 백엔드, AI/데이터 리더들
        
    - 역할: 기능 우선순위, 릴리즈 계획, 품질·성능 기준 결정
        
3. **신학·콘텐츠 레벨**
    
    - 구성: 신학 담당, 목회자 자문, 콘텐츠 팀
        
    - 역할: 가이드라인, 민감 주제, 예시 카드, 묵상 플랜 등 결정
        
4. **운영·커뮤니티 레벨**
    
    - 구성: 운영, CS, 파트너십, 마케팅 담당 등
        
    - 역할: 사용자 소통, 공지, 교회·기관 커뮤니케이션, 기부 캠페인 등
        

### 12.5.2 정기 회의 구조(예시)

|주기|회의 유형|내용|
|---|---|---|
|주간|스프린트/운영 회의|지난 주 성과·이슈 리뷰, 이번 주 우선순위, 장애·신고·피드백 공유|
|격주|제품·기술 리뷰|기능 백로그 정리, AI 품질·성능 리뷰, 릴리즈 계획 점검|
|월간|신학·콘텐츠 위원회|민감 사례 리뷰, 가이드라인 업데이트, 예시 카드·묵상 플랜 논의|
|분기|전략·재정 리뷰|로드맵 재점검, 재정 현황·기부 지표, 글로벌 전략·파트너십 점검|

### 12.5.3 운영 게이트(릴리즈 체크리스트 축약)

1. 감정 사전 입력 비노출(사후 기록만)
    
2. 1–2절 원칙 고정(대안은 펼침)
    
3. 설명 카드 필수(2–3문장 + 태그 2–4개)
    
4. 예장통합 가이드라인 검사(Allow/Attenuate/Block) 통과
    
5. 오프라인 코어팩 탑재(Lite 포함)
    
6. 비밀 모드 동작(긴급 숨김 포함)
    
7. 회귀 QA(민감/오해/성능) 통과
    

---

## 12.6 외부 파트너·교회 협력 로드맵

### 12.6.1 파일럿 파트너 교회·기관 선정

- Phase 2~3 시점에서
    
    - 신학적으로 신뢰할 수 있고, 디지털 도구 활용에 열린  
        **파일럿 교회·선교 단체**를 소수 선정
        
- 역할
    
    - 베타 사용자 모집
        
    - 추천 사례·묵상 루프에 대한 피드백 제공
        
    - 목회자·리더 관점에서의 신학·목회 적합성 검증
        

### 12.6.2 공식 파트너십 확장

- Phase 4 이후
    
    - 교단·연합 기관·선교 단체 등과의 **MOU·협약**을 통해 공식 파트너십 확대
        
    - 각 파트너에 맞는 소개 자료, 도입 가이드, 교육 자료 제공
        

### 12.6.3 번역·현지화 파트너

- 새로운 언어·지역 진출 시,
    
    - 현지 교회·사역자·번역가와 협력하여,
        
        - 번역 품질·문화적 정합성·신학적 안전성을 함께 점검
            

---

## 12.7 리스크·의존성 관리(로드맵 관점)

### 12.7.1 주요 의존성

- **성경 번역본 라이선스**(개역개정·NIV 등)
    
- **클라우드·AI 인프라 제공자**(해당 서비스 정책·가격 변화)
    
- **교단·교회·신학 위원회**의 참여 및 동의
    
- **사용자·기부자 커뮤니티**의 신뢰와 참여
    

### 12.7.2 Phase별 주요 리스크 예시

|Phase|리스크 예시|완화 전략(예시)|
|---|---|---|
|0~1|데이터북·AI 로직 복잡도 과대, 일정 지연|범위를 제한한 PoC, 핵심 주제/장면 위주로 시작|
|2|앱 품질 부족, 성능·안정성 문제|MVP 범위 명확화, 필수 기능에 집중, 품질 게이트 설정|
|3|베타 단계에서 신학 논쟁 사례 발생|신속한 대응 체계, 신학 위원회 리뷰, 가이드라인 업데이트|
|4|글로벌 론칭 후 특정 국가 규제·문화 충돌|8장 글로벌 전략 연동, 국가별 정책·제한 사전 정의|
|5|확장 속도에 비해 인력·재정·조직이 따라가지 못하는 상황|확장 단계별 Gate 설정, 재정·인력 확보 이후 다음 단계로 진행|

---

## 12.8 장 요약

1. 성경 프로젝트는 **Phase 0~5**로 나누어, 준비→PoC→MVP→베타→Global v1.0→확장 순으로 진행한다.
    
2. 각 Phase마다 **명확한 목표·산출물·게이트**를 두어, 감성·사역 프로젝트라도 제품·서비스 수준의 관리가 가능하게 한다.
    
3. 조직은 초기 **코어팀(소수 정예, 역할 겸임)**에서 시작해, 성장에 따라 기술·신학·콘텐츠·운영·재정 조직으로 확장한다.
    
4. 교회·선교 단체·번역 파트너와의 협력은 Phase 2~3의 파일럿 단계에서 시작해, Phase 4 이후 공식 파트너십으로 확장한다.
    
5. 번역 라이선스, 클라우드·AI 인프라, 교단·교회 지지, 사용자 신뢰 등 여러 의존성과 리스크를 인식하고, Phase별로 완화 전략을 마련한다.
    

---

## 12.9 용어 인덱스(로드맵·조직·운영 관련)

|용어|설명|
|---|---|
|**로드맵(Roadmap)**|프로젝트를 시간 축으로 나눈 계획. 어떤 단계에서 무엇을 할지 정리한 것.|
|**Phase(페이즈)**|프로젝트의 큰 단계 구분(예: 준비, PoC, MVP 등).|
|**PoC(Proof of Concept)**|개념 증명. 아이디어나 기술이 실제로 가능한지 검증하는 초기 실험 단계.|
|**MVP(Minimum Viable Product)**|최소 기능 제품. 실제 사용 가능한 가장 작은 기능 세트의 제품.|
|**Public Beta**|공개 베타. 일반 사용자도 쓸 수 있지만, 아직 개선이 계속되는 시험 단계.|
|**v1.0**|정식 1.0 버전. 외부에 정식 출시한다고 선언하는 최초의 안정 버전.|
|**R&R(Roles & Responsibilities)**|역할과 책임. 각 사람이 무엇을 맡는지 정의한 것.|
|**거버넌스(Governance)**|의사결정 구조와 규칙. 누가 무엇을 어떻게 결정하는지에 대한 체계.|
|**스쿼드(Squad)**|작은 자율 팀. 특정 기능/목적을 중심으로 묶인 실무 팀 단위.|
|**스프린트(Sprint)**|보통 1~2주 단위의 짧은 개발 주기. 그 기간 안에 할 일을 정해 실행하는 방식.|
|**Runbook**|장애·이슈가 발생했을 때 따라야 할 절차를 정리한 문서.|
|**코어팩(Core Pack)**|자주 사용하는 상징×대표 성구를 단말에 미리 담아 두는 오프라인 데이터 팩.|
|**역본 파이프라인(Translation Pipeline)**|여러 성경 번역본을 라이선스·버전 관리와 함께 앱 내부 포맷으로 변환·배포하는 처리 흐름.|
|**라이트 모드(Light Mode)**|트래픽·자원 사용을 줄이기 위해 저해상도 썸네일·최소 메타데이터만 사용하는 경량 모드.|
|**비밀 모드(Secret Mode)**|민감한 사용 상황에서 위장 아이콘·긴급 숨김 등으로 화면을 가려 프라이버시를 보호하는 모드.|
|**KPI(Key Performance Indicator)**|핵심 성과 지표. 서비스의 건강 상태와 목표 달성 여부를 숫자로 측정하기 위한 지표.|
|**퍼널(Funnel)**|유입→활성→재방문 등 단계별 전환율을 한눈에 보는 분석 구조.|
|**클로즈드 베타(Closed Beta)**|초대 기반·제한된 사용자에게만 제공하는 비공개 베타 테스트 단계.|
|**Tier(티어)**|국가·언어·사용자 그룹 등에 대한 우선순위 등급 구분.|
|**데이터 프리(Data Free)**|통신사 제휴를 통해 특정 앱·트래픽에 대해 데이터 요금을 면제하는 방식.|

# 13장. AI 데이터 스키마 & API 명세 (v3)

이 장은 성경 프로젝트에서 사용하는 **핵심 데이터 스키마**와  
앱·백엔드·AI가 연동되는 **API 명세 요약본**을 한 곳에 정리한 부록이다.

- 9장(**AI 로직 & 데이터 구조**)와 10장(**플랫폼·인프라·보안·프라이버시**)에서 다룬 내용을  
    개발자가 바로 구현·참조할 수 있도록 **구조화된 데이터 정의**와 **엔드포인트 스펙**으로 정리한다.
    
- 실제 엑셀/CSV/DB 스키마 및 OpenAPI 문서는 이 부록을 기준으로 **세부화·세분화**하여 관리한다.
    

---

## 13.1 장 개요

### 13.1.1 목적

- 사진→말씀 추천 파이프라인 전반에서 사용하는 **공통 데이터 모델**을 한 번에 파악할 수 있게 한다.
    
- 24 주제·120 라벨·매핑 매트릭스·성경 본문·사진 이벤트·월드맵 데이터 등  
    **핵심 엔티티**의 필드 구성을 요약한다.
    
- 앱·백엔드·AI·데이터 팀이 공통으로 사용하는 **API 인터페이스 규격**을 정의한다.
    

### 13.1.2 범위

- 포함
    
    - **주요 엔티티 스키마 정의** (테이블/시트 기준)
        
    - **ETL·데이터 흐름** 요약
        
    - **핵심 API 엔드포인트**(`/analyze`, `/recommend`, `/affect-log`, `/map/*`, `/settings/*`) 요약
        
    - **버전 관리·마이그레이션 원칙**
        
- 제외
    
    - DB별 구현 차이(예: RDB vs NoSQL) 세부 튜닝
        
    - OpenAPI 전문, 코드 레벨 구현 예시는 별도 개발 문서에서 관리
        

### 13.1.3 표 가독성·서식 규칙(Word 전환 시 혼동 방지)

#### 13.1.3.1 문서 내 표 구성 규칙(가독성)

|규칙|적용 방식|
|---|---|
|표 우선|TSV/리스트로 표현 가능한 항목은 가급적 표로 정리|
|첫 열 번호|대부분 표는 `No`(또는 `단계`)를 첫 열로 둔다|
|헤더 명확화|헤더는 축약하지 않고 의미가 분명하게(예: `완료 조건(DoD)`)|
|경로 표기|JSON 경로는 `perception.objects`처럼 점 표기(혼동 최소화)|

#### 13.1.3.2 Word 전환 시 ‘테두리 안 보임’ 방지 규칙(필수)

|항목|Word에서 적용할 값(권장)|
|---|---|
|표 스타일|**Table Grid**(기본 실선 그리드)|
|테두리|**All Borders**(전체 테두리)|
|선 색상|**Black**(검정)|
|선 굵기|**0.5 pt**(필요 시 0.75 pt)|
|선 스타일|**Solid**(실선)|

> 이 문서는 **Word 파일을 생성하지 않아도**, 위 규칙을 “문서 표준”으로 정의해 두어  
> 실제 Word 편집 시 동일한 결과(검정 실선 테두리)를 재현하도록 한다.

#### 13.1.3.3 섹션 배지 표준(정식 Contract/강제 규칙/Deprecated)

|배지|의미(무엇을 따르나)|적용 원칙|
|---|---|---|
|`— 정식 Contract`|구현/연동/검증의 **공식 기준**(단일 정본)|개발자는 해당 섹션의 필드·제약을 그대로 따른다|
|`— 강제 규칙`|위반 시 오류/차단/감쇠 등으로 이어지는 **규정(규칙 고정)**|밸리데이션/필터/로그에 동일 규칙 적용|
|`— Deprecated`|과거 호환을 위한 **레거시/별칭**|신규 구현은 사용 금지. 사용 시 **정식 Contract와 불일치 금지**|

> 문서에서 동일 주제가 반복되면, **배지가 붙은 섹션만 ‘정본’**으로 간주한다.

---

## 13.2 핵심 엔티티 개요

### 13.2.1 엔티티 목록(요약)

|엔티티|역할 요약|
|---|---|
|**PhotoEvent**|사용자가 사진을 찍거나 선택한 사건(시간·맥락·태그를 포함하는 이벤트)|
|**Verse**|개역개정·NIV 본문 1절 단위 레코드|
|**Theme**|24개 **신학·주제 축**(위로, 소망, 공동체, 회개 등)|
|**ObjectLabel**|사진에서 인식되는 120개 **피사체/장면/텍스트 라벨**|
|**SymbolMap**|라벨→상징/주제로 연결되는 **매핑 규칙**|
|**VerseTheme**|주제→성경 구절 연결(1:N)|
|**VerseMapping**|특정 PhotoEvent에 대해 선택/추천된 성경 구절 기록|
|**PostAffection**|추천 이후 사용자 감정·기도·메모 등 사후 기록|
|**GeoPin**|퍼징/지오해시 기반 위치 시각화를 위한 핀 데이터|
|**UserSettings**|위치 공개, 언어, 알림 등 사용자 설정|

---

## 13.3 데이터 스키마 정의(요약)

> 실제 구현 시에는 **UTF-8, snake_case, PK/FK 명시, NULL 허용 여부** 등을 명확히 기록한다.

### 13.3.0 공통 규칙(스키마/버전/언어/ID) — 강제 규칙

> 목적: 13장(부록-스키마/API 명세)에서 **필드/제약/인덱스/비트마스크/헤더/오류코드**의 기준을 한 번에 고정한다.

|항목|규칙|비고|
|---|---|---|
|타임존|서버 저장 **UTC**, 클라 표시 로컬|`datetime(UTC)` / ISO-8601|
|ID|**ULID** 또는 **UUIDv7** 권장(문자열)|시간 정렬/샤딩에 유리|
|언어|ISO 639-1: `ko`, `en`|API는 `Accept-Language`와 병행|
|버전|`schema_version`, `ruleset_version` = **SemVer**|예: `1.0.0`|
|점수 정밀도|0.000~1.000 (소수 3자리)|모델/로깅 공통|
|표준 JSON 키|`snake_case`|경로 표기 혼동 방지|

### 13.3.1 Theme(24 주제)

|필드명|타입|설명|
|---|---|---|
|**theme_id**|int (PK)|1~24 고정 ID|
|**slug**|string|`hope`, `comfort`, `community` 등 슬러그|
|**name_ko**|string|한국어 이름(위로, 소망, 공동체 등)|
|**name_en**|string|영어 이름(Comfort, Hope…)|
|**desc_ko**|text|한국어 설명|
|**desc_en**|text|영어 설명|
|**policy_tag**|string[]|Allow/Attenuate/Block 관련 태그|
|**updated_at**|datetime|마지막 수정 시각|

### 13.3.2 ObjectLabel(120 라벨)

|필드명|타입|설명|
|---|---|---|
|**object_id**|int (PK)|1~120 고정 ID|
|**slug**|string|`mountain`, `hospital`, `funeral`, `cross` 등|
|**name_ko**|string|한국어 이름(산, 병원, 장례식장, 십자가 등)|
|**name_en**|string|영어 이름|
|**synonyms_ko**|string[]|한국어 동의어 목록|
|**synonyms_en**|string[]|영어 동의어 목록|
|**notes**|text|신학적/주제적 참고 메모|
|**updated_at**|datetime|마지막 수정 시각|

### 13.3.3 Object-Theme 매핑 매트릭스

|필드명|타입|설명|
|---|---|---|
|**object_id**|int (PK,FK)|ObjectLabel.object_id|
|**theme_id**|int (PK,FK)|Theme.theme_id|
|**w_obj**|float|순수 객체 인식 결과에 기반한 가중치(0.00~1.00)|
|**w_scene**|float|장면 컨텍스트(실내/실외/군중 등)에 따른 가중치|
|**w_ocr**|float|텍스트(OCR) 신호에 따른 가중치|
|**w_landmark**|float|랜드마크(교회, 병원, 산 등) 인식에 따른 가중치|
|**penalty**|float|특정 조합에서 주제 강도를 줄이기 위한 페널티|
|**notes**|text|예외 규칙·신학적 비고 등|

- **유도 규칙(논리)**
    
    - `w_base = w_obj + w_scene + w_ocr + w_landmark`
        
    - `w_penalized = max(0, w_base - penalty)`
        
    - 이후 주제 스코어 정규화 및 9장의 점수식에 반영
        

### 13.3.4 Verse(성경 본문)

|필드명|타입|설명|
|---|---|---|
|**verse_id**|bigint(PK)|내부 구절 ID|
|**book_code**|string|책 코드(창, 출, 마, 막, 요, 롬…)|
|**chapter**|int|장 번호|
|**verse**|int|절 번호|
|**text_ko**|text|개역개정 본문|
|**text_en**|text|NIV 본문|
|**themes**|int[]|연관 Theme.theme_id 리스트|
|**symbols**|int[]|연관 ObjectLabel.object_id 또는 상징 ID 리스트|
|**embed_vec**|vector|검색·재랭킹용 임베딩 벡터|
|**doctrinal_notes**|text|신학적 주석·주의사항(민감 주제, 문맥 설명 등)|
|**is_active**|boolean|사용 여부(가이드라인에 따라 제외된 구절 표시)|

### 13.3.5 PhotoEvent(사진 1장 이벤트) — 정식 Contract

|필드명|타입|필수|제약|설명|
|---|---|:-:|---|---|
|**photo_id**|string|Y|PK|**ULID/UUIDv7** 권장(문자열)|
|**user_id**|string|Y|FK|가명/내부 식별자(익명화/해시 가능)|
|**time**|datetime(UTC)|Y|ISO-8601|촬영/업로드 시각(서버 저장 UTC)|
|**weekday**|tinyint|Y|0–6|**표준: 0=일 … 6=토** _(문서 전체 동일)_|
|**season**|enum|Y|SPRING/SUMMER/AUTUMN/WINTER|월→계절 매핑|
|**weather**|enum|N|CLEAR/CLOUDS/RAIN/SNOW/FOG/STORM/NA|추정/연동(옵션)|
|**location_country**|string|N|ISO 3166-1|좌표 대신 국가만(좌표 원본 미저장)|
|**perception**|object|Y|13.5.2.1 참조|`objects/scenes/clip/ocr/landmark_candidates`|
|**safety_flags**|object|Y|-|탐지 신호(원시 플래그): `{faces?, child?, medical?, sensitive?}`|
|**privacy_flags**|object|N|-|정책(가이드라인) 처리 결과(공개/저장/라우팅 의사결정)|
|**privacy_bits**|uint|N|bitmask|저장/집계용 압축 표현(아래 정의)|
|**schema_version**|string|Y|SemVer|스키마 버전|
|**ruleset_version**|string|Y|SemVer|추천/필터 룰 버전|

**privacy_bits(bitmask) — 권장 고정 정의**

|비트 값|상수|의미|
|--:|---|---|
|1|HAS_FACE|얼굴 가능성|
|2|IS_CHILD|아동 가능성|
|4|HEALTHCARE_CONTEXT|의료/병원 맥락|
|8|FUNERAL_CONTEXT|장례/사망 맥락|
|16|POLITICAL_SYMBOL|정치 상징 가능성|
|32|NSFW_RISK|성적/선정 위험|

> **원칙:** `safety_flags`는 “탐지”, `privacy_flags`는 “정책 처리 후 결정”, `privacy_bits`는 “저장/집계용 압축”이다.

**권장 인덱스(구현 DB에 맞게 적용)**

|목적|권장 인덱스|
|---|---|
|사용자 타임라인|`(user_id, time DESC)`|
|캘린더/요일 집계|`(weekday)`|
|국가 집계|`(location_country)`|
|태그 검색(지원 시)|`GIN/Fulltext(perception.* 또는 tags.*)`|

#### 13.3.5.1 PI(개인정보) 분류(권장)

> 목적: 구현·운영 시 “민감도 혼동”을 줄이기 위해, 엔티티 필드의 **PI 레벨**을 내부 표준으로 고정한다.

|레벨|의미|예|
|---|---|---|
|×|PI 아님(비식별/집계 수준)|season, weekday, country(좌표 제외)|
|△|간접 식별/가명 식별(보호 필요)|`user_id`(가명), trace id|
|●|직접 식별 가능(가능하면 수집/저장 최소화)|이메일/전화/정확 좌표 등 _(본 프로젝트 기본 미수집)_|

### 13.3.6 VerseMapping(사진→구절 1–2개 + 근거) — 정식 Contract

|필드명|타입|필수|제약|설명|
|---|---|:-:|---|---|
|**mapping_id**|string|Y|PK|**ULID/UUIDv7** 권장|
|**photo_id**|string|Y|UNIQUE FK|대상 사진(PhotoEvent.photo_id)|
|**top1_verse_id**|bigint|Y|FK|최종 추천 Top1 절|
|**alt1_verse_id**|bigint|N|FK|ALT-1(대체 절, 옵션)|
|**lang**|enum|Y|`ko`/`en`|출력 언어|
|**themes**|int[]|Y|2–4개|24 주제 ID. **첫 원소=1순위**|
|**scores**|json|Y|—|`s1`,`s2`,`s3`,`s4`,`score_total`,`bonus`,`bonus_anchor`,`normalize_divisor`,`priority_score` (소수 3자리 권장)|
|**reasons**|text|Y|≤600|Why 카드(2–3문장 권장)|
|**filter_hits**|json|Y|-|가이드라인 필터 통과/감쇠/차단 결과|
|**explain_trace_id**|string|N|-|규칙/필터 트레이스(디버깅/감사 연결)|
|**schema_version**|string|Y|SemVer|스키마 버전|
|**ruleset_version**|string|Y|SemVer|추천/필터 룰 버전|
|**created_at**|datetime|Y|-|추천 시각|

**비즈니스 규칙(고정)**

|No|규칙|설명|
|--:|---|---|
|1|`reasons`는 설명형|**인용/직설 단정 금지**, 사용자에게 “왜 이 구절인지” 설명 중심|
|2|`reasons` 길이 가이드|120~300자 권장(최대 600)|
|3|`themes` 개수/우선순위|2~4개, 첫 원소가 1순위 주제|
|4|민감 차단/감쇠|`HEALTHCARE_CONTEXT` / `FUNERAL_CONTEXT` / `NSFW_RISK` 활성 시 특정 범주 구절 제외/감쇠(가이드라인 반영)|

### 13.3.7 PostAffection(사후 감정/메모/복습) — 정식 Contract

|필드명|타입|필수|제약|설명|
|---|---|:-:|---|---|
|**affect_id**|string|Y|PK|**ULID/UUIDv7** 권장|
|**photo_id**|string|Y|UNIQUE FK|대상 사진(PhotoEvent.photo_id)|
|**verse_id**|bigint|Y|FK|해당 구절 ID|
|**feeling_tags**|string[]|N|0–3|감정 태그(복수 허용은 최대 3)|
|**memo**|string|N|≤200|메모/기도 한 줄|
|**prayed**|boolean|Y|default=false|기도 여부|
|**review_schedule**|string[]|N|ISO-8601|복습 일정(예: +1/+3/+7/+30)|
|**next_review_at**|datetime|N|-|다음 복습(파생 필드, 옵션)|
|**created_at**|datetime|Y|-|기록 시각|

### 13.3.8 GeoPin(퍼징·월드맵용 핀)

|필드명|타입|설명|
|---|---|---|
|**pin_id**|uuid (PK)|핀 ID|
|**photo_id**|uuid (FK)|PhotoEvent.photo_id|
|**verse_id**|bigint(FK)|대표 구절 ID|
|**geohash**|string|퍼징된 지오해시(정밀도 단계 조절)|
|**jittered_lat**|float|지터링된 위도|
|**jittered_lon**|float|지터링된 경도|
|**time_bucket**|string|시간 버킷(예: YYYY-MM 또는 주/분기 단위)|
|**visibility**|string|`private`, `community`, `global` 등|
|**k_score**|int|k-익명성 기준(같은 버킷 내 최소 사용자 수)|
|**flags**|json|아동/의료/장례/교회 등 민감·맥락 플래그|

$1

### 13.3.9 ScoringPolicy(추천 점수 파라미터) — 현 버전 기준(시트 기반, 별도 엔티티 미사용)

> v9.1 v1.1 기준으로, 점수 파라미터는 별도 DB 엔티티로 분리하지 않고  
> **구글시트의 `weights` / `priority_rules` 탭**에서 읽어 적용하는 형태로 운영됩니다.

**(1) weights 탭**

|key|설명|코드 적용 여부|
|---|---|---|
|w1~w4|S1~S4 비율형 가중치|✅|
|secondary_ratio|보조 후보 제어|❌ (선언만 존재)|
|primary_margin|1위 확정 마진|❌ (선언만 존재)|

**(2) priority_rules 탭**

|key|설명|코드 적용 여부|
|---|---|---|
|bonus_anchor|앵커 보너스|✅|
|bonus_gospel|복음서 보너스|❌ (선언만 존재)|
|bonus_wcf|추가 보너스|❌ (선언만 존재)|
|normalize_divisor|정규화 분모|✅|


### 13.3.10 120×24 매핑 파일 & 시각자료 — 강제 규칙

#### 13.3.10.1 CSV·엑셀 파일(권장)

|항목|권장 내용|
|---|---|
|파일 목적|**ObjectLabel(120)** × **Theme(24)** 가중치 매핑을 서비스/검증/배포 단위로 고정|
|파일명 예시|`피사체120_라벨_주제가중치_v1.csv` _(또는 `object_theme_matrix_v1.csv`)_|
|인코딩|UTF-8|
|키 규칙|`snake_case`|

**필수 컬럼(정식 Contract)**

|컬럼|타입|설명|
|---|---|---|
|`object_id`|int|라벨 ID(1~120)|
|`theme_id`|int|주제 ID(1~24)|
|`w_obj`|float|객체 신호 가중치(0.000~1.000)|
|`w_scene`|float|장면 신호 가중치(0.000~1.000)|
|`w_ocr`|float|OCR 신호 가중치(0.000~1.000)|
|`w_landmark`|float|랜드마크 신호 가중치(0.000~1.000)|
|`penalty`|float|조합 페널티(0.000~1.000)|
|`notes`|text|예외 규칙/신학적 비고|

#### 13.3.10.2 시각자료(권장: 내부 대시보드/검수 미팅용)

|시각자료|목적|해석 포인트|
|---|---|---|
|120×24 전체 히트맵|라벨×주제 분포를 한 화면에서 확인|특정 주제가 과도/과소 대표되는지|
|주제별 합계(열 합)|주제 축 편향 점검|일부 주제에 가중치가 몰리는지|
|라벨별 합계(행 합)|특정 라벨 과점유 점검|특정 라벨이 추천을 지배하는지|

> 위 시각자료는 개발·데이터팀 내부 문서/대시보드에 첨부하여 **튜닝·검수 미팅의 공통 근거**로 사용한다.

$2

### 13.4.1 정적 데이터(성경·주제·라벨) — ETL 표(요약)

|단계|입력|변환·검증(요지)|출력(저장/배포 단위)|비고|
|--:|---|---|---|---|
|1|성경 원문(XML/CSV 등)|책/장/절 정규화, 구절 ID 생성, KRV/NIV 동기화|**Verse** 테이블(또는 JSON/CSV)|본문 라이선스/권한 체크 포함|
|2|24 주제 정의|주제 축 확정, 정책 태그 정리|**Theme** 테이블|`theme_id`는 고정 유지|
|3|120 라벨 정의|라벨/동의어/메모 정리|**ObjectLabel** 테이블|`object_id`는 고정 유지|
|4|120×24 매핑 매트릭스|가중치/페널티 검증, 예외 룰 점검|**Object-Theme 매핑** 테이블 또는 CSV|13.3.10 파일 구조 준수|

### 13.4.2 동적 데이터(사진·추천·사후 기록) — 이벤트 흐름 표(요약)

|순서|트리거|생성/갱신 엔티티|핵심 필드(요지)|비고|
|--:|---|---|---|---|
|1|앱 사진 촬영/선택|**PhotoEvent**|시간/국가/태그(Perception)|좌표 원본 미저장 원칙 반영|
|2|추천 파이프라인 수행|**VerseMapping**|Top1/ALT, 점수, Why 요약, 필터 히트|추천의 “근거 기록” 역할|
|3|사용자 반응 입력|**PostAffection**|감정/메모/기도/복습 예약|묵상 루프 완성|
|4|월드맵 동의|**GeoPin**|퍼징/지오해시, 시간 버킷, 가시성, k-익명성|집계 단위만 노출|

### 13.4.3 ETL 파이프라인 규칙 — 운영 표준

|No|규칙|단계 흐름|산출물/효과|
|--:|---|---|---|
|1|Draft→검증→고정→배포|Draft 시트 → **Validate 스크립트** → OK면 **Freeze(버전 고정)** → JSON/CSV Export → 서비스 반영|변경 이력 추적/회귀 가능|
|2|정적 데이터 버전 태깅|Theme/ObjectLabel/매트릭스/Verse는 모두 버전 태그 보유|`topics_v2_3`, `matrix_v1_0` 등으로 재현성 확보|

### 13.4.4 정적 데이터 배포 패키징 규칙 — 운영 표준

|No|아티팩트|배포 단위|필수 메타|소비자(사용처)|롤백|
|--:|---|---|---|---|---|
|1|Theme(24)|`themes_vX.Y.Z.json`|`version`, `updated_at`|앱/서버(주제 카드)|이전 버전 파일로 즉시 교체|
|2|ObjectLabel(120)|`labels_vX.Y.Z.json`|`version`, `updated_at`|Perception 후처리/표시|이전 버전 교체|
|3|Matrix(120×24)|`matrix_vX.Y.Z.csv/json`|`version`, `checksum`|추천 점수 계산|이전 버전 교체|
|4|Verse(본문)|`verses_<lang>_vX.Y.Z.*`|`source`, `license_tag`|로컬 검색/표시|이전 버전 교체|
|5|룰셋(정책)|`ruleset_vX.Y.Z.json`|`ruleset_version`|필터/감쇠/차단|버전 핀ning으로 즉시 롤백|

|No|공통 규칙|강제 내용|
|--:|---|---|
|1|버전|SemVer(`X.Y.Z`) 고정|
|2|체크섬|`checksum`(sha256 등) 저장|
|3|배포 경로|`/assets/<artifact>/<version>/...` 형태 고정|
|4|호환성|새 버전 배포 시 이전 버전 1개는 즉시 롤백 가능 상태 유지|

---

## 13.5 API 명세 요약---

## 13.5 API 명세 요약

> 상세 OpenAPI 3.1 문서는 별도 관리하며, 여기서는 **핵심 필드 구조**만 정리한다.

### 13.5.1 공통 규칙(Contract/헤더/오류/캐시) — 강제 규칙

|항목|규칙|
|---|---|
|Base Path|`/v1`|
|인증|`Authorization: Bearer <token>`|
|Content-Type|`application/json` _(이미지 업로드 정책에 따라 multipart 가능)_|
|언어|`Accept-Language: ko,en` _(우선순위 적용)_ + body의 `lang` 병행 가능|
|멱등성|`Idempotency-Key: <uuid>` 권장(특히 analyze 계열)|
|추적|`X-Trace-Id` 발급/전달(추천 로그와 연결)|
|레이트리밋(초안)|사용자 기준 분당 30회. 초과 시 `429` + `Retry-After`|
|점수 정밀도|0.000~1.000(소수 3) — 응답/로그 공통|

#### 13.5.1.1 i18n(언어) 우선순위 — 강제 규칙

|우선순위|입력 위치|규칙|
|--:|---|---|
|1|Query `lang`|존재하면 **최종 우선**(예: `/recommend?lang=ko`)|
|2|Header `Accept-Language`|우선순위 리스트로 해석(예: `ko,en`)|
|3|UserSettings|앱 설정 언어(옵션)|
|4|Default|`ko` _(미지정 시)_|

#### 13.5.1.2 캐시 규칙(권장)

|대상|캐시 키|비고|
|---|---|---|
|recommend|`photo_id` + `ruleset_version`|동일 입력/룰셋이면 재사용 가능. 필요 시 `force_refresh`로 무시|

### 13.5.2 POST /v1/analyze — 정식 Contract

- **역할**: 이미지를 수신하여 **지각 결과(Perception) + 컨텍스트 + 안전 플래그**를 생성한다.
    

**요청**

|필드명|타입|필수|설명|
|---|---|:-:|---|
|**image**|binary|Y|이미지 바이너리(또는 base64, URL 등 정책에 따름)|
|**exif**|object|N|촬영 시간, 기기 정보 등(옵션)|
|**offline_capable**|boolean|N|오프라인팩 보유 여부(클라이언트 힌트)|

**응답(정식 Contract: 문서 표준 출력)**

|필드명|타입|필수|설명|
|---|---|:-:|---|
|**photo_id**|string|Y|생성된 PhotoEvent ID|
|**perception**|object|Y|Perception 출력(아래 13.5.2.1 스키마)|
|**context**|object|Y|`{time_of_day, weekday, season, device_lang, (opt)weather, (opt)country}`|
|**safety_flags**|object|Y|`{faces?, child?, medical?, sensitive?}` — 탐지 신호(원시 플래그)|
|**privacy_flags**|object|Y|정책(가이드라인) 처리 결과 — 공개/저장/라우팅 의사결정용|
|**tags**|object|N|_(Deprecated)_ 과거 호환용 별칭. 사용 시 `perception`과 **동일**해야 함(불일치 금지)|

> **혼동 방지 규칙(강제):**
> 
> 1. 문서의 기준 출력은 **perception**이다.
>     
> 2. `tags`는 **별칭(Deprecated)**이며 신규 구현/문서는 perception만 기준으로 삼는다.
>     
> 3. `safety_flags`는 “탐지 결과”, `privacy_flags`는 “정책 처리 후 결정 결과”다.
>     

#### 13.5.2.1 Perception 출력 JSON 스키마(확정본) — 정식 Contract

**(A) 스키마 요약(표준)**

|No|경로|타입|필수|제약/설명|
|--:|---|---|:-:|---|
|1|`perception.version`|string|Yes|Perception 계약 버전. **v1.6 고정**|
|2|`perception.objects`|array|Yes|`{label, box[x1,y1,x2,y2], conf(0~1)}` / **NMS** 후 `conf desc` 정렬 / Top-15(conf≥0.25)|
|3|`perception.scenes`|array|Yes|`{scene_label, prob(0~1)}` / Top-3(prob≥0.15), 미만은 `unknown`|
|4|`perception.ocr`|array|No|`{text, box, lang?, conf}` / 길이<2 제거, conf<0.5 제거, **PII 마스킹**|
|5|`perception.clip_hints`|array|No|`{text, kind, score(0~1)}` / Top-8(sim≥0.24) / `kind`: symbol/topic/place/mood|
|6|`perception.clip_image_emb_q8`|string|No|옵션. **Q8 양자화**된 임베딩(Base64). 기본 OFF(민감 시 강제 OFF)|
|7|`perception.landmark_candidates`|array|No|`{name?, score(0~1)}` / Top-5(선택 모듈)|
|8|`perception.tokens`|array|Yes|정규화 태그. `token/type/source/score/meta?` / 총≤32(예산 강제)|
|9|`context`|object|Yes|`{time_of_day, weekday, season, device_lang, (opt)weather, (opt)country}`|
|10|`safety_flags`|object|Yes|`{faces?, child?, medical?, sensitive?}`|

**(B) tags 별칭 ↔ perception 매핑 규칙 — Deprecated**

|legacy(tags)|canonical(perception)|규칙|
|---|---|---|
|`tags.obj[]`|`perception.objects[]`|요소 의미 동일(라벨/박스/신뢰도)|
|`tags.scene[]`|`perception.scenes[]`|Top-3 규칙 동일|
|`tags.ocr[]`|`perception.ocr[]`|잡음 제거/필터 규칙 동일|
|`tags.clip_hints[]`|`perception.clip_hints[]`|Top-8/하한 동일|
|`tags.landmark[]`|`perception.landmark_candidates[]`|Top-5 규칙 동일|
|`tags.tokens[]`|`perception.tokens[]`|정규화 태그(예산/스코어링) 동일|

> **불일치 금지:** 응답에 `tags`를 함께 넣는 경우, 위 매핑 결과가 **완전히 동일**해야 한다.

**(C) 개발 티켓 체크리스트(DoD)**

|No|함수/모듈|입력→출력|완료 조건(DoD)|비고|
|--:|---|---|---|---|
|1|`detect_objects(img)`|img → `{label,box,conf}[]`|**NMS**/**Top-K**/**conf_thres** 반영|YOLO류 + 후처리|
|2|`classify_scene(img)`|img → `{scene,prob}[]`|Top-3/**prob_thres** 반영|장면 분류|
|3|`detect_text(img)`|img → `text_regions[]`|박스/마스크 확보|OCR 검출|
|4|`recognize_text(crops)`|crops → `{text,conf,lang?}[]`|길이/낮은 conf/PII 필터|OCR 인식|
|5|`clip_embed_image(img)`|img → `img_emb`|정규화(L2), 옵션 양자화(Q8)|CLIP|
|6|`clip_rank_prompts(img_emb, bank)`|emb → `clip_hints[]`|Top-8/**sim_thres** 반영|CLIP|
|7|`nearest_landmarks(emb)`|emb → Top-5 후보|cos 하한/Top-K|선택 모듈|
|8|`derive_context(exif,locale)`|exif → context|null 없는 기본셋|시간/절기|
|9|`pack_perception(...)`|모든 결과 → `perception` JSON|**스키마 밸리데이션 통과** + `tokens` 예산 강제|후속 단계 입력 계약|

#### 13.5.2.2 Tag/텍스트 정규화 규칙(요약) — 강제 규칙(v1.6)

> 목적: 후보 폭주/노이즈를 줄이고, 추천·로그·검색에서 동일한 토큰이 동일하게 취급되도록 **정규화 규칙을 고정**합니다.  
> 결과물은 `perception.tokens[]`로 수렴하며, 이후 단계(P1/P2/검색/재랭킹)는 tokens를 기준으로 동작합니다.

**(A) 토큰 표준화(slug) 규칙**

|대상|규칙|비고|
|---|---|---|
|객체/장면 라벨|소문자 + 스페이스→`_` + 특수문자 제거|라벨은 사전 정의(120 라벨/장면)|
|OCR 텍스트|소문자화 + 구두점 제거 + 연속 공백 축약|언어별 불용어 리스트 분리 권장|
|CLIP 힌트 텍스트|prompt_bank의 canonical 텍스트를 그대로 사용|임의 생성 금지(노이즈 방지)|

**(B) PII/금칙어 필터(필수)**

|대상|규칙|출력|
|---|---|---|
|전화번호/이메일/차량번호 패턴|탐지 시 마스킹 또는 제거|`meta.raw` 비우기, token만 유지(또는 drop)|
|개인 이름 추정|기본 drop(보수)|ocr 원문 미노출|

**(C) 예산(Top-K) — pack 단계 강제**

|대상|최대 개수|규칙|
|---|---:|---|
|objects(원천)|15|conf≥0.25, NMS 적용|
|scenes(원천)|3|prob≥0.15, 미만 unknown|
|ocr(원천)|8|길이≥2, conf≥0.5, 중복 제거|
|clip_hints(원천)|8|sim≥0.24, kind 포함|
|tokens(정규화)|32|`tokens_obj_max=10, scene=5, ocr=8, clip=9`|

**(D) tokens 생성/결합 점수(정식)**

- 원천→tokens 매핑:  
  - objects.label → token(type=object, source=yolo, score=conf)  
  - scenes.scene_label → token(type=scene, source=scene, score=prob)  
  - ocr.text → token(type=ocr, source=ocr, score=conf)  
  - clip_hints.text(kind) → token(type=clip|place|mood, source=clip, score=score)

- 동일 token 결합 점수: **Noisy-OR**  
  `score(token) = 1 - Π_s (1 - w_s * score_s(token))`  
  (가중치 시작값: `w_obj=0.40, w_scene=0.20, w_ocr=0.20, w_clip=0.20`)




#### 13.5.2.3 P1(상징) 출력 JSON 스키마(확정본) — 정식 Contract(v1.6, tokens-only 폴백)

> **목적:** P1은 `perception.tokens[]`만으로도 **항상** “상징 후보”를 산출해야 한다.  
> **금지:** P1은 `objects/scenes/ocr/clip_hints`를 **직접 참조하지 않는다.** (이미 `tokens`에 정규화되어 들어온 값만 사용)

**(A) 입력(최소 계약)**

|필드명|타입|필수|설명|
|---|---|:-:|---|
|**photo_id**|string|Y|PhotoEvent ID|
|**tokens**|array|Y|`perception.tokens[]` 그대로|
|**lang**|string|N|`ko/en` (표기용)|
|**ruleset_version**|string|Y|룰셋/매핑 버전(재현성)|
|**context_min**|object|N|선택. `{time_of_day, weekday, season}` 정도만 허용(없어도 동작 MUST)|
|**safe_mode**|boolean|N|민감 상황이면 true(가이드라인 엔진이 설정 가능)|

**(B) 출력(정식 Contract)**

|No|경로|타입|필수|제약/설명|
|--:|---|---|:-:|---|
|1|`p1.version`|string|Yes|**v1.6 고정**|
|2|`p1.status`|string|Yes|`ok / degraded / blocked`|
|3|`p1.symbol_candidates`|array|Yes|최소 1개. Top-8 권장|
|4|`p1.symbol_candidates[].symbol_id`|int|Yes|데이터북의 symbol_id|
|5|`p1.symbol_candidates[].label`|string|Yes|표기용(ko 우선)|
|6|`p1.symbol_candidates[].score`|number|Yes|0~1 (소수 3)|
|7|`p1.symbol_candidates[].evidence_tokens`|string[]|Yes|근거가 된 `token`들(최대 8)|
|8|`p1.selected_symbol`|object|Yes|최종 선택(후속 단계 입력)|
|9|`p1.selected_symbol.symbol_id`|int|Yes|선택된 symbol_id|
|10|`p1.selected_symbol.score`|number|Yes|0~1|
|11|`p1.trace`|object|Yes|재현성: `{ruleset_version, token_hash}`|
|12|`p1.warnings`|string[]|No|`degraded` 사유 등|

**(C) tokens-only 폴백 강제 규칙(구현 MUST)**

|상태|조건|필수 동작|
|---|---|---|
|ok|`tokens`에 유효 토큰 ≥ 1|정상 후보 산출 + `selected_symbol` 지정|
|degraded|`tokens`가 모두 `unknown_*`이거나 예산 0에 근접|`symbol_candidates`는 **UNKNOWN(0)**을 Top-1로 포함 + 안전한 기본 후보 1~2개 추가|
|blocked|가이드라인 엔진이 차단 플래그를 설정|`symbol_candidates`는 UNKNOWN만 반환 + `warnings`에 사유 코드|

---

#### 13.5.2.4 P2(주제) 출력 JSON 스키마(확정본) — 정식 Contract(v1.6, tokens-only 폴백)

> **목적:** P2는 `perception.tokens[]`(및 선택적으로 `p1.selected_symbol`)만으로도 **항상** 24개 주제 점수를 산출해야 한다.  
> **원칙:** P2 출력은 “추천/로그/검색”의 단일 진실원천이며, Top-N만 내지 말고 **24개 전체를 항상 반환**한다.

**(A) 입력(최소 계약)**

|필드명|타입|필수|설명|
|---|---|:-:|---|
|**photo_id**|string|Y|PhotoEvent ID|
|**tokens**|array|Y|`perception.tokens[]` 그대로|
|**p1_selected_symbol**|object|N|`{symbol_id, score}` (없어도 동작 MUST)|
|**context_min**|object|N|선택. `{time_of_day, weekday, season}` 정도(없어도 동작 MUST)|
|**ruleset_version**|string|Y|룰셋/매핑 버전|
|**safe_mode**|boolean|N|민감 상황이면 true|

**(B) 출력(정식 Contract)**

|No|경로|타입|필수|제약/설명|
|--:|---|---|:-:|---|
|1|`p2.version`|string|Yes|**v1.6 고정**|
|2|`p2.status`|string|Yes|`ok / degraded / blocked`|
|3|`p2.theme_scores`|array|Yes|**항상 24개**|
|4|`p2.theme_scores[].theme_id`|int|Yes|1~24|
|5|`p2.theme_scores[].score`|number|Yes|0~1 (소수 3)|
|6|`p2.theme_scores[].rank`|int|Yes|1~24|
|7|`p2.theme_scores[].evidence_tokens`|string[]|Yes|근거 token(최대 8)|
|8|`p2.top_themes`|int[]|Yes|Top-3(theme_id)|
|9|`p2.trace`|object|Yes|`{ruleset_version, token_hash, p1_symbol_id?}`|
|10|`p2.penalties`|object|No|가이드라인 감쇠/차단 영향(요약)|
|11|`p2.warnings`|string[]|No|`degraded/blocked` 사유|

**(C) tokens-only 폴백 강제 규칙(구현 MUST)**

|상태|조건|필수 동작|
|---|---|---|
|ok|유효 토큰 ≥ 1|24개 점수 산출 + `top_themes` 생성|
|degraded|토큰 정보가 약함/불명확|24개 점수는 **기본 prior + 약한 신호**로 산출, `warnings` 기록|
|blocked|차단 상태|24개 점수는 **안전 기본값(평탄/낮은 점수)** + `top_themes`는 `GENERAL_SAFE`(정의된 기본 theme)로 고정|

---

#### 13.5.2.5 P1/P2 Contract Test & DoD — tokens-only 폴백 강제(필수)

> **정의:** **Contract Test**는 “스키마/제약/불변식”을 자동 검증하는 테스트다.  
> P1/P2는 반드시 아래 테스트를 통과해야 `/v1/recommend`가 구현 완료로 인정된다.

**(A) Contract Test 목록(최소 12개)**

|TC ID|입력|기대 결과(불변식)|
|---|---|---|
|CT-P1-001|tokens 1개(obj)|`p1.status=ok`, 후보 ≥1, selected 존재|
|CT-P1-002|tokens 3개(scene/ocr/clip 혼합)|근거 토큰이 evidence_tokens에 포함|
|CT-P1-003|tokens 모두 unknown|`p1.status=degraded`, UNKNOWN(0) 포함|
|CT-P1-004|safe_mode=true|`p1.status`가 ok여도 warnings 존재 가능|
|CT-P2-001|tokens 1개|`theme_scores` 24개, rank 1~24, top_themes 3개|
|CT-P2-002|tokens + p1_symbol|trace에 p1_symbol_id 포함|
|CT-P2-003|tokens 모두 unknown|`p2.status=degraded`, 24개 유지|
|CT-P2-004|blocked|24개 점수 반환 + top_themes는 안전 기본값|
|CT-INT-001|recommend 입력에 tokens만 존재|추천이 **크래시 없이** 후보 생성(품질 저하 허용)|
|CT-INT-002|recommend에서 tags(perception 별칭) 혼재|불일치 시 즉시 `400`|
|CT-INT-003|token 예산 32 초과 입력|서버가 예산 강제(초과분 절단) + trace 기록|
|CT-INT-004|ruleset_version 변경|동일 입력이라도 결과가 버전별로 추적 가능|

**(B) 완료 조건(DoD) — 강제**

|No|항목|완료 조건|
|--:|---|---|
|1|스키마|P1/P2 출력이 본 문서 스키마로 **밸리데이션 100% 통과**|
|2|tokens-only|`objects/scenes/ocr/clip_hints`가 비어도 P1/P2가 **항상 출력 생성**|
|3|재현성|`trace.ruleset_version` + `token_hash`로 결과 재현 가능|
|4|안전|blocked/degraded 경로가 정의되어 있고 테스트로 검증됨|
|5|연동|`/v1/recommend`가 P1/P2를 호출하고(내부), 최소한 로그에 저장|



### 13.5.3 POST /v1/recommend — 정식 Contract

- **역할**: **Perception + Context**를 받아 **성경 구절 1~2절**을 추천
    

**요청(정식 Contract: 문서 표준 입력)**

|필드명|타입|필수|설명|
|---|---|:-:|---|
|**photo_id**|string|Y|PhotoEvent ID|
|**perception**|object|Y|`/v1/analyze`의 `perception`을 그대로 사용(13.5.2.1)|
|**context**|object|Y|시간·날씨·국가·사용자 설정 등(13.5.2 응답의 context)|
|**lang**|string|Y|`ko`, `en` 등|
|**history**|object|N|최근 추천·사용자 반응(선택적 개인화)|
|**tags**|object|N|_(Deprecated)_ 과거 호환용 입력. 사용 시 `perception`과 **동일**해야 함(불일치 금지)|

> **혼동 방지 규칙(강제):** `/v1/recommend`는 **perception**을 기준으로 동작한다. `tags`는 별칭(Deprecated)이다.

**응답**

|필드명|타입|설명|
|---|---|---|
|**mapping_id**|string|VerseMapping ID|
|**verses**|array|추천 구절 배열(Top1, ALT-1)|
|**reasons**|object|Why 카드용 근거(주제, 상징, 문맥 설명)|
|**p1**|object|P1(상징) 결과(옵션: `include_debug=true` 또는 내부 로그용; 13.5.2.3 스키마)|
|**p2**|object|P2(주제) 결과(옵션: `include_debug=true` 또는 내부 로그용; 13.5.2.4 스키마)|
|**themes**|int[]|적용된 theme_id 리스트|
|**scores**|object|`imgRel`, `ctxFit`, `orthodoxy`, `penalty` 등|
|**flags**|object|가이드라인 적용 결과(감쇠/차단/주의 등)|
|**debug**|object|후보 개수, 필터 히트, 레이턴시 분해(내부용)|

### 13.5.4 POST /v1/affect-log — 정식 Contract

- **역할**: 추천 이후 사용자 감정·기도·메모 기록(묵상 루프 완성)
    

**요청**

|필드명|타입|필수|설명|
|---|---|---|---|
|**mapping_id**|string|Y|VerseMapping ID|
|**verse_id**|bigint|Y|선택된 구절 ID|
|**feeling_tags**|string[]|N|감정 태그|
|**memo**|string|N|메모|
|**prayed**|boolean|N|기도 여부|

**응답**

|필드명|타입|설명|
|---|---|---|
|**affect_id**|string|생성된 PostAffection ID|
|**next_review**|string[]|추천 복습 일정 배열(예: ["2025-11-23", …])|

---

### 13.5.5 위치·월드맵 관련 API 요약(표)

|No|Method|Endpoint|역할|응답/보안 규칙|
|--:|---|---|---|---|
|1|POST|`/v1/settings/location`|위치 공개 수준 설정(None/Approx/Detail 등)|설정은 사용자 단위 저장|
|2|POST|`/v1/map/pin`|GeoPin 생성 요청(동의된 이벤트만)|`privacy_flags`에 따라 제한 가능|
|3|GET|`/v1/map/tiles`|geohash/zoom 타일 집계(핀/히트맵) 조회|**k-익명성** 충족 집계만 반환|
|4|GET|`/v1/map/nearby`|주변 핀 목록(집계) 조회|개인 식별 불가 단위로 제한|
|5|POST|`/v1/map/report`|핀 신고(민감/부적절/오인 등)|모더레이션/가이드라인 처리로 연동|

> 모든 월드맵 응답은 **k-익명성 조건을 충족한 집계 데이터만** 포함하도록 강제한다.

---

### 13.5.6 운영 로그(권장 스키마)

> 목적: 추천 품질/안전/운영 이슈를 “추적 가능”하게 만들되, 개인 식별이 되지 않도록 **최소 필드로** 고정한다.

**(A) 추천 로그(권장)**

|필드|타입|설명|
|---|---|---|
|`photo_id`|string|이벤트 연결 키|
|`mapping_id`|string|추천 결과 연결 키|
|`explain_trace_id`|string|규칙/필터 트레이스 연결|
|`ruleset_version`|string|어떤 룰셋으로 추천됐는지|
|`filters_applied[]`|string[]|적용된 필터/감쇠/차단 코드|
|`candidates_at_k`|int|후보 풀 크기(Top-k 직전)|
|`chosen`|object|최종 선택 요약(Top1/ALT)|
|`latency_ms`|int|레이턴시(선택)|

**(B) 퍼널 이벤트(권장)**

|이벤트 키|의미|
|---|---|
|`capture`|촬영/선택 완료|
|`recommend_shown`|추천 결과 노출|
|`verse_saved`|구절 저장/북마크|
|`share_sent`|공유/전송|
|`post_affection_saved`|감정/메모 저장|
|`reminder_return`|복습 알림 후 재방문|

---

## 13.6 버전 관리·마이그레이션 원칙 — 강제 규칙---

## 13.6 버전 관리·마이그레이션 원칙

### 13.6.1 데이터 버전

- 정적 데이터(Theme, ObjectLabel, 매트릭스, Verse)는 **세미버전**으로 관리
    
    - 예: `topics_v2.3.0`, `labels_v1.1.0`, `matrix_v1.0.2`
        
- 기존 ID는 **가능한 한 변경하지 않고**, 미사용 시 `deprecated` 플래그 사용
    

### 13.6.2 API 버전

- HTTP 헤더 또는 Accept 타입 기반 버전
    
    - 예: `Accept: application/vnd.bibleapp.v1+json`
        
- 새로운 버전 출시 시, **구 버전 90일 그레이스** 등 폐기 정책을 명시
    

### 13.6.3 마이그레이션 체크리스트(표)

**(A) 스키마 변경 시**

|No|체크 항목|목적(쉬운 설명)|산출물/완료 기준|
|--:|---|---|---|
|1|PK/FK 무결성 검사|데이터 연결이 끊기지 않게|무결성 검사 통과 로그|
|2|인덱스·쿼리 성능 영향 분석|느려지지 않게|변경 전/후 쿼리 지표 비교|
|3|샘플 회귀 테스트|같은 사진에서 결과가 갑자기 바뀌지 않게|동일 입력 대비 추천 결과 비교 리포트|

**(B) API 변경 시**

|No|체크 항목|목적(쉬운 설명)|산출물/완료 기준|
|--:|---|---|---|
|1|클라이언트 호환성 테스트(iOS/Android)|앱이 깨지지 않게|버전별 호출/응답 확인|
|2|롤백 계획 준비(Blue-Green 등)|문제 시 즉시 되돌리기|롤백 시나리오/스위치 절차 문서|

---

## 13.7 장 요약---

## 13.7 장 요약

1. 이 부록은 성경 프로젝트의 **핵심 데이터 엔티티**(PhotoEvent, Verse, Theme, ObjectLabel 등)와  
    그 관계(매핑 매트릭스, VerseMapping, PostAffection, GeoPin)를 표 형식으로 정의한다.
    
2. 사진→말씀 추천 루프에서 사용되는 **ETL·데이터 흐름**을 정리해,  
    데이터·AI·백엔드 팀이 동일한 모델을 공유하도록 한다.
    
3. `/analyze`, `/recommend`, `/affect-log`, `/map/*`, `/settings/location` 등  
    주요 API 엔드포인트의 **요청/응답 필드 구조**를 요약해, 개발자 연결 지점을 명확히 한다.
    
4. 데이터·API의 **버전 관리·마이그레이션 원칙**을 정리해,  
    장기 운영 시에도 일관성과 회귀 검증이 가능하도록 한다.
    

---

## 13.8 용어 인덱스(데이터·API)

|용어|설명|
|---|---|
|**엔티티(Entity)**|DB·엑셀 등에서 독립적으로 관리되는 데이터 단위(테이블/시트 등).|
|**Theme(주제)**|신학적으로 정의된 24개 주제 축.|
|**ObjectLabel(라벨)**|사진 인식에 사용하는 120개 피사체/장면/텍스트 라벨.|
|**매핑 매트릭스(Matrix)**|라벨과 주제 사이의 가중치 관계를 표현한 2차원 표.|
|**PhotoEvent**|사용자가 사진을 찍거나 선택한 사건을 나타내는 레코드.|
|**Verse(구절)**|성경의 한 절을 나타내는 데이터 레코드.|
|**VerseMapping**|특정 PhotoEvent에 대해 어떤 구절이 왜 선택되었는지 기록한 데이터.|
|**PostAffection**|추천 이후 사용자의 감정·기도·메모 등 사후 반응 기록.|
|**GeoPin**|월드맵에 표시되는 퍼징된 위치·구절·사진의 집계 단위.|
|**지오해시(Geohash)**|위치를 짧은 문자열로 표현하는 방식. 정밀도에 따라 범위가 달라짐.|
|**k-익명성(k-anonymity)**|동일 버킷 안에 최소 k명 이상이 있어야 개별 사용자가 식별되지 않는다는 원칙.|
|**ETL**|Extract-Transform-Load. 데이터 추출·변환·적재 과정.|
|**엔드포인트(Endpoint)**|API에서 호출 가능한 URL 경로.|
|**페이로드(Payload)**|API 요청/응답에서 실제 데이터가 담긴 부분.|
|**세미버전(SemVer)**|MAJOR.MINOR.PATCH 형태의 버전 관리 방식.|
|**Blue-Green 배포**|두 개의 버전을 동시에 유지하며, 점진적으로 신규 버전으로 전환하는 배포 방식.|
|**NMS**|겹치는 후보 박스 중 신뢰도(conf)가 높은 것만 남겨 중복 탐지를 줄이는 **후처리**.|
|**IoU**|두 박스의 **교집합/합집합 비율**(0~1). 박스 겹침 정도를 수치화.|
|**mAP**|여러 클래스에서의 평균 정확도를 집계한 지표. 보통 **IoU 기준**으로 정탐/오탐을 판정해 계산.|
|**PTQ**|학습 후 모델을 INT8 등으로 변환해 크기/지연/전력을 줄이는 **양자화(Quantization)** 방식.|
|**QAT**|학습 과정에서 양자화 영향을 반영해 정확도 저하를 줄이는 **양자화 학습** 방식.|
|**Table Grid**|Word에서 기본 격자 형태의 표 스타일. 일반적으로 **실선 테두리**가 적용되어 테두리 누락을 방지.|
|**All Borders**|Word 표 테두리 설정에서 ‘전체 테두리’를 한 번에 적용하는 옵션.|
|**Table Design**|Word 리본 메뉴의 표 디자인 탭. 표 스타일/테두리/선 굵기 등을 지정한다.|
|**Solid**|Word 선 스타일 중 실선. 점선/파선과 구분되는 기본 선 형태.|
|**ULID**|시간 정렬이 가능한 문자열 ID 형식. 분산 환경에서 정렬/샤딩에 유리.|
|**UUIDv7**|시간 기반 정렬을 지원하는 UUID 버전. 로그/정렬/샤딩에 유리.|
|**Idempotency-Key**|같은 요청이 중복으로 들어와도 같은 결과를 보장하기 위한 멱등성 키(주로 POST에서 사용).|
|**Accept-Language**|서버가 응답 언어를 선택하도록 힌트를 주는 HTTP 헤더(우선순위 지정 가능).|
|**X-Trace-Id**|요청/응답/로그를 하나의 흐름으로 추적하기 위한 식별자 헤더.|
|**Retry-After**|`429` 등에서 재시도 가능 시점을 알리는 헤더(초/날짜 형식).|
|**bitmask**|여러 플래그를 정수의 비트 단위로 압축 표현하는 방식(예: `privacy_bits`).|
|**PI**|개인정보(민감도) 분류 레벨. `×`(비식별), `△`(가명/간접식별), `●`(직접식별).|
|**i18n**|국제화(Internationalization). 언어/지역 설정에 따라 UI/응답을 바꾸는 체계.|
|**퍼널(Funnel)**|사용자가 기능을 밟아가는 단계 흐름(예: capture → recommend_shown → post_affection_saved).|

# 14장. 0109_donation — 기부·재분배·투명성·준법 정책(한국 법인용) (v1.0)

- ⏰ 기준 시각: 2026-01-09(Fri) 13:13 (KST)

> 적용 범위: **어디나(ODINA)** 앱 및 운영사(한국 법인)에서 발생하는 모든 기부금(지정/일반/특별)과 그 재분배, 투명성 공개, 준법 프로세스

---

## 14.1 정책 한 장 요약(결정값)

### 14.1.1 핵심 구조
- 기부 유형: **지정 기부(국가 지정)** / **일반 기부(운영 정책 룰 기반)** / **특별 기부(캠페인)**
- 정산 기준: 결제·환불 등 차감을 반영한 **순유입액(Net Inflow)**
- 기부율(순유입액 기준)
  - **기부 집행액(Program Grants) = 80% (최소/고정)**
  - **운영비(Opex Cap) = 최대 15% (상한)**
  - **준비금(Reserve) = 5% (고정)**
- 공개 주기: **분기(기본)** / **반기(요약+증빙 묶음)** / **연말(연간 결산+감사 수준 보고)**

### 14.1.2 사용자에게 제공되는 약속 문구(앱 내 고정 표기)
- “본 서비스의 기부금은 결제수수료·환불 등을 제외한 **순유입액(Net Inflow)** 기준 **80% 이상**이 기부(재분배)로 집행되며, 운영비는 **순유입액의 15%를 넘지 않도록 상한**을 둡니다.”
- “지정 기부는 사용자가 선택한 국가 목적 외 용도로 전용하지 않습니다(법령상 송금 불가 등 예외 시 **보류/대체 규칙**을 따릅니다).”

### 14.1.3 v1.0 / v1.1 결정 맵(고정)
| 구분 | v1.0 기본 결정(출시 기본값) | v1.1 확장(선택 적용) |
|---|---|---|
| 영수증/세액공제 | **미제공**(기부금 영수증 발급 없음) | **제공**(전자/문서 발급, 세액공제 체계 연동) |
| 법인/조직 구조 | 한국 법인(운영사) 단독 운영 + 파트너 송금 | (권장) 별도 **비영리 운영 주체** 또는 공시/발급 요건을 충족하는 구조로 전환 |
| 결제 레일 | **기부 전용 결제 레일** 우선(수수료 최소화) | 동일(영수증 발급 데이터 추가 수집은 ‘옵트인’) |
| 공개 수준 | 분기/반기/연말 공개(앱 내) | 앱 내 공개 + 법정 서식 공시/의무이행 보고까지 확장 |
| 데이터 수집 | 기부 정산 최소 정보만 | 영수증 발급에 필요한 정보는 **선택 수집(옵트인)** |

---

## 14.2 용어 및 역할(거버넌스)

### 14.2.1 핵심 역할
| 역할 | 책임 | 권한/제한 |
|---|---|---|
| **운영사(한국 법인)** | 앱 운영, 기부 수납·정산·공개, 파트너 계약 | 운영비 상한 준수, 증빙·공개 의무 수행 |
| **기부·투명성 위원회(내부)** | 분기 집행 승인, 파트너 등급 결정, 예외 승인 | 집행/대체/보류 의사결정(회의록 필수) |
| **회계·정산 담당(내부/외주)** | 월별 정산, 분기 리포트 생성, 증빙 관리 | 단독 집행 불가(승인 후 집행) |
| **수령 파트너(국가별)** | 현지 집행·보고·증빙 제출 | 증빙 미제출 시 지급 중단/등급 하향 |

### 14.2.2 의사결정 단위(최소 규칙)
- 파트너 신규 등록/해지: 위원회 의결
- 분기 집행: 위원회 의결 + 회계 검증
- 예외(제재/송금불가/지급 지연): 위원회 의결(‘대체 규칙’ 적용)

---

## 14.3 기부 유형 정의(앱/회계/정책)

### 14.3.1 기부 유형 정의 표

| 구분 | 앱 표기 | 지정 범위 | 회계 분류 | 집행 규칙 핵심 |
|---|---|---|---|---|
| A | **지정 기부(국가 지정)** | 국가(필수) | 제한성 재원(Restricted) | 지정 국가 외 전용 금지 |
| B | **일반 기부** | 운영 정책 룰(공개) | 비제한 재원(Unrestricted) | 144개국 우선순위 점수 기반 자동 배분 |
| C | **특별 기부(캠페인)** | 캠페인 목적 | 제한/비제한 혼합 | 기간·목표액·집행기한 고정 |

---

### 14.3.2 실무 벤치마크 — 기부 전용 모바일 앱의 ‘기부 구조/재화 단위’ 패턴(정책 보강)

> 목적: “정책 문구(약속)”가 실제 앱에서 어떤 형태로 구현되는지, 이미 운영 중인 대표 사례의 **기부 단위(Amount Unit)** / **구독(Recurring)** / **수수료 처리(Cover Fees)** / **임팩트 표기(Impact Unit)** 방식으로 구체화한다.

#### 14.3.2.1 기부 단위(Amount Unit) 유형 — 실무에서 가장 많이 쓰는 8종

| No. | 단위/구조 | 앱에서 보이는 형태 | 장점 | 주의점(정책/회계) | ODINA 적용 권장 |
|---:|---|---|---|---|---|
| 1 | 통화 금액(1회) | “₩1,000/₩3,000/₩5,000/직접입력” | 가장 직관적 | 수수료/환불 반영 정의 필요 | **필수(기본값)** |
| 2 | 통화 금액(정기) | “매월/매주/매일 자동 기부” | LTV/예측 가능 | 해지·환불·실패 결제 처리 | **필수(기본값)** |
| 3 | 임팩트 단위(Impact Unit) | “1회 = 1끼/1권/1일 지원” | 감정적 설득력 강함 | 실제 지원 형태가 상황 따라 달라질 수 있음 | **권장(선택)** |
| 4 | 라운드업(잔돈 기부) | “결제금액 반올림/자투리 기부” | 마찰 최소 | 결제 레일/정산 분리 필요 | **v1.1+** |
| 5 | 행동 기반(거리/걸음) | “1km당 후원금 적립” | 기부를 게임화 가능 | 스폰서 재원, 상한·정산 규칙 명확화 | **캠페인형** |
| 6 | 프로젝트 목표 달성형(캠페인) | “목표액/기간/진행률” | 참여 동기 강함 | 기부금품 ‘등록/표시 의무’ 트리거 관리 | **필수(특별 기부)** |
| 7 | 마이크로론(대출 단위) | “$25 단위로 대출” | ‘환원’ 서사 가능 | 기부가 아니라 대출/투자 성격(법/회계 다름) | **본 프로젝트는 비권장** |
| 8 | 수수료 함께 내기(Cover Fees) | “수수료를 함께 부담(토글)” | 실질 기부액 유지 | 수수료 항목을 별도 공개/정의 | **권장(선택)** |

#### 14.3.2.2 대표 앱 ‘실제 구조’ 사례 카드(링크 포함)

#### (1) ShareTheMeal (WFP)
- 기부 단위: **임팩트 단위(한 끼)** + **정기 기부(월간)**
- 구조: 목표(국가/프로그램)를 선택 → 최소 금액으로 시작 → 월간 전환 가능
- 특징: 목표에 여러 국가가 포함된 경우, 별도 고지가 없으면 **국가 간 균등 분배** 규칙을 둠
- 링크: https://sharethemeal.org/en/faq/

#### (2) Charity Miles
- 기부 단위: **거리 단위(마일/km)**
- 구조: 사용자가 이동(걷기/뛰기/자전거) → 앱이 거리 측정 → 스폰서 재원에서 ‘거리당’ 기부금 적립(상한/재원 조건 존재)
- 링크: https://charitymiles.org/terms  /  https://charitymiles.org/faq

#### (3) Kiva
- 단위: **$25 단위(마이크로론)**
- 구조: 기부가 아니라 ‘대출(Loan)’로 설계되어 **최소 단위/증액 단위가 고정**
- 링크: https://help.kiva.org/hc/en-us

#### (4) Givelify (헌금/기부 앱)
- 단위: 통화 금액 + **정기 기부 스케줄(매일/매주/격주/월간 등)**
- 링크: https://support.givelify.com/hc/en-us

#### (5) Tithe.ly (헌금/기부 플랫폼)
- 단위: 통화 금액 + 정기 기부 + **기부 목적(Fund) 선택** + **수수료 함께 내기(Cover Fees)** 옵션
- 링크: https://get.tithe.ly/help/  (donor/recurring 관련 문서)

#### 14.3.2.3 ODINA에 넣을 ‘실제 화면/결제 단위’ 표준안(정책에 포함되는 샘플 스펙)

##### 14.3.2.3.1 기본 기부 금액 프리셋(한국 기준, KRW)
- 1회: **₩1,000 / ₩3,000 / ₩5,000 / ₩10,000 / 직접 입력**
- 정기(월간 기본): **₩3,000 / ₩5,000 / ₩10,000 / ₩20,000 / 직접 입력**
- 설계 원칙: ‘한 번에 큰 금액’보다 ‘지속 가능한 작은 금액’을 기본값으로 둔다(정기 기부 UX 강화)

##### 14.3.2.3.2 임팩트 단위(선택 표시)
- 표기 방식(예): “₩3,000 = 선교 지원 1단위(예: 번역/교육/현지 운영 1일 지원)”
- 고정 문구(필수): “임팩트 단위는 이해를 돕기 위한 표기이며, 실제 지원 형태는 현지 상황에 따라 현금/물품/바우처/교육 등으로 달라질 수 있습니다.”

##### 14.3.2.3.3 수수료 함께 내기(Cover Fees) 토글(선택)
- 토글 ON 시: 사용자 결제금액 = 기부금(원금) + 수수료 추정치
- 정책 고정: 수수료를 사용자가 부담해도 ‘기부율 80%’ 산정은 **순유입 기준**으로 동일 적용(투명성 리포트에 별도 라인으로 표시)

##### 14.3.2.3.4 다국가/다통화(글로벌)
- 표시 통화: **사용자 로컬 통화 우선**
- 회계 기준 통화: **KRW(또는 USD) 기준으로 환산 저장**(환산 기준일/환율 소스 고정)
- 정책 고정: “표시 환산 금액과 실제 정산 금액은 결제사 정산 기준에 따라 소폭 차이가 있을 수 있음” 문구 포함

#### 14.3.2.4 데이터/정산 엔티티(정책에 포함되는 최소 필드)

| 엔티티 | 필드(요약) | 설명 |
|---|---|---|
| donation_intent | type(A/B/C), country(optional), campaign_id(optional), amount_local, currency, recurring_rule(optional), cover_fees(boolean), impact_unit(optional) | 사용자 ‘의도’(결제 전) |
| donation_payment | payment_provider, gross, fees, refunds, net_inflow, settled_at | 결제사 정산 결과 |
| donation_allocation | allocation_type(국가/파트너), amount, payout_id, status(예: hold) | 재분배 배정 |
| payout_proof | payout_id, proof_files, partner_report, verified_by, verified_at | 증빙·검증 |

---

## 14.4 한국 법인으로서 ‘거쳐야 할 과정’ 전체 지도

> 아래는 “한국 법인(운영사)이 불특정 다수에게 기부를 권유·모집하고, 이를 국내·해외로 재분배”하는 상황을 전제로 한 **준법 프로세스 체크리스트**입니다.

### 14.4.1 큰 갈림길(반드시 먼저 결정)
| 의사결정 | 선택지 | 이 선택이 바꾸는 것 |
|---|---|---|
| ① 우리는 ‘기부금 영수증(세액공제)’을 제공할 것인가? | (A) 제공 안 함(기본) / (B) 제공(지정기부금단체 등 요건 충족) | 법인 형태·신청·공시·발급 프로세스가 크게 달라짐 |
| ② 앱 결제는 ‘기부 전용 결제’로 분리할 것인가? | (A) 기부 전용 결제 레일 / (B) 일반 결제(마켓/IAP 의존) | 수수료 구조·정산 로직·표시 의무가 달라짐 |
| ③ 재분배는 운영사가 직접 송금하는가? | (A) 운영사 직접 송금 / (B) 중간 재단/비영리 법인 통해 송금 | 회계/감사 범위·규모 확장성·리스크가 달라짐 |

**v1.0 기본 결정(권장)**
- ① 영수증 제공: **A(제공 안 함)**
- ② 결제 레일: **A(기부 전용 결제 레일)**
- ③ 재분배: **A(운영사 직접 송금, 단 파트너 검증 강화)**

> 이유: 출시 초기에는 ‘영수증 발급/지정기부금단체’ 요건을 맞추는 비용·시간이 크므로, v1.0은 **투명성/증빙/공개 체계**를 먼저 완성하고 v1.1 이후 단계로 확장합니다.

---

## 14.5 모금(기부금품) 관련 절차 — ‘불특정 다수 + 1천만원 이상’이면 사전등록

### 14.5.1 우리 앱이 해당될 수 있는 행위 정의
- 앱에서 “기부하기” 버튼/배너/팝업 등으로 **출연을 권유·요구**하면, 이는 **기부금품 모집**에 해당될 수 있습니다.

### 14.5.2 사전등록 트리거(운영 룰)
- 아래 조건을 모두 충족하면, 캠페인(또는 분기 단위 모금 계획)에 대해 **사전등록** 절차를 탄다.
  1) **불특정 다수**를 대상으로
  2) **1천만원 이상**을 목표로(또는 결과적으로) 모금하고
  3) 정보통신망 등으로 모집하는 경우

### 14.5.3 사전등록 표준 절차(운영 프로세스)
| 단계 | 산출물(필수) | 내부 담당 | 시스템(앱/백오피스) |
|---:|---|---|---|
| 1 | 모집 계획서(목표액/기간/목적/사용계획) | 기부 위원회 | ‘캠페인’ 엔티티 생성 |
| 2 | 결격사유 확인(대표/임원) | 법무/운영 | 체크리스트 첨부 |
| 3 | 전용계좌/정산체계 설정 | 회계 | 전용계좌 ID 등록 |
| 4 | 등록 신청(관할 등록청/포털) | 운영 | 등록번호/승인일 저장 |
| 5 | 모집 진행(표시 의무) | 운영 | 앱 내 ‘등록정보’ 고정 노출 |
| 6 | 모집 결과 보고 | 회계 | 결과 리포트 자동 생성 |
| 7 | 사용(집행) 및 완료 보고 | 회계+위원회 | 증빙 업로드/열람 |

### 14.5.4 앱 내 ‘표시 의무’ 고정 UI(정책)
- 모금 중인 화면에는 아래 정보를 항상 노출한다.
  - 모집 목적(국가/캠페인)
  - 모집 기간
  - 모집 목표액
  - 등록번호(해당 시)
  - 문의처(이메일/대표번호)

---

## 14.6 ‘지정기부금단체/공익법인’ 확장 로드맵(영수증 제공을 원할 때)

### 14.6.1 v1.1(선택) 목표
- 사용자에게 **기부금 영수증(전자/종이) 발급** 및 세액공제 혜택을 제공하려면, 운영 주체가 관련 요건을 충족해야 합니다.

### 14.6.2 필요한 변화(정책 레벨)
| 항목 | v1.0(영수증 없음) | v1.1(영수증 제공) |
|---|---|---|
| 법인/조직 | 운영사(영리) 단독 가능 | 별도 **비영리법인/사회적협동조합/공익법인 등** 요건 충족 구조가 유리 |
| 홈페이지/공개 | 앱 내 공개 + 자체 페이지 | 정관에 ‘공개’ 조항, 홈택스/홈페이지 공개 의무 강화 |
| 회계/보고 | 분기·연말 공개 | 법정 서식 기반 공시/의무이행 보고 대응 |
| 영수증 발급 | 미제공 | 발급 권한/절차/보관 체계 필요 |

### 14.6.3 v1.1 추진 순서(체크리스트)
1) (선택) 비영리 운영 주체 설계(정관: 잔여재산 귀속, 공개 조항 포함)  
2) 기부금단체 지정/요건 충족(운영기간/회계/홈페이지 등)  
3) 발급 권한 확보(**전자기부금영수증** 등)  
4) 앱에 ‘영수증 요청/발급’ 기능 탑재  

### 14.6.4 v1.1 확장 — 사용자/시스템 변화(최종 요구사항)
| 영역 | v1.0 | v1.1(추가/변경) |
|---|---|---|
| 사용자 권리 | 투명성 리포트 열람 | + 영수증 발급 요청/다운로드 |
| 데이터 수집 | 기부 정산 최소정보 | + 영수증 발급용 정보 **선택 수집(옵트인)** |
| 백오피스 | 분기 정산/집행/공개 | + 발급대장/발급상태/오류관리/정정 프로세스 |
| 외부 연계 | 자체 공개 중심 | + 홈택스 기반 발급/반영 흐름(가능한 범위) |

### 14.6.5 v1.1 ‘영수증 발급’ 사용자 플로우(정책 고정)
- 사용자는 결제 직전 또는 결제 후 ‘영수증 발급 신청’을 선택할 수 있다.
- 영수증 발급 신청 시에만, 발급에 필요한 정보를 수집한다.
- 영수증 발급 정보는 **발급 목적 외 사용 금지**, 발급 완료 후 보관기간 정책에 따라 최소 보관한다.

### 14.6.6 v1.1 발급/정정/취소(운영 룰)
| 상황 | 처리 |
|---|---|
| 발급 요청 접수 | ‘발급 대기’ 상태로 저장(필수 정보 누락 시 즉시 보완 요청) |
| 발급 완료 | ‘발급 완료’ + 발급번호(또는 외부 식별자) 기록 |
| 환불 발생 | 해당 건 ‘발급 취소/정정’ 절차 진행(상태·증빙 동시 갱신) |
| 정보 오류 | ‘정정 요청’ 접수 → 승인 후 재발급/정정 처리(로그 필수) |

### 14.6.7 v1.1 공개/공시 확장(문서 구조)
- v1.0 공개(앱 내 분기/반기/연말)에 더해, v1.1은 법정 서식 기반 공시/의무이행 보고까지 확장한다.
- 앱 내 ‘투명성’ 탭은 **법정 공시와 숫자 일치**(동일 기간/동일 정의) 원칙으로 유지한다.

---

## 14.7 정산 정책(수수료·환불·운영비·기부율) — 최종 공식

### 14.7.1 월별 정산 공식(고정)
- **Gross(총 결제액)**
- **Fees(결제/플랫폼 수수료)**
- **Refunds(환불/차지백)**
- **Net Inflow(순유입액)** = Gross − Fees − Refunds − (필요 시 세금성 공제)

순유입액 분해:
- **Program Grants(기부 집행액)** = Net Inflow × **0.80**
- **Opex(운영비)** = Net Inflow × **min(0.15, 실제 운영비율)**
- **Reserve(준비금)** = Net Inflow × **0.05**

운영비가 15% 미만이면 잔액은 다음 분기 Program Grants로 이월한다.

### 14.7.2 환불/차지백 처리(룰)
- 환불이 발생하면 해당 월 Net Inflow가 감소하며, 그 달의 Program Grants/Opex/Reserve도 동일 비율로 조정된다.
- 분쟁성 차지백이 급증하면 Reserve에서 우선 충당하며, 부족분은 다음 분기 운영비에서 흡수(기부율 80% 최소 유지).

---

## 14.8 재분배(집행) 정책 — 지정 vs 일반

### 14.8.1 공통 집행 타임라인(고정)
- 집행 주기: **분기 1회**
- 집행 마감: 분기 종료 후 **90일 이내**

### 14.8.2 파트너 선정·등급(필수)
| 등급 | 요건(요약) | 효과 |
|---|---|---|
| A | 법인 등록·계좌명 일치·정기 보고·증빙 완비 | 지정/일반 모두 수령 가능 |
| B | 기본 요건 충족, 보고는 분기 단위 | 지정 기부 가능, 일반은 제한 |
| C | 증빙/정산 미흡 또는 리스크 신호 | 신규 집행 중단(개선 후 재평가) |

- 파트너는 최소 연 1회 재검증한다.

### 14.8.3 지정 기부(국가 지정) 집행 룰
- 지정 국가 외 전용 금지
- 파트너가 1곳이면 100% 지급, 2곳 이상이면 사전 고정 비율 또는 등급 가중치로 배분

### 14.8.4 일반 기부 집행 룰(‘운영사 재량’이 아닌 ‘공개 룰’)
- 국가별 배분액 = (일반기부 집행총액) × (국가 우선순위 점수 / 전체 점수 합)
- 쏠림 방지: 단일 국가 상한 **25%/분기**
- 이월 규칙: 파트너 사유로 미집행 시 최대 **2분기 이월**

### 14.8.5 보류/대체 규칙(법령·송금불가·파트너 이슈)
| 트리거 | 처리 |
|---|---|
| 제재/송금불가 | ‘보류’로 상태 표시(최대 6개월) 후 위원회 의결로 대체 경로 결정 |
| 파트너 자격 상실 | 즉시 집행 중단, 동일 국가 내 대체 파트너 우선 |
| 증빙 미제출 | 다음 분기 집행 정지, 개선기간 부여 후 재평가 |

---

## 14.9 운영비 정책(상한 15%) — 범위/통제/공개

### 14.9.1 운영비 범위(정의)
| 대분류 | 포함 항목 |
|---|---|
| 인프라 | 서버/스토리지/모니터링/보안 |
| 운영 | CS/콘텐츠 검수/파트너 관리 |
| 회계·정산 | 회계 기장/정산/세무 |
| 법무·준법 | 약관/정책/등록/보고 |
| 결제 운영 | 결제대행 수수료(단, Fees로 분리 가능한 경우 Fees 우선) |

### 14.9.2 집행 통제(내부 규정)
- 운영비 집행은 월 예산(상한 15%) 내에서만 가능
- 건당 300만원 이상 지출은 위원회 승인(회의록 필수)

---

## 14.10 투명성 공개 정책(앱 내 + 외부 연계)

### 14.10.1 분기 공개 템플릿(앱 내)
| 항목 | 공개 값 |
|---|---|
| 총 결제액(Gross) | 통화별 합계 |
| 수수료(Fees) | 합계 |
| 환불/차지백(Refunds) | 합계 |
| 순유입액(Net Inflow) | 합계 |
| 기부 집행액(80%) | 국가별/파트너별 |
| 운영비(≤15%) | 카테고리별 |
| 준비금(5%) | 기초/증감/기말 |
| 미집행 잔액 | 사유/이월 상태 |

### 14.10.2 반기 공개 템플릿(앱 내)
- 국가별 누적 집행
- 파트너별 누적 집행
- 증빙 묶음(지급 ID, 영수증/전표, 파트너 보고서)

### 14.10.3 연말 공개 템플릿(앱 내)
- 연간 요약(총액/집행/운영비/준비금)
- 준법 현황(등록/보고 이행 체크)
- 감사 수준 보고(내부 검증 + 외부 검증 가능 시 반영)

### 14.10.4 정책 문구 세트(앱/웹/약관) — 최종본

#### 14.10.4.1 기부 화면(선택/요약)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-UI-01 | 기부 유형 선택 | 항상 | “기부 유형을 선택해 주세요: **국가 지정 기부 / 일반 기부 / 특별 기부**” |
| DON-UI-02 | 국가 지정 선택 도움말 | 국가 지정 선택 시 | “국가 지정 기부는 선택한 국가의 승인된 파트너에게만 집행됩니다.” |
| DON-UI-03 | 일반 기부 도움말 | 일반 기부 선택 시 | “일반 기부는 공개된 우선순위 규칙에 따라 여러 국가에 자동 배분됩니다.” |
| DON-UI-04 | 정산 기준 안내(짧게) | 항상 | “결제수수료·환불 등을 제외한 **순유입액 기준 80% 이상**을 기부로 집행합니다.” |
| DON-UI-05 | 운영비 상한 안내(짧게) | 항상 | “운영비는 **순유입액의 15%를 넘지 않도록 상한**을 둡니다.” |

#### 14.10.4.2 결제 직전 ‘최종 확인/동의’(필수 체크)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-CNS-01 | 필수 동의 1 | 항상 | “[필수] 본 기부는 결제수수료·환불 등을 제외한 **순유입액(Net Inflow)** 기준으로 정산되며, 순유입액의 **80% 이상**이 기부(재분배)로 집행됩니다.” |
| DON-CNS-02 | 필수 동의 2 | 항상 | “[필수] 운영비는 순유입액의 **최대 15%**를 상한으로 하며, 상한 미만 잔액은 다음 분기 기부 집행액에 편입됩니다.” |
| DON-CNS-03 | 필수 동의 3 | 국가 지정 선택 시 | “[필수] 국가 지정 기부는 지정 국가 외 용도로 전용하지 않습니다. 단, 법령/제재 등으로 송금이 불가한 경우 ‘보류/대체 규칙’이 적용됩니다.” |
| DON-CNS-04 | 안내 문구 | v1.0 | “(v1.0) 본 기부는 **기부금 영수증 발급 대상이 아닙니다.**” |
| DON-CNS-05 | 선택 동의 | 선택 | “[선택] 분기 투명성 리포트 업데이트 알림을 받겠습니다.” |

#### 14.10.4.3 투명성 탭(분기 리포트 상단 고정 문구)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-TR-01 | 리포트 상단 | 항상 | “이 리포트는 총 결제액에서 수수료/환불 등을 차감한 **순유입액 기준**으로 작성됩니다.” |
| DON-TR-02 | 리포트 상단 | 항상 | “기부 집행은 원칙적으로 분기 1회 진행되며, 분기 종료 후 90일 이내 집행됩니다.” |
| DON-TR-03 | 국가/파트너 상세 | 항상 | “각 지급 내역은 ‘지급 ID’ 기준으로 증빙과 연결됩니다.” |

#### 14.10.4.4 보류/대체(예외 상황 고지)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-HLD-01 | 집행 지연/보류 화면 | 제재/송금불가 | “해당 국가로의 송금이 법령/제재 등 사유로 일시 보류되었습니다. 보류 기간 동안 금액은 별도 관리되며, 상황 해소 시 우선 집행됩니다.” |
| DON-HLD-02 | 대체 동의 화면 | 보류 6개월 경과 등 | “보류가 장기화되어 ‘대체 경로’가 필요합니다. (1) 동일 국가 내 대체 파트너, (2) 다른 국가로 전환, (3) 일반 기부로 전환 중 선택해 주세요.” |

#### 14.10.4.5 특별 기부(캠페인) 표시 의무(캠페인 상세)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-CAM-01 | 캠페인 상세 상단 | 항상 | “캠페인 목적/기간/목표액/집행기한 및 등록정보(해당 시)를 확인해 주세요.” |
| DON-CAM-02 | 캠페인 상세 | 등록 대상일 때 | “본 캠페인은 기부금품 모집 관련 절차에 따라 등록된 정보가 노출됩니다(등록번호, 문의처 포함).” |

#### 14.10.4.6 v1.1 영수증 발급(옵트인 문구)
| 문구 ID | 노출 위치 | 조건 | 문구(최종) |
|---|---|---|---|
| DON-REC-01 | 영수증 옵션 | v1.1 | “기부금 영수증 발급을 신청합니다(선택).” |
| DON-REC-02 | 개인정보 안내 | v1.1 + 신청 | “영수증 발급을 위해 필요한 정보는 발급 목적에 한해 사용되며, 발급 완료 후 정책에 따라 최소 보관됩니다.” |
| DON-REC-03 | 발급 상태 | v1.1 + 신청 | “발급 상태: 접수 → 처리 중 → 발급 완료(발급번호 표시)” |

### 14.10.5 약관/정책 페이지에 들어갈 ‘고정 조항’(최종)
- “운영사는 기부금의 정산·집행·공개를 본 정책에 따라 수행합니다. 정책은 변경될 수 있으나, 변경 시 앱 내 공지 및 적용 시점을 명시합니다.”
- “운영사는 지정 기부의 목적 외 사용을 금지합니다. 단, 송금 불가 등 예외 상황에서 보류/대체 규칙이 적용될 수 있습니다.”
- “운영사는 분기 단위로 기부 총액 및 사용 내역을 투명하게 공개하며, 지급 내역은 지급 ID 기준 증빙과 연결됩니다.”

---

## 14.11 개인정보/보안(기부 신뢰와 직결되는 최소 요건)

### 14.11.1 개인정보 처리방침(필수 고지 체계)
- 앱과 웹(정책 페이지)에서 상시 접근 가능해야 함
- 필수 포함 항목(최소)
  - 수집 항목/목적
  - 보유·이용기간
  - 제3자 제공/위탁(결제·분석·CS)
  - 이용자 권리(열람/삭제/정정/처리정지)
  - 보호책임자/연락처

### 14.11.2 기부/정산 데이터 최소 수집 원칙
- 기부 정산에 필요하지 않은 정보는 최소화
- 공개 리포트는 개인 식별이 불가능하도록 집계 단위로만 노출

---

## 14.12 참조 기준(외부 선례) 요약 — 정책에 반영한 문장

### 14.12.1 국제 ‘기부 효율’ 벤치마크
- **BBB Wise Giving Alliance**: 목적사업(프로그램) 지출 비중 **65%** 이상 권고
- **Charity Navigator**: 프로그램 지출 비중 **70% 이상 선호**(단, 비율만으로 임팩트 단정은 지양)
- 본 정책 반영: 순유입 기준 **80% 이상 집행**(더 강한 약속)

### 14.12.2 종교단체(신뢰 프레임)
- **ECFA**: 거버넌스, 재무기준, 투명성 등 ‘책무성’ 중심 표준
- 본 정책 반영: ‘위원회 승인 + 회의록 + 증빙 + 분기 공개’ 구조 내장

### 14.12.3 사회적기업(기부율 고정 선례)
- **1% for the Planet**: 연 매출의 **최소 1%** 기부 + 매출 증빙 요구
- **Newman’s Own**: 수익을 공익 목적에 환원하는 모델
- 본 정책 반영: ‘정산 공식 고정 + 증빙 공개’ 방식 채택

### 14.12.4 한국 제도(모금 등록·공시·의무)
- 불특정 다수 대상 **1천만원 이상** 모금은 사전등록 트리거로 관리
- 공익법인/지정기부금단체로 확장 시 ‘홈페이지/홈택스 공개’ 및 의무이행 보고 체계로 전환

### 14.12.5 참조 링크(원문) + 정책 반영 요약(핵심만)
| 분류 | 링크 | 핵심 내용 요약 | 본 정책 반영 포인트 |
|---|---|---|---|
| 한국 법령 | https://www.law.go.kr/LSW/lsInfoP.do?lsId=001021 | 온라인 포함 ‘기부금품 모집’의 절차/투명성 제도화 | ‘사전등록 트리거’ 및 ‘캠페인 표시 의무’ 고정 |
| 한국 가이드 | https://easylaw.go.kr/CSP/CnpClsMain.laf?ccfNo=3&cciNo=1&cnpClsNo=1&csmSeq=703&popMenu=ov | 1천만원 이상 모집 시 모집·사용계획서 작성 및 등록 안내 | v1.0에서 ‘등록 절차 체크리스트’로 반영 |
| 한국 공시(제도) | https://www.nts.go.kr/nts/cm/cntnts/cntntsView.do?cntntsId=7755&mi=2392 | 공익법인 결산서류 공시 의무/기한/불이행 제재 안내 | v1.1에서 ‘법정 공시와 숫자 일치’ 원칙으로 확장 |
| 한국 공시(열람) | https://hometax.go.kr/websquare/websquare.html?tm2lIdx=4405000000&tm3lIdx=4405020000&tmIdx=44&w2xPath=%2Fui%2Fpp%2Findex_pp.xml | 공익법인 공시자료 열람/조회 | v1.1에서 ‘외부 공시 링크’ 제공 구조로 확장 |
| 한국 영수증 | https://www.nts.go.kr/nts/cm/cntnts/cntntsView.do?cntntsId=238907&mi=40251 | 전자 발급 제도 개요 | v1.1 ‘영수증 발급’ 기능/옵트인 문구 근거 |
| 한국 영수증(운영) | https://www.nts.go.kr/nts/cm/cntnts/cntntsView.do?cntntsId=238908&mi=40252 | 발급시스템 접근/운영 안내 | v1.1 백오피스 운영 절차에 반영 |
| 국제 벤치마크 | https://give.org/charity-landing-page/bbb-standards-for-charity-accountability | 프로그램 지출 **65%** 권고 등 | ‘순유입 기준 80% 집행’으로 더 강하게 설정 |
| 국제 벤치마크 | https://www.charitynavigator.org/donor-basics/giving-101/Overhead/ | 프로그램 지출 **70% 선호** | 비율 고정 + 증빙/거버넌스로 신뢰 보강 |
| 종교/책무성 | https://www.ecfa.org/content/standards | 책무성 표준 | ‘위원회 승인+회의록+증빙’ 필수화 |
| 사회적기업 | https://www.onepercentfortheplanet.org/membership-info | 매출 1% 기부 + 증빙 | ‘정산 공식 고정 + 증빙’ 접근 채택 |
| 사회적기업 | https://newmansown.org/news/associated-press-paul-newman/ | 공익 환원 모델 소개 | ‘고정 비율+투명 공개’ 방향성 근거 |

---

## 14.13 런칭/운영 체크리스트(실행용)

### 14.13.1 런칭 전(필수)
- [ ] 기부 유형(지정/일반/특별) UI 확정
- [ ] 정산 공식(80/15/5) 백오피스 반영
- [ ] 위원회 구성/규정(회의록 템플릿 포함)
- [ ] 파트너 등급 기준/계약서(증빙 의무 포함)
- [ ] 모금 등록 트리거(1천만원/불특정 다수) 감시 로직
- [ ] 투명성 탭(분기 리포트) 화면 탑재
- [ ] 개인정보 처리방침 게시/동의 플로우 점검

### 14.13.2 분기 운영(반복)
- [ ] 월별 정산 마감(수수료/환불 반영)
- [ ] 위원회 집행 승인
- [ ] 파트너 송금 + 증빙 수집
- [ ] 분기 리포트 공개(앱 내)

### 14.13.3 연말(반복)
- [ ] 연간 결산 리포트 공개
- [ ] 준법 체크(등록/보고/증빙)
- [ ] v1.1(영수증 제공) 전환 여부 의사결정

---

## 14.14 용어 인덱스(굵은 용어 정의)
| 용어 | 설명 |
|---|---|
| **순유입액(Net Inflow)** | 총 결제액에서 수수료/환불 등을 차감한 실제 유입 금액(기부율 산정 기준) |
| **기부 집행액(Program Grants)** | 목적사업(선교/구호 등)으로 실제 지급되는 금액(본 정책: 순유입의 80% 최소) |
| **운영비 상한(Opex Cap)** | 운영 비용이 순유입액의 15%를 넘지 않도록 제한하는 상한 |
| **준비금(Reserve)** | 환불 급증/지급 지연 등 변동성 흡수용 버퍼(본 정책: 순유입의 5%) |
| **지정 기부(Restricted)** | 사용자가 국가/목적을 지정한 기부. 지정 목적 외 전용 금지 |
| **일반 기부(Unrestricted)** | 운영 ‘재량’이 아니라 공개된 규칙(점수 기반)으로 배분되는 기부 |
| **기부금품 모집** | 불특정 다수에게 금품 출연을 권유·요구하는 행위(온라인 포함) |
| **공시/공개** | 분기/연말 등 주기적으로 모금액·활용내역·결산서류 등을 공개하는 행위 |
| **위원회 거버넌스** | 단독 집행을 금지하고 승인·회의록·증빙으로 책임을 분산하는 구조 |
| **기부금 영수증** | 기부 사실을 증명하는 영수증. 세액공제/증빙과 연결될 수 있어 발급 요건·절차·보관이 엄격함 |
| **전자기부금영수증** | 기부금단체가 홈택스 등을 통해 전자 형태로 영수증을 발급·관리하는 제도/체계 |
| **공익법인** | 공익 목적 수행을 전제로 세법상 공시/의무이행 보고 등 추가 의무가 부과될 수 있는 법인 범주 |
| **지정기부금단체** | 기부금 영수증 발급 및 세액공제와 직접 연계되는 지정 요건을 갖춘 단체 범주 |
| **모집·사용계획서** | 모금 목적/기간/목표액/사용계획 등을 명시해 등록/보고의 근거가 되는 핵심 문서 |
| **등록청** | 기부금품 모집 등록을 접수·관리하는 행정기관(관할에 따라 상이) |

# 15장. 부가 콘텐츠 팩 v1 (성경 열람 습관 강화)

- 제작 일자: 2026-02-11 (KST)
- 설계 목적(북극성):
  - **본문 열람량(장/절 오픈)**을 증가시키는 “습관 장치”를 제품 레벨에서 고정
  - 사진·SNS는 수단(Trigger/Discovery)이며, 모든 경로는 최종적으로 **본문(문맥) 열람**으로 연결
- 공통 원칙(필수):
  - (원칙1) 기본값은 **저마찰(Zero/Low Friction)** — “열기 쉬움”이 최우선
  - (원칙2) 모든 보상/탐색 UI는 **본문 열람(문맥 보기)** 버튼을 가장 먼저 노출
  - (원칙3) **66권 커버리지** 제약을 추천·피드·미션에 공통 적용(쏠림 방지)
  - (원칙4) 해석 오남용 방지 **가이드라인 엔진(Allow/Attenuate/Block)**을 모든 부가 콘텐츠에 동일 적용

---

## 15.1 팩 구성 요약(모듈형)

|Pack|이름|핵심 역할|기대 효과(6축)|기본값(권장)|주요 KPI|
|---:|---|---|---|---|---|
|P1|**말씀 리콜(구절 소멸·복원)**|기억 강화(인출)·복습 유도|회상↑↑, 깊이↑, 빈도(설계 의존)|라이트 모드(짧게/1일 1회)|리콜 완료율, 리콜→본문 오픈율|
|P2|**자동 해시태그 & 탐색(정렬/검색)**|발견(Discovery)·재방문|빈도↑, 사회강화↑↑, 확장↑|자동 태그 ON / 공개랭킹 OFF|태그탐색→본문 오픈율, 피드 재방문|
|P3|**66권 인덱스(체크포인트)**|진행률·다양성 강제|확장↑↑, 빈도↑↑|기본 탭 고정(홈 1순위)|30일 서로 다른 ‘책’ 수, 인덱스 오픈율|
|P4|**복습 캘린더(1/3/7/30) & 읽기 큐**|습관 루프 자동화|빈도↑↑, 유지↑|알림 기본 ON(조절 가능)|복습 오픈율, 7/30일 유지|
|P5|**소그룹 루프(7일 본문 큐)**|공동체로 반복 강화|사회강화↑, 빈도↑|소그룹 옵션(교회/친구)|그룹 참여율, 공유→본문 오픈율|

- 권장 릴리즈 순서(“자주+넓게” 우선): **P3 → P2 → P4 → P1 → P5**
- 참고(객관 근거 요약):
  - **인출 연습(Retrieval Practice)**: 테스트/회상이 장기 기억을 강화(Testing Effect)  
  - **분산 연습(Spaced Practice)**: 간격을 둔 반복이 기억에 유리  
  - **습관 형성(Habit Formation)**: 자동성은 반복·저마찰에서 강화  
  - **게이미피케이션(Gamification)**: 행동/동기에 유의미(작은) 효과가 보고됨  
  - (링크: 15.11 참고자료)

---

## 15.2 P1 — 말씀 리콜(구절 소멸·복원)

### 15.2.1 사용자 흐름(최소 3스텝)
1) [홈] “오늘의 말씀 카드” → (선택) “리콜로 보기”
2) [리콜] 구절 일부가 빈칸/희미함 → 사용자가 타이핑 또는 선택형으로 복원
3) [완료] 즉시 **문맥 보기(앞/뒤 포함)** 화면 오픈 + “저장/메모/기도” CTA

### 15.2.2 난이도(마찰 제어가 핵심)
|모드|설명|권장 대상|기본값|
|---|---|---|---|
|고정|소멸 없음(그대로 열람)|대부분 사용자|ON 가능|
|라이트|핵심 단어 1~2개 빈칸(선택형/자동 힌트)|습관 초기|✅ 기본|
|리콜|문장 40~60% 빈칸(타이핑 중심)|의지형 사용자|옵션|

- 강박/이탈 방지 룰(필수):
  - “건너뛰기” 항상 제공(실패해도 **본문 열람 가능**)
  - 하루 최대 1~2회(연속 시도 제한)
  - 자동 힌트(첫 글자/단어은행) 단계형 제공

### 15.2.3 가이드라인 적용 포인트(오남용 방지)
- 리콜 문구/보상 문구는 “예언/점괘” 뉘앙스 금지  
- 사용자의 개인 상황을 단정하지 않고, 항상 **본문 문맥**으로 연결

---

## 15.3 P2 — 자동 해시태그 & 탐색(정렬/검색)

### 15.3.1 태그 택소노미(최소 5축)
|축|태그 예시|생성 소스(우선순위)|
|---|---|---|
|**BookTag(66권)**|#창세기 #요한복음|추천된 구절의 책 정보(정본)|
|**ThemeTag(24주제)**|#위로 #회개 #감사|주제 점수 상위 K|
|SceneTag(120라벨)|#사람 #도시 #십자가|**YOLO/비전** 라벨 Top-K|
|ContextTag(시간/요일)|#토요일 #자정|시스템 시간(온디바이스)|
|OCRTag(텍스트)|#간판 #성경구절|**OCR** 결과(허용된 범위)|

- “핵심 태그 3개(필수)”를 고정: **BookTag + ThemeTag + SceneTag 1개**
- 나머지는 확장 태그로 분리(검색/정렬에만 사용)

### 15.3.2 탐색 UX 규칙(본문 중심 강제)
- 피드에서 카드 탭 시 기본 이동:
  - (기본) **본문 열람(문맥)** → (보조) 사진 보기
- 정렬 기본값:
  - “최근 본문” / “내가 저장한 본문 기반” (인기 랭킹은 기본 OFF)

### 15.3.3 프라이버시/안전(필수 제한)
- 위치는 기본 OFF(사용 시에도 도시 단위 등 **거친 수준**만)
- OCR 텍스트는 공개 공유 시 **민감정보 필터** 후 노출(정책 테이블로 통제)

---

## 15.4 P3 — 66권 인덱스(체크포인트)

### 15.4.1 인덱스 화면(필수 기능)
- 66권 그리드:
  - 각 책: “체크된 장 수 / 마지막 열람 일자 / 대표 주제”
- 책 선택 시:
  - 장(Chapter) 리스트 → 체크포인트(절) 표시 → 1탭 **문맥 열람**

### 15.4.2 체크포인트 규칙(데이터 일관성)
- 체크포인트는 “사진”이 아니라 “구절(책/장/절)”에 귀속
- 동일 구절 중복 체크는 합치기(최초 날짜/최근 날짜 모두 유지)

### 15.4.3 66권 커버리지 강제(추천/미션 공통)
- 최근 N회 추천에서 동일 ‘책’ 과다 반복 시 감쇠
- “이번 주 5권” 등 **확장 미션**을 기본 제공(보상은 본문 열람으로 연결)

---

## 15.5 P4 — 복습 캘린더(1/3/7/30) & 읽기 큐

### 15.5.1 복습 캘린더(자동 루프)
- 저장한 구절/최근 열람 본문을 기준으로 1·3·7·30일에 복습 카드 생성
- 복습 카드는 항상 **문맥 열람**이 1순위

### 15.5.2 읽기 큐(Reading Queue)
- “오늘 읽을 목록”을 자동 생성:
  - (입력) 저장 구절, 관심 태그, 66권 커버리지 부족 영역
  - (출력) 3~5개 본문 카드(짧게)

---

## 15.6 P5 — 소그룹 루프(7일 본문 큐)

- 목적: “사회강화”를 통해 **본문 열람 빈도**를 안정적으로 유지
- 구조:
  - 7일 큐(하루 1개 본문 + 문맥) → 체크(읽음) → 짧은 반응(이모지/한 줄)
- 원칙:
  - 경쟁(랭킹)보다 “완주/동행” 중심(피로 최소화)
  - 공개 공유는 기본 보수 정책 유지(가이드라인 엔진 동일 적용)

---

## 15.7 이벤트/데이터(개발 I/O 요약)

### 15.7.1 이벤트 목록(핵심만)
|이벤트|언제 발생|필수 필드(요약)|
|---|---|---|
|verse_shown|구절 카드가 화면에 노출|verse_ref, source(사진/피드/인덱스), policy_decision|
|verse_open_context|문맥 열람 오픈|verse_ref, opened_depth(절 수)|
|verse_saved|저장/북마크|verse_ref, save_type|
|recall_started|리콜 시작|verse_ref, recall_mode|
|recall_completed|리콜 완료|verse_ref, success(true/false), hint_used|
|tag_generated|태그 생성|photo_id, tags(core/extra)|
|tag_search|태그로 탐색|tag, sort_mode|
|index_open|66권 인덱스 오픈|entry_point|
|index_checkpoint_added|체크포인트 추가|verse_ref, photo_id(optional)|

### 15.7.2 공통 필드(비기술자용 정의)
- user_key: 사용자 식별(해시/익명 키)
- verse_ref: “책-장-절” 표기(예: 요 3:16)
- policy_decision: **Allow/Attenuate/Block** 결과
- source: 어디서 들어왔는지(사진/피드/인덱스/복습)

---

## 15.8 품질·오남용 방지 체크(부가 콘텐츠 공통)

- 체크리스트(필수):
  - “결정·심판·예언” 단정 문구가 UI/카피/리콜 보상에 포함되지 않는가?
  - 모든 경로가 **문맥 열람**으로 연결되는가?
  - 태그/공유에서 민감정보(얼굴/이름/주소/전화) 노출을 억제하는가?
  - 66권 커버리지 쏠림(특정 책/특정 주제)에 대한 감쇠 룰이 작동하는가?

---

## 15.9 KPI & A/B(효과 검증 템플릿)

### 15.9.1 북극성 KPI(5개 고정)
1) DAU당 **본문 열람 오픈 수**
2) 평균 열람 깊이(문맥 기준 절 수)
3) 7일/30일 유지율
4) 30일 **서로 다른 ‘책’ 수(66권 커버리지)**
5) 복습 오픈율(1/3/7/30)

### 15.9.2 A/B 실험 예시(팩별 1개씩)
|팩|A|B|판정 KPI|
|---|---|---|---|
|P1|리콜 없음|라이트 리콜|복습/본문 오픈 증가 + 이탈 감소|
|P2|태그 3개 고정|태그 10개 확장|피드→본문 오픈율, 재방문|
|P3|인덱스 숨김|인덱스 홈 고정|30일 서로 다른 책 수|

---

## 15.10 화면/컴포넌트 목록(디자인·개발 공통)

|화면|핵심 컴포넌트|필수 CTA|
|---|---|---|
|홈|오늘의 본문, 복습 카드, 66권 인덱스 진입|**문맥 열람**|
|리콜|빈칸/타이핑, 힌트, 건너뛰기|문맥 열람|
|태그 탐색|태그 칩, 정렬, 결과 카드|문맥 열람|
|66권 인덱스|66권 그리드, 장 리스트, 체크포인트|문맥 열람|
|복습 캘린더|리마인드 카드, 읽기 큐|문맥 열람|
|소그룹|7일 큐, 읽음 체크, 짧은 반응|문맥 열람|

---

## 15.11 참고자료(근거 링크)
- Testing Effect(인출 연습): Roediger & Karpicke, 2006 (PubMed) — https://pubmed.ncbi.nlm.nih.gov/16507066/
- Distributed Practice(분산 연습) 메타분석: Cepeda et al., 2006 (PubMed) — https://pubmed.ncbi.nlm.nih.gov/16719566/
- Habit Formation(습관 형성): Lally et al. (EJSP) — https://onlinelibrary.wiley.com/doi/10.1002/ejsp.674
- Gamification(게이미피케이션) 메타분석: Sailer & Homner, 2020 (Springer) — https://link.springer.com/article/10.1007/s10648-019-09498-w

# 부록 A — 전 세계 성경 앱·경쟁사 분석 요약 (v3)

## A.1 부록 개요

1. **목적**
    

- 이 부록은 성경 프로젝트와 직접적으로 비교·참조해야 할 **대표 성경 앱·기독 앱**들의 특징을  
    **한눈에 볼 수 있는 요약 표 + 인사이트** 형태로 정리한다.
    
- 특히 `특색_성경앱_조사결과.xlsx`에 정리된 **11개 특색 성경 앱**을 중심으로,
    
    - **지역별/언어별 특징**
        
    - **핵심 기능 묶음**
        
    - **차별화 포인트**
        
    - **사용자 기반(다운로드/활성 현황)**  
        를 구조적으로 정리하여, **3장(글로벌 시장·경쟁 환경)** 및 **8장(글로벌 전략)**의 근거 데이터로 활용한다.
        

2. **범위**
    

- 본 부록 A는 다음을 포함한다.
    
    1. 11개 특색 성경 앱 **요약 비교 표**
        
    2. 앱들을 묶는 **유형별 분류(로컬 모국어/저사양/검열 회피/글로벌 메이저 등)**
        
    3. 각 유형에서 **성경 프로젝트가 반드시 벤치마킹해야 할 요소**
        
    4. 성경 프로젝트의 **포지셔닝·전략적 시사점**
        

3. **데이터 출처**
    

- 내부 조사 파일
    
    - `특색_성경앱_조사결과.xlsx` (11개 앱의 정성·정량 요약)
        
- 공개 자료(YouVersion 등)
    

---

## A.2 분석 프레임(기준 축)

본 프로젝트에서 **전 세계 성경 앱**을 비교할 때 사용하는 기본 축은 다음과 같다.

1. **지역·언어 축**
    

- 어떤 **국가/지역**을 1차 타깃으로 하는가
    
- **모국어 번역**을 어느 수준까지 지원하는가
    
- **이중 언어(병렬)** 제공 여부
    

2. **기능 축**
    

- **텍스트 성경** / **오디오 성경** / **읽기 계획(QT)** / **노트·북마크**
    
- **오프라인** 기능 유무
    
- **사진·이미지 생성**, **AI 상담/추천**, **퀴즈/학습** 여부
    

3. **접근성·환경 축**
    

- **저사양폰·저속 네트워크**를 위한 최적화
    
- **검열·규제 회피**를 고려한 배포 방식 (예: QR, 오프라인 패키지)
    
- **교회/공동체 연계** 수준 (교회 공식 추천, 설교 연동 등)
    

4. **수익·운영 축**
    

- 전면 **무료** vs **광고 기반** vs **구독/인앱 결제**
    
- **기부·사역형 모델** 여부
    
- 단체(교단, 미션 단체)가 운영 주체인지 여부
    

5. **지표 축**
    

- 공개된 **다운로드 수**, **활성 사용자(추정)**, **국가별 인기 순위**
    
- 특정 국가/언어권에서의 **“기본 앱” 포지션** 여부
    

---

## A.3 분석 대상 앱 요약 표 (11개)

> ID는 내부 참고용 코드(부록 전체에서 일관되게 사용).

|ID|앱 이름|대상 국가/지역|지원 언어|주요 기능/특징 요약|인기 이유/차별점·사용자 현황 요약|
|---|---|---|---|---|---|
|A01|Yoruba Bible & English + Audio|나이지리아 (요루바족)|요루바어, 피진어, 영어|요루바-영어 병렬 읽기, 오디오 성경, 오프라인|요루바어 완전 오프라인 제공, 교회 공식 승인 / 1천+ 다운로드, 지역 교회 권장|
|A02|Hausa Bible – Hausa+KJV+NIV|나이지리아, 니제르|하우사어, 영어|하우사어 성경, 영어 병렬, 오디오, 퀴즈|인터넷 없이 모국어·영어 성경 사용, 디아스포라에 유용 / 10만+ 다운로드, 전 세계 하우사 신자 사용|
|A03|Swahili Bible (Biblia Takatifu)|케냐, 탄자니아|스와힐리어, 영어|스와힐리 연합 번역, 오프라인, 북마크, 공유 기능|스와힐리권에서 가정·교회 기본 앱 / 100만+ 다운로드|
|A04|초원 성경AI (Chowon Bible AI)|대한민국|한국어|AI 상담, QT 묵상, 공인 한글 성경, 앱 내 AI 기반 Q&A|AI 기반 성경 플랫폼, 개역개정 무료 제공 / 4.9 평점, 신세대 중심 성장|
|A05|YouVersion Bible App|글로벌(특히 인도, 한국, 일본)|1750+개 언어|수천 번역, 읽기 계획, 오디오, 구절 이미지, 소셜 기능|전 세계 최대 규모 성경 앱, 수억+ 설치, 글로벌 미션 플랫폼 포지션|
|A06|YouVersion Bible App Lite|아프리카, 남아시아|1000+ 언어|저사양폰용 Lite, 부분 오프라인, 오디오 중심|데이터/요금제 제약이 큰 지역 특화, 저사양·저속 네트워크 대응 / 수백만 다운로드|
|A07|Cheshme (샘 앱)|이란|페르시아어, 소수언어 18종|QR 배포, 성경/오디오 다운로드, 설교·찬양, 오프라인 패키지 중심|종교 검열 회피에 최적화된 무료 복음 앱, 지하교회 중심 사용|
|A08|Arabic Bible Offline|중동, 북아프리카|아랍어|아랍어 성경 오프라인, 북마크, 하이라이트|인터넷 없이 안전하게 성경 열람 / 수십만 다운로드, 아랍권 기독교인 기본 앱|
|A09|바이블 애플 (Bible Apple)|대한민국|한국어, 영어|6개 역본 무료, 찬송가, 병렬 비교, 방송사 연계|GOODTV 제작, 광고 기반 무료, 교회 추천 / 수백만 다운로드|
|A10|Alkitab Multiversi SABDA|인도네시아|인도네시아어|다중 역본, 절별 대조, 오프라인, 노트|SABDA 재단 제작, 성경 공부용에 최적화, 교회 교재로 활용|
|A11|WeDevote (微读圣经)|중국|중국어, 영어|세련된 UI, 중국어 읽기 계획·해설, 일부 오디오|중국 기독교인 제작, 검열 이후에도 우회 사용, 수천만 다운로드, 지하교회 널리 사용|

## A.4 앱 유형별 분류 및 인사이트

### A.4.1 유형 분류

1. **로컬 모국어·오프라인 중심형**
    

- A01 Yoruba / A02 Hausa / A03 Swahili / A08 Arabic / A10 Alkitab
    
- 특징
    
    - 특정 언어권(요루바, 하우사, 스와힐리, 아랍어, 인니어)의 **모국어 성경**을  
        **오프라인**으로 안정적으로 제공
        
    - **교회·가정에서 “기본 앱”** 포지션 (와이파이/데이터 없이도 사용 가능)
        
- 인사이트
    
    - 저소득·저인프라 지역에서 **“오프라인 모국어 성경” = 필수 인프라**라는 점을 보여줌
        
    - 프로젝트의 **오프라인 팩(on-device)** 전략 설계 시 직접적인 참고 대상
        

2. **글로벌 메이저 & Lite 버전형**
    

- A05 YouVersion / A06 YouVersion Lite
    
- 특징
    
    - 수천 개 **성경 번역**, 수백~수천 언어 커버, **읽기 계획·노트·공유·오디오** 등 풀 스택 기능
        
    - Lite 버전은 **저사양·저데이터 환경**에 최적화, 오프라인 강조
        
- 인사이트
    
    - “**성경 전체 UX의 표준**”을 사실상 정의하고 있음
        
    - 본 프로젝트는 이들과 **경쟁**하기보다는,
        
        - 사진→말씀 **특화 모듈**
            
        - **협력/연동 가능성** (예: 읽기 계획·본문 뷰는 기존 앱, 사진→말씀은 Bible Moment)  
            를 염두에 둔 전략이 필요
            

3. **검열·규제 회피형(고위험 지역)**
    

- A07 Cheshme / A11 WeDevote
    
- 특징
    
    - **QR 배포**, 오프라인 패키지, 앱 스토어 검열 회피 등 **비정규 배포 경로**
        
    - 중국·이란처럼 **종교 규제 강한 국가**에서 생존 가능한 UX·배포 구조
        
- 인사이트
    
    - 본 프로젝트도 향후 **보안 모드·위장 모드·오프라인 패키지**를 준비해야 함
        
    - 위치·로그·사진 관리에서 **더 엄격한 프라이버시 기준** 필요 (3장·10장과 직결)
        

4. **국가 단위 통합형·방송/미디어 연계형**
    

- A04 초원 성경AI / A09 바이블 애플
    
- 특징
    
    - 한 국가(대한민국)를 대상으로 **공인 번역 + AI/QT + 방송/콘텐츠**를 통합
        
    - 교회·방송사·플랫폼이 연계된 **“국가 단위 통합 성경 앱”** 성격
        
- 인사이트
    
    - 한국 내에서 성경 프로젝트는 이들과 **직접 경쟁**하기보다,
        
        - **“사진→말씀 묵상 도구 + 월드맵”**이라는 **틈새 포지션**
            
        - 교단/교회와의 **보완적 관계** (예: QR 연동, 설교 시 예시 사진 활용)  
            로 가는 것이 자연스러움
            

---

## A.5 성경 프로젝트 관점의 시사점

### A.5.1 우리가 반드시 가져가야 하는 것

1. **오프라인·저사양 최적화**
    

- A01·A02·A03·A08·A10·A06 사례에서 보이듯,
    
    - **오프라인 성경**과
        
    - **저사양 단말 최적화**는  
        **아프리카·남아시아·중동**을 포함한 144개국 확장에 필수 요소이다.
        
- 성경 프로젝트의 **온디바이스 AI·오프라인 팩 설계**는,  
    단순 성능 최적화가 아니라 **글로벌 접근성 전략의 핵심**으로 위치시켜야 한다.
    

2. **모국어 + 병렬(이중 언어) 구조**
    

- A01, A02처럼 **모국어+영어 병렬**은
    
    - 디아스포라, 이중 언어 사용자의 **성경 이해·학습**에 매우 효과적이다.
        
- 사진→말씀 추천 결과도
    
    - **모국어(예: 개역개정)** + **전세계 공용 번역(예: NIV)**  
        병렬 노출 구조를 유지하는 것이,  
        **글로벌 서비스·선교 효과·신학 검증** 면에서 동시에 유리하다.
        

3. **검열·위험 지역을 염두에 둔 보안·프라이버시 설계**
    

- A07, A11 사례는
    
    - 앱 스토어 정책·정부 규제를 회피하기 위한 **보안 모드**,
        
    - **QR 기반 배포**, **오프라인 설치 패키지** 등  
        **고위험 지역 특화 전략**의 필요성을 명확히 보여준다.
        
- 성경 프로젝트의
    
    - **좌표 미수집**, **지오해시·퍼징**, **민감 사진 필터링**은  
        단순 기능이 아니라, 이런 국가에서도 **안전하게 권장 가능한 앱**이 되기 위한 전제 조건이다.
        

### A.5.2 의도적으로 달라야 하는 것

1. **BM(수익 모델)**
    

- 다수 앱이 **광고·구독·인앱 결제**에 의존하는 반면,  
    성경 프로젝트는 **기부·후원·교단 지원**에 기반한 **비상업형 BM**을 전제로 한다.
    
- 이는 A05·A09 등과의 경쟁에서 **강력한 차별 포인트**가 된다  
    (특히 "종교 앱의 상업화 피로감"을 느끼는 사용자층에게).
    

2. **초점: “읽기”가 아니라 “사진→말씀 묵상 루프”**
    

- 기존 앱들은 대부분 **“본문 읽기·계획 수행”**이 중심이다.
    
- 성경 프로젝트는
    
    - **사진 한 장**을
        
    - **상징·주제·상황**을 통해 해석하고
        
    - 거기에 맞는 **1–2절과 묵상 카드**를 제시하는  
        **완전히 다른 시작점**을 가진다.
        
- 따라서 **기능 폭을 넓히기보다**,  
    **사진→말씀 묵상 루프의 깊이·품질**에 집중하는 것이 전략적으로 타당하다.
    

3. **신학적 안전성·투명성**
    

- 대부분 앱은 **교단 교리 기준**을 전면에 내세우지 않는다.
    
- 성경 프로젝트는
    
    - **예장통합 기준**,
        
    - **신학팀 리뷰·가이드라인**,
        
    - **Why-card(이 구절을 선택한 이유)**를 통해  
        “**신학적으로 안심되는 자동 추천**”이라는 완전히 새로운 기준을 제시할 수 있다.
        

---

## A.6 요약

1. **11개 특색 성경 앱**은
    
    - 모국어/저사양/검열 회피/글로벌 메이저/국가 통합형 등  
        여러 유형의 **성공 패턴**을 보여준다.
        
2. 성경 프로젝트는 이들을
    
    - **기능적으로는 벤치마킹**하되,
        
    - **BM·프라이버시·AI·신학 안전성·사진→말씀 루프**에서  
        **확실히 다른 포지션**을 취함으로써  
        **“사진 기반 성경 묵상 도구”라는 독자 영역**을 확보해야 한다.
        
3. 이 부록 A는
    
    - 3장 **글로벌 시장·경쟁 환경**의 **정량·정성 근거**로,
        
    - 8장 **글로벌 전략**의 **우선순위·현지화 전략** 수립을 위한  
        **기준 데이터 셋**으로 사용한다.
        

---

## A.7 글로벌 성경 앱 생태계 요약 (144개국 우선순위 지표 연동)

> 이 절(A.7)은 144개국 우선순위 산정 기획서에서 정리한 **지역별 성경 앱 상위 1~3위 구조 요약 표**를, 앞선 A.3~A.6 경쟁사 분석 프레임에 맞춰 재구성한 것이다.  
> 각 표의 수치·다운로드 규모는 스토어·리포트 기준 추정값이며, **AE(앱 생태계 기회 점수)**, **PP(파트너십 잠재력 점수)** 및 8장 글로벌 전략 우선순위 결정을 위한 레퍼런스로 사용된다.

---

### A.7.1 북미 (North America)

|지역/국가|1위 앱 (기본 정보)|2위 앱 (기본 정보)|3위 앱 (기본 정보)|앱 생태계 특징·인기 요인|
|---|---|---|---|---|
|미국 (USA)|**YouVersion Bible App** · 글로벌 5억+ 다운로드, 평점 4.9 · 1,200+ 언어/1,880개 번역, 오디오 성경, 수백 가지 묵상 계획, 구절 강조/노트/북마크, 친구와 함께 읽기 등 종합 기능|**Bible Gateway** · 100만+ 다운로드(앱 기준) · 90여 개 번역, 오디오 성경, 읽기 계획, 구절 병렬 비교, 주석/해설|**Blue Letter Bible** · 100만+ 다운로드 수준, 평점 4.7± · 원어 해설, 히브리어/그리스어 사전, 강해 등 심화 공부 특화, 오프라인 지원|YouVersion이 디폴트 앱처럼 사용되며, Bible Gateway/Blue Letter Bible은 **성경 연구·번역 비교·원어 공부용**으로 보조 사용. 사진·감성 기반 앱은 거의 없음.|
|캐나다|**YouVersion Bible App** · 영어/프랑스어 인터페이스 제공, 다언어 지원|**YouVersion (불어 인터페이스)** · 캐나다 불어권 사용자 중심|**Bible.is** · 500만+ 다운로드, 평점 4.6 · 수백 개 오디오 드라마 성경, 1300+ 언어 지원|영어/불어 이중 언어 환경에서 YouVersion이 통합 플랫폼 역할. 북부/원주민 지역에서는 **오프라인 오디오 성경(Bible.is)** 활용도가 높음.|
|멕시코|**Biblia (YouVersion)** · 멕시코 내 수백만 사용자 추정, 스페인어 RVR1960 등 다수 번역, 오디오/읽기 계획|**Biblia Reina Valera con Audio (YouVersion 스페인어판)** · 1억+ 다운로드(글로벌), 평점 4.9 · 스페인어권에서 최다 사용|**La Biblia en Español (Warp Studios)** · 100만+ 다운로드, 평점 4.9 · 완전 오프라인, 북마크/노트, 구절 이미지 공유|스페인어권 전반에서 **Reina Valera 계열 + 오프라인 앱**이 강세. 가톨릭·개신교 모두 사용. 사진/감성 기반 차별화 여지는 큼.|
|기타 북중미(과테말라, 도미니카 등 스페인어권)|**YouVersion (Biblia)**|**Reina Valera 오프라인 앱들**|**Bible.is (스페인어)**|중미는 네트워크 환경이 고르지 않아 **오프라인 기능**이 중요. 영어권(자메이카 등)은 미국과 유사하게 YouVersion, Bible.is 중심. 불어권 아이티는 YouVersion(불어) + Louis Segond 앱이 상위권.|

---

### A.7.2 남미 (South America)

|지역/국가|1위 앱 (기본 정보)|2위 앱 (기본 정보)|3위 앱 (기본 정보)|앱 생태계 특징·인기 요인|
|---|---|---|---|---|
|브라질|**Bíblia Sagrada (모비딕)** · 안드로이드 1천만+ 다운로드, 평점 4.9 · 브라질 iBest 앱 어워드 2021~2024 연속 수상, 누적 2천만+ 다운로드 · 완전 오프라인, 오디오 성경/해설, 성경사전, 읽기 계획, 찬송가, 영상 설교, 브라질 성서공회 공인 번역 제공|**YouVersion Bíblia** · 글로벌 5억+ 다운로드, 포르투갈어 NVI/ARA 등 50+ 번역본, 오디오, 묵상 계획, 교제 기능, 무료·다국어|**Bíblia JFA Offline** 등 JFA 오프라인 앱 · 수백만 다운로드, 평점 4.8± · JFA 번역 중심, 오프라인·기본 기능 충실|현지 공신력(성서공회·현지 신학자 해설) + **오프라인/찬송가/해설** 통합 앱이 매우 강력. 사진·감성 UX 측면에서는 여전히 여유 공간 존재.|
|아르헨티나·콜롬비아 등 스페인어권 남미|**YouVersion (Biblia App)**|**Bible.is (스페인어)**|**Santa Biblia Reina Valera 오프라인 앱들**|YouVersion이 1위 플랫폼, RVR 오프라인 앱이 **데이터 절약·단순 읽기용**으로 인기. 일부 국가는 가톨릭 기반 La Biblia Latinoamericana 앱도 사용.|
|페루·칠레·에콰도르|**YouVersion**|**Bible.is (스페인어 오디오)**|**Reina Valera 오프라인 앱들**|구성은 콜롬비아와 거의 유사. **오프라인 + 오디오** 조합이 강세.|
|볼리비아·파라과이|**YouVersion**|**Reina Valera/Quechua/Guarani 성경 앱**|**기타 오프라인 앱**|스페인어 외 토착어(케추아, 과라니) 성경 앱 사용. 그러나 설치 수 기준 Top3는 여전히 글로벌 스페인어 앱이 우세.|
|우루과이·베네수엘라 등|**YouVersion**|**Bible.is**|**현지 소규모 오프라인 성경 앱**|인터넷 보급률이 높아 YouVersion 사용 비중이 크고, Bible.is는 오디오·드라마 성경으로 보완.|

---

### A.7.3 유럽 (Europe)

|지역/국가|1위 앱 (기본 정보)|2위 앱 (기본 정보)|3위 앱 (기본 정보)|앱 생태계 특징·인기 요인|
|---|---|---|---|---|
|영국 (UK)|**YouVersion Bible** · 글로벌 1위, NIV/KJV/ESV 등 다수 번역, 묵상·기도 기능|**Bible Gateway** · 100만+ 다운로드, 다중 번역 비교/주석/해설|**Bible.is** · 드라마틱 오디오 성경, 오프라인 청취|국교회·복음주의 교회 모두에서 NIV/ESV 중심. YouVersion이 일상 앱, Bible Gateway/Blue Letter Bible류는 연구·설교 준비용.|
|독일|**YouVersion Bibel** · 루터/호페르트 등 독일어 번역 + 오디오|**Die-Bibel.de App (독일 성서공회)** · 루터 성경 공식 앱, 오프라인·광고 없음, 십자참조/검색|**BibleServer (ERF)** · ERF 방송국 제공, 여러 독일어/영어 번역 + 묵상/강해 연계|YouVersion이 젊은층, 성서공회/ERF 앱이 **전통 교회·중장년층** 신뢰 기반. 로컬 기관 제공 앱의 신뢰도가 매우 큼.|
|프랑스|**Bible Louis Segond** · 500만+ 다운로드, 평점 4.7, 오프라인 루이 세공 번역, 야간 모드/북마크/검색|**YouVersion Bible (La Bible App)** · 2500+ 성경 버전, 프랑스어 인터페이스, 묵상 계획|**Bible App Lite (YouVersion 경량판)** · 400만+ 다운로드(글로벌), 오프라인 중심 경량 앱|프랑스 자체보다 **불어권 아프리카**까지 포함한 불어권 전체에서 Louis Segond 오프라인 앱이 압도적. 데이터 절약, 가벼움이 핵심.|
|이탈리아|**YouVersion Bibbia**|**La Bibbia CEI (가톨릭 성서공회 앱)**|**Bible.is (Italian)**|개신교 인구가 적어, 글로벌 앱 의존도가 크고, CEI 가톨릭 앱이 보조. 사진·감성 기반 앱 진출 여지가 매우 큼.|
|스페인|**YouVersion Biblia**|**La Biblia Reina Valera 앱들**|**Bible.is (스페인어)**|남미 스페인어권과 구조가 유사. 가톨릭 국가지만 개신교 소수는 중남미식 앱 구성을 그대로 사용.|
|러시아|**Библия (YouVersion 러시아어판)**|**Православная Библия (정교회 앱)**|**Bible.is (Russian)**|정부 검열 이슈로 VPN 등을 활용. **오프라인 사용 가능 앱** 선호. 정교회 앱이 강세지만, 복음주의권에서는 YouVersion/Bible.is도 널리 사용.|
|기타 유럽(북유럽·동유럽 등)|각국 성서공회 공식 앱 + YouVersion|Bible.is 및 현지어 성경앱|기타 로컬 오프라인 앱|북유럽: 성서공회 공식 앱 신뢰도 높음. 동유럽: 현지어 앱 + YouVersion 조합. 다국어 지원과 공식 기관 앱의 신뢰성이 핵심 요인.|

---

### A.7.4 아시아 (Asia)

|지역/국가|1위 앱 (기본 정보)|2위 앱 (기본 정보)|3위 앱 (기본 정보)|앱 생태계 특징·인기 요인|
|---|---|---|---|---|
|대한민국|**다번역성경찬송 / Bible Apple (GOODTV)** · 안드로이드 500만+, iOS 70만+ · 국내 6종 한글 성경 + 영어 성경 포함 19개 번역, 새찬송가 645곡, 통독 기능, 대부분 오프라인, 7개 언어 UI|**갓피플성경** · 50만+ 다운로드, 원어/스트롱 번호/주석 등 신학 공부 특화, 일부 유료 모델|**YouVersion 성경(+오디오)** · 1억+ 다운로드(글로벌), 40+ 언어 UI, 900+ 언어 성경, 이미지 공유/묵상 계획|GOODTV/갓피플 등 **국내 기독 미디어·출판 기반 앱**이 강력. 찬송가/통독/원어공부 등 깊이 있는 기능 선호. 사진·감성 기반 앱은 사실상 공백.|
|일본|**聖書 – Bible App (YouVersion 일본어판)**|**聖書 新共同訳 (일본 성서협회)**|**WeDevote 微読聖経 (중문/일문 지원)**|개신교 인구가 매우 적고, YouVersion이 디지털 친화성으로 젊은층 1위. 보수 교회는 성서협회 앱 사용. 사진·감성·커뮤니티형 앱 여지가 큼.|
|중국|**WeDevote 微读圣经** · 수천만 다운로드, 중국 내 최대 성경 앱, 여러 공식 번역, 오디오/읽기 계획/묵상/팟캐스트, 오프라인 설계|**Bible App Lite (YouVersion 경량판)** · 완전 오프라인 중심, 저사양 폰용|**eBible(圣经) 계열 로컬 앱** · 공동번역, CUV 등 비공식 출처 포함, 오프라인 읽기 위주|검열·스토어 제한으로 **온디바이스·오프라인·로컬 서버 구조**가 핵심. WeDevote가 사실상 중국판 YouVersion 역할. OD 점수가 매우 높게 책정될 국가.|
|인도|**YouVersion (힌디·타밀·텔루구 등 60+ 인도 언어 지원)**|**Hindi Bible Pavitra** · 100만+ 다운로드, 힌디어+영어, 오프라인, 오디오, 읽기 계획|**Tamil Bible (Softcraft)** · 100만+ 다운로드, 타밀어 오프라인, 오디오·검색·노트 제공|다언어 구조로 인해 지역별 로컬 앱이 강세. 농촌/저소득층에서는 오프라인 앱 선호. 사진 기반·감성형 앱은 거의 없음.|
|필리핀|**YouVersion (Tagalog/English)**|**Bible.is (Tagalog Audio)**|**Ang Biblia (Tagalog)**|영어·따갈로그 이중 사용. Bible Gateway, Logos 등 미국 앱도 꽤 쓰임. 오디오·시각장애인 사역에 Bible.is가 중요.|
|인도네시아|**Alkitab (SABDA/Yuku)** · 500만+ 다운로드, 평점 4.8, 인니어·지역어·원문까지 다중 번역, 광고 없는 무료, 찬송가·주석 연동, 대부분 오프라인|**YouVersion Alkitab** · 다국어 + 커뮤니티 기능, 청년층 중심|**Bible.is (Indonesian)** · 오디오·수화 성경, 오프라인 청취|현지 사역 단체(SABDA)가 만든 로컬 강자가 1위. 섬이 많고 네트워크 편차 커서 오프라인·경량·다언어 지원이 필수.|
|말레이시아|**YouVersion (Malay & English)**|**Alkitab BM (Bahasa Malaysia)**|**Bible.is (Malay)**|말레이어·중국어·영어 등 다언어 교회 구조. 글로벌 앱 + 로컬 BM 앱 혼용.|
|태국|**YouVersion (태국어)**|**Thai Bible (태국성서공회 앱)**|**Bible.is (Thai)**|태국성서공회 공식 앱이 일상 읽기, Bible.is는 오디오용. 사진·감성 UX 기반 앱은 공백.|
|베트남|**Kinh Thánh (YouVersion 베트남어판)**|**Vietnamese Bible (VIE) 오프라인 앱**|**Bible.is (Vietnamese)**|공식/비공식 오프라인 앱이 섞여 있음. 네트워크 품질에 따라 오프라인 선호.|
|기타 아시아(싱가포르, 홍콩, 네팔, 방글라데시, 파키스탄, 중앙아시아 등)|싱가포르/홍콩: YouVersion 1위, Bible.is 2위. 네팔: Nepali Bible(성서공회) 1위, YouVersion 2위. 방글라데시/파키스탄: 현지어 Bible.is 앱|위와 동일|위와 동일|영어권·다언어 도시에선 글로벌 앱이 강세, 네팔·벵골권·중앙아시아에선 **현지어/오프라인 앱 + YouVersion** 구조. OD, AE, PP를 세밀하게 쪼개서 평가할 가치가 큼.|

---

### A.7.5 아프리카 (Africa)

|지역/국가|1위 앱 (기본 정보)|2위 앱 (기본 정보)|3위 앱 (기본 정보)|앱 생태계 특징·인기 요인|
|---|---|---|---|---|
|나이지리아|**YouVersion Bible** · 영어 + 요루바/이보 등 현지어 지원, 대형 교회에서도 사용|**Bible.is Africa** · 요루바/하우사 등 토착어 오디오, 오프라인 청취|**African Bible/로컬 오프라인 앱들** · NIV/KJV + 현지어, 수십만 다운로드|초대형 교회 문화, 영어·토착어 병용. 오디오·오프라인 수요가 크고, 교회 추천 앱이 순위에 크게 영향.|
|케냐|**YouVersion (영어+스와힐리)**|**Bible.is (Swahili)**|**Biblia Takatifu (Swahili Bible)**|스와힐리 권역 전체에서 오디오·오프라인 앱이 핵심. 단순 UI + 가벼운 앱 선호.|
|남아프리카공화국|**YouVersion (영어/Zulu/Afrikaans 등)**|**Bible SA (남아공 성서공회)**|**Bible.is (다언어)**|다민족·다언어 구조. 성서공회 공식 앱과 YouVersion이 양축. 사진·감성 기반 앱은 아직 공백.|
|이집트·요르단 등 아랍권|**YouVersion (Arabic)**|**Bible.is Arabic**|**انجيل المقدس 오프라인 앱**|검열·종교 긴장 속에서 오프라인 앱이 중요. Arabic UI/번역 품질 + 보안이 핵심.|
|이란|**Farsi 오프라인 Bible 앱**|**YouVersion Farsi (접속 제약)**|기타 로컬 오프라인 앱|온라인 검열 때문에 온디바이스·오프라인 앱의 가치가 극대화되는 국가. OD 점수 최상위군.|
|에티오피아|**YouVersion (Amharic)**|**Amharic Bible 3D**|**Bible.is (Amharic)**|암하라어 중심. 오디오/오프라인 기능이 중요.|
|케냐·우간다 등 영어+토착어 병용 국가|YouVersion|Bible.is|현지어 오프라인 성경 앱들|영어·토착어 병용으로 다국어 지원 앱이 유리.|
|불어권 아프리카(코트디부아르, 세네갈 등)|**Bible Louis Segond** · 불어 오프라인 성경앱|**YouVersion (불어판)**|**Bible.is (불어 오디오)**|불어권 전체에서 Louis Segond 오프라인 앱이 1위. 불어 + 토착어 성경 보급이 핵심.|

---

### A.7.6 AE/PP 점수 정의 및 산정 규칙

이 절에서는 위 A.7.1~A.7.5 표를 기반으로 산출되는 **AE(앱 생태계 기회 점수)**, **PP(파트너십 잠재력 점수)**의 정의와 산정 규칙을 정리한다. 모든 점수는 **1.0~5.0** 범위로 산정하며, 필요 시 0.5 단위까지 사용할 수 있다.

#### A.7.6.1 AE (App Ecosystem Opportunity) 정의

(이하 내용 동일)

#### A.7.6.2 PP (Partnership Potential) 정의

(이하 내용 동일)

### A.7.7 최종 우선순위 점수 공식

이 절에서는 기존 144개국 우선순위 산정에서 사용하던 **합계 점수(BaseScore)**에, 앞서 정의한 **AE·PP 점수**를 어떻게 결합해 최종 우선순위 지표를 만들지 공식을 정의한다.

#### A.7.7.1 기본 용어 정리

- **BaseScore (기존 합계 점수)**
    
    - 144개국 우선순위 산정 엑셀 시트에서 이미 계산된 **합계 점수 컬럼**을 그대로 사용한다.
        
- **AE, PP**
    
    - A.7.6에서 정의한 **AE**, **PP** 점수를 사용한다.
        

#### A.7.7.2 AE·PP 계수 정의

- AE_factor = 1 + 0.1 × (AE − 3)
    
- PP_factor = 1 + 0.1 × (PP − 3)
    

#### A.7.7.3 최종 우선순위 점수 계산식

- Priority_raw = BaseScore × AE_factor × PP_factor
    

> 위 표들은 부록 A의 기존 경쟁사 표(A.3 등)와 함께 사용하며,  
> **144개국 우선순위 산정에서 AE/PP 값을 결정하는 근거 표**로 명시적으로 참조합니다.

## A.8 전문 용어 인덱스(부록 A용)

|용어|설명|
|---|---|
|**오프라인**|인터넷 연결 없이도 성경 본문·오디오 등을 사용할 수 있는 기능|
|**Lite 버전**|저사양 기기·저속 네트워크를 위해 기능·용량을 줄이고 최적화한 **가벼운 앱 버전**|
|**디아스포라**|자국을 떠나 해외에 거주하는 **동일 민족/언어 공동체**|
|**검열 회피**|정부·플랫폼의 종교 콘텐츠 규제를 우회하기 위한 배포·운영 전략 (QR 배포, 오프라인 설치 등)|
|**병렬(병렬 성경)**|두 개 이상의 번역본을 한 화면에 나란히 보여주는 기능|
|**모국어 성경**|사용자의 1차 언어(모국어)로 번역된 성경|
|**역본**|원어 성경을 특정 언어로 번역한 **번역본(Version)**|
|**BaseScore**|144개국 우선순위 산정 엑셀에서 기존 지표들을 가중 평균해 계산한 **기본 합계 점수**|
|**AE**|**App Ecosystem Opportunity** · 사진→말씀 서비스 관점의 앱 생태계 기회 점수 (1.0~5.0)|
|**PP**|**Partnership Potential** · 성서공회·교단·미디어 등과의 파트너십 잠재력 점수 (1.0~5.0)|
|**AE_factor**|AE를 3을 기준으로 0.1 배율로 변환한 **가중 계수(1+0.1×(AE-3))**|
|**PP_factor**|PP를 3을 기준으로 0.1 배율로 변환한 **가중 계수(1+0.1×(PP-3))**|
|**Priority_raw**|BaseScore에 AE·PP 계수를 곱해 얻는 **1차 우선순위 점수**|
|**Priority_index**|Priority_raw를 0~100 범위로 다시 맞춘 **정규화 우선순위 지수(시각화용)**|

---

# 부록 B — 144개국 서비스 우선순위 산정 기준 & 엑셀 구조 (최종안)

> 이 부록은 **144개국 성경 앱·우선순위 산정 기준 최종 기획서(통합본)**을 프로젝트 문서 구조에 맞게 정리한 것입니다.  
> 여기서 정의하는 지표·공식·엑셀 구조가 곧 **글로벌 서비스 우선순위 산정의 단일 기준(최종안)**으로 동작합니다.

---

## B.1 목적 및 범위

### B.1.1 목적

- 세계 144개국을 대상으로, 다음 요소를 종합 반영하여 **서비스 우선 순위**를 산정합니다.
    
    - (1) **선교·영적 필요**
        
    - (2) **법·라이선스 환경**
        
    - (3) **접근성·인프라(모바일·네트워크)**
        
    - (4) **기존 성경 앱 생태계**
        
    - (5) **온디바이스 전략 적합성**
        
    - (6) **파트너십 기회**
        
- 이 기준은 향후 **성경 프로젝트의 론칭 파이프라인(1차·2차 론칭군)**, 현지화/마케팅, 온디바이스 인프라 투자 방향을 결정하는 기준으로 사용합니다.
    

### B.1.2 범위

- 데이터 소스
    
    - 144개국 우선순위 CSV/엑셀 (국가/대륙/선교 점수 등 정량 데이터)
        
    - 국가·지역별 성경 앱 생태계 조사(YouVersion, Bible.is, 로컬 성경앱, 오프라인/토착어 앱 등 — 부록 A 연동)
        
- 출력
    
    - 국가 단위 **최종 점수 FinalScore(0~100)**
        
    - **우선순위 티어(A/B/C/D)**
        
    - 엑셀 계산 구조 및 파라미터 시트 정의
        

> 원칙: 향후 모든 의사결정은 **‘최종_조정_점수(FinalScore)’와 ‘최종_우선순위_티어’**를 기준으로 이루어지며,  
> 기존 합계 점수/서비스 필요 순위는 레거시 참고값으로만 사용합니다.

---

## B.2 144개국 데이터 구조 정의 (CSV/엑셀 공통)

144개국 마스터 시트(예: `144개국 서비스국가 우선순위 정리.csv`)는 다음 열 구조를 기본으로 합니다.

|열 이름|타입|설명|
|---|---|---|
|국가|텍스트|국가명 (영문/국문 표기 중 프로젝트 표준 표기)|
|서비스 필요 순위|숫자|1차 분석 기준의 정렬 순서(참고용, 최종 순위는 FinalScore 기준 재산정)|
|대륙|텍스트|Asia, Europe, Africa, North America, South America, Oceania 등|
|세부 지역명|텍스트|중동, 북유럽, 동남아, 불어권 아프리카 등 세부 지역 클러스터|
|공용어|텍스트|주요 공용어(복수일 수 있음)|
|성경 번역본|텍스트|주요 사용 성경 번역(예: NIV, KJV, Reina Valera, Luther, Louis Segond 등)|
|개신교 비율|숫자|전체 인구 대비 개신교 추정 비율(%) 또는 점수화된 지표|
|선교 필요성 점수(MN)|숫자|복음 접근성, 기독교 비율, 종교 자유도 등을 반영한 선교 필요성 (0~100)|
|라이선스 현실성 점수(LF)|숫자|성경 번역 라이선스 및 종교 관련 규제의 현실적 확보 가능성 (0~100)|
|접근성 점수(AC)|숫자|인터넷/스마트폰 보급, 결제 인프라, 앱스토어 접근성 등을 반영한 점수 (0~100)|
|합계 점수(레거시)|숫자|기존 내부 산식 결과(참고용)|
|온디바이스_필요도(OD)|숫자|온디바이스 추론·오프라인 사용에 대한 필요성/효용 (0~100)|
|앱생태계_기회_점수(AE)|숫자|기존 성경앱 시장 구조를 고려한 기회도(경쟁 공백, 로컬 특화 니즈 등) (0~100)|
|파트너십_잠재력_점수(PP)|숫자|현지 성서공회/기독방송/대형교단/선교단체 등과의 협력 가능성 (0~100)|
|최종_조정_점수(FinalScore)|수식|본 문서에서 정의하는 최종 점수 계산 결과|
|최종_우선순위_티어(Tier)|수식|FinalScore를 구간으로 잘라 A/B/C/D 티어로 분류|

---

## B.3 우선순위 산정 지표 정의 (최종안)

> 이 절에서는 7개 지표(MN, LF, AC, PR, OD, AE, PP)를 **현실 데이터와 연결 가능한 형태로 정의**합니다.

### B.3.1 외부 데이터 소스 개요

사용하는 주요 외부 데이터 소스 예시는 다음과 같습니다.

|구분|데이터 소스 예시|활용 지표|
|---|---|---|
|종교 구성|국가별 종교 인구 비율(기독교/개신교 비율 등)|MN, PR|
|모바일/네트워크|모바일 회선 수(인구 100명당), 인터넷 보급률|AC|
|종교·인터넷 자유|종교 자유도, 인터넷 검열·차단 상태|LF, OD, PP|
|앱 생태계|국가별 상위 1~3개 성경앱 조사(부록 A 표)|AE|
|교단/사역 인프라|각국 성서공회, 교단, 기독 NGO, 방송국 등|PP|

---

### B.3.2 7개 지표 요약 테이블

|코드|지표 이름|의미 요약|
|---|---|---|
|MN|선교 필요성 (Mission Need)|기독교/복음 접근성이 낮을수록 높은 점수|
|LF|라이선스 현실성 (License Feasibility)|성경 번역·배포 라이선스 확보 용이성 + 종교 규제 수준|
|AC|접근성 (Access)|스마트폰·모바일/네트워크 인프라 수준|
|PR|개신교/성경 친화도 (Protestant / Bible Friendliness)|개신교 비중, 성경읽기·성경앱 수용성|
|OD|온디바이스 필요도 (On-Device Need)|검열·망 불안정 등 온디바이스/오프라인 필요성|
|AE|앱 생태계 기회 (App Ecosystem Opportunity)|사진·감성·온디바이스 틈새 크기|
|PP|파트너십 잠재력 (Partnership Potential)|성서공회·교단·기독 미디어/NGO 네트워크 잠재력|

---

### B.3.3 MN — 선교 필요성 점수 (0~100)

1. 개념
    

- 기독교/개신교 비율이 낮고 복음 접근성이 떨어질수록 **MN이 높아지는 구조**입니다.
    

2. 기본 계산 규칙 (예시)
    

- 각 국가의 "기독교 전체 비율(%)"을 Christian%라 할 때:
    

```text
MN_raw = 100 - Christian%
MN = MIN( MAX(MN_raw, 0), 100 )
```

- 기독교 60% 이상: MN ≈ 40 이하
    
- 기독교 30% 내외: MN ≈ 70 전후
    
- 기독교 5% 이하: MN ≈ 95 이상
    

---

### B.3.4 AC — 접근성 점수 (0~100)

1. 개념
    

- 모바일 회선 수(인구 100명당), 스마트폰 보급률, 기본 네트워크 품질을 **간단한 구간 점수**로 표현합니다.
    

2. 예시 룰
    

```text
M = mobile_subscriptions_per_100

if M >= 120: AC = 100
elif M >= 90: AC = 85
elif M >= 60: AC = 70
elif M >= 30: AC = 50
else: AC = 30
```

---

### B.3.5 PR — 개신교/성경 친화도 점수 (0~100)

1. 개념
    

- 단순 기독교 비율이 아니라, **개신교/복음주의 비중 + 성경읽기 문화 + 디지털 성경 사용성**을 함께 고려한 정성·정량 혼합 지표입니다.
    

2. 클러스터 기반 예시
    

- PR = 90: 개신교 강국 + 성경읽기·디지털 성경 사용 문화가 매우 강한 국가 (예: 한국, 미국 일부, 나이지리아 등)
    
- PR = 70: 기독교/개신교 비율이 높으나 전통 교단 중심 국가 (예: 독일, 영국, 브라질 등)
    
- PR = 50: 기독교 소수이지만 복음주의 공동체와 성경 사용이 꾸준한 국가 (예: 인도/일본 일부 지역 등)
    
- PR = 30 이하: 성경 사용 문화가 낮거나, 기독교 비율이 극소수인 국가
    

---

### B.3.6 LF — 라이선스 현실성 점수 (0~100)

1. 개념
    

- 성경 번역본(현지어/영어)의 **디지털 사용·배포 라이선스 확보 가능성**과 종교 관련 법·규제 환경을 반영합니다.
    

2. 클러스터 기반 예시
    

- LF = 90: 디지털 성경 라이선스 관행이 활발하고 종교 자유도가 높은 국가
    
- LF = 70: 공식 성서공회/출판사가 존재하고 협의·계약을 통해 현실적으로 라이선스 확보 가능
    
- LF = 50: 법적으로는 가능하지만 행정·정치·종교 이슈로 협상 난이도가 높은 국가
    
- LF = 30 이하: 종교·출판 규제가 강하고 성경앱 라이선스 확보가 매우 어렵거나 위험한 국가
    

---

### B.3.7 OD — 온디바이스 필요도 점수 (0~100)

1. 개념
    

- 인터넷 검열, 앱스토어 차단, 감시·프라이버시 우려, 네트워크 불안정 등으로 인해 **온디바이스 추론·오프라인 성경 서비스가 필수에 가까운 정도**를 표현합니다.
    

2. 예시 룰 (인터넷 자유도 기준)
    

```text
if status == "Not Free": OD = 100
elif status == "Partly Free": OD = 70
else: OD = 40  # Free
```

- Not Free: 중국, 이란 등 → OD = 100
    
- Partly Free: 인도, 브라질, 나이지리아 등 → OD = 70
    
- Free: 한국, 미국, 유럽 다수 → OD = 40
    

---

### B.3.8 AE — 앱 생태계 기회 점수 (0~100)

1. 개념
    

- 기존 성경앱 시장 구조(글로벌 앱 vs 로컬 강자 vs 다수 난립)를 고려해, **사진·감성·온디바이스 기반 성경 프로젝트가 진입할 수 있는 틈새 크기**를 표현합니다.
    

2. 시장 유형별 예시 룰
    

- AE = 90: 검열 환경 + 토착/우회 앱 중심이지만 사진/감성/온디바이스 UX가 거의 없는 시장
    
- AE = 80: YouVersion 등 글로벌 앱이 1위, 로컬 앱은 단순 오프라인 성경 위주인 시장
    
- AE = 60: 강력한 로컬 1위 앱 + YouVersion 2위 구조 (협업 또는 강한 차별화 필요)
    
- AE = 50 이하: 로컬 앱이 다수 난립하고 사용 행태가 특정 앱에 락인되지 않은 시장
    

> 구체 국가는 부록 A의 국가별 표를 보고 AE1~AE4 유형을 지정한 뒤, `AE_Clusters` 시트에서 점수를 참조합니다.

---

### B.3.9 PP — 파트너십 잠재력 점수 (0~100)

1. 개념
    

- 각 국가에서 성서공회, 대형 교단, 기독 방송/미디어, 선교단체, NGO 등과의 **공식·비공식 협력 네트워크**를 구축할 수 있는 가능성을 반영합니다.
    

2. 클러스터 기반 예시
    

- PP = 90: 복음주의 대형 교단·성서공회·방송·NGO가 활발하고 디지털 사역도 적극적인 국가 (예: 한국, 미국, 브라질, 나이지리아, 필리핀, 인도네시아 등)
    
- PP = 70: 전통 교단·성서공회 중심이지만 디지털 협업에 열린 국가 (예: 독일, 영국, 프랑스, 남아공 등)
    
- PP = 50: 개신교 인프라는 있으나 규모가 작거나 분산된 국가 (예: 일본, 싱가포르 등)
    
- PP = 30 이하: 강한 종교 규제 또는 개신교 네트워크가 극소수인 국가
    

---

## B.4 최종 점수 공식 및 티어 규칙

### B.4.1 최종 점수 공식 (FinalScore)

- 변수 정의
    
    - MN = 선교 필요성 점수
        
    - LF = 라이선스 현실성 점수
        
    - AC = 접근성 점수
        
    - PR = 개신교/성경 친화도 점수
        
    - OD = 온디바이스 필요도 점수
        
    - AE = 앱 생태계 기회 점수
        
    - PP = 파트너십 잠재력 점수
        
- 가중치(기본값)
    

|파라미터|의미|기본값|
|---|---|---|
|w_mission|선교 필요성 점수 가중치|0.30|
|w_license|라이선스 현실성 점수 가중치|0.20|
|w_access|접근성 점수 가중치|0.20|
|w_protestant|개신교 비율 점수 가중치|0.10|
|w_ondevice|온디바이스 필요도 점수 가중치|0.10|
|w_ecosystem|앱 생태계 기회 점수 가중치|0.05|
|w_partnership|파트너십 잠재력 점수 가중치|0.05|

- 최종 점수 공식
    

> **FinalScore = 0.30·MN + 0.20·LF + 0.20·AC + 0.10·PR + 0.10·OD + 0.05·AE + 0.05·PP**

- 엑셀 예시 수식 (국가가 2행에 있을 때)
    

```excel
=H2*Parameters!$C$2 + I2*Parameters!$C$3 + J2*Parameters!$C$4 + G2*Parameters!$C$5 + L2*Parameters!$C$6 + M2*Parameters!$C$7 + N2*Parameters!$C$8
```

(여기서 H,I,J,G,L,M,N 열이 각각 MN, LF, AC, PR, OD, AE, PP에 대응)

---

### B.4.2 우선순위 티어 규칙

FinalScore를 기준으로 국가를 4개 티어로 나눕니다.

|티어|기준 점수 범위|의미|
|---|---|---|
|A|FinalScore ≥ 90|1차 론칭 및 전략적 최중요 국가군|
|B|80 ≤ FinalScore < 90|2차 론칭 핵심 후보|
|C|70 ≤ FinalScore < 80|중기 진출 후보, 상황·리소스에 따라 진입|
|D|FinalScore < 70|장기 후보 또는 기도/관찰 대상|

- 엑셀 예시 수식
    

```excel
=IF(O2>=90,"A",IF(O2>=80,"B",IF(O2>=70,"C","D")))
```

---

## B.5 144개국 우선순위 엑셀 마스터 구조 (운영용)

### B.5.1 사용 파일 개요

- 파일명: `성경프로젝트_144개국_우선순위_vFinal.xlsx`
    
- 목적: 전 세계 144개국에 대한 서비스 우선순위를 **정량 지표 + 정성 지표** 기반으로 계산하고, A/B/C/D 티어로 관리하기 위한 마스터 파일.
    

### B.5.2 시트 구성 요약

1. `Raw_Original`
    

- PD님이 준비한 CSV 원본을 그대로 옮긴 백업/레퍼런스 시트.
    
- 주요 컬럼
    
    - 서비스 필요 순위
        
    - 국가 / 대륙 / 세부 지역명
        
    - 공용어
        
    - 성경 번역본
        
    - 개신교 비율
        
    - 선교 필요성 점수 / 라이선스 현실성 점수 / 접근성 점수
        
    - 합계 점수
        

2. `CountryScores_Final` _(메인 운용 시트)_
    

- 144개국별 최종 우선순위와 티어를 계산·관리하는 핵심 시트.
    
- 컬럼 그룹
    
    1. 기본 정보
        
        - 국가 / 대륙 / 세부 지역명 / 공용어 / 성경 번역본 / 개신교 비율
            
        - 기존_서비스_필요_순위, 기존_합계_점수 (원본 점수 보존용)
            
    2. 추가 입력용 종교 데이터
        
        - Christian_전체_비율(%)
            
            - 이후 Pew 등에서 국가별 "기독교 전체 비율" 데이터를 가져와 채움
                
            - 필요 시 MN(선교 필요성)을 재계산할 수 있도록 남겨 둔 컬럼
                
    3. 7개 지표 (본 부록 기준)
        
        - MN(선교 필요성 점수)
            
            - 초기값: 기존 "선교 필요성 점수" 복사, 이후 기독교 비율 기반 재계산 시 덮어쓰기
                
        - LF(라이선스 현실성 점수)
            
        - AC(접근성 점수)
            
        - PR(성경 친화도 점수)
            
            - 초기 공란 → **국가별 성경 친화도 클러스터**에 따라 입력
                
        - OD(온디바이스 필요도 점수)
            
            - 초기 공란 → **인터넷 자유/검열 상태**에 따라 입력
                
        - AE(앱 생태계 기회 점수)
            
            - 초기 공란 → **국가별 상위 1~3위 성경 앱 구조**를 유형화해 입력(부록 A 연동)
                
        - PP(파트너십 잠재력 점수)
            
            - 초기 공란 → **교단·성서공회·기독 미디어/NGO 인프라** 클러스터에 따라 입력
                
    4. 최종 점수 & 티어
        
        - FinalScore (수식)
            
        - Tier (수식)
            

3. `Parameters`
    

- 7개 지표와 가중치 정의 테이블.
    
- 컬럼: 지표(MN, LF, AC, PR, OD, AE, PP) / 설명 / 가중치(0.30, 0.20, 0.20, 0.10, 0.10, 0.05, 0.05)
    
- 본 부록 B.3, B.4의 내용을 엑셀 내부에서 요약·반영.
    

4. `TierRules`
    

- FinalScore에 따른 티어 구간 정의.
    
- 예시 기준 (전략에 따라 조정 가능)
    
    - A: FinalScore ≥ 80 → 최우선 론칭/집중 국가
        
    - B: 60–79 → 1차·2차 론칭 핵심 후보
        
    - C: 40–59 → 중장기 대상·실험 국가
        
    - D: 0–39 → 장기 검토/모니터링 국가
        

5. `AE_Clusters`
    

- 앱 생태계 기회 점수(AE)를 **시장 유형별 클러스터**로 관리하는 표.
    
- 예시 컬럼
    
    - AE_유형: AE1 ~ AE4
        
    - AE_점수: 90 / 80 / 60 / 50
        
    - 설명
        
        - AE1: 검열/우회 환경 + 토착/우회 앱 중심, 사진·감성·온디바이스 틈새가 큰 시장
            
        - AE2: YouVersion 절대 강자 + 로컬 앱은 단순 오프라인 위주
            
        - AE3: 강력한 로컬 1위 + YouVersion 2위 구조 (협업 또는 강한 차별화 필요)
            
        - AE4: 로컬 앱 다수 난립, 락인은 약하지만 진입·유지 난이도가 모두 높은 시장
            

6. `PP_Clusters`
    

- 파트너십 잠재력 점수(PP)를 **교단·사역 인프라의 밀도/개방성**에 따라 관리하는 표.
    
- 예시 컬럼
    
    - PP_클러스터: PP1 ~ PP4
        
    - PP_점수: 90 / 70 / 50 / 30
        
    - 설명
        
        - PP1: 복음주의 대형 교단·성서공회·방송·NGO가 활발하고 디지털 사역도 적극적인 국가
            
        - PP2: 전통 교단·성서공회 중심이지만 디지털 협업에 개방적인 국가
            
        - PP3: 개신교 인프라는 있으나 규모가 작거나 분산된 국가
            
        - PP4: 강한 종교 규제 또는 개신교 네트워크가 극소수인 국가
            

7. `README`
    

- 이 엑셀 파일의 **시트 구조, 각 컬럼 의미, 실무 플로우**를 한 번에 정리한 설명용 시트.
    
- 새 팀원이 이 파일 하나만 받아도 전체 구조를 이해할 수 있도록 작성.
    

---

## B.6 클러스터 기반 지표(PR/OD/AE/PP) 운용 원칙

### B.6.1 개념 정리

- 7개 지표 중 **MN/LF/AC**는 정량 데이터(종교 비율, 법·규제, 모바일 인프라)에 직접 링크됩니다.
    
- **PR/OD/AE/PP**는 국가별 상황을 종합 판단해 **유형(클러스터)**로 먼저 분류한 뒤, 그 유형에 대응하는 점수를 사용하는 구조입니다.
    

### B.6.2 클러스터 기반 운용 원칙

1. PR(성경 친화도 점수)
    

- 국가를 "개신교 강국 / 전통 교단 중심 / 복음주의 소수 / 거의 미전도" 등 몇 개 군으로 나누고,
    
- 각 군에 90 / 70 / 50 / 30 등 대표 점수를 부여합니다.
    

2. OD(온디바이스 필요도 점수)
    

- 인터넷 자유도(Free / Partly Free / Not Free)를 3단계로 보고,
    
- 각 단계에 40 / 70 / 100 등 대표 점수를 매핑합니다.
    

3. AE(앱 생태계 기회 점수)
    

- 부록 A의 "국가별 상위 1~3위 성경 앱 구조"를 바탕으로 AE1~AE4 유형을 먼저 지정하고,
    
- `AE_Clusters` 시트의 점수를 참조해 AE를 결정합니다.
    

4. PP(파트너십 잠재력 점수)
    

- 교단·성서공회·기독 방송·NGO 네트워크의 규모와 개방성을 기준으로 PP1~PP4 클러스터를 부여하고,
    
- `PP_Clusters` 시트의 점수를 참조해 PP를 입력합니다.
    

### B.6.3 실무 적용 플로우 요약

1. MN/LF/AC를 최신 외부 데이터 기준으로 검증·보정.
    
2. 국가별 리서치를 바탕으로 PR/OD/AE/PP의 **클러스터 코드**를 먼저 결정.
    
3. 클러스터 코드에 따라 AE_Clusters / PP_Clusters (및 PR/OD 룰표)에서 점수를 가져와 입력.
    
4. `CountryScores_Final` 시트에서 FinalScore와 Tier가 자동 계산.
    
5. Tier = "A" 국가들이 1차 론칭 최우선 후보군이 되며, B/C/D는 2차/중장기 진입·모니터링 대상으로 운영.
    

> 이 부록 B는 "원래 안 vs 변경안" 구분 없이, **현재 시점에서 유효한 단일 기준(최종안)**으로 사용합니다.  
> 앞으로 국가별 점수 조정이나 가중치 변경이 필요할 경우, 이 구조를 유지한 채 숫자와 코멘트만 업데이트하는 것을 원칙으로 합니다.

## B.7 마스터 엑셀 정본 데이터 스냅샷 (vFinal)

### B.7.1 Parameters (가중치)

|지표|설명|가중치|
|---|---|---:|
|MN|선교 필요성 (기독교/복음 접근성 낮을수록↑)|0.30|
|LF|라이선스·법적 현실성|0.20|
|AC|모바일·네트워크 접근성|0.20|
|PR|개신교/성경 친화도|0.10|
|OD|온디바이스 필요도 (검열·오프라인 필요성)|0.10|
|AE|앱 생태계 기회 (시장 틈새/경쟁구도)|0.05|
|PP|파트너십 잠재력 (교단·성서공회·사역 네트워크)|0.05|

### B.7.2 TierRules (티어 규칙)

|Tier|FinalScore_하한|설명|
|---|---:|---|
|A|80|최우선 론칭/집중 국가|
|B|60|1차·2차 론칭 핵심 후보|
|C|40|중장기 대상·실험 국가|
|D|0|장기 검토/모니터링 국가|

### B.7.3 AE_Clusters (앱 생태계 기회 점수 클러스터)

|AE_유형|AE_점수|설명|
|---|---:|---|
|AE1|90|검열/우회 환경 + 토착/우회 앱 중심, 사진/감성/온디바이스 틈새 큼|
|AE2|80|YouVersion 절대강자 + 로컬은 단순 오프라인 위주|
|AE3|60|강력한 로컬 1위 + YouVersion 2위 구조 (협업/차별화 필요)|
|AE4|50|로컬 앱 다수 난립, 락인 약함(진입·유지 난이도 모두 높음)|

### B.7.4 PP_Clusters (파트너십 잠재력 점수 클러스터)

|PP_클러스터|PP_점수|설명|
|---|---:|---|
|PP1|90|복음주의 대형 교단·성서공회·방송·NGO 활발, 디지털 사역 적극|
|PP2|70|전통 교단·성서공회 중심이지만 디지털 협업에 개방적|
|PP3|50|개신교 인프라는 있으나 규모가 작거나 분산|
|PP4|30|강한 종교 규제 또는 개신교 네트워크 극소수|

### B.7.5 Raw_Original (MN/LF/AC/합계 점수) — 원본 데이터(탭 구분)
| 서비스 필요 순위 | 국가 | 대륙 | 세부 지역명 | 공용어 | 성경 번역본 | 개신교 비율 | 선교 필요성 점수 | 라이선스 현실성 점수 | 접근성 점수 | 합계 점수 |
|---:|---|---|---|---|---|---:|---:|---:|---:|---:|
| 1 | 일본 | 아시아 | 동아시아 | 일본어 | 新共同訳, 新改訳 | 0.45 | 46.0 | 28 | 18 | 92.0 |
| 1 | 크로아티아 | 유럽 | 동유럽 | 크로아티아어 | Croatian Bible | 0.5 | 46.0 | 28 | 18 | 92.0 |
| 3 | 그리스 | 유럽 | 남유럽 | 그리스어 | Greek Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 4 | 루마니아 | 유럽 | 동유럽 | 루마니아어 | Romanian Bible | 6.0 | 44.0 | 28 | 18 | 90.0 |
| 5 | 몰타 | 유럽 | 남유럽 | 몰타어, 영어 | Maltese Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 6 | 체코 | 유럽 | 동유럽 | 체코어 | Czech Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 7 | 슬로바키아 | 유럽 | 동유럽 | 슬로바키아어 | Slovak Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 8 | 헝가리 | 유럽 | 동유럽 | 헝가리어 | Hungarian Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 9 | 폴란드 | 유럽 | 동유럽 | 폴란드어 | Polish Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 10 | 불가리아 | 유럽 | 동유럽 | 불가리아어 | Bulgarian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 11 | 세르비아 | 유럽 | 동유럽 | 세르비아어 | Serbian Bible | 0.7 | 44.0 | 28 | 18 | 90.0 |
| 12 | 슬로베니아 | 유럽 | 동유럽 | 슬로베니아어 | Slovenian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 13 | 리투아니아 | 유럽 | 북유럽 | 리투아니아어 | Lithuanian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 14 | 라트비아 | 유럽 | 북유럽 | 라트비아어 | Latvian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 15 | 에스토니아 | 유럽 | 북유럽 | 에스토니아어 | Estonian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 16 | 아일랜드 | 유럽 | 서유럽 | 영어, 아일랜드어 | English/Irish Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 17 | 뉴질랜드 | 오세아니아 | 오스트랄라시아 | 영어 | English Bible | 12.0 | 44.0 | 28 | 18 | 90.0 |
| 18 | 호주 | 오세아니아 | 오스트랄라시아 | 영어 | English Bible | 15.0 | 44.0 | 28 | 18 | 90.0 |
| 19 | 캐나다 | 아메리카 | 북아메리카 | 영어, 프랑스어 | English/French Bible | 23.0 | 44.0 | 28 | 18 | 90.0 |
| 20 | 미국 | 아메리카 | 북아메리카 | 영어 | English Bible | 25.0 | 44.0 | 28 | 18 | 90.0 |
| 21 | 영국 | 유럽 | 서유럽 | 영어 | English Bible | 5.0 | 44.0 | 28 | 18 | 90.0 |
| 22 | 독일 | 유럽 | 서유럽 | 독일어 | German Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 23 | 프랑스 | 유럽 | 서유럽 | 프랑스어 | French Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 24 | 스페인 | 유럽 | 남유럽 | 스페인어 | Spanish Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 25 | 포르투갈 | 유럽 | 남유럽 | 포르투갈어 | Portuguese Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 26 | 이탈리아 | 유럽 | 남유럽 | 이탈리아어 | Italian Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 27 | 네덜란드 | 유럽 | 서유럽 | 네덜란드어 | Dutch Bible | 8.0 | 44.0 | 28 | 18 | 90.0 |
| 28 | 벨기에 | 유럽 | 서유럽 | 네덜란드어, 프랑스어 | Dutch/French Bible | 3.0 | 44.0 | 28 | 18 | 90.0 |
| 29 | 스위스 | 유럽 | 서유럽 | 독일어, 프랑스어, 이탈리아어 | Multi-language Bible | 10.0 | 44.0 | 28 | 18 | 90.0 |
| 30 | 오스트리아 | 유럽 | 서유럽 | 독일어 | German Bible | 3.0 | 44.0 | 28 | 18 | 90.0 |
| 31 | 덴마크 | 유럽 | 북유럽 | 덴마크어 | Danish Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 32 | 노르웨이 | 유럽 | 북유럽 | 노르웨이어 | Norwegian Bible | 4.0 | 44.0 | 28 | 18 | 90.0 |
| 33 | 스웨덴 | 유럽 | 북유럽 | 스웨덴어 | Swedish Bible | 4.0 | 44.0 | 28 | 18 | 90.0 |
| 34 | 핀란드 | 유럽 | 북유럽 | 핀란드어 | Finnish Bible | 2.0 | 44.0 | 28 | 18 | 90.0 |
| 35 | 아이슬란드 | 유럽 | 북유럽 | 아이슬란드어 | Icelandic Bible | 1.0 | 44.0 | 28 | 18 | 90.0 |
| 36 | 러시아 | 유럽 | 동유럽 | 러시아어 | Russian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 37 | 우크라이나 | 유럽 | 동유럽 | 우크라이나어 | Ukrainian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 38 | 벨라루스 | 유럽 | 동유럽 | 벨라루스어 | Belarusian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 39 | 터키 | 유럽/아시아 | 서아시아 | 터키어 | Turkish Bible | 0.2 | 40.0 | 24 | 14 | 78.0 |
| 40 | 이란 | 아시아 | 서아시아 | 페르시아어 | Persian Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 41 | 사우디아라비아 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 42 | 아랍에미리트 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 43 | 카타르 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 44 | 쿠웨이트 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 45 | 오만 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 46 | 바레인 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 47 | 요르단 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 48 | 이라크 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 49 | 시리아 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 50 | 레바논 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 3.0 | 40.0 | 24 | 14 | 78.0 |
| 51 | 이스라엘 | 아시아 | 서아시아 | 히브리어 | Hebrew Bible | 2.0 | 40.0 | 24 | 14 | 78.0 |
| 52 | 이집트 | 아프리카 | 북아프리카 | 아랍어 | Arabic Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 53 | 리비아 | 아프리카 | 북아프리카 | 아랍어 | Arabic Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 54 | 알제리 | 아프리카 | 북아프리카 | 아랍어, 프랑스어 | Arabic/French Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 55 | 모로코 | 아프리카 | 북아프리카 | 아랍어, 프랑스어 | Arabic/French Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 56 | 튀니지 | 아프리카 | 북아프리카 | 아랍어, 프랑스어 | Arabic/French Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 57 | 파키스탄 | 아시아 | 남아시아 | 우르두어 | Urdu Bible | 0.6 | 40.0 | 24 | 14 | 78.0 |
| 58 | 아프가니스탄 | 아시아 | 남아시아 | 다리어/파슈토어 | Dari/Pashto Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 59 | 인도 | 아시아 | 남아시아 | 힌디어, 영어 | Hindi/English Bible | 2.0 | 40.0 | 24 | 14 | 78.0 |
| 60 | 방글라데시 | 아시아 | 남아시아 | 벵골어 | Bengali Bible | 0.5 | 40.0 | 24 | 14 | 78.0 |
| 61 | 스리랑카 | 아시아 | 남아시아 | 싱할라어, 타밀어 | Sinhala/Tamil Bible | 2.0 | 40.0 | 24 | 14 | 78.0 |
| 62 | 네팔 | 아시아 | 남아시아 | 네팔어 | Nepali Bible | 1.5 | 40.0 | 24 | 14 | 78.0 |
| 63 | 부탄 | 아시아 | 남아시아 | 종카어 | Dzongkha Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 64 | 몰디브 | 아시아 | 남아시아 | 디베히어 | Dhivehi Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 65 | 인도네시아 | 아시아 | 동남아시아 | 인도네시아어 | Indonesian Bible | 6.0 | 40.0 | 24 | 14 | 78.0 |
| 66 | 말레이시아 | 아시아 | 동남아시아 | 말레이어 | Malay Bible | 6.0 | 40.0 | 24 | 14 | 78.0 |
| 67 | 싱가포르 | 아시아 | 동남아시아 | 영어, 중국어, 말레이어, 타밀어 | Multi-language Bible | 10.0 | 40.0 | 24 | 14 | 78.0 |
| 68 | 태국 | 아시아 | 동남아시아 | 태국어 | Thai Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 69 | 베트남 | 아시아 | 동남아시아 | 베트남어 | Vietnamese Bible | 8.0 | 40.0 | 24 | 14 | 78.0 |
| 70 | 캄보디아 | 아시아 | 동남아시아 | 크메르어 | Khmer Bible | 2.0 | 40.0 | 24 | 14 | 78.0 |
| 71 | 라오스 | 아시아 | 동남아시아 | 라오어 | Lao Bible | 1.5 | 40.0 | 24 | 14 | 78.0 |
| 72 | 필리핀 | 아시아 | 동남아시아 | 타갈로그어, 영어 | Tagalog/English Bible | 10.0 | 40.0 | 24 | 14 | 78.0 |
| 73 | 중국 | 아시아 | 동아시아 | 중국어 | Chinese Bible | 2.0 | 40.0 | 24 | 14 | 78.0 |
| 74 | 몽골 | 아시아 | 동아시아 | 몽골어 | Mongolian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 75 | 북한 | 아시아 | 동아시아 | 한국어 | Korean Bible | 0.1 | 40.0 | 24 | 14 | 78.0 |
| 76 | 카자흐스탄 | 아시아 | 중앙아시아 | 카자흐어, 러시아어 | Kazakh/Russian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 77 | 우즈베키스탄 | 아시아 | 중앙아시아 | 우즈벡어, 러시아어 | Uzbek/Russian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 78 | 투르크메니스탄 | 아시아 | 중앙아시아 | 투르크멘어, 러시아어 | Turkmen/Russian Bible | 1.0 | 40.0 | 24 | 14 | 78.0 |
| 79 | 미얀마 | 아시아 | 동남아시아 | 버마어 | Judson Bible | 6.2 | 34.0 | 24 | 8 | 66.0 |
| 80 | 키르기스스탄 | 아시아 | 중앙아시아 | 키르기스어, 러시아어 | Kyrgyz/Russian Bible | 1.0 | 34.0 | 24 | 8 | 66.0 |
| 81 | 타지키스탄 | 아시아 | 중앙아시아 | 타지크어, 러시아어 | Tajik/Russian Bible | 1.0 | 34.0 | 24 | 8 | 66.0 |
| 82 | 조지아 | 유럽/아시아 | 캅카스 | 조지아어 | Georgian Bible | 1.0 | 34.0 | 24 | 8 | 66.0 |
| 83 | 아르메니아 | 유럽/아시아 | 캅카스 | 아르메니아어 | Armenian Bible | 4.0 | 34.0 | 24 | 8 | 66.0 |
| 84 | 아제르바이잔 | 유럽/아시아 | 캅카스 | 아제르바이잔어 | Azerbaijani Bible | 0.1 | 34.0 | 24 | 8 | 66.0 |
| 85 | 케냐 | 아프리카 | 동아프리카 | 영어, 스와힐리어 | English/Swahili Bible | 25.0 | 34.0 | 24 | 8 | 66.0 |
| 86 | 탄자니아 | 아프리카 | 동아프리카 | 스와힐리어 | Swahili Bible | 20.0 | 34.0 | 24 | 8 | 66.0 |
| 87 | 우간다 | 아프리카 | 동아프리카 | 영어 | English Bible | 30.0 | 34.0 | 24 | 8 | 66.0 |
| 88 | 르완다 | 아프리카 | 동아프리카 | 키냐르완다어 | Kinyarwanda Bible | 35.0 | 34.0 | 24 | 8 | 66.0 |
| 89 | 부룬디 | 아프리카 | 동아프리카 | 키룬디어 | Kirundi Bible | 40.0 | 34.0 | 24 | 8 | 66.0 |
| 90 | 에티오피아 | 아프리카 | 동아프리카 | 암하라어 | Amharic Bible | 20.0 | 34.0 | 24 | 8 | 66.0 |
| 91 | 나이지리아 | 아프리카 | 서아프리카 | 영어 | English Bible | 40.0 | 34.0 | 24 | 8 | 66.0 |
| 92 | 가나 | 아프리카 | 서아프리카 | 영어 | English Bible | 35.0 | 34.0 | 24 | 8 | 66.0 |
| 93 | 코트디부아르 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 25.0 | 34.0 | 24 | 8 | 66.0 |
| 94 | 세네갈 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 4.0 | 34.0 | 24 | 8 | 66.0 |
| 95 | 카메룬 | 아프리카 | 중앙아프리카 | 프랑스어, 영어 | French/English Bible | 25.0 | 34.0 | 24 | 8 | 66.0 |
| 96 | 남아프리카공화국 | 아프리카 | 남부아프리카 | 영어 | English Bible | 20.0 | 34.0 | 24 | 8 | 66.0 |
| 97 | 미얀마 | 아시아 | 동남아시아 | 버마어 | Judson Bible | 6.2 | 34.0 | 15 | 8 | 57.0 |
| 98 | 이라크(변형) | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 0.1 | 34.0 | 15 | 8 | 57.0 |
| 99 | 수단 | 아프리카 | 북아프리카 | 아랍어 | Arabic Bible | 0.1 | 34.0 | 15 | 8 | 57.0 |
| 100 | 예멘 | 아시아 | 서아시아 | 아랍어 | Arabic Bible | 0.1 | 34.0 | 15 | 8 | 57.0 |
| 101 | 소말리아 | 아프리카 | 동아프리카 | 소말리어 | Somali Bible | 0.1 | 34.0 | 15 | 8 | 57.0 |
| 102 | 에리트레아 | 아프리카 | 동아프리카 | 티그리냐어 | Tigrinya Bible | 1.0 | 34.0 | 15 | 8 | 57.0 |
| 103 | 차드 | 아프리카 | 중앙아프리카 | 프랑스어, 아랍어 | French/Arabic Bible | 5.0 | 34.0 | 15 | 8 | 57.0 |
| 104 | 니제르 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 1.0 | 34.0 | 15 | 8 | 57.0 |
| 105 | 말리 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 3.0 | 34.0 | 15 | 8 | 57.0 |
| 106 | 부르키나파소 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 10.0 | 34.0 | 15 | 8 | 57.0 |
| 107 | 기니 | 아프리카 | 서아프리카 | 프랑스어 | French Bible | 3.0 | 34.0 | 15 | 8 | 57.0 |
| 108 | 시에라리온 | 아프리카 | 서아프리카 | 영어 | English Bible | 10.0 | 34.0 | 15 | 8 | 57.0 |
| 109 | 라이베리아 | 아프리카 | 서아프리카 | 영어 | English Bible | 20.0 | 34.0 | 15 | 8 | 57.0 |
| 110 | 콩고공화국 | 아프리카 | 중앙아프리카 | 프랑스어 | French Bible | 20.0 | 34.0 | 15 | 8 | 57.0 |
| 111 | 중앙아프리카공화국 | 아프리카 | 중앙아프리카 | 프랑스어 | French Bible | 15.0 | 34.0 | 15 | 8 | 57.0 |
| 112 | 앙골라 | 아프리카 | 남부아프리카 | 포르투갈어 | Portuguese Bible | 30.0 | 34.0 | 15 | 8 | 57.0 |
| 113 | 모잠비크 | 아프리카 | 남부아프리카 | 포르투갈어 | Portuguese Bible | 35.0 | 34.0 | 15 | 8 | 57.0 |
| 114 | 짐바브웨 | 아프리카 | 남부아프리카 | 영어 | English Bible | 40.0 | 34.0 | 15 | 8 | 57.0 |
| 115 | 잠비아 | 아프리카 | 남부아프리카 | 영어 | English Bible | 45.0 | 34.0 | 15 | 8 | 57.0 |
| 116 | 말라위 | 아프리카 | 남부아프리카 | 영어 | English Bible | 50.0 | 34.0 | 15 | 8 | 57.0 |
| 117 | 마다가스카르 | 아프리카 | 동아프리카 | 프랑스어 |  French Bible | 25.0 | 34.0 | 15 | 8 | 57.0 |
| 118 | 아이티 | 아메리카 | 카리브 | 프랑스어, 크리올어 | French/Creole Bible | 20.0 | 34.0 | 15 | 8 | 57.0 |
| 119 | 온두라스 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 30.0 | 34.0 | 15 | 8 | 57.0 |
| 120 | 과테말라 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 35.0 | 34.0 | 15 | 8 | 57.0 |
| 121 | 니카라과 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 30.0 | 34.0 | 15 | 8 | 57.0 |
| 122 | 엘살바도르 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 25.0 | 34.0 | 15 | 8 | 57.0 |
| 123 | 볼리비아 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 20.0 | 34.0 | 15 | 8 | 57.0 |
| 124 | 파라과이 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 18.0 | 34.0 | 15 | 8 | 57.0 |
| 125 | 에콰도르 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 15.0 | 34.0 | 15 | 8 | 57.0 |
| 126 | 페루 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 12.0 | 34.0 | 15 | 8 | 57.0 |
| 127 | 콜롬비아 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 10.0 | 34.0 | 15 | 8 | 57.0 |
| 128 | 베네수엘라 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 8.0 | 34.0 | 15 | 8 | 57.0 |
| 129 | 브라질 | 아메리카 | 남아메리카 | 포르투갈어 | Portuguese Bible | 15.0 | 34.0 | 15 | 8 | 57.0 |
| 130 | 아르헨티나 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 8.0 | 34.0 | 15 | 8 | 57.0 |
| 131 | 칠레 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 7.0 | 34.0 | 15 | 8 | 57.0 |
| 132 | 우루과이 | 아메리카 | 남아메리카 | 스페인어 | Spanish Bible | 4.0 | 34.0 | 15 | 8 | 57.0 |
| 133 | 파나마 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 10.0 | 34.0 | 15 | 8 | 57.0 |
| 134 | 코스타리카 | 아메리카 | 중앙아메리카 | 스페인어 | Spanish Bible | 12.0 | 34.0 | 15 | 8 | 57.0 |
| 135 | 레소토 | 아프리카 | 남부아프리카 | 영어, 소토어 | Sotho/English Bible | 90.0 | 0.0 | 28 | 18 | 46.0 |
| 136 | 나미비아 | 아프리카 | 남부아프리카 | 영어 | English Bible | 90.0 | 0.0 | 28 | 18 | 46.0 |
| 137 | 페로 제도 | 유럽 | 북유럽 | 페로어, 덴마크어 | Faroese Bible | 85.0 | 0.0 | 28 | 18 | 46.0 |
| 138 | 솔로몬제도 | 오세아니아 | 멜라네시아 | 영어 | Solomon Islands Pijin Bible | 73.0 | 0.0 | 28 | 18 | 46.0 |
| 139 | 콩고민주공화국 | 아프리카 | 중앙아프리카 | 프랑스어 | French Bible | 48.0 | 10.0 | 20 | 12 | 42.0 |

::contentReference[oaicite:0]{index=0}




⏰ 현재 시각: 12시 00분 (KST)

# 부록 C — 추천 API I/O 계약(요약)

> ※ 본 절은 구현 상세(스키마/엔드포인트)의 축약본이며, 최종 단일 기준은 **13장(데이터 스키마 & API 명세)**의 `C.Y`를 따릅니다.

**입력 (클라이언트 → 추천 API)**

|No.|필드|형식/설명|
|--:|---|---|
|1|image|긴 변 2048px, **sRGB**, ≤5MB (옵션: 썸네일/라이트 모드)|
|2|exif_time|**ISO-8601**, 서버에서 UTC 정규화|
|3|exif_location|(옵션) 단말 `lat,lon` → 서버에서 `country_code/region_bucket`만 산출 후 즉시 폐기(**정밀 좌표 저장 금지**). 운영/디버그 필요 시에도 영구 저장 대신 **지오해시(6–7자) 일시 처리**만 허용|
|4|device_lang|예: `ko-KR` 기본, `en-US` 선택|
|5|network_state|`online` / `offline`|
|6|ocr_text|(옵션) 전처리·정규화 적용(공백/특수문자/언어 감지 등)|
|7|user_flags|JSON(아동/민감 힌트, 비공개 선호 등)|

**출력 (표준 JSON)**

|No.|필드|형식/설명|
|--:|---|---|
|1|verses[≤2]|`{book,chapter,v_from,v_to,text_ko,text_en?}` (첫 요소가 최종)|
|2|reasons|2–3문장: **상징→주제→근거** 인과|
|3|themes|최종 주제 태그(코드 ID) 2–4개|
|4|scores|`ImgRel/ContextFit/ThemeOrthodoxy/Penalty` 0.0–1.0|
|5|safety_flags|민감/완화/배제 코드 배열|

# 부록 D — 브랜드 아이콘·스토어 패키지 요약 (v1.0)
어디나(ODINA) — 네이밍·아이콘·스토어 패키지 요약 (v1.0)

---

## 1) 요약

- **결정:** 메인 브랜드명은 **어디나(ODINA)** 확정.
    
- **브랜드 핵심 메시지:** _하나님은 어디에나 계신다 — 사진 한 컷에서 임재를 느끼고 한 절로 나눈다._
    
- **실행 산출물:** 아이콘(빛줄기×렌즈 & 직관형 3종), 스토어 스크린샷 문구 6장 세트(KR/EN), 해시태그 세트, 1페이지 브랜드 가이드, PPT 템플릿.
    
- **운용 원칙:** 브랜드(임재·서정)와 기능(사진→한 절→공유)을 **락업(보강제목)과 아이콘**으로 함께 전달.
    

---

## 2) 핵심 정리 (비교·결정)

### 2.1 네이밍 비교 테이블

|항목|**어디나**|**한장한절**|
|---|---|---|
|메시지 초점|임재/동행(시적·서정)|기능/루프(사진→한 절→공유)|
|즉시성|부제로 사진성 보강 필요|이름만으로도 어느 정도 기능 전달|
|오해 가능성|의미 넓음 → 설명 필요|‘한장’이 성경 _장_으로 혼동 가능|
|브랜드 고유성/확장|높음, 세계관 확장 용이|해시태그·캠페인에 강함|
|권장 포지션|**메인 브랜드**|**캠페인/배지 카피**|

**결론:** 메인 네이밍은 **어디나**, 기능·행동 촉발 카피는 **한장한절**로 듀얼 운용.

### 2.2 보강제목(서브타이틀) 권장

- **KR:** _한 컷의 빛, 한 절의 힘_ / _사진 한 컷으로 느끼는 하나님의 임재_
    
- **EN:** _One Snap of Presence_ / _One Snap, One Verse_
    

---

## 3) 솔루션 (브랜드 자산 사양)

### 3.1 앱 아이콘 가이드 — 빛줄기×렌즈(컨셉형)

- **형태:** 원형 렌즈 링 + 수직 **한 줄의 빛** + 하단 소프트 글로우.
    
- **팔레트(HEX):** `#0D1B2A`(딥블루), `#1B6CA8`(브랜드블루), `#F2C14E`(골드), `#FAF8F3`(크림), `#2F5D50`(그린)
    
- **두께:** 링/빔 ≈ 캔버스 2% (1024px 기준 20px)
    
- **세이프 에어리어:** 아이콘 바운딩 대비 ≥ 12%
    
- **산출:** iOS 1024 master / Android Adaptive 432 / Legacy 512
    
- **주의:** 과도한 종교 심벌(대형 십자가/책) 삽입 지양 → 보편적 상징 유지.
    

### 3.2 앱 아이콘 — **직관형 대안 3종**(소형 사이즈 가독 강화)

- **A. 카메라 + 북마크 리본:** “사진으로 담고, 구절을 북마크.”
    
- **B. 포토카드(산·해) + 구절 리본:** “사진 카드에 꽂힌 말씀.”
    
- **C. 말풍선 + 포토썸네일 + 구절 빔:** “구절 카드를 **공유**.”
    
- **튜닝 가이드:**
    
    - A: 렌즈 중심 골드 원 반경 +2px, 리본 V컷 깊이 +10%
        
    - B: 산 윤곽선 1.5px, 리본 폭 -8%
        
    - C: 말풍선 꼬리 각도 -5°, 골드 빔 +1px(48px 기준)
        

### 3.3 스토어 스크린샷 레이아웃(6장)

- **규격:** iOS 1242×2688 / Google Play 1242×2208 (세로)
    
- **여백:** 상·하·좌·우 ≥ 6% (1242px 기준 74~96px)
    
- **그리드:** 3×5 보조선(시선 유도 및 안전영역 관리)
    
- **타이포:** 타이틀 42–56pt, 서브 28–34pt, 행간 1.2–1.35, 대비 ≥ 12:1
    
- **폰트:** KR=Noto Sans KR/프리텐다드, EN=SF Pro/Roboto
    

**카피 세트(KR):**

1. **어디나 — 한 컷의 빛, 한 절의 힘**
    
2. **사진 한 컷에서 임재를 느껴요** · 자연·일상 어디서든 그분의 흔적을
    
3. **순간에 맞는 말씀, 바로 보여줘요** · 과하지 않게 1–2절 추천
    
4. **왜 이 말씀이 맞는지, 쉽게 이해해요** · 배경·맥락을 짧고 명확하게
    
5. **한 절의 위로를 친구와 나눠요** · 링크·이미지 카드로 간단 공유
    
6. **하루 한 컷, 하루 한 절** · 작은 루틴이 큰 힘이 됩니다
    

**Copy Set (EN):**

1. **ODINA — One Snap of Presence**
    
2. **Feel His Presence in a Snap** — Nature or daily life, anywhere
    
3. **Today’s Verse, Right Away** — Just 1–2 lines you need
    
4. **Understand with a Simple Card** — Context made clear
    
5. **Share the Comfort** — Send as a verse card
    
6. **Make It a Gentle Habit** — One snap, one verse a day
    

### 3.4 해시태그 세트

- **코어:** #어디나 #ODINA #한컷의빛 #한절의힘 #SnapVerseShare #오늘의한절 #사진묵상 #임재앱 #말씀카드 #사진한절
    
- **캠페인/행동:** #어디나챌린지 #한장루틴 #매일한절 #한컷한절 #오늘임재 #SnapToVerse #VerseInOneTap #함께나눔
    
- **감성/세계관:** #임재 #동행 #피조물 #빛과길 #숨결 #평안 #위로 #은혜 #셀라 #샬롬
    
- **시즌:** #어디나주일 #어디나큐티위크 #소그룹임재기록 #감사절말씀 #성탄말씀카드 #사순절묵상 #부활의빛
    

---

## 4) 예시 (적용 시나리오)

- **브랜딩/교회 파트너십:** 표시명 **어디나**, 부제 _한 컷의 빛, 한 절의 힘_, 배너 카피 “주님은 **어디나** 계십니다.”
    
- **퍼포먼스 UA:** 키비주얼 “**한장한절** — 사진 한 장이면 한 절이 뜹니다.” + 서브로고 “by 어디나”.
    
- **소그룹 챌린지:** _어디나 7일_ — 매일 자연/일상 사진 1장 + 오늘의 한 절 카드 공유(배지: 렌즈+빛줄기).
    

---

## 5) 고급 팁 (운용 체크리스트)

-  아이콘 소형(48~96px)에서 선 굵기/여백 재점검, 대비 12:1 확보
    
-  스크린샷 6장: KR/EN 동시 제공, 헤드/서브 2줄 구조 유지
    
-  온보딩 3장: (1) 임재 체험 (2) 한 절 추천 (3) 함께 나눔
    
-  듀얼 운영: **어디나(브랜드)** × **한장한절(캠페인)** 일관 락업
    
-  시즌 캠페인: 어디나 WEEK(숲·바다·도시·가정 테마)
    

---

### 부록 A — 산출물 목록(현재 버전)

- **SVG 아이콘(컨셉형):** 빛줄기×렌즈
    
- **SVG 아이콘(직관형 3종):** 카메라/포토카드/말풍선
    
- **PPT 6장 템플릿:** iOS/GP 스크린샷 레이아웃(여백/그리드 포함)
    
- **DOCX 1페이지 가이드:** 아이콘 사양 + 스크린샷 규격 + 해시태그
    

> 필요 시 PDF 합본, Figma 템플릿, iOS/Android 전 사이즈 PNG 패키지까지 확장 제작 가능합니다.

# 부록 E — 용어 인덱스 (전문 용어 정리)

성경 프로젝트 전체 문서에서 반복적으로 등장하는 **온디바이스·AI·인프라·AWS·데이터 구조 관련 전문 용어**를 한 곳에 정리한 인덱스입니다.

---

## E.1 용어 표

|용어|설명|
|---|---|
|온디바이스(On-device)|서버가 아니라 스마트폰·태블릿 등 사용자 기기 내부에서 AI 추론·데이터 처리를 수행하는 방식|
|온디바이스 AI|서버가 아니라 사용자의 스마트폰·태블릿 내부에서 직접 AI 모델을 실행하는 방식. 프라이버시와 비용 측면에서 유리하다.|
|머신 비전(Machine Vision)|이미지·영상 속 객체와 장면을 인식하고 분석하는 컴퓨터 비전 계열 AI 기술 전체를 지칭|
|객체 탐지(Object Detection)|이미지 안에서 물체의 위치와 종류를 동시에 찾아내는 AI 기술|
|OCR|Optical Character Recognition. 이미지 안의 글자를 인식해 텍스트로 변환하는 기술|
|**CLIP**|Contrastive Language–Image Pre-training 계열. 이미지와 텍스트를 같은 벡터 공간으로 매핑해 유사도를 계산하는 임베딩 모델. 장면/상징/주제 힌트(유사 키워드) 추출에 활용|
|**cosine 유사도**|두 벡터의 방향 유사도를 측정하는 지표. CLIP/랜드마크 후보 점수 산정에 사용|
|**Top-K**|후보를 점수 순으로 정렬한 뒤 상위 K개만 유지하는 제한 규칙(폭주 방지)|
|**임계값(Threshold)**|점수가 특정 값 미만인 후보를 버리는 기준(conf/prob/sim 등)|
|**NMS**|Non-Maximum Suppression. 겹치는 탐지 박스를 제거해 객체 후보를 정리하는 후처리|
|**slug**|토큰 표준화를 위한 문자열 규칙(소문자화, 공백→`_`, 특수문자 제거)|
|**Noisy-OR**|여러 소스 점수를 0~1 범위에서 안정적으로 합성하는 결합 함수(1-∏(1-p))|
|**PII 마스킹**|전화번호/이메일 등 개인정보(PII)로 추정되는 문자열을 저장·노출 전에 마스킹/제거하는 처리|
|**Q8 양자화**|임베딩/모델 값을 8비트 정수로 압축해 메모리·전송량을 줄이는 방식(정확도와 트레이드오프)|
|엔티티(Entity)|데이터베이스에서 관리하는 하나의 개체 단위 (예: 사진 1장, 사용자 1명, 기록 1건 등)|
|스키마(Schema)|데이터 구조 설계 도면. 어떤 필드를 어떤 타입으로 저장할지 정의한 것|
|태그(Tagging)|데이터에 ‘가족, 자연, 감사’와 같은 꼬리표를 붙여 분류·검색을 쉽게 만드는 작업|
|그래프 구조(Graph)|노드(점)와 엣지(선)로 관계를 표현하는 데이터 구조. 주제 간 연관성을 표현할 때 유용|
|벡터 검색|문장·이미지를 벡터(숫자 배열)로 표현한 뒤, 의미적으로 비슷한 벡터를 빠르게 찾는 검색 기법. 주제·의미 기반 추천에 활용된다.|
|임베딩(Embedding)|구절·이미지·키워드를 고정 길이 벡터로 표현해, 유사도 계산·검색·클러스터링 등에 사용하는 표현 기법|
|임베딩 인덱스|절·문장·이미지 등의 임베딩(벡터)을 저장해, 유사도 기반으로 빠르게 검색하는 벡터 검색용 인덱스 구조|
|pHash/SSIM|이미지의 구조·모양을 기반으로 유사도를 측정해, 중복·변형 이미지를 탐지하는 알고리즘 (퍼셉추얼 해시, 구조적 유사도 지수)|
|재랭킹|1차로 선정된 후보 구절들을 추가 규칙·모델로 다시 평가해, 최종 노출 순서를 재조정하는 단계|
|**weight ratio**|S1~S4처럼 가중치를 ‘비율’로 관리하는 방식(총합=1.0). 밸런스 유지와 리포팅에 유리|
|**bonus_gospel**|복음서 보너스 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미적용**)|
|**secondary_ratio**|보조 후보 제어 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미사용**)|
|**primary_margin**|Top1 확정 마진 파라미터(현 버전 v9.1 v1.1에서는 **선언만 존재**, 코드 **미사용**)|
|RAG|Retrieval-Augmented Generation. 지식베이스에서 관련 정보를 검색한 뒤, 그 결과를 기반으로 생성하는 AI 패턴.|
|Perception/지각 레이어|사진·음성·텍스트 같은 원시 입력을 받아 태그·특징·벡터 등 구조화된 데이터로 변환하는 첫 단계의 AI/알고리즘 계층 (Perception 단계)|
|상징(P1)|산·바다·등대 등 시각 요소를 ‘주제의 단서’로 사용하는 1차 상징 레이어|
|신학 주제(P2)|‘창조, 사랑, 공의, 소망’처럼 신학적 의미를 기준으로 묶은 주제 레이어|
|컨텍스트 보정(P3)|시간·장소·절기·날씨 등 맥락 정보를 이용해 추천 점수를 가감하는 보정 단계|
|TheoGraph|상징(P1)→신학 주제(P2)→구절을 그래프 구조로 연결해, 의미·연결 관계를 탐색·추천에 활용하는 그래프 모델|
|모델 양자화|32비트 부동소수점 기반 모델을 8비트 정수(INT8) 등으로 변환하여 용량을 줄이고 속도를 높이는 기법. 저사양 단말에서 유용하다.|
|교리 필터|특정 교단·신학 기준에 맞지 않는 구절·해석을 걸러내는 규칙 모음|
|가이드라인|교리·윤리·운영·프라이버시 등에서 반드시 지켜야 할 기준을 문서화한 규칙 집합|
|Orthodoxy/Clarity|교리적 정통성(Orthodoxy)과 표현의 명료성(Clarity)을 함께 평가하는 내부 품질 축|
|PastoralFit|위로·권면·도전 등 목회적 톤이 상황에 적절한지를 수치화한 ‘목회적 적합성’ 지표|
|스페이스드 리피티션|일정 간격을 두고 반복 복습해 기억과 내면화를 돕는 학습/훈련 방식|
|퍼징(Perturbation)|실제 위치 정보를 약간 흐트러뜨려 저장하는 등 프라이버시 보호를 위한 데이터 변형 기법|
|지오해시(Geohash)|지리 좌표를 문자열로 변환해, 자리 수에 따라 정밀도를 조절하는 위치 표현 방식|
|k-익명성|항상 최소 k명 이상이 같은 그룹에 섞이도록 설계해, 개별 사용자를 특정하기 어렵게 만드는 프라이버시 보호 기법|
|쿼드키(Quadkey)|지구를 4분할 격자로 나눈 지도 타일을 문자열로 인코딩하는 방식. 줌 레벨에 따라 타일(영역) 크기가 달라진다|
|ETag|웹/API 응답 내용의 버전을 식별하는 토큰. 캐싱과 동시 수정 충돌 방지 등에 사용되는 콘텐츠 해시|
|지터(Jitter)|네트워크 지연 시간이 시간에 따라 얼마나 들쭉날쭉한지 나타내는 품질 지표|
|캐싱|한 번 계산한 결과를 저장해 두었다가, 동일/유사 요청이 들어오면 다시 계산하지 않고 저장된 값을 재사용하는 최적화 기법|
|Rekognition|AWS의 관리형 이미지·영상 인식 서비스. 라벨링, 얼굴 인식 등을 제공하며 API 호출당 과금|
|API Gateway|클라이언트의 HTTP/웹소켓 요청을 받아 내부 Lambda/서비스로 전달하는 관리형 API 게이트웨이|
|Lambda|서버를 직접 관리하지 않고 함수 단위로 코드를 실행하는 서버리스 컴퓨팅 서비스|
|서버리스|항상 켜 두는 서버 대신, 요청이 올 때만 짧은 함수를 실행하고 그 실행 시간만 비용을 내는 클라우드 방식. 소규모·변동 트래픽 서비스에 적합하다.|
|엣지 함수|Cloudflare Workers 등과 같이, 사용자와 가까운 지역(엣지)에 분산된 서버에서 코드가 실행되는 구조. 지연 시간이 짧고 비용이 저렴하다.|
|DynamoDB|AWS의 완전관리형 NoSQL 키-값/문서 데이터베이스. 온디맨드 모드에서 요청 수 기준 과금|
|S3|AWS의 객체 스토리지 서비스. 파일·로그를 GB/월 단위로 저렴하게 저장할 수 있음|
|CloudFront|AWS의 글로벌 CDN(콘텐츠 전송 네트워크) 서비스. 전 세계 엣지 서버에서 캐싱하여 빠른 응답 제공|
|데이터 전송 아웃|클라우드에서 인터넷(사용자 기기)으로 나가는 네트워크 트래픽. GB 단위로 과금|
|텔레메트리(Telemetry)|앱 사용 현황·이벤트·에러 등을 자동으로 수집·전송하는 데이터 흐름|
|DAU|Daily Active Users. 하루 동안 한 번 이상 접속한 순수 사용자 수|
|MAU|Monthly Active Users. 한 달 동안 한 번 이상 서비스에 접속한 고유 사용자 수. 규모·비용을 추정하는 기본 지표.|
|DST|Devotional Sessions per Week. 1주일 동안 사용자가 진행한 묵상 세션(큐티·말씀 묵상) 횟수 지표|
|CDN|Content Delivery Network. 전 세계에 분산된 서버를 통해 정적 콘텐츠(이미지, JS, CSS 등)를 빠르고 안정적으로 전달하는 네트워크|
|PWA|설치형 앱처럼 동작하는 웹앱. 아이콘 추가, 오프라인 캐시, 푸시 등의 기능을 제공할 수 있는 프로그레시브 웹 앱|
|Service Worker|PWA에서 오프라인 캐시, 백그라운드 동기화, 푸시 알림 등을 담당하는 백그라운드 스크립트|
|WebSocket|서버와 클라이언트 간에 항상 열린 양방향 연결을 유지해 실시간으로 데이터를 주고받는 통신 방식|
|썸네일(Thumbnail)|원본보다 해상도와 용량을 줄인 작은 미리보기 이미지|
|라이트 사진 모드|224px 수준의 작은 썸네일만 업로드해, 서버/엣지에서 최소한의 인식·추천만 수행하는 경량 사진 업로드 모드|
|폴백(fallback)|어떤 방식이 실패하거나 느릴 때, 대체 경로로 자동 전환하는 전략. 예: 온디바이스 모델이 너무 느리면 서버 호출로 전환.|
|MMR|Maximal Marginal Relevance. 비슷한 후보를 줄이고 다양성을 높이기 위해 재선정할 때 사용하는 랭킹/샘플링 알고리즘|
|주제 회전|동일·유사 입력이 반복될 때, 인접한 다른 신학 주제·관점으로 추천을 돌려 신선도를 유지하는 규칙|
|Why-score|추천 구절과 사진·문맥 간의 근거 정합성을 수치화한 신뢰 점수|
|설명 카드|추천 이유를 2–3문장으로 정리해 보여주는 ‘Why’ 설명용 카드형 UI 블록|
|오프라인 코어팩|네트워크가 없어도 추천이 동작하도록, 앱 안에 포함해 두는 대표 절·주제·설명 및 상징 묶음 데이터 패키지|
|A/B 테스트|두 가지 이상의 버전을 나눠 적용해 어떤 버전이 더 좋은 결과를 내는지 비교하는 실험 방법|
|롤아웃(Roll-out)|새로운 버전을 실제 사용자에게 순차적으로 배포하는 과정|
|롤백(Roll-back)|문제 발생 시 이전 버전으로 되돌리는 작업|
|Visibility|SNS/월드맵 게시물의 공개 범위를 정의하는 정책 레벨(예: V1 나만·V2 친구·V3 공동체·V4 전 세계(익명))|
|RiskRegion|비전도·민감 지역 보호를 위해 위치·지도·외부 공유·공개 가시성을 자동으로 제한/완화하는 지역 위험 등급(또는 플래그)|
|위장 모드(Decoy Mode)|앱을 일반 사진/메모 앱처럼 보이게 해 사용자를 보호하는 UI 모드(민감 지역/상황에서 권장)|
|패닉 버튼(Panic Button)|위급 상황에서 앱 화면·기록·공유 UI를 즉시 숨기거나 안전 화면으로 전환하는 긴급 UI|
|익명 집계(Anonymous Aggregation)|개인 식별 가능한 게시물을 노출하지 않고 이벤트(아멘/저장 등)만 합산해 통계/히트맵으로 공개하는 방식|
|ObjectTag|사진에서 인식한 **객체(Object)** 기반 자동 해시태그(탐색·분류·필터에 활용)|
|SceneTag|사진의 **장면(Scene)** 기반 자동 해시태그(풍경/상황 탐색·분류·필터에 활용)|
|**Doctrinal Fit Rater(DFR)**|교리 적합성/오해 방지를 위해, 추천 결과(구절·설명·공유)를 **가이드라인** 규칙셋으로 평가·차단·완화하는 평가/필터 레이어(규칙 기반→향후 모델 기반 확장)|
|**Off-policy 템플릿**|민감·논쟁 구절이 노출될 때, 설명/톤을 ‘소망/복음 병기, 문맥 안내’ 등으로 안전하게 보정하는 대체 설명 템플릿(정책 위반 완화)|
|**카피 템플릿(Copy Template)**|`topic_id` 등 메타데이터를 바탕으로 `{{피사체}}/{{구절}}/{{번역}}` 슬롯을 채워 **설명 카드 문구**를 일관되게 생성하는 템플릿| 
|**씬 레이아웃 규칙(Scene Layout Rules)**|갤러리/카드/월드맵에서 사진·구절·설명·태그 배치를 일관되게 유지하는 화면 레이아웃 규칙(디자인·UX 가이드라인)|
|**Explain 카드(Why/Explain Card)**|추천 결과에 “왜 이 말씀이 나왔는지”를 **상징·주제·근거** 슬롯으로 고정 표기하는 설명 카드(학습곡선/신뢰도 개선)|
|**순유입액(Net Inflow)**|총 결제액에서 결제/플랫폼 **수수료(Fees)**, **환불/차지백(Refunds)** 등 차감 후 실제 유입 금액(기부율 산정의 기준).|
|**기부 집행액(Program Grants)**|순유입액 기준 목적사업(선교/구호 등)으로 실제 지급되는 금액(본 정책: **80% 최소/고정**).|
|**운영비 상한(Opex Cap)**|운영비가 순유입액의 **최대 15%**를 넘지 않도록 제한하는 상한(상한 미만 잔액은 기부 집행액으로 이월).|
|**준비금(Reserve)**|환불 급증/지급 지연 등 변동성을 흡수하기 위한 버퍼(본 정책: 순유입액의 **5% 고정**).|
|**지정 기부(Restricted)**|사용자가 국가(또는 목적)를 지정한 기부. 지정 목적 외 전용 금지(송금 불가 등 예외 시 **보류/대체 규칙** 적용).|
|**일반 기부(Unrestricted)**|운영 ‘재량’이 아닌 **공개된 규칙(우선순위 점수 기반)**으로 여러 국가에 자동 배분되는 기부.|
|**기부금품 모집**|불특정 다수에게 금품 출연을 권유·요구하는 행위(온라인 포함). 특정 조건(예: 1천만원 이상 등)에서 등록/표시 의무 트리거가 될 수 있음.|
|**기부금 영수증**|기부 사실을 증명하는 영수증. 세액공제/증빙과 연결되며 발급 요건·절차·보관이 엄격함(v1.0: 미제공, v1.1: 선택 확장).|
|**전자기부금영수증**|홈택스 등 전자 시스템 기반 영수증 발급·관리 체계(확장 버전에서 ‘옵트인 수집’과 함께 도입).|
|**공익법인**|공익 목적 수행 전제로 세법상 공시/의무이행 보고 등 추가 의무가 부과될 수 있는 법인 범주(영수증 제공 확장 시 고려).|
|**지정기부금단체**|기부금 영수증 발급 및 세액공제와 직접 연계되는 지정 요건을 갖춘 단체 범주(v1.1 확장 시 고려).|

|**인출 연습(Retrieval Practice)**|단순히 다시 읽는 것이 아니라 ‘회상/입력(예: 빈칸 채우기·타이핑)’을 통해 기억을 강화하는 학습 메커니즘(Testing Effect로도 알려짐).|
|**분산 연습(Spaced Practice)**|학습/복습을 한 번에 몰아서 하지 않고 시간 간격을 두고 반복하는 방식. 장기 기억에 유리하다는 메타분석 근거가 있음.|
|**저마찰(Low Friction)**|사용자가 행동(열람/복습)을 수행하는 데 드는 번거로움/단계를 최소화한 UX 원칙. 습관 루프 유지에 핵심.|
|**66권 커버리지(Coverage)**|최근 N일 동안 실제로 열람된 성경 ‘서로 다른 책’의 범위/다양성을 의미. 특정 책 쏠림을 줄이기 위한 운영 지표.|
|**리딩 큐(Reading Queue)**|오늘/이번 주에 읽을 본문 목록을 자동 생성해 주는 기능(저장/관심 태그/커버리지 부족 영역을 입력으로 사용).|
|**스트릭(Streak)**|연속으로 특정 행동(예: 매일 본문 열람)을 수행한 일수. 동기 부여 요소로 쓰되, 강박 유발을 방지해야 함.|

---

## E.2 활용 가이드

- **개발 문서/아키텍처 장(9장·10장·11장)**에서 모르는 용어가 나올 때, 본 부록을 용어 사전처럼 참조.
    
- 외부 개발자·디자이너·목회자와 공유할 때, 이 부록을 함께 전달하면 기술 대화를 정렬하는 데 도움이 됨.
|**Cover Fees(수수료 함께 내기)**|기부자가 결제 수수료를 추가로 부담해 ‘기부 원금’의 실질 유입을 유지하는 옵션(토글).|
|**임팩트 단위(Impact Unit)**|금액을 ‘1끼/1권/1일 지원’ 같은 이해하기 쉬운 단위로 표시하는 UX 표현. 실제 집행 형태는 현지 상황에 따라 달라질 수 있어 고지 문구가 필요.|
|**정기 기부(Recurring Donation)**|매월/매주 등 주기적으로 자동 결제·기부가 반복되는 형태. 해지·실패 결제·환불 처리 규칙이 필요.|
|**라운드업(Round-up) 기부**|결제 금액을 반올림해 생기는 ‘자투리 금액’을 자동 기부하는 방식.|
|**Donation Intent**|결제 전 사용자의 기부 의도(유형/국가/캠페인/금액/정기 여부 등)를 기록하는 엔티티.|
|**Donation Allocation**|정산된 기부금이 국가/파트너로 배정되는 레코드(보류/대체 포함).|
|**Payout Proof**|지급 ID 기준으로 영수증/전표/파트너 보고서 등 증빙을 연결·검증하는 데이터/문서 묶음.|

- 추후 새로운 기술·서비스 용어가 추가되면, 동일 포맷으로 행을 추가하여 확장 가능.

---

# 부록 F — 프로젝트 폴더 ‘참조 문서’ 대비 반영/미반영 체크리스트 (v1.0)

⏰ 기준 시각: 2026-01-09(금) 13:20 (KST)

> 목적: 프로젝트 폴더에 이미 존재하는 **참조 문서(Word/PDF/MD/XLSX)**를, 현재 **MD 정본(0108_바이블GPT통합본_v1.4_2)**과 대조해  
> (1) **이미 반영된 것**, (2) **부분 반영된 것**, (3) **아직 미반영이지만 “추가하면 가치가 큰 블록”**을 한 번에 식별한다.

---

## F.1 파일별 반영 현황 요약

| No. | 파일 | 성격 | MD 반영 상태 | 추가 반영 ‘우선순위’ | 권장 배치(장/절) |
|---:|---|---|---|---|---|
|1|Bible_AI_GeoContext_WorldMap_Integrated_Design_v1.docx|월드맵·지역 맥락·리스크 지역 보호|부분 반영(개념/정책 중심)|중|5장(SNS/월드맵), 10장(프라이버시), 부록E(용어)|
|2|Bible_AI_OnDevice_Architecture_Cost_Rationale_v1.md|온디바이스·비용 근거|부분 반영(요약 위주)|중|10~11장(인프라/비용), 6장(팀별 스펙)|
|3|Bible_AI_PhototoVerse_Logic_Integrated_Spec_v1.pdf|사진→말씀 로직 통합 스펙(템플릿/운영)|부분 반영(핵심 흐름 중심)|상|5장(Explain 카드), 9장(로직), 7장(QA)|
|4|Bible_Topic24_Operation_Playbook_v2_3.docx|24주제 운영·카피·디자인 규칙|미반영(또는 산발 반영)|상|5장(탐색/갤러리), 6장(UX), 7장(QA), 13장(스키마/필드)|
|5|Bible_AI_FullSpec_v1.docx|MVP~v1.2 상세 기획(가이드라인/선출 규칙)|미반영(문서에 “미반영 유지”로 명시됨)|중|9장(미적용 확장안), 10장(가이드라인), 부록(정책 템플릿)|

---

## F.2 “추가 반영하면 가치가 큰 블록” (추천)

> 아래는 **MD 정본에 ‘없거나(용어/절 없음)’, 있더라도 ‘표준 템플릿으로 고정되어 있지 않은’** 항목을 우선으로 정리했다.

### F.2.1 Explain 카드(Why) 템플릿을 ‘고정 슬롯’으로 명문화
- 참조 문서(PDF)에는 Explain 카드가 “**상징(2)·주제(2)·근거(1)** 고정 슬롯” 구조로 제안되어 있음  
- MD에는 Explain 카드라는 개념은 있으나, **슬롯 개수/고정 포맷**이 명시되어 있지 않음
- **권장 반영 위치:** 5장(설명 카드 UI 템플릿) + 9장(추천 결과 출력 필드)

### F.2.2 24 주제별 ‘설명카드 카피 템플릿’과 `topic_id` 바인딩 규칙
- Playbook에는 `topic_id`별 **카피 템플릿**과 `{피사체}/{구절}/{번역}` 바인딩 규칙이 포함되어 있음  
- MD에는 `topic_id`는 언급되지만, **“topic→카피 템플릿” 표준 규칙**이 본문으로 고정되어 있지 않음
- **권장 반영 위치:** 5장(24주제 갤러리/해시태그 탐색) + 13장(데이터 필드/템플릿 계약)

### F.2.3 씬(장면) 레이아웃 규칙(디자인 별첨)을 ‘UX 팀 스펙’으로 고정
- Playbook은 카드/갤러리/월드맵에서의 **레이아웃 규칙(씬 규칙)**을 별첨으로 제안
- MD에는 디자인 원칙은 있으나, **“어떤 씬에서 어떤 배치가 강제되는지”**가 절 단위로 정리되어 있지 않음
- **권장 반영 위치:** 6장(UX/디자인 팀 스펙) + 5장(화면 구성)

### F.2.4 Top-1 선출 ‘동률 처리(tie-break)’ 규칙(참조 스펙)을 “미적용 확장안”으로 봉인 기록
- FullSpec에는 **Top-1 선출 규칙(동률/문맥/교리 안정)**이 더 촘촘히 정의되어 있음
- 반면, MD의 9장에는 “현재 코드 기준”으로 **secondary_ratio/primary_margin 등 미적용**을 명시해두었음(정합)
- 따라서 **지금 당장 구현했다고 쓰지 말고**, 9장 “미적용 목록/향후 확장”에 **참조 규칙을 봉인 기록**하는 형태가 안전함  
- **권장 반영 위치:** 9.7(한계/확장) 또는 “부록A(미적용 정책 파라미터)” 확장

---

## F.3 다음 액션(가장 빠른 순서)

| Step | 무엇을 할지 | 결과 |
|---:|---|---|
|1|5장에 “Explain 카드 고정 슬롯 템플릿”을 1페이지로 추가|UI/출력 일관성 확보|
|2|13장에 `topic_id → copy_template_id → slot_binding` 최소 계약을 추가|데이터-UI 연결 고정|
|3|6장에 씬 레이아웃 규칙을 ‘디자인 체크리스트’로 추가|디자인 리뷰/QA 용이|
|4|9장에는 FullSpec tie-break 규칙을 “미적용 확장안”으로만 기록|정본(현재 코드) 일관성 유지|

---

# CHANGELOG (v1.4_6 · 2026-01-09)

- v1.4_5 → v1.4_6 (0109)
  - 문서 구조를 **1~14장 + 부록 A~F**로 재정렬하고, 장/부록의 헤딩 레벨을 통일했습니다.
  - 문서 맨 앞에 **목차(장/부록 제목 + 제작 일자)**를 추가했습니다.
  - **9장**: 점수 파이프라인(**S1~S4**, **weights/priority_rules**, **priority_score**) 정본 내용을 반영하고, 기존 9장 섹션을 **9.8~** 이후로 재배치했습니다.
  - **7장**: “부작용·필터링·QA·CS 관리” 블록을 **7.8**로 통합하고, 기존 7.8 용어 인덱스는 **7.9**로 이동했습니다.
  - **부록 C** 신설: “추천 API I/O 계약(요약)”을 8.7.5에서 이동했습니다.
  - **부록 F**를 복원하여 다시 수록했습니다.
- (이전 변경 내역은 아래 ‘변동 내역 이력’ 참조)

# 변동 내역 이력

| 일자(KST) | 버전 | 적용 범위 | 변경 내용 |
|---|---|---|---|
| 2026-01-09 | 0109_바이블GPT통합본_v1.4_6 | 문서 구조 정렬 + 목차 + 9장 점수 정본 반영 + 부록 C/F + 7장 리스크 통합 | 최종본 생성 |
| 2026-01-09 14:49 | v1.4_5 | 문서 구조 | 14장(0109_donation) 위치를 13장 이후(5장 이전)로 이동 배치하여 목차 흐름 정리 |
| 2026-01-09 14:39 | v1.4_4 | 14장·부록 E | ‘14장. 기부·재분배·투명성·준법 정책(한국 법인용)’ 통합 반영 + 용어 인덱스(부록 E) 기부/정산 용어 추가 |
| 2026-01-09 13:20 | v1.4_3 | 부록/정책 정리 | 프로젝트 폴더 참조 문서 대비 ‘반영/미반영 체크리스트(부록 F)’ 추가 + 용어 인덱스(부록 E) 용어 5개 추가 |
| 2026-01-08 | v1.4_2 | 9장·13장 | 점수 산정 파트를 ‘현재 코드 동작’ 기준으로 정정(secondary_ratio/primary_margin, bonus_gospel/bonus_wcf 미적용 명시), 13.3.9 스키마 서술 정리 |
| 2026-01-08 | v1.4_1 | 9장·13장 | bonus_gospel + S1~S4 비율형 점수식 정본화, ScoringPolicy/Verse.is_gospel 추가 |
| 2026-01-08 | v1.4 | 4장·5장·10장 | SNS 활성화 기능 블록 및 비전도/민감지역 안전장치 규정 추가 |
| 2026-01-06 | v1.3 | 전체 | 문서 맨 끝에 ‘변동 내역 이력’ 섹션을 추가 |
| 2026-01-06 | v1.2 | 5장 | ‘5장. 부작용·필터링·QA·CS 관리 — 정책 구현 기술 궤적 (v1.0)’ 본문을 통합 문서에 추가 |
| 2026-01-02 | v1.1 | 전체 | 통합본(v1.1) 기준 (세부 변경은 문서 내 ‘CHANGELOG (v1.1 · 2026-01-02)’ 섹션 참조) |
